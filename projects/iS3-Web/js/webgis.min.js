function get_bit(e,t){return e/Math.pow(2,t)&1}function iS3(e){}!function(){function e(e){var t=e.__resizeTriggers__,n=t.firstElementChild,o=t.lastElementChild,i=n.firstElementChild;o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight}function t(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height}function n(n){var o=this;e(this),this.__resizeRAF__&&a(this.__resizeRAF__),this.__resizeRAF__=s(function(){t(o)&&(o.__resizeLast__.width=o.offsetWidth,o.__resizeLast__.height=o.offsetHeight,o.__resizeListeners__.forEach(function(e){e.call(o,n)}))})}function o(){if(!r){var e=(v?v:"")+".resize-triggers { "+(b?b:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n),r=!0}}var i=document.attachEvent,r=!1;if(!i){var s=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(t){return e(t)}}(),a=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return e(t)}}(),l=!1,c="animation",u="",d="animationstart",p="Webkit Moz O ms".split(" "),g="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),h="",m=document.createElement("fakeelement");if(void 0!==m.style.animationName&&(l=!0),l===!1)for(var f=0;f<p.length;f++)if(void 0!==m.style[p[f]+"AnimationName"]){h=p[f],c=h+"Animation",u="-"+h.toLowerCase()+"-",d=g[f],l=!0;break}var y="resizeanim",v="@"+u+"keyframes "+y+" { from { opacity: 0; } to { opacity: 0; } } ",b=u+"animation: 1ms "+y+"; "}window.addResizeListener=function(t,r){i?t.attachEvent("onresize",r):(t.__resizeTriggers__||("static"==getComputedStyle(t).position&&(t.style.position="relative"),o(),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=document.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),e(t),t.addEventListener("scroll",n,!0),d&&t.__resizeTriggers__.addEventListener(d,function(n){n.animationName==y&&e(t)})),t.__resizeListeners__.push(r))},window.removeResizeListener=function(e,t){i?e.detachEvent("onresize",t):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",n),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))}}(),iS3.saveAs=iS3.saveAs||function(e){"use strict";if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in o,r=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},s=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c="application/octet-stream",u=4e4,d=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,u)},p=function(e,t,n){t=[].concat(t);for(var o=t.length;o--;){var i=e["on"+t[o]];if("function"==typeof i)try{i.call(e,n||e)}catch(e){l(e)}}},g=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},h=function(t,l,u){u||(t=g(t));var h,m=this,f=t.type,y=f===c,v=function(){p(m,"writestart progress write writeend".split(" "))},b=function(){if((a||y&&s)&&e.FileReader){var o=new FileReader;return o.onloadend=function(){var t=a?o.result:o.result.replace(/^data:[^;]*;/,"data:attachment/file;"),n=e.open(t,"_blank");n||(e.location.href=t),t=void 0,m.readyState=m.DONE,v()},o.readAsDataURL(t),void(m.readyState=m.INIT)}if(h||(h=n().createObjectURL(t)),y)e.location.href=h;else{var i=e.open(h,"_blank");i||(e.location.href=h)}m.readyState=m.DONE,v(),d(h)};return m.readyState=m.INIT,console.log(t.type),i?(h=n().createObjectURL(t),void setTimeout(function(){o.href=h,o.download=l,r(o),v(),d(h),m.readyState=m.DONE})):void b()},m=h.prototype,f=function(e,t,n){return new h(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=g(e)),navigator.msSaveOrOpenBlob(e,t)}:(m.abort=function(){},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,f)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content),"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs}),iS3.geohash=function(){};for(var BASE32_CODES="0123456789bcdefghjkmnpqrstuvwxyz",BASE32_CODES_DICT={},i=0;i<BASE32_CODES.length;i++)BASE32_CODES_DICT[BASE32_CODES.charAt(i)]=i;var ENCODE_AUTO="auto",SIGFIG_HASH_LENGTH=[0,5,7,8,11,12,13,15,16,17,18];iS3.geohash.encode=function(e,t,n){if(n===ENCODE_AUTO){if("number"==typeof e||"number"==typeof t)throw new Error("string notation required for auto precision.");var o=e.split(".")[1].length,i=t.split(".")[1].length,r=Math.max(o,i);n=SIGFIG_HASH_LENGTH[r]}else void 0===n&&(n=9);for(var s,a=[],l=0,c=0,u=0,d=90,p=-90,g=180,h=-180;a.length<n;)if(c%2===0?(s=(g+h)/2,t>s?(u=(u<<1)+1,h=s):(u=(u<<1)+0,g=s)):(s=(d+p)/2,e>s?(u=(u<<1)+1,p=s):(u=(u<<1)+0,d=s)),l++,c++,5===l){var m=BASE32_CODES[u];a.push(m),l=0,u=0}return a.join("")},iS3.geohash.encode_int=function(e,t,n){n=n||52;for(var o,i=0,r=90,s=-90,a=180,l=-180,c=0;i<n;)c*=2,i%2===0?(o=(a+l)/2,t>o?(c+=1,l=o):a=o):(o=(r+s)/2,e>o?(c+=1,s=o):r=o),i++;return c},iS3.geohash.decode_bbox=function(e){for(var t,n=!0,o=90,i=-90,r=180,s=-180,a=0,l=0,c=e.length;l<c;l++){var u=e[l].toLowerCase();a=BASE32_CODES_DICT[u];for(var d=4;d>=0;d--){var p=a>>d&1;n?(t=(r+s)/2,1===p?s=t:r=t):(t=(o+i)/2,1===p?i=t:o=t),n=!n}}return[i,s,o,r]},iS3.geohash.decode_bbox_int=function(e,t){t=t||52;for(var n=90,o=-90,i=180,r=-180,s=0,a=0,l=t/2,c=0;c<l;c++)a=get_bit(e,2*(l-c)-1),s=get_bit(e,2*(l-c)-2),0===s?n=(n+o)/2:o=(n+o)/2,0===a?i=(i+r)/2:r=(i+r)/2;return[o,r,n,i]},iS3.geohash.decode=function(e){var t=iS3.geohash.decode_bbox(e),n=(t[0]+t[2])/2,o=(t[1]+t[3])/2,i=t[2]-n,r=t[3]-o;return{latitude:n,longitude:o,error:{latitude:i,longitude:r}}},iS3.geohash.decode_int=function(e,t){var n=iS3.geohash.decode_bbox_int(e,t),o=(n[0]+n[2])/2,i=(n[1]+n[3])/2,r=n[2]-o,s=n[3]-i;return{latitude:o,longitude:i,error:{latitude:r,longitude:s}}},iS3.geohash.neighbor=function(e,t){var n=iS3.geohash.decode(e),o=n.latitude+t[0]*n.error.latitude*2,i=n.longitude+t[1]*n.error.longitude*2;return iS3.geohash.encode(o,i,e.length)},iS3.geohash.neighbor_int=function(e,t,n){n=n||52;var o=iS3.geohash.decode_int(e,n),i=o.latitude+t[0]*o.error.latitude*2,r=o.longitude+t[1]*o.error.longitude*2;return iS3.geohash.encode_int(i,r,n)},iS3.geohash.neighbors=function(e){function t(e,t){return n=s+e*l,o=a+t*c,iS3.geohash.encode(n,o,i)}var n,o,i=e.length,r=iS3.geohash.decode(e),s=r.latitude,a=r.longitude,l=2*r.error.latitude,c=2*r.error.longitude,u=[t(1,0),t(1,1),t(0,1),t(-1,1),t(-1,0),t(-1,-1),t(0,-1),t(1,-1)];return u},iS3.geohash.neighbors_int=function(e,t){function n(e,n){return o=s+e*l,i=a+n*c,iS3.geohash.encode_int(o,i,t)}t=t||52;var o,i,r=iS3.geohash.decode_int(e,t),s=r.latitude,a=r.longitude,l=2*r.error.latitude,c=2*r.error.longitude,u=[n(1,0),n(1,1),n(0,1),n(-1,1),n(-1,0),n(-1,-1),n(0,-1),n(1,-1)];return u},iS3.geohash.bboxes=function(e,t,n,o,i){i=i||9;for(var r=iS3.geohash.encode(e,t,i),s=iS3.geohash.encode(n,o,i),a=iS3.geohash.decode(r),l=2*a.error.latitude,c=2*a.error.longitude,u=iS3.geohash.decode_bbox(r),d=iS3.geohash.decode_bbox(s),p=Math.round((d[0]-u[0])/l),g=Math.round((d[1]-u[1])/c),h=[],m=0;m<=p;m++)for(var f=0;f<=g;f++)h.push(iS3.geohash.neighbor(r,[m,f]));return h},iS3.geohash.bboxes_int=function(e,t,n,o,i){i=i||52;for(var r=iS3.geohash.encode_int(e,t,i),s=iS3.geohash.encode_int(n,o,i),a=iS3.geohash.decode_int(r,i),l=2*a.error.latitude,c=2*a.error.longitude,u=iS3.geohash.decode_bbox_int(r,i),d=iS3.geohash.decode_bbox_int(s,i),p=Math.round((d[0]-u[0])/l),g=Math.round((d[1]-u[1])/c),h=[],m=0;m<=p;m++)for(var f=0;f<=g;f++)h.push(iS3.geohash.neighbor_int(r,[m,f],i));return h},!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.hull=e()}}(function(){return function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n?n:e)},u,u.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){function o(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function i(e){for(var t=[],n=0;n<e.length;n++){for(;t.length>=2&&o(t[t.length-2],t[t.length-1],e[n])<=0;)t.pop();t.push(e[n])}return t.pop(),t}function r(e){for(var t=e.reverse(),n=[],i=0;i<t.length;i++){for(;n.length>=2&&o(n[n.length-2],n[n.length-1],t[i])<=0;)n.pop();n.push(t[i])}return n.pop(),n}function s(e){var t,n=i(e),o=r(e);return t=o.concat(n),t.push(e[0]),t}t.exports=s},{}],2:[function(e,t,n){t.exports={toXy:function(e,t){return void 0===t?e.slice():e.map(function(e){var n=new Function("pt","return [pt"+t[0]+",pt"+t[1]+"];");return n(e)})},fromXy:function(e,t){return void 0===t?e.slice():e.map(function(e){var n=new Function("pt","var o = {}; o"+t[0]+"= pt[0]; o"+t[1]+"= pt[1]; return o;");return n(e)})}}},{}],3:[function(e,t,n){function o(e,t){this._cells=[],this._cellSize=t,e.forEach(function(e){var t=this.point2CellXY(e),n=t[0],o=t[1];void 0===this._cells[n]&&(this._cells[n]=[]),void 0===this._cells[n][o]&&(this._cells[n][o]=[]),this._cells[n][o].push(e)},this)}function i(e,t){return new o(e,t)}o.prototype={cellPoints:function(e,t){return void 0!==this._cells[e]&&void 0!==this._cells[e][t]?this._cells[e][t]:[]},rangePoints:function(e){for(var t=this.point2CellXY([e[0],e[1]]),n=this.point2CellXY([e[2],e[3]]),o=[],i=t[0];i<=n[0];i++)for(var r=t[1];r<=n[1];r++)o=o.concat(this.cellPoints(i,r));return o},removePoint:function(e){for(var t,n=this.point2CellXY(e),o=this._cells[n[0]][n[1]],i=0;i<o.length;i++)if(o[i][0]===e[0]&&o[i][1]===e[1]){t=i;break}return o.splice(t,1),o},point2CellXY:function(e){var t=parseInt(e[0]/this._cellSize),n=parseInt(e[1]/this._cellSize);return[t,n]},extendBbox:function(e,t){return[e[0]-t*this._cellSize,e[1]-t*this._cellSize,e[2]+t*this._cellSize,e[3]+t*this._cellSize]}},t.exports=i},{}],4:[function(e,t,n){"use strict";function o(e){return e.filter(function(e,t,n){var o=n[t-1];return 0===t||!(o[0]===e[0]&&o[1]===e[1])})}function i(e){return e.sort(function(e,t){return e[0]==t[0]?e[1]-t[1]:e[0]-t[0]})}function r(e,t){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function s(e,t,n){var o=[t[0]-e[0],t[1]-e[1]],i=[n[0]-e[0],n[1]-e[1]],s=r(e,t),a=r(e,n),l=o[0]*i[0]+o[1]*i[1];return l/Math.sqrt(s*a)}function a(e,t){for(var n=0;n<t.length-1;n++){var o=[t[n],t[n+1]];if(!(e[0][0]===o[0][0]&&e[0][1]===o[0][1]||e[0][0]===o[1][0]&&e[0][1]===o[1][1])&&g(e,o))return!0}return!1}function l(e){for(var t=1/0,n=1/0,o=-(1/0),i=-(1/0),r=e.length-1;r>=0;r--)e[r][0]<t&&(t=e[r][0]),e[r][1]<n&&(n=e[r][1]),e[r][0]>o&&(o=e[r][0]),e[r][1]>i&&(i=e[r][1]);return[o-t,i-n]}function c(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function u(e,t,n){for(var o,i,r=null,l=y,c=y,u=0;u<t.length;u++)o=s(e[0],e[1],t[u]),i=s(e[1],e[0],t[u]),o>l&&i>c&&!a([e[0],t[u]],n)&&!a([e[1],t[u]],n)&&(l=o,c=i,r=t[u]);return r}function d(e,t,n,o,i){for(var s,a,l,p,g,h,m,f=!1,y=0;y<e.length-1;y++)if(s=[e[y],e[y+1]],a=s[0].join()+","+s[1].join(),!(r(s[0],s[1])<t||i[a]===!0)){l=0,g=c(s);do g=o.extendBbox(g,l),h=g[2]-g[0],m=g[3]-g[1],p=u(s,o.rangePoints(g),e),l++;while(null===p&&(n[0]>h||n[1]>m));h>=n[0]&&m>=n[1]&&(i[a]=!0),null!==p&&(e.splice(y+1,0,p),o.removePoint(p),f=!0)}return f?d(e,t,n,o,i):e}function p(e,t,n){var r,s,a,c,u,p,g,y=t||20;return e.length<4?e.slice():(g=o(i(m.toXy(e,n))),c=l(g),u=[c[0]*v,c[1]*v],r=f(g),a=g.filter(function(e){return r.indexOf(e)<0}),p=Math.ceil(1/(g.length/(c[0]*c[1]))),s=d(r,Math.pow(y,2),u,h(a,p),{}),m.fromXy(s,n))}var g=e("./intersect.js"),h=e("./grid.js"),m=e("./format.js"),f=e("./convex.js"),y=Math.cos(90/(180/Math.PI)),v=.6;t.exports=p},{"./convex.js":1,"./format.js":2,"./grid.js":3,"./intersect.js":5}],5:[function(e,t,n){function o(e,t,n,o,i,r){var s=(r-t)*(n-e)-(o-t)*(i-e);return s>0||!(s<0)}function i(e,t){var n=e[0][0],i=e[0][1],r=e[1][0],s=e[1][1],a=t[0][0],l=t[0][1],c=t[1][0],u=t[1][1];return o(n,i,a,l,c,u)!==o(r,s,a,l,c,u)&&o(n,i,r,s,a,l)!==o(n,i,r,s,c,u)}t.exports=i},{}]},{},[4])(4)}),function(e,t,n){function o(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function i(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return d[e.which]?d[e.which]:p[e.which]?p[e.which]:String.fromCharCode(e.which).toLowerCase()}function r(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function s(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function a(e,t){var n,o,i,r=[];for(n=e,"+"===n?n=["+"]:(n=n.replace(/\+{2}/g,"+plus"),n=n.split("+")),i=0;i<n.length;++i)o=n[i],h[o]&&(o=h[o]),t&&"keypress"!=t&&g[o]&&(o=g[o],r.push("shift")),s(o)&&r.push(o);if(n=o,i=t,!i){if(!u){u={};for(var a in d)95<a&&112>a||d.hasOwnProperty(a)&&(u[d[a]]=a)}i=u[n]?"keydown":"keypress"}return"keypress"==i&&r.length&&(i="keydown"),{key:o,modifiers:r,action:i}}function l(e,n){return null!==e&&e!==t&&(e===n||l(e.parentNode,n))}function c(e){function n(e){e=e||{};var t,n=!1;for(t in f)e[t]?n=!0:f[t]=0;n||(b=!1)}function l(e,t,n,o,i,r){var a,l,c=[],u=n.type;if(!h._callbacks[e])return[];for("keyup"==u&&s(e)&&(t=[e]),a=0;a<h._callbacks[e].length;++a)if(l=h._callbacks[e][a],(o||!l.seq||f[l.seq]==l.level)&&u==l.action){var d;(d="keypress"==u&&!n.metaKey&&!n.ctrlKey)||(d=l.modifiers,d=t.sort().join(",")===d.sort().join(",")),d&&(d=o&&l.seq==o&&l.level==r,(!o&&l.combo==i||d)&&h._callbacks[e].splice(a,1),c.push(l))}return c}function u(e,t,n,o){h.stopCallback(t,t.target||t.srcElement,n,o)||!1!==e(t,n)||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function d(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=i(e);t&&("keyup"==e.type&&y===t?y=!1:h.handleKey(t,r(e),e))}function p(e,t,o,r){function s(t){return function(){b=t,++f[e],clearTimeout(m),m=setTimeout(n,1e3)}}function l(t){u(o,t,e),"keyup"!==r&&(y=i(t)),setTimeout(n,10)}for(var c=f[e]=0;c<t.length;++c){var d=c+1===t.length?l:s(r||a(t[c+1]).action);g(t[c],d,r,e,c)}}function g(e,t,n,o,i){h._directMap[e+":"+n]=t,e=e.replace(/\s+/g," ");var r=e.split(" ");1<r.length?p(e,r,t,n):(n=a(e,n),h._callbacks[n.key]=h._callbacks[n.key]||[],l(n.key,n.modifiers,{type:n.action},o,e,i),h._callbacks[n.key][o?"unshift":"push"]({callback:t,modifiers:n.modifiers,action:n.action,seq:o,level:i,combo:e}))}var h=this;if(e=e||t,!(h instanceof c))return new c(e);h.target=e,h._callbacks={},h._directMap={};var m,f={},y=!1,v=!1,b=!1;h._handleKey=function(e,t,o){var i,r=l(e,t,o);t={};var a=0,c=!1;for(i=0;i<r.length;++i)r[i].seq&&(a=Math.max(a,r[i].level));for(i=0;i<r.length;++i)r[i].seq?r[i].level==a&&(c=!0,t[r[i].seq]=1,u(r[i].callback,o,r[i].combo,r[i].seq)):c||u(r[i].callback,o,r[i].combo);r="keypress"==o.type&&v,o.type!=b||s(e)||r||n(t),v=c&&"keydown"==o.type},h._bindMultiple=function(e,t,n){for(var o=0;o<e.length;++o)g(e[o],t,n)},o(e,"keypress",d),o(e,"keydown",d),o(e,"keyup",d)}if(e){var u,d={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},p={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},g={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},h={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};for(n=1;20>n;++n)d[111+n]="f"+n;for(n=0;9>=n;++n)d[n+96]=n;c.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},c.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},c.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},c.prototype.reset=function(){return this._callbacks={},this._directMap={},this},c.prototype.stopCallback=function(e,t){return!(-1<(" "+t.className+" ").indexOf(" mousetrap ")||l(t,this.target))&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable)},c.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},c.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(d[t]=e[t]);u=null},c.init=function(){var e,n=c(t);for(e in n)"_"!==e.charAt(0)&&(c[e]=function(e){return function(){return n[e].apply(n,arguments)}}(e))},c.init(),e.Mousetrap=c,"undefined"!=typeof module&&module.exports&&(module.exports=c),"function"==typeof define&&define.amd&&define(function(){return c})}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null),!function(e){var t={config:{},container:{},errors:{},controls:{},items:{},utils:{}};t.utils.F=function(){},t.utils.extend=function(e,n){e.prototype=t.utils.createObject(n.prototype),e.prototype.contructor=e},t.utils.createObject=function(e){return"function"==typeof Object.create?Object.create(e):(t.utils.F.prototype=e,new t.utils.F)},t.utils.objectKeys=function(e){var t,n;if("function"==typeof Object.keys)return Object.keys(e);t=[];for(n in e)t.push(n);return t},t.utils.getQueryStringParam=function(e){if(!window.location.search)return null;var t,n,o=window.location.search.substr(1).split("&"),i={};for(n=0;n<o.length;n++)t=o[n].split("="),i[t[0]]=t[1];return i[e]||null},t.utils.copy=function(e,t){for(var n in t)e[n]=t[n];return e},t.utils.animFrame=function(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)})(function(){e()})},t.utils.indexOf=function(e,t){if(!(t instanceof Array))throw new Error("Haystack is not an Array");if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},t.utils.fnBind=function(e,t,n){if(void 0!==Function.prototype.bind)return Function.prototype.bind.apply(e,[t].concat(n||[]));var o=function(){var i=(n||[]).concat(Array.prototype.slice.call(arguments,0));return this instanceof o?void e.apply(this,i):e.apply(t,i)};return o.prototype=e.prototype,o},t.utils.removeFromArray=function(e,n){var o=t.utils.indexOf(e,n);if(-1===o)throw new Error("Can't remove item from array. Item is not in the array");n.splice(o,1)},t.utils.now=function(){return"function"==typeof Date.now?Date.now():(new Date).getTime()},t.utils.getUniqueId=function(){return(1e15*Math.random()).toString(36).replace(".","")},t.utils.filterXss=function(e,t){var n=e.replace(/javascript/gi,"j&#97;vascript").replace(/expression/gi,"expr&#101;ssion").replace(/onload/gi,"onlo&#97;d").replace(/script/gi,"&#115;cript").replace(/onerror/gi,"on&#101;rror");return t===!0?n:n.replace(/>/g,"&gt;").replace(/</g,"&lt;")},t.utils.stripTags=function(t){return e.trim(t.replace(/(<([^>]+)>)/gi,""))},t.utils.EventEmitter=function(){this._mSubscriptions={},this._mSubscriptions[t.utils.EventEmitter.ALL_EVENT]=[],this.on=function(e,t,n){this._mSubscriptions[e]||(this._mSubscriptions[e]=[]),this._mSubscriptions[e].push({fn:t,ctx:n})},this.emit=function(e){var n,o,i;if(i=Array.prototype.slice.call(arguments,1),this._mSubscriptions[e])for(n=0;n<this._mSubscriptions[e].length;n++)o=this._mSubscriptions[e][n].ctx||{},this._mSubscriptions[e][n].fn.apply(o,i);for(i.unshift(e),n=0;n<this._mSubscriptions[t.utils.EventEmitter.ALL_EVENT].length;n++)o=this._mSubscriptions[t.utils.EventEmitter.ALL_EVENT][n].ctx||{},this._mSubscriptions[t.utils.EventEmitter.ALL_EVENT][n].fn.apply(o,i)},this.unbind=function(e,t,n){if(!this._mSubscriptions[e])throw new Error("No subscribtions to unsubscribe for event "+e);var o,i=!1;for(o=0;o<this._mSubscriptions[e].length;o++)this._mSubscriptions[e][o].fn!==t||n&&n!==this._mSubscriptions[e][o].ctx||(this._mSubscriptions[e].splice(o,1),i=!0);if(i===!1)throw new Error("Nothing to unbind for "+e)},this.off=this.unbind,this.trigger=this.emit},t.utils.EventEmitter.ALL_EVENT="__all",t.utils.DragListener=function(n,o){t.utils.EventEmitter.call(this),this._eElement=e(n),this._oDocument=e(document),this._eBody=e(document.body),this._nButtonCode=o||0,this._nDelay=200,this._nDistance=10,this._nX=0,this._nY=0,this._nOriginalX=0,this._nOriginalY=0,this._bDragging=!1,this._fMove=t.utils.fnBind(this.onMouseMove,this),this._fUp=t.utils.fnBind(this.onMouseUp,this),this._fDown=t.utils.fnBind(this.onMouseDown,this),this._eElement.on("mousedown touchstart",this._fDown)},t.utils.DragListener.timeout=null,t.utils.copy(t.utils.DragListener.prototype,{destroy:function(){this._eElement.unbind("mousedown touchstart",this._fDown)},onMouseDown:function(e){e.preventDefault();var n=this._getCoordinates(e);this._nOriginalX=n.x,this._nOriginalY=n.y,this._oDocument.on("mousemove touchmove",this._fMove),this._oDocument.one("mouseup touchend",this._fUp),this._timeout=setTimeout(t.utils.fnBind(this._startDrag,this),this._nDelay)},onMouseMove:function(e){e.preventDefault();var t=this._getCoordinates(e);this._nX=t.x-this._nOriginalX,this._nY=t.y-this._nOriginalY,this._bDragging===!1&&(Math.abs(this._nX)>this._nDistance||Math.abs(this._nY)>this._nDistance)&&(clearTimeout(this._timeout),this._startDrag()),this._bDragging&&this.emit("drag",this._nX,this._nY,e)},onMouseUp:function(e){clearTimeout(this._timeout),this._eBody.removeClass("lm_dragging"),this._oDocument.unbind("mousemove touchmove",this._fMove),this._bDragging===!0&&(this._bDragging=!1,this.emit("dragStop",e,this._nOriginalX+this._nX))},_startDrag:function(){this._bDragging=!0,this._eBody.addClass("lm_dragging"),this.emit("dragStart",this._nOriginalX,this._nOriginalY)},_getCoordinates:function(e){var t={};return"touch"===e.type.substr(0,5)?(t.x=e.originalEvent.targetTouches[0].pageX,t.y=e.originalEvent.targetTouches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t}}),t.LayoutManager=function(n,o){if(!e||"function"!=typeof e.noConflict){var i="jQuery is missing as dependency for GoldenLayout. ";throw i+='Please either expose $ on GoldenLayout\'s scope (e.g. window) or add "jquery" to ',i+="your paths when using RequireJS/AMD",new Error(i)}t.utils.EventEmitter.call(this),this.isInitialised=!1,this._isFullPage=!1,this._resizeTimeoutId=null,this._components={"lm-react-component":t.utils.ReactComponentHandler},this._itemAreas=[],this._resizeFunction=t.utils.fnBind(this._onResize,this),this._maximisedItem=null,this._maximisePlaceholder=e('<div class="lm_maximise_place"></div>'),this._creationTimeoutPassed=!1,this._subWindowsCreated=!1,this.width=null,this.height=null,this.root=null,this.openPopouts=[],this.selectedItem=null,this.isSubWindow=!1,this.eventHub=new t.utils.EventHub(this),this.config=this._createConfig(n),this.container=o,this.dropTargetIndicator=null,this.transitionIndicator=null,this.tabDropPlaceholder=e('<div class="lm_drop_tab_placeholder"></div>'),this.isSubWindow===!0&&e("body").css("visibility","hidden"),e(window).on("unload beforeunload",t.utils.fnBind(this._onUnload,this)),this._typeToItem={column:t.utils.fnBind(t.items.RowOrColumn,this,[!0]),row:t.utils.fnBind(t.items.RowOrColumn,this,[!1]),stack:t.items.Stack,component:t.items.Component}},t.LayoutManager.__lm=t,t.LayoutManager.minifyConfig=function(e){return(new t.utils.ConfigMinifier).minifyConfig(e)},t.LayoutManager.unminifyConfig=function(e){return(new t.utils.ConfigMinifier).unminifyConfig(e)},t.utils.copy(t.LayoutManager.prototype,{registerComponent:function(e,t){if("function"!=typeof t)throw new Error("Please register a constructor function");if(void 0!==this._components[e])throw new Error("Component "+e+" is already registered");this._components[e]=t},toConfig:function(e){var n,o,i;if(this.isInitialised===!1)throw new Error("Can't create config, layout not yet initialised");if(e&&!(e instanceof t.items.AbstractContentItem))throw new Error("Root must be a ContentItem");for(n={settings:t.utils.copy({},this.config.settings),dimensions:t.utils.copy({},this.config.dimensions),labels:t.utils.copy({},this.config.labels)},n.content=[],o=function(e,t){var n,i;for(n in t.config)"content"!==n&&(e[n]=t.config[n]);if(t.contentItems.length)for(e.content=[],i=0;i<t.contentItems.length;i++)e.content[i]={},o(e.content[i],t.contentItems[i])},e?o(n,{contentItems:[e]}):o(n,this.root),this._$reconcilePopoutWindows(),n.openPopouts=[],i=0;i<this.openPopouts.length;i++)n.openPopouts.push(this.openPopouts[i].toConfig());return n.maximisedItemId=this._maximisedItem?"__glMaximised":null,n},getComponent:function(e){if(void 0===this._components[e])throw new t.errors.ConfigurationError('Unknown component "'+e+'"');return this._components[e]},init:function(){return this._subWindowsCreated===!1&&(this._createSubWindows(),this._subWindowsCreated=!0),"loading"===document.readyState||null===document.body?void e(document).ready(t.utils.fnBind(this.init,this)):this.isSubWindow===!0&&this._creationTimeoutPassed===!1?(setTimeout(t.utils.fnBind(this.init,this),7),void(this._creationTimeoutPassed=!0)):(this.isSubWindow===!0&&this._adjustToWindowMode(),this._setContainer(),this.dropTargetIndicator=new t.controls.DropTargetIndicator(this.container),this.transitionIndicator=new t.controls.TransitionIndicator,this.updateSize(),this._create(this.config),this._bindEvents(),this.isInitialised=!0,void this.emit("initialised"))},updateSize:function(e,t){2===arguments.length?(this.width=e,this.height=t):(this.width=this.container.width(),this.height=this.container.height()),this.isInitialised===!0&&(this.root.callDownwards("setSize"),this._maximisedItem&&(this._maximisedItem.element.width(this.container.width()),this._maximisedItem.element.height(this.container.height()),this._maximisedItem.callDownwards("setSize")))},destroy:function(){this.isInitialised!==!1&&(this._onUnload(),e(window).off("resize",this._resizeFunction),this.root.callDownwards("_$destroy",[],!0),this.root.contentItems=[],this.tabDropPlaceholder.remove(),this.dropTargetIndicator.destroy(),this.transitionIndicator.destroy())},createContentItem:function(e,n){var o,i;if("string"!=typeof e.type)throw new t.errors.ConfigurationError("Missing parameter 'type'",e);if("react-component"===e.type&&(e.type="component",e.componentName="lm-react-component"),!this._typeToItem[e.type])throw o="Unknown type '"+e.type+"'. Valid types are "+t.utils.objectKeys(this._typeToItem).join(","),new t.errors.ConfigurationError(o);return"component"!==e.type||n instanceof t.items.Stack||!n||this.isSubWindow===!0&&n instanceof t.items.Root||(e={type:"stack",isClosable:e.isClosable,width:e.width,height:e.height,content:[e]}),i=new this._typeToItem[e.type](this,e,n)},createPopout:function(e,n,o,i){var r,s,a,l,c,u,d=e,p=e instanceof t.items.AbstractContentItem,g=this;if(o=o||null,p){for(d=this.toConfig(e).content,o=t.utils.getUniqueId(),l=e.parent,c=e;1===l.contentItems.length&&!l.isRoot;)l=l.parent,c=c.parent;l.addId(o),isNaN(i)&&(i=t.utils.indexOf(c,l.contentItems))}else d instanceof Array||(d=[d]);return!n&&p&&(r=window.screenX||window.screenLeft,s=window.screenY||window.screenTop,a=e.element.offset(),n={left:r+a.left,top:s+a.top,width:e.element.width(),height:e.element.height()}),n||p||(n={left:window.screenX||window.screenLeft+20,top:window.screenY||window.screenTop+20,width:500,height:309}),p&&e.remove(),u=new t.controls.BrowserPopout(d,n,o,i,this),u.on("initialised",function(){g.emit("windowOpened",u)}),u.on("closed",function(){g._$reconcilePopoutWindows()}),this.openPopouts.push(u),u},createDragSource:function(n,o){this.config.settings.constrainDragToContainer=!1,new t.controls.DragSource(e(n),o,this)},selectItem:function(e,t){if(this.config.settings.selectionEnabled!==!0)throw new Error("Please set selectionEnabled to true to use this feature");e!==this.selectedItem&&(null!==this.selectedItem&&this.selectedItem.deselect(),e&&t!==!0&&e.select(),this.selectedItem=e,this.emit("selectionChanged",e))},_$maximiseItem:function(e){null!==this._maximisedItem&&this._$minimiseItem(this._maximisedItem),this._maximisedItem=e,this._maximisedItem.addId("__glMaximised"),e.element.addClass("lm_maximised"),e.element.after(this._maximisePlaceholder),this.root.element.prepend(e.element),e.element.width(this.container.width()),e.element.height(this.container.height()),e.callDownwards("setSize"),this._maximisedItem.emit("maximised"),this.emit("stateChanged")},_$minimiseItem:function(e){e.element.removeClass("lm_maximised"),e.removeId("__glMaximised"),this._maximisePlaceholder.after(e.element),this._maximisePlaceholder.remove(),e.parent.callDownwards("setSize"),this._maximisedItem=null,e.emit("minimised"),this.emit("stateChanged")},_$closeWindow:function(){window.setTimeout(function(){window.close()},1)},_$getArea:function(e,t){var n,o,i=1/0,r=null;for(n=0;n<this._itemAreas.length;n++)o=this._itemAreas[n],e>o.x1&&e<o.x2&&t>o.y1&&t<o.y2&&i>o.surface&&(i=o.surface,r=o);return r},_$calculateItemAreas:function(){var e,t,n=this._getAllContentItems();if(this._itemAreas=[],1===n.length)return void this._itemAreas.push(this.root._$getArea());for(e=0;e<n.length;e++)n[e].isStack&&(t=n[e]._$getArea(),null!==t&&(t instanceof Array?this._itemAreas=this._itemAreas.concat(t):this._itemAreas.push(t)))},_$normalizeContentItem:function(n,o){if(!n)throw new Error("No content item defined");if(n instanceof t.items.AbstractContentItem)return n;if(e.isPlainObject(n)&&n.type){var i=this.createContentItem(n,o);return i.callDownwards("_$init"),i}throw new Error("Invalid contentItem")},_$reconcilePopoutWindows:function(){var e,t=[];for(e=0;e<this.openPopouts.length;e++)this.openPopouts[e].getWindow().closed===!1?t.push(this.openPopouts[e]):this.emit("windowClosed",this.openPopouts[e]);this.openPopouts.length!==t.length&&(this.emit("stateChanged"),this.openPopouts=t)},_getAllContentItems:function(){var e=[],t=function(n){if(e.push(n),n.contentItems instanceof Array)for(var o=0;o<n.contentItems.length;o++)t(n.contentItems[o])};return t(this.root),e},_bindEvents:function(){this._isFullPage&&e(window).resize(this._resizeFunction)},_onResize:function(){clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=setTimeout(t.utils.fnBind(this.updateSize,this),100)},_createConfig:function(n){var o=t.utils.getQueryStringParam("gl-window");o&&(this.isSubWindow=!0,
n=localStorage.getItem(o),n=JSON.parse(n),n=(new t.utils.ConfigMinifier).unminifyConfig(n),localStorage.removeItem(o)),n=e.extend(!0,{},t.config.defaultConfig,n);var i=function(e){for(var t in e)"props"!==t&&"object"==typeof e[t]?i(e[t]):"type"===t&&"react-component"===e[t]&&(e.type="component",e.componentName="lm-react-component")};return i(n),n.settings.hasHeaders===!1&&(n.dimensions.headerHeight=0),n},_adjustToWindowMode:function(){var n=e('<div class="lm_popin" title="'+this.config.labels.popin+'"><div class="lm_icon"></div><div class="lm_bg"></div></div>');n.click(t.utils.fnBind(function(){this.emit("popIn")},this)),document.title=t.utils.stripTags(this.config.content[0].title),e("head").append(e("body link, body style, template, .gl_keep")),this.container=e("body").html("").css("visibility","visible").append(n),document.body.offsetHeight,window.__glInstance=this},_createSubWindows:function(){var e,t;for(e=0;e<this.config.openPopouts.length;e++)t=this.config.openPopouts[e],this.createPopout(t.content,t.dimensions,t.parentId,t.indexInParent)},_setContainer:function(){var t=e(this.container||"body");if(0===t.length)throw new Error("GoldenLayout container not found");if(t.length>1)throw new Error("GoldenLayout more than one container element specified");t[0]===document.body&&(this._isFullPage=!0,e("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"})),this.container=t},_create:function(e){var n;if(!(e.content instanceof Array))throw n=void 0===e.content?"Missing setting 'content' on top level of configuration":"Configuration parameter 'content' must be an array",new t.errors.ConfigurationError(n,e);if(e.content.length>1)throw n="Top level content can't contain more then one element.",new t.errors.ConfigurationError(n,e);this.root=new t.items.Root(this,{content:e.content},this.container),this.root.callDownwards("_$init"),"__glMaximised"===e.maximisedItemId&&this.root.getItemsById(e.maximisedItemId)[0].toggleMaximise()},_onUnload:function(){if(this.config.settings.closePopoutsOnUnload===!0)for(var e=0;e<this.openPopouts.length;e++)this.openPopouts[e].close()}}),function(){"function"==typeof define&&define.amd?define(["jquery"],function(n){return e=n,t.LayoutManager}):"object"==typeof exports?module.exports=t.LayoutManager:window.GoldenLayout=t.LayoutManager}(),t.config.defaultConfig={openPopouts:[],settings:{hasHeaders:!0,constrainDragToContainer:!0,reorderEnabled:!0,selectionEnabled:!1,popoutWholeStack:!1,blockedPopoutsThrowError:!0,closePopoutsOnUnload:!0,showPopoutIcon:!0,showMaximiseIcon:!0,showCloseIcon:!0},dimensions:{borderWidth:5,minItemHeight:10,minItemWidth:10,headerHeight:20,dragProxyWidth:300,dragProxyHeight:200},labels:{close:"close",maximise:"maximise",minimise:"minimise",popout:"open in new window",popin:"pop in"}},t.config.itemDefaultConfig={isClosable:!0,reorderEnabled:!0,title:""},t.container.ItemContainer=function(n,o,i){t.utils.EventEmitter.call(this),this.width=null,this.height=null,this.title=n.componentName,this.parent=o,this.layoutManager=i,this.isHidden=!1,this._config=n,this._element=e(['<div class="lm_item_container">','<div class="lm_content"></div>',"</div>"].join("")),this._contentElement=this._element.find(".lm_content")},t.utils.copy(t.container.ItemContainer.prototype,{getElement:function(){return this._contentElement},hide:function(){this.emit("hide"),this.isHidden=!0,this._element.hide()},show:function(){this.emit("show"),this.isHidden=!1,this._element.show()},setSize:function(e,t){for(var n,o,i,r,s,a,l=this.parent,c=this;!l.isColumn&&!l.isRow;)if(c=l,l=l.parent,l.isRoot)return!1;for(i=l.isColumn?"height":"width",r="height"===i?t:e,n=this[i]*(1/(c.config[i]/100)),o=r/n*100,s=(c.config[i]-o)/l.contentItems.length,a=0;a<l.contentItems.length;a++)l.contentItems[a]===c?l.contentItems[a].config[i]=o:l.contentItems[a].config[i]+=s;return l.callDownwards("setSize"),!0},close:function(){this._config.isClosable&&(this.emit("close"),this.parent.close())},getState:function(){return this._config.componentState},extendState:function(t){this.setState(e.extend(!0,this.getState(),t))},setState:function(e){this._config.componentState=e,this.parent.emitBubblingEvent("stateChanged")},setTitle:function(e){this.parent.setTitle(e)},_$setSize:function(e,t){e===this.width&&t===this.height||(this.width=e,this.height=t,this._contentElement.width(this.width).height(this.height),this.emit("resize"))}}),t.controls.BrowserPopout=function(e,n,o,i,r){t.utils.EventEmitter.call(this),this.isInitialised=!1,this._config=e,this._dimensions=n,this._parentId=o,this._indexInParent=i,this._layoutManager=r,this._popoutWindow=null,this._id=null,this._createWindow()},t.utils.copy(t.controls.BrowserPopout.prototype,{toConfig:function(){return{dimensions:{width:this.getGlInstance().width,height:this.getGlInstance().height,left:this._popoutWindow.screenX||this._popoutWindow.screenLeft,top:this._popoutWindow.screenY||this._popoutWindow.screenTop},content:this.getGlInstance().toConfig().content,parentId:this._parentId,indexInParent:this._indexInParent}},getGlInstance:function(){return this._popoutWindow.__glInstance},getWindow:function(){return this._popoutWindow},close:function(){if(this.getGlInstance())this.getGlInstance()._$closeWindow();else try{this.getWindow().close()}catch(e){}},popIn:function(){var t,n,o=this._indexInParent;this._parentId&&(t=e.extend(!0,{},this.getGlInstance().toConfig()).content[0],n=this._layoutManager.root.getItemsById(this._parentId)[0],n||(n=this._layoutManager.root.contentItems.length>0?this._layoutManager.root.contentItems[0]:this._layoutManager.root,o=0)),n.addChild(t,this._indexInParent),this.close()},_createWindow:function(){var n,o=this._createUrl(),i=Math.floor(1e6*Math.random()).toString(36),r=this._serializeWindowOptions({width:this._dimensions.width,height:this._dimensions.height,innerWidth:this._dimensions.width,innerHeight:this._dimensions.height,menubar:"no",toolbar:"no",location:"no",personalbar:"no",resizable:"yes",scrollbars:"no",status:"no"});if(this._popoutWindow=window.open(o,i,r),this._popoutWindow)e(this._popoutWindow).on("load",t.utils.fnBind(this._positionWindow,this)).on("unload beforeunload",t.utils.fnBind(this._onClose,this)),n=setInterval(t.utils.fnBind(function(){this._popoutWindow.__glInstance&&this._popoutWindow.__glInstance.isInitialised&&(this._onInitialised(),clearInterval(n))},this),10);else if(this._layoutManager.config.settings.blockedPopoutsThrowError===!0){var s=new Error("Popout blocked");throw s.type="popoutBlocked",s}},_serializeWindowOptions:function(e){var t,n=[];for(t in e)n.push(t+"="+e[t]);return n.join(",")},_createUrl:function(){var e,n={content:this._config},o="gl-window-config-"+t.utils.getUniqueId();n=(new t.utils.ConfigMinifier).minifyConfig(n);try{localStorage.setItem(o,JSON.stringify(n))}catch(e){throw new Error("Error while writing to localStorage "+e.toString())}return e=document.location.href.split("?"),1===e.length?e[0]+"?gl-window="+o:document.location.href+"&gl-window="+o},_positionWindow:function(){this._popoutWindow.moveTo(this._dimensions.left,this._dimensions.top),this._popoutWindow.focus()},_onInitialised:function(){this.isInitialised=!0,this.getGlInstance().on("popIn",this.popIn,this),this.emit("initialised")},_onClose:function(){setTimeout(t.utils.fnBind(this.emit,this,["closed"]),50)}}),t.controls.DragProxy=function(n,o,i,r,s,a){t.utils.EventEmitter.call(this),this._dragListener=i,this._layoutManager=r,this._contentItem=s,this._originalParent=a,this._area=null,this._lastValidArea=null,this._dragListener.on("drag",this._onDrag,this),this._dragListener.on("dragStop",this._onDrop,this),this.element=e(t.controls.DragProxy._template),this.element.css({left:n,top:o}),this.element.find(".lm_title").html(this._contentItem.config.title),this.childElementContainer=this.element.find(".lm_content"),this.childElementContainer.append(s.element),this._updateTree(),this._layoutManager._$calculateItemAreas(),this._setDimensions(),e(document.body).append(this.element);var l=this._layoutManager.container.offset();this._minX=l.left,this._minY=l.top,this._maxX=this._layoutManager.container.width()+this._minX,this._maxY=this._layoutManager.container.height()+this._minY,this._width=this.element.width(),this._height=this.element.height()},t.controls.DragProxy._template='<div class="lm_dragProxy"><div class="lm_header"><ul class="lm_tabs"><li class="lm_tab lm_active"><i class="lm_left"></i><span class="lm_title"></span><i class="lm_right"></i></li></ul></div><div class="lm_content"></div></div>',t.utils.copy(t.controls.DragProxy.prototype,{_onDrag:function(e,t,n){var o=n.pageX,i=n.pageY,r=o>this._minX&&o<this._maxX&&i>this._minY&&i<this._maxY;(r||this._layoutManager.config.settings.constrainDragToContainer!==!0)&&(this.element.css({left:o,top:i}),this._area=this._layoutManager._$getArea(o,i),null!==this._area&&(this._lastValidArea=this._area,this._area.contentItem._$highlightDropZone(o,i,this._area)))},_onDrop:function(){this._layoutManager.dropTargetIndicator.hide(),null!==this._area?this._area.contentItem._$onDrop(this._contentItem):null!==this._lastValidArea?this._lastValidArea.contentItem._$onDrop(this._contentItem):this._originalParent&&this._originalParent.addChild(this._contentItem),this.element.remove()},_updateTree:function(){this._contentItem.parent&&this._contentItem.parent.removeChild(this._contentItem,!0),this._contentItem._$setParent(this)},_setDimensions:function(){var e=this._layoutManager.config.dimensions,t=e.dragProxyWidth,n=e.dragProxyHeight-e.headerHeight;this.childElementContainer.width(t),this.childElementContainer.height(n),this._contentItem.element.width(t),this._contentItem.element.height(n),this._contentItem.callDownwards("_$show"),this._contentItem.callDownwards("setSize")}}),t.controls.DragSource=function(e,t,n){this._element=e,this._itemConfig=t,this._layoutManager=n,this._dragListener=null,this._createDragListener()},t.utils.copy(t.controls.DragSource.prototype,{_createDragListener:function(){null!==this._dragListener&&this._dragListener.destroy(),this._dragListener=new t.utils.DragListener(this._element),this._dragListener.on("dragStart",this._onDragStart,this),this._dragListener.on("dragStop",this._createDragListener,this)},_onDragStart:function(e,n){var o=this._layoutManager._$normalizeContentItem(this._itemConfig),i=new t.controls.DragProxy(e,n,this._dragListener,this._layoutManager,o,null);this._layoutManager.transitionIndicator.transitionElements(this._element,i.element)}}),t.controls.DropTargetIndicator=function(){this.element=e(t.controls.DropTargetIndicator._template),e(document.body).append(this.element)},t.controls.DropTargetIndicator._template='<div class="lm_dropTargetIndicator"><div class="lm_inner"></div></div>',t.utils.copy(t.controls.DropTargetIndicator.prototype,{destroy:function(){this.element.remove()},highlight:function(e,t,n,o){this.highlightArea({x1:e,y1:t,x2:n,y2:o})},highlightArea:function(e){this.element.css({left:e.x1,top:e.y1,width:e.x2-e.x1,height:e.y2-e.y1}).show()},hide:function(){this.element.hide()}}),t.controls.Header=function(n,o){t.utils.EventEmitter.call(this),this.layoutManager=n,this.element=e(t.controls.Header._template),this.layoutManager.config.settings.selectionEnabled===!0&&(this.element.addClass("lm_selectable"),this.element.click(t.utils.fnBind(this._onHeaderClick,this))),this.element.height(n.config.dimensions.headerHeight),this.tabsContainer=this.element.find(".lm_tabs"),this.controlsContainer=this.element.find(".lm_controls"),this.parent=o,this.parent.on("resize",this._updateTabSizes,this),this.tabs=[],this.activeContentItem=null,this._createControls()},t.controls.Header._template=['<div class="lm_header">','<ul class="lm_tabs"></ul>','<ul class="lm_controls"></ul>',"</div>"].join(""),t.utils.copy(t.controls.Header.prototype,{createTab:function(e,n){var o,i;for(i=0;i<this.tabs.length;i++)if(this.tabs[i].contentItem===e)return;return o=new t.controls.Tab(this,e),0===this.tabs.length?(this.tabs.push(o),void this.tabsContainer.append(o.element)):(void 0===n&&(n=this.tabs.length),n>0?this.tabs[n-1].element.after(o.element):this.tabs[0].element.before(o.element),this.tabs.splice(n,0,o),void this._updateTabSizes())},removeTab:function(e){for(var t=0;t<this.tabs.length;t++)if(this.tabs[t].contentItem===e)return this.tabs[t]._$destroy(),void this.tabs.splice(t,1);throw new Error("contentItem is not controlled by this header")},setActiveContentItem:function(e){var t,n;for(t=0;t<this.tabs.length;t++)n=this.tabs[t].contentItem===e,this.tabs[t].setActive(n),n===!0&&(this.activeContentItem=e,this.parent.config.activeItemIndex=t);this._updateTabSizes(),this.parent.emitBubblingEvent("stateChanged")},_$destroy:function(){this.emit("destroy");for(var e=0;e<this.tabs.length;e++)this.tabs[e]._$destroy();this.element.remove()},_createControls:function(){var e,n,o,i,r,s,a;this.layoutManager.config.settings.showPopoutIcon&&(n=t.utils.fnBind(this._onPopoutClick,this),o=this.layoutManager.config.labels.popout,new t.controls.HeaderButton(this,o,"lm_popout",n)),this.layoutManager.config.settings.showMaximiseIcon&&(s=t.utils.fnBind(this.parent.toggleMaximise,this.parent),i=this.layoutManager.config.labels.maximise,r=this.layoutManager.config.labels.minimise,a=new t.controls.HeaderButton(this,i,"lm_maximise",s),this.parent.on("maximised",function(){a.element.attr("title",r)}),this.parent.on("minimised",function(){a.element.attr("title",i)})),this.parent.config.isClosable&&this.layoutManager.config.settings.showCloseIcon&&(e=t.utils.fnBind(this.parent.remove,this.parent),o=this.layoutManager.config.labels.close,new t.controls.HeaderButton(this,o,"lm_close",e))},_onPopoutClick:function(){this.layoutManager.config.settings.popoutWholeStack===!0?this.parent.popout():this.activeContentItem.popout()},_onHeaderClick:function(e){e.target===this.element[0]&&this.parent.select()},_updateTabSizes:function(){if(0!==this.tabs.length){var e,t,n,o,i=this.element.outerWidth()-this.controlsContainer.outerWidth(),r=0;for(t=0;t<this.tabs.length;t++)e=this.tabs[t].element,e.css("z-index",this.tabs.length-t),r+=e.outerWidth()+parseInt(e.css("margin-right"),10);for(o=(r-i)/(this.tabs.length-1),t=0;t<this.tabs.length;t++)n=!this.tabs[t].isActive&&o>0?"-"+Math.floor(o)+"px":"",this.tabs[t].element.css("margin-left",n);r>i?this.element.css("overflow","hidden"):this.element.css("overflow","visible")}}}),t.controls.HeaderButton=function(t,n,o,i){this._header=t,this.element=e('<li class="'+o+'" title="'+n+'"></li>'),this._header.on("destroy",this._$destroy,this),this._action=i,this.element.click(this._action),this._header.controlsContainer.append(this.element)},t.utils.copy(t.controls.HeaderButton.prototype,{_$destroy:function(){this.element.off(),this.element.remove()}}),t.controls.Splitter=function(e,n){this._isVertical=e,this._size=n,this.element=this._createElement(),this._dragListener=new t.utils.DragListener(this.element)},t.utils.copy(t.controls.Splitter.prototype,{on:function(e,t,n){this._dragListener.on(e,t,n)},_$destroy:function(){this.element.remove()},_createElement:function(){var t=e('<div class="lm_splitter"><div class="lm_drag_handle"></div></div>');return t.addClass("lm_"+(this._isVertical?"vertical":"horizontal")),t[this._isVertical?"height":"width"](this._size),t}}),t.controls.Tab=function(n,o){this.header=n,this.contentItem=o,this.element=e(t.controls.Tab._template),this.titleElement=this.element.find(".lm_title"),this.closeElement=this.element.find(".lm_close_tab"),this.closeElement[o.config.isClosable?"show":"hide"](),this.isActive=!1,this.setTitle(o.config.title),this.contentItem.on("titleChanged",this.setTitle,this),this._layoutManager=this.contentItem.layoutManager,this._layoutManager.config.settings.reorderEnabled===!0&&o.config.reorderEnabled===!0&&(this._dragListener=new t.utils.DragListener(this.element),this._dragListener.on("dragStart",this._onDragStart,this)),this._onTabClickFn=t.utils.fnBind(this._onTabClick,this),this._onCloseClickFn=t.utils.fnBind(this._onCloseClick,this),this.element.click(this._onTabClickFn),this._layoutManager.config.settings.showCloseIcon===!0?this.closeElement.click(this._onCloseClickFn):this.closeElement.remove(),this.contentItem.tab=this,this.contentItem.emit("tab",this),this.contentItem.layoutManager.emit("tabCreated",this),this.contentItem.isComponent&&(this.contentItem.container.tab=this,this.contentItem.container.emit("tab",this))},t.controls.Tab._template='<li class="lm_tab"><i class="lm_left"></i><span class="lm_title"></span><div class="lm_close_tab"></div><i class="lm_right"></i></li>',t.utils.copy(t.controls.Tab.prototype,{setTitle:function(e){this.element.attr("title",t.utils.stripTags(e)),this.titleElement.html(e)},setActive:function(e){e!==this.isActive&&(this.isActive=e,e?this.element.addClass("lm_active"):this.element.removeClass("lm_active"))},_$destroy:function(){this.element.off("click",this._onTabClickFn),this.closeElement.off("click",this._onCloseClickFn),this.element.remove()},_onDragStart:function(e,n){this.contentItem.parent.isMaximised===!0&&this.contentItem.parent.toggleMaximise(),new t.controls.DragProxy(e,n,this._dragListener,this._layoutManager,this.contentItem,this.header.parent)},_onTabClick:function(e){0===e.button?this.header.parent.setActiveContentItem(this.contentItem):1===e.button&&this.contentItem.config.isClosable&&this._onCloseClick(e)},_onCloseClick:function(e){e.stopPropagation(),this.header.parent.removeChild(this.contentItem)}}),t.controls.TransitionIndicator=function(){this._element=e('<div class="lm_transition_indicator"></div>'),e(document.body).append(this._element),this._toElement=null,this._fromDimensions=null,this._totalAnimationDuration=200,this._animationStartTime=null},t.utils.copy(t.controls.TransitionIndicator.prototype,{destroy:function(){this._element.remove()},transitionElements:function(e,t){},_nextAnimationFrame:function(){var e,n=this._measure(this._toElement),o=(t.utils.now()-this._animationStartTime)/this._totalAnimationDuration,i={};if(o>=1)return void this._element.hide();n.opacity=0;for(e in this._fromDimensions)i[e]=this._fromDimensions[e]+(n[e]-this._fromDimensions[e])*o;this._element.css(i),t.utils.animFrame(t.utils.fnBind(this._nextAnimationFrame,this))},_measure:function(e){var t=e.offset();return{left:t.left,top:t.top,width:e.outerWidth(),height:e.outerHeight()}}}),t.errors.ConfigurationError=function(e,t){Error.call(this),this.name="Configuration Error",this.message=e,this.node=t},t.errors.ConfigurationError.prototype=new Error,t.items.AbstractContentItem=function(e,n,o){t.utils.EventEmitter.call(this),this.config=this._extendItemNode(n),this.type=n.type,this.contentItems=[],this.parent=o,this.isInitialised=!1,this.isMaximised=!1,this.isRoot=!1,this.isRow=!1,this.isColumn=!1,this.isStack=!1,this.isComponent=!1,this.layoutManager=e,this._pendingEventPropagations={},this._throttledEvents=["stateChanged"],this.on(t.utils.EventEmitter.ALL_EVENT,this._propagateEvent,this),n.content&&this._createContentItems(n)},t.utils.copy(t.items.AbstractContentItem.prototype,{setSize:function(){throw new Error("Abstract Method")},callDownwards:function(e,t,n,o){var i;for(n!==!0&&o!==!0&&this[e].apply(this,t||[]),i=0;i<this.contentItems.length;i++)this.contentItems[i].callDownwards(e,t,n);n===!0&&o!==!0&&this[e].apply(this,t||[])},removeChild:function(e,n){var o=t.utils.indexOf(e,this.contentItems);if(-1===o)throw new Error("Can't remove child item. Unknown content item");n!==!0&&this.contentItems[o]._$destroy(),this.contentItems.splice(o,1),this.config.content.splice(o,1),this.contentItems.length>0?this.callDownwards("setSize"):this instanceof t.items.Root||this.config.isClosable!==!0||this.parent.removeChild(this)},addChild:function(e,t){void 0===t&&(t=this.contentItems.length),this.contentItems.splice(t,0,e),void 0===this.config.content&&(this.config.content=[]),this.config.content.splice(t,0,e.config),e.parent=this,e.parent.isInitialised===!0&&e.isInitialised===!1&&e._$init()},replaceChild:function(e,n,o){n=this.layoutManager._$normalizeContentItem(n);var i=t.utils.indexOf(e,this.contentItems),r=e.element[0].parentNode;if(-1===i)throw new Error("Can't replace child. oldChild is not child of this");r.replaceChild(n.element[0],e.element[0]),o===!0&&(e.parent=null,e._$destroy()),this.contentItems[i]=n,n.parent=this,n.parent.isInitialised===!0&&n.isInitialised===!1&&n._$init(),this.callDownwards("setSize")},remove:function(){this.parent.removeChild(this)},popout:function(){var e=this.layoutManager.createPopout(this);return this.emitBubblingEvent("stateChanged"),e},toggleMaximise:function(){this.isMaximised===!0?this.layoutManager._$minimiseItem(this):this.layoutManager._$maximiseItem(this),this.isMaximised=!this.isMaximised,this.emitBubblingEvent("stateChanged")},select:function(){this.layoutManager.selectedItem!==this&&(this.layoutManager.selectItem(this,!0),this.element.addClass("lm_selected"))},deselect:function(){this.layoutManager.selectedItem===this&&(this.layoutManager.selectedItem=null,this.element.removeClass("lm_selected"))},setTitle:function(e){this.config.title=e,this.emit("titleChanged",e),this.emit("stateChanged")},hasId:function(e){return!!this.config.id&&("string"==typeof this.config.id?this.config.id===e:this.config.id instanceof Array?-1!==t.utils.indexOf(e,this.config.id):void 0)},addId:function(e){this.hasId(e)||(this.config.id?"string"==typeof this.config.id?this.config.id=[this.config.id,e]:this.config.id instanceof Array&&this.config.id.push(e):this.config.id=e)},removeId:function(e){if(!this.hasId(e))throw new Error("Id not found");if("string"==typeof this.config.id)delete this.config.id;else if(this.config.id instanceof Array){var n=t.utils.indexOf(e,this.config.id);this.config.id.splice(n,1)}},getItemsByFilter:function(e){var t=[],n=function(o){for(var i=0;i<o.contentItems.length;i++)e(o.contentItems[i])===!0&&t.push(o.contentItems[i]),n(o.contentItems[i])};return n(this),t},getItemsById:function(e){return this.getItemsByFilter(function(n){return n.config.id instanceof Array?-1!==t.utils.indexOf(e,n.config.id):n.config.id===e})},getItemsByType:function(e){return this._$getItemsByProperty("type",e)},getComponentsByName:function(e){var t,n=this._$getItemsByProperty("componentName",e),o=[];for(t=0;t<n.length;t++)o.push(n[t].instance);return o},_$getItemsByProperty:function(e,t){return this.getItemsByFilter(function(n){return n[e]===t})},_$setParent:function(e){this.parent=e},_$highlightDropZone:function(e,t,n){this.layoutManager.dropTargetIndicator.highlightArea(n)},_$onDrop:function(e){this.addChild(e)},_$hide:function(){this._callOnActiveComponents("hide"),this.element.hide(),this.layoutManager.updateSize()},_$show:function(){this._callOnActiveComponents("show"),this.element.show(),this.layoutManager.updateSize()},_callOnActiveComponents:function(e){var t,n,o=this.getItemsByType("stack");for(n=0;n<o.length;n++)t=o[n].getActiveContentItem(),t&&t.isComponent&&t.container[e]()},_$destroy:function(){this.emitBubblingEvent("beforeItemDestroyed"),this.callDownwards("_$destroy",[],!0,!0),this.element.remove(),this.emitBubblingEvent("itemDestroyed")},_$getArea:function(e){e=e||this.element;var t=e.offset(),n=e.width(),o=e.height();return{x1:t.left,y1:t.top,x2:t.left+n,y2:t.top+o,surface:n*o,contentItem:this}},_$init:function(){var e;for(this.setSize(),e=0;e<this.contentItems.length;e++)this.childElementContainer.append(this.contentItems[e].element);this.isInitialised=!0,this.emitBubblingEvent("itemCreated"),this.emitBubblingEvent(this.type+"Created")},emitBubblingEvent:function(e){var n=new t.utils.BubblingEvent(e,this);this.emit(e,n)},_createContentItems:function(e){var n,o;if(!(e.content instanceof Array))throw new t.errors.ConfigurationError("content must be an Array",e);for(o=0;o<e.content.length;o++)n=this.layoutManager.createContentItem(e.content[o],this),this.contentItems.push(n)},_extendItemNode:function(e){for(var n in t.config.itemDefaultConfig)void 0===e[n]&&(e[n]=t.config.itemDefaultConfig[n]);return e},_propagateEvent:function(e,n){n instanceof t.utils.BubblingEvent&&n.isPropagationStopped===!1&&this.isInitialised===!0&&(this.isRoot===!1&&this.parent?this.parent.emit.apply(this.parent,Array.prototype.slice.call(arguments,0)):this._scheduleEventPropagationToLayoutManager(e,n))},_scheduleEventPropagationToLayoutManager:function(e,n){-1===t.utils.indexOf(e,this._throttledEvents)?this.layoutManager.emit(e,n.origin):this._pendingEventPropagations[e]!==!0&&(this._pendingEventPropagations[e]=!0,t.utils.animFrame(t.utils.fnBind(this._propagateEventToLayoutManager,this,[e,n])))},_propagateEventToLayoutManager:function(e,t){this._pendingEventPropagations[e]=!1,this.layoutManager.emit(e,t)}}),t.items.Component=function(n,o,i){t.items.AbstractContentItem.call(this,n,o,i);var r=n.getComponent(this.config.componentName),s=e.extend(!0,{},this.config.componentState||{});s.componentName=this.config.componentName,this.componentName=this.config.componentName,""===this.config.title&&(this.config.title=this.config.componentName),this.isComponent=!0,this.container=new t.container.ItemContainer(this.config,this,n),this.instance=new r(this.container,s),this.element=this.container._element},t.utils.extend(t.items.Component,t.items.AbstractContentItem),t.utils.copy(t.items.Component.prototype,{close:function(){this.parent.removeChild(this)},setSize:function(){this.container._$setSize(this.element.width(),this.element.height())},_$init:function(){t.items.AbstractContentItem.prototype._$init.call(this),this.container.emit("open")},_$hide:function(){this.container.hide(),t.items.AbstractContentItem.prototype._$hide.call(this)},_$show:function(){this.container.show(),t.items.AbstractContentItem.prototype._$show.call(this)},_$destroy:function(){this.container.emit("destroy"),t.items.AbstractContentItem.prototype._$destroy.call(this)},_$getArea:function(){return null}}),t.items.Root=function(n,o,i){t.items.AbstractContentItem.call(this,n,o,null),this.isRoot=!0,this.type="root",this.element=e('<div class="lm_goldenlayout lm_item lm_root"></div>'),this.childElementContainer=this.element,this._containerElement=i,this._containerElement.append(this.element)},t.utils.extend(t.items.Root,t.items.AbstractContentItem),t.utils.copy(t.items.Root.prototype,{addChild:function(e){if(this.contentItems.length>0)throw new Error("Root node can only have a single child");e=this.layoutManager._$normalizeContentItem(e,this),this.childElementContainer.append(e.element),t.items.AbstractContentItem.prototype.addChild.call(this,e),this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(){var e=this._containerElement.width(),t=this._containerElement.height();this.element.width(e),this.element.height(t),this.contentItems[0]&&(this.contentItems[0].element.width(e),this.contentItems[0].element.height(t))},_$onDrop:function(e){var t;e.isComponent===!0?(t=this.layoutManager.createContentItem({type:"stack"},this),t.addChild(e),this.addChild(t)):this.addChild(e)}}),t.items.RowOrColumn=function(n,o,i,r){t.items.AbstractContentItem.call(this,o,i,r),this.isRow=!n,this.isColumn=n,this.element=e('<div class="lm_item lm_'+(n?"column":"row")+'"></div>'),this.childElementContainer=this.element,this._splitterSize=o.config.dimensions.borderWidth,this._isColumn=n,this._dimension=n?"height":"width",this._splitter=[],this._splitterPosition=null,this._splitterMinPosition=null,this._splitterMaxPosition=null},t.utils.extend(t.items.RowOrColumn,t.items.AbstractContentItem),t.utils.copy(t.items.RowOrColumn.prototype,{addChild:function(e,n,o){var i,r,s,a;if(e=this.layoutManager._$normalizeContentItem(e,this),void 0===n&&(n=this.contentItems.length),this.contentItems.length>0?(a=this._createSplitter(Math.max(0,n-1)).element,n>0?(this.contentItems[n-1].element.after(a),a.after(e.element)):(this.contentItems[0].element.before(a),a.before(e.element))):this.childElementContainer.append(e.element),t.items.AbstractContentItem.prototype.addChild.call(this,e,n),i=1/this.contentItems.length*100,o===!0)return void this.emitBubblingEvent("stateChanged");for(s=0;s<this.contentItems.length;s++)this.contentItems[s]===e?e.config[this._dimension]=i:(r=this.contentItems[s].config[this._dimension]*=(100-i)/100,this.contentItems[s].config[this._dimension]=r);this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},removeChild:function(e,n){var o,i,r=e.config[this._dimension],s=t.utils.indexOf(e,this.contentItems),a=Math.max(s-1,0);if(-1===s)throw new Error("Can't remove child. ContentItem is not child of this Row or Column");for(this._splitter[a]&&(this._splitter[a]._$destroy(),this._splitter.splice(a,1)),o=0;o<this.contentItems.length;o++)this.contentItems[o]!==e&&(this.contentItems[o].config[this._dimension]+=r/(this.contentItems.length-1));t.items.AbstractContentItem.prototype.removeChild.call(this,e,n),1===this.contentItems.length&&this.config.isClosable===!0?(i=this.contentItems[0],this.contentItems=[],this.parent.replaceChild(this,i,!0)):(this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged"))},replaceChild:function(e,n){var o=e.config[this._dimension];t.items.AbstractContentItem.prototype.replaceChild.call(this,e,n),n.config[this._dimension]=o,this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(){this.contentItems.length>0&&(this._calculateRelativeSizes(),this._setAbsoluteSizes()),this.emitBubblingEvent("stateChanged"),this.emit("resize")},_$init:function(){if(this.isInitialised!==!0){var e;for(t.items.AbstractContentItem.prototype._$init.call(this),e=0;e<this.contentItems.length-1;e++)this.contentItems[e].element.after(this._createSplitter(e).element)}},_setAbsoluteSizes:function(){var e,t,n,o=(this.contentItems.length-1)*this._splitterSize,i=this.element.width(),r=this.element.height(),s=0,a=[];for(this._isColumn?r-=o:i-=o,e=0;e<this.contentItems.length;e++)n=this._isColumn?Math.floor(r*(this.contentItems[e].config.height/100)):Math.floor(i*(this.contentItems[e].config.width/100)),s+=n,a.push(n);for(t=(this._isColumn?r:i)-s,e=0;e<this.contentItems.length;e++)t-e>0&&a[e]++,this._isColumn?(this.contentItems[e].element.width(i),this.contentItems[e].element.height(a[e])):(this.contentItems[e].element.width(a[e]),this.contentItems[e].element.height(r))},_calculateRelativeSizes:function(){var e,t=0,n=[],o=this._isColumn?"height":"width";for(e=0;e<this.contentItems.length;e++)void 0!==this.contentItems[e].config[o]?t+=this.contentItems[e].config[o]:n.push(this.contentItems[e]);if(100!==Math.round(t))if(Math.round(t)<100&&n.length>0)for(e=0;e<n.length;e++)n[e].config[o]=(100-t)/n.length;else{if(Math.round(t)>100)for(e=0;e<n.length;e++)n[e].config[o]=50,t+=50;for(e=0;e<this.contentItems.length;e++)this.contentItems[e].config[o]=this.contentItems[e].config[o]/t*100}},_createSplitter:function(e){var n;return n=new t.controls.Splitter(this._isColumn,this._splitterSize),n.on("drag",t.utils.fnBind(this._onSplitterDrag,this,[n]),this),n.on("dragStop",t.utils.fnBind(this._onSplitterDragStop,this,[n]),this),n.on("dragStart",t.utils.fnBind(this._onSplitterDragStart,this,[n]),this),this._splitter.splice(e,0,n),n},_getItemsForSplitter:function(e){var n=t.utils.indexOf(e,this._splitter);return{before:this.contentItems[n],after:this.contentItems[n+1]}},_onSplitterDragStart:function(e){var t=this._getItemsForSplitter(e),n=this.layoutManager.config.dimensions[this._isColumn?"minItemHeight":"minItemWidth"];this._splitterPosition=0,this._splitterMinPosition=-1*(t.before.element[this._dimension]()-n),this._splitterMaxPosition=t.after.element[this._dimension]()-n},_onSplitterDrag:function(e,t,n){var o=this._isColumn?n:t;o>this._splitterMinPosition&&o<this._splitterMaxPosition&&(this._splitterPosition=o,e.element.css(this._isColumn?"top":"left",o))},_onSplitterDragStop:function(e){var n=this._getItemsForSplitter(e),o=n.before.element[this._dimension](),i=n.after.element[this._dimension](),r=(this._splitterPosition+o)/(o+i),s=n.before.config[this._dimension]+n.after.config[this._dimension];
n.before.config[this._dimension]=r*s,n.after.config[this._dimension]=(1-r)*s,e.element.css({top:0,left:0}),t.utils.animFrame(t.utils.fnBind(this.callDownwards,this,["setSize"]))}}),t.items.Stack=function(n,o,i){t.items.AbstractContentItem.call(this,n,o,i),this.element=e('<div class="lm_item lm_stack"></div>'),this._activeContentItem=null,this._dropZones={},this._dropSegment=null,this._contentAreaDimensions=null,this._dropIndex=null,this.isStack=!0,this.childElementContainer=e('<div class="lm_items"></div>'),this.header=new t.controls.Header(n,this),n.config.settings.hasHeaders===!0&&this.element.append(this.header.element),this.element.append(this.childElementContainer)},t.utils.extend(t.items.Stack,t.items.AbstractContentItem),t.utils.copy(t.items.Stack.prototype,{setSize:function(){var e,t=this.element.width(),n=this.element.height()-this.layoutManager.config.dimensions.headerHeight;for(this.childElementContainer.width(t),this.childElementContainer.height(n),e=0;e<this.contentItems.length;e++)this.contentItems[e].element.width(t).height(n);this.emit("resize"),this.emitBubblingEvent("stateChanged")},_$init:function(){var e,n;if(this.isInitialised!==!0){for(t.items.AbstractContentItem.prototype._$init.call(this),e=0;e<this.contentItems.length;e++)this.header.createTab(this.contentItems[e]),this.contentItems[e]._$hide();if(this.contentItems.length>0){if(n=this.contentItems[this.config.activeItemIndex||0],!n)throw new Error("Configured activeItemIndex out of bounds");this.setActiveContentItem(n)}}},setActiveContentItem:function(e){if(-1===t.utils.indexOf(e,this.contentItems))throw new Error("contentItem is not a child of this stack");null!==this._activeContentItem&&this._activeContentItem._$hide(),this._activeContentItem=e,this.header.setActiveContentItem(e),e._$show(),this.emit("activeContentItemChanged",e),this.emitBubblingEvent("stateChanged")},getActiveContentItem:function(){return this.header.activeContentItem},addChild:function(e,n){e=this.layoutManager._$normalizeContentItem(e,this),t.items.AbstractContentItem.prototype.addChild.call(this,e,n),this.childElementContainer.append(e.element),this.header.createTab(e,n),this.setActiveContentItem(e),this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},removeChild:function(e,n){var o=t.utils.indexOf(e,this.contentItems);t.items.AbstractContentItem.prototype.removeChild.call(this,e,n),this.header.removeTab(e),this.contentItems.length>0?this.setActiveContentItem(this.contentItems[Math.max(o-1,0)]):this._activeContentItem=null,this.emitBubblingEvent("stateChanged")},_$destroy:function(){t.items.AbstractContentItem.prototype._$destroy.call(this),this.header._$destroy()},_$onDrop:function(e){if("header"===this._dropSegment)return this._resetHeaderDropZone(),void this.addChild(e,this._dropIndex);if("body"===this._dropSegment)return void this.addChild(e);var n,o,i,r="top"===this._dropSegment||"bottom"===this._dropSegment,s="left"===this._dropSegment||"right"===this._dropSegment,a="top"===this._dropSegment||"left"===this._dropSegment,l=r&&this.parent.isColumn||s&&this.parent.isRow,c=r?"column":"row",u=r?"height":"width";e.isComponent&&(o=this.layoutManager.createContentItem({type:"stack"},this),o._$init(),o.addChild(e),e=o),l?(n=t.utils.indexOf(this,this.parent.contentItems),this.parent.addChild(e,a?n:n+1,!0),this.config[u]*=.5,e.config[u]=this.config[u],this.parent.callDownwards("setSize")):(c=r?"column":"row",i=this.layoutManager.createContentItem({type:c},this),this.parent.replaceChild(this,i),i.addChild(e,a?0:void 0,!0),i.addChild(this,a?void 0:0,!0),this.config[u]=50,e.config[u]=50,i.callDownwards("setSize"))},_$highlightDropZone:function(e,t){var n,o;for(n in this._contentAreaDimensions)if(o=this._contentAreaDimensions[n].hoverArea,o.x1<e&&o.x2>e&&o.y1<t&&o.y2>t)return void("header"===n?(this._dropSegment="header",this._highlightHeaderDropZone(e)):(this._resetHeaderDropZone(),this._highlightBodyDropZone(n)))},_$getArea:function(){if(this.element.is(":visible")===!1)return null;var e=t.items.AbstractContentItem.prototype._$getArea,n=e.call(this,this.header.element),o=e.call(this,this.childElementContainer),i=o.x2-o.x1,r=o.y2-o.y1;return this._contentAreaDimensions={header:{hoverArea:{x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2},highlightArea:{x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2}}},this._activeContentItem&&this._activeContentItem.isComponent===!1?n:0===this.contentItems.length?(this._contentAreaDimensions.body={hoverArea:{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},highlightArea:{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}},e.call(this,this.element)):(this._contentAreaDimensions.left={hoverArea:{x1:o.x1,y1:o.y1,x2:o.x1+.25*i,y2:o.y2},highlightArea:{x1:o.x1,y1:o.y1,x2:o.x1+.5*i,y2:o.y2}},this._contentAreaDimensions.top={hoverArea:{x1:o.x1+.25*i,y1:o.y1,x2:o.x1+.75*i,y2:o.y1+.5*r},highlightArea:{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y1+.5*r}},this._contentAreaDimensions.right={hoverArea:{x1:o.x1+.75*i,y1:o.y1,x2:o.x2,y2:o.y2},highlightArea:{x1:o.x1+.5*i,y1:o.y1,x2:o.x2,y2:o.y2}},this._contentAreaDimensions.bottom={hoverArea:{x1:o.x1+.25*i,y1:o.y1+.5*r,x2:o.x1+.75*i,y2:o.y2},highlightArea:{x1:o.x1,y1:o.y1+.5*r,x2:o.x2,y2:o.y2}},e.call(this,this.element))},_highlightHeaderDropZone:function(e){var t,n,o,i,r,s,a,l,c,u=this.header.tabs.length,d=!1;if(0===u)return a=this.header.element.offset(),void this.layoutManager.dropTargetIndicator.highlightArea({x1:a.left,x2:a.left+100,y1:a.top+this.header.element.height()-20,y2:a.top+this.header.element.height()});for(t=0;u>t;t++)if(n=this.header.tabs[t].element,r=n.offset(),i=r.left,o=r.top,l=n.width(),e>i&&i+l>e){d=!0;break}d===!1&&i>e||(c=i+l/2,c>e?(this._dropIndex=t,n.before(this.layoutManager.tabDropPlaceholder)):(this._dropIndex=Math.min(t+1,u),n.after(this.layoutManager.tabDropPlaceholder)),s=this.layoutManager.tabDropPlaceholder.offset().left,this.layoutManager.dropTargetIndicator.highlightArea({x1:s,x2:s+this.layoutManager.tabDropPlaceholder.width(),y1:o,y2:o+n.innerHeight()}))},_resetHeaderDropZone:function(){this.layoutManager.tabDropPlaceholder.remove()},_highlightBodyDropZone:function(e){var t=this._contentAreaDimensions[e].highlightArea;this.layoutManager.dropTargetIndicator.highlightArea(t),this._dropSegment=e}}),t.utils.BubblingEvent=function(e,t){this.name=e,this.origin=t,this.isPropagationStopped=!1},t.utils.BubblingEvent.prototype.stopPropagation=function(){this.isPropagationStopped=!0},t.utils.ConfigMinifier=function(){this._keys=["settings","hasHeaders","constrainDragToContainer","selectionEnabled","dimensions","borderWidth","minItemHeight","minItemWidth","headerHeight","dragProxyWidth","dragProxyHeight","labels","close","maximise","minimise","popout","content","componentName","componentState","id","width","type","height","isClosable","title","popoutWholeStack","openPopouts","parentId","activeItemIndex","reorderEnabled"],this._values=[!0,!1,"row","column","stack","component","close","maximise","minimise","open in new window"]},t.utils.copy(t.utils.ConfigMinifier.prototype,{minifyConfig:function(e){var t={};return this._nextLevel(e,t,"_min"),t},unminifyConfig:function(e){var t={};return this._nextLevel(e,t,"_max"),t},_nextLevel:function(e,t,n){var o,i;for(o in e)e instanceof Array&&(o=parseInt(o,10)),e.hasOwnProperty(o)&&(i=this[n](o,this._keys),"object"==typeof e[o]?(t[i]=e[o]instanceof Array?[]:{},this._nextLevel(e[o],t[i],n)):t[i]=this[n](e[o],this._values))},_min:function(e,n){if("string"==typeof e&&1===e.length)return"___"+e;var o=t.utils.indexOf(e,n);return-1===o?e:o.toString(36)},_max:function(e,t){return"string"==typeof e&&1===e.length?t[parseInt(e,36)]:"string"==typeof e&&"___"===e.substr(0,3)?e[3]:e}}),t.utils.EventHub=function(n){t.utils.EventEmitter.call(this),this._layoutManager=n,this._dontPropagateToParent=null,this._childEventSource=null,this.on(t.utils.EventEmitter.ALL_EVENT,t.utils.fnBind(this._onEventFromThis,this)),e(window).on("gl_child_event",t.utils.fnBind(this._onEventFromChild,this))},t.utils.EventHub.prototype._onEventFromThis=function(){var e=Array.prototype.slice.call(arguments);this._layoutManager.isSubWindow&&e[0]!==this._dontPropagateToParent&&this._propagateToParent(e),this._propagateToChildren(e),this._dontPropagateToParent=null,this._childEventSource=null},t.utils.EventHub.prototype._$onEventFromParent=function(e){this._dontPropagateToParent=e[0],this.emit.apply(this,e)},t.utils.EventHub.prototype._onEventFromChild=function(e){this._childEventSource=e.originalEvent.__gl,this.emit.apply(this,e.originalEvent.__glArgs)},t.utils.EventHub.prototype._propagateToParent=function(e){var t,n="gl_child_event";document.createEvent?(t=window.opener.document.createEvent("HTMLEvents"),t.initEvent(n,!0,!0)):(t=window.opener.document.createEventObject(),t.eventType=n),t.eventName=n,t.__glArgs=e,t.__gl=this._layoutManager,document.createEvent?window.opener.dispatchEvent(t):window.opener.fireEvent("on"+t.eventType,t)},t.utils.EventHub.prototype._propagateToChildren=function(e){var t,n;for(n=0;n<this._layoutManager.openPopouts.length;n++)t=this._layoutManager.openPopouts[n].getGlInstance(),t!==this._childEventSource&&t.eventHub._$onEventFromParent(e)},t.utils.ReactComponentHandler=function(e,t){this._reactComponent=null,this._originalComponentWillUpdate=null,this._container=e,this._initialState=t,this._reactClass=this._getReactClass(),this._container.on("open",this._render,this),this._container.on("destroy",this._destroy,this)},t.utils.copy(t.utils.ReactComponentHandler.prototype,{_render:function(){this._reactComponent=ReactDOM.render(this._getReactComponent(),this._container.getElement()[0]),this._originalComponentWillUpdate=this._reactComponent.componentWillUpdate||function(){},this._reactComponent.componentWillUpdate=this._onUpdate.bind(this),this._container.getState()&&this._reactComponent.setState(this._container.getState())},_destroy:function(){ReactDOM.unmountComponentAtNode(this._container.getElement()[0]),this._container.off("open",this._render,this),this._container.off("destroy",this._destroy,this)},_onUpdate:function(e,t){this._container.setState(t),this._originalComponentWillUpdate.call(this._reactComponent,e,t)},_getReactClass:function(){var e,t=this._container._config.component;if(!t)throw new Error("No react component name. type: react-component needs a field `component`");if(e=this._container.layoutManager.getComponent(t),!e)throw new Error('React component "'+t+'" not found. Please register all components with GoldenLayout using `registerComponent(name, component)`');return e},_getReactComponent:function(){var t={glEventHub:this._container.layoutManager.eventHub,glContainer:this._container},n=e.extend(t,this._container._config.props);return React.createElement(this._reactClass,n)}})}(window.$),function(){function e(e,t){var n=e.split("."),o=N;n[0]in o||!o.execScript||o.execScript("var "+n[0]);for(var i;n.length&&(i=n.shift());)n.length||void 0===t?o=o[i]?o[i]:o[i]={}:o[i]=t}function t(e,t){function n(){}n.prototype=t.prototype,e.l=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.k=function(e,n,o){for(var i=Array(arguments.length-2),r=2;r<arguments.length;r++)i[r-2]=arguments[r];return t.prototype[n].apply(e,i)}}function n(){}function o(e){this.message=e||""}function i(){}function r(){}function s(e){this.message=e||""}function a(){}function l(){}function c(){}function u(e){this.message=e||""}function d(){}function p(){this.c=[]}function g(e){this.message=e||""}function h(e){this.a=[],e instanceof a&&this.d(e)}function m(e){this.e=e,this.d=0}function f(e){this.a=[],e instanceof a&&this.d(e)}function y(e){this.e=e,this.d=0}function v(){this.b={}}function b(){}function j(e){this.a=[],e instanceof a&&this.d(e)}function x(e){this.e=e,this.d=0}function E(e){return null==e?null:e.parent}function S(e,t){null!==e&&(e.color=t)}function C(e){return null==e?null:e.left}function I(e){return null==e?null:e.right}function L(){this.b=null,this.f=0}function w(e,t){if(null!=t){var n=t.right;t.right=n.left,null!=n.left&&(n.left.parent=t),n.parent=t.parent,null==t.parent?e.b=n:t.parent.left==t?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n}}function P(e,t){if(null!=t){var n=t.left;t.left=n.right,null!=n.right&&(n.right.parent=t),n.parent=t.parent,null==t.parent?e.b=n:t.parent.right==t?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n}}function T(e){if(null===e)return null;if(null!==e.right)for(var t=e.right;null!==t.left;)t=t.left;else for(t=e.parent;null!==t&&e===t.right;)e=t,t=t.parent;return t}var N=this;e("javascript.util.Iterator",n),n.prototype.hasNext=n.prototype.b,n.prototype.next=n.prototype.c,n.prototype.remove=n.prototype.a,t(o,Error),e("javascript.util.OperationNotSupported",o),o.prototype.name="OperationNotSupported",e("javascript.util.Map",i),t(r,i),e("javascript.util.SortedMap",r),t(s,Error),e("javascript.util.IndexOutOfBoundsException",s),s.prototype.name="IndexOutOfBoundsException",e("javascript.util.Collection",a),t(l,a),e("javascript.util.Set",l),t(c,l),e("javascript.util.SortedSet",c),t(u,Error),e("javascript.util.EmptyStackException",u),u.prototype.name="EmptyStackException",t(d,a),e("javascript.util.List",d),t(p,d),e("javascript.util.Stack",p),p.prototype.push=function(e){return this.c.push(e),e},p.prototype.push=p.prototype.push,p.prototype.d=function(){if(0===this.c.length)throw new u;return this.c.pop()},p.prototype.pop=p.prototype.d,p.prototype.g=function(){if(0===this.c.length)throw new u;return this.c[this.c.length-1]},p.prototype.peek=p.prototype.g,p.prototype.a=function(){return 0===this.c.length},p.prototype.empty=p.prototype.a,p.prototype.f=function(){return this.a()},p.prototype.isEmpty=p.prototype.f,p.prototype.i=function(e){return this.c.indexOf(e)},p.prototype.search=p.prototype.i,p.prototype.b=function(){return this.c.length},p.prototype.size=p.prototype.b,p.prototype.h=function(){for(var e=[],t=0,n=this.c.length;t<n;t++)e.push(this.c[t]);return e},p.prototype.toArray=p.prototype.h,t(g,Error),e("javascript.util.NoSuchElementException",g),g.prototype.name="NoSuchElementException",t(h,c),e("javascript.util.TreeSet",h),h.prototype.g=function(e){for(var t=0,n=this.a.length;t<n;t++)if(0===this.a[t].compareTo(e))return!0;return!1},h.prototype.contains=h.prototype.g,h.prototype.c=function(e){if(this.g(e))return!1;for(var t=0,n=this.a.length;t<n;t++)if(1===this.a[t].compareTo(e))return this.a.splice(t,0,e),!0;return this.a.push(e),!0},h.prototype.add=h.prototype.c,h.prototype.d=function(e){for(e=e.e();e.b();)this.c(e.c());return!0},h.prototype.addAll=h.prototype.d,h.prototype.i=function(){throw new o},h.prototype.remove=h.prototype.i,h.prototype.b=function(){return this.a.length},h.prototype.size=h.prototype.b,h.prototype.f=function(){return 0===this.a.length},h.prototype.isEmpty=h.prototype.f,h.prototype.h=function(){for(var e=[],t=0,n=this.a.length;t<n;t++)e.push(this.a[t]);return e},h.prototype.toArray=h.prototype.h,h.prototype.e=function(){return new m(this)},h.prototype.iterator=h.prototype.e,e("$jscomp.scope.Iterator_",m),m.prototype.c=function(){if(this.d===this.e.b())throw new g;return this.e.a[this.d++]},m.prototype.next=m.prototype.c,m.prototype.b=function(){return this.d<this.e.b()},m.prototype.hasNext=m.prototype.b,m.prototype.a=function(){throw new o},m.prototype.remove=m.prototype.a,t(f,d),e("javascript.util.ArrayList",f),f.prototype.c=function(e){return this.a.push(e),!0},f.prototype.add=f.prototype.c,f.prototype.d=function(e){for(e=e.e();e.b();)this.c(e.c());return!0},f.prototype.addAll=f.prototype.d,f.prototype.j=function(e,t){var n=this.a[e];return this.a[e]=t,n},f.prototype.set=f.prototype.j,f.prototype.e=function(){return new y(this)},f.prototype.iterator=f.prototype.e,f.prototype.g=function(e){if(0>e||e>=this.b())throw new s;return this.a[e]},f.prototype.get=f.prototype.g,f.prototype.f=function(){return 0===this.a.length},f.prototype.isEmpty=f.prototype.f,f.prototype.b=function(){return this.a.length},f.prototype.size=f.prototype.b,f.prototype.h=function(){for(var e=[],t=0,n=this.a.length;t<n;t++)e.push(this.a[t]);return e},f.prototype.toArray=f.prototype.h,f.prototype.i=function(e){for(var t=!1,n=0,o=this.a.length;n<o;n++)if(this.a[n]===e){this.a.splice(n,1),t=!0;break}return t},f.prototype.remove=f.prototype.i,e("$jscomp.scope.Iterator_$1",y),y.prototype.c=function(){if(this.d===this.e.b())throw new g;return this.e.g(this.d++)},y.prototype.next=y.prototype.c,y.prototype.b=function(){return this.d<this.e.b()},y.prototype.hasNext=y.prototype.b,y.prototype.a=function(){throw new o},y.prototype.remove=y.prototype.a,t(v,i),e("javascript.util.HashMap",v),v.prototype.a=function(e){return this.b[e]||null},v.prototype.get=v.prototype.a,v.prototype.d=function(e,t){return this.b[e]=t},v.prototype.put=v.prototype.d,v.prototype.c=function(){var e,t=new f;for(e in this.b)this.b.hasOwnProperty(e)&&t.c(this.b[e]);return t},v.prototype.values=v.prototype.c,v.prototype.e=function(){return this.c().b()},v.prototype.size=v.prototype.e,e("javascript.util.Arrays",b),b.sort=function(){var e,t,n,o=arguments[0];if(1===arguments.length)o.sort();else if(2===arguments.length)t=arguments[1],n=function(e,n){return t.compare(e,n)},o.sort(n);else if(3===arguments.length)for(e=o.slice(arguments[1],arguments[2]),e.sort(),n=o.slice(0,arguments[1]).concat(e,o.slice(arguments[2],o.length)),o.splice(0,o.length),e=0;e<n.length;e++)o.push(n[e]);else if(4===arguments.length)for(e=o.slice(arguments[1],arguments[2]),t=arguments[3],n=function(e,n){return t.compare(e,n)},e.sort(n),n=o.slice(0,arguments[1]).concat(e,o.slice(arguments[2],o.length)),o.splice(0,o.length),e=0;e<n.length;e++)o.push(n[e])},b.asList=function(e){for(var t=new f,n=0,o=e.length;n<o;n++)t.c(e[n]);return t},t(j,l),e("javascript.util.HashSet",j),j.prototype.g=function(e){for(var t=0,n=this.a.length;t<n;t++)if(this.a[t]===e)return!0;return!1},j.prototype.contains=j.prototype.g,j.prototype.c=function(e){return!this.g(e)&&(this.a.push(e),!0)},j.prototype.add=j.prototype.c,j.prototype.d=function(e){for(e=e.e();e.b();)this.c(e.c());return!0},j.prototype.addAll=j.prototype.d,j.prototype.i=function(){throw new o},j.prototype.remove=j.prototype.i,j.prototype.b=function(){return this.a.length},j.prototype.size=j.prototype.b,j.prototype.f=function(){return 0===this.a.length},j.prototype.isEmpty=j.prototype.f,j.prototype.h=function(){for(var e=[],t=0,n=this.a.length;t<n;t++)e.push(this.a[t]);return e},j.prototype.toArray=j.prototype.h,j.prototype.e=function(){return new x(this)},j.prototype.iterator=j.prototype.e,e("$jscomp.scope.Iterator_$2",x),x.prototype.c=function(){if(this.d===this.e.b())throw new g;return this.e.a[this.d++]},x.prototype.next=x.prototype.c,x.prototype.b=function(){return this.d<this.e.b()},x.prototype.hasNext=x.prototype.b,x.prototype.a=function(){throw new o},x.prototype.remove=x.prototype.a,t(L,r),e("javascript.util.TreeMap",L),L.prototype.a=function(e){for(var t=this.b;null!==t;){var n=e.compareTo(t.key);if(0>n)t=t.left;else{if(!(0<n))return t.value;t=t.right}}return null},L.prototype.get=L.prototype.a,L.prototype.d=function(e,t){if(null===this.b)return this.b={key:e,value:t,left:null,right:null,parent:null,color:0},this.f=1,null;var n,o,i=this.b;do if(n=i,o=e.compareTo(i.key),0>o)i=i.left;else{if(!(0<o))return n=i.value,i.value=t,n;i=i.right}while(null!==i);for(i={key:e,left:null,right:null,value:t,parent:n,color:0},0>o?n.left=i:n.right=i,i.color=1;null!=i&&i!=this.b&&1==i.parent.color;)E(i)==C(E(E(i)))?(n=I(E(E(i))),1==(null==n?0:n.color)?(S(E(i),0),S(n,0),S(E(E(i)),1),i=E(E(i))):(i==I(E(i))&&(i=E(i),w(this,i)),S(E(i),0),S(E(E(i)),1),P(this,E(E(i))))):(n=C(E(E(i))),1==(null==n?0:n.color)?(S(E(i),0),S(n,0),S(E(E(i)),1),i=E(E(i))):(i==C(E(i))&&(i=E(i),P(this,i)),S(E(i),0),S(E(E(i)),1),w(this,E(E(i)))));return this.b.color=0,this.f++,null},L.prototype.put=L.prototype.d,L.prototype.c=function(){var e,t=new f;if(e=this.b,null!=e)for(;null!=e.left;)e=e.left;if(null!==e)for(t.c(e.value);null!==(e=T(e));)t.c(e.value);return t},L.prototype.values=L.prototype.c,L.prototype.e=function(){return this.f},L.prototype.size=L.prototype.e}(),jsts={version:"0.17.0",algorithm:{distance:{},locate:{}},error:{},geom:{util:{}},geomgraph:{index:{}},index:{bintree:{},chain:{},kdtree:{},quadtree:{},strtree:{}},io:{},noding:{snapround:{}},operation:{buffer:{},distance:{},linemerge:{},overlay:{snap:{}},polygonize:{},predicate:{},relate:{},union:{},valid:{}},planargraph:{},precision:{},simplify:{},triangulate:{quadedge:{}},densify:{},util:{}},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),jsts.abstractFunc=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.error={},jsts.error.IllegalArgumentError=function(e){this.name="IllegalArgumentError",this.message=e},jsts.error.IllegalArgumentError.prototype=new Error,jsts.error.TopologyError=function(e,t){this.name="TopologyError",this.message=t?e+" [ "+t+" ]":e},jsts.error.TopologyError.prototype=new Error,jsts.error.AbstractMethodInvocationError=function(){this.name="AbstractMethodInvocationError",this.message="Abstract method called, should be implemented in subclass."},jsts.error.AbstractMethodInvocationError.prototype=new Error,jsts.error.NotImplementedError=function(){this.name="NotImplementedError",this.message="This method has not yet been implemented."},jsts.error.NotImplementedError.prototype=new Error,jsts.error.NotRepresentableError=function(e){this.name="NotRepresentableError",this.message=e},jsts.error.NotRepresentableError.prototype=new Error,jsts.error.LocateFailureError=function(e){this.name="LocateFailureError",this.message=e},jsts.error.LocateFailureError.prototype=new Error,"undefined"!=typeof module&&(module.exports=jsts),jsts.geom.GeometryFilter=function(){},jsts.geom.GeometryFilter.prototype.filter=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.util.PolygonExtracter=function(e){this.comps=e},jsts.geom.util.PolygonExtracter.prototype=new jsts.geom.GeometryFilter,jsts.geom.util.PolygonExtracter.prototype.comps=null,jsts.geom.util.PolygonExtracter.getPolygons=function(e,t){return void 0===t&&(t=[]),e instanceof jsts.geom.Polygon?t.push(e):e instanceof jsts.geom.GeometryCollection&&e.apply(new jsts.geom.util.PolygonExtracter(t)),t},jsts.geom.util.PolygonExtracter.prototype.filter=function(e){e instanceof jsts.geom.Polygon&&this.comps.push(e)},jsts.io.WKTParser=function(e){this.geometryFactory=e||new jsts.geom.GeometryFactory,this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/}},jsts.io.WKTParser.prototype.read=function(e){var t,n,o;e=e.replace(/[\n\r]/g," ");var i=this.regExes.typeStr.exec(e);if(e.search("EMPTY")!==-1&&(i=this.regExes.emptyTypeStr.exec(e),i[2]=void 0),i&&(n=i[1].toLowerCase(),o=i[2],this.parse[n]&&(t=this.parse[n].apply(this,[o]))),void 0===t)throw new Error("Could not parse WKT "+e);return t},jsts.io.WKTParser.prototype.write=function(e){return this.extractGeometry(e)},jsts.io.WKTParser.prototype.extractGeometry=function(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();if(!this.extract[t])return null;var n,o=t.toUpperCase();return n=e.isEmpty()?o+" EMPTY":o+"("+this.extract[t].apply(this,[e])+")"},jsts.io.WKTParser.prototype.extract={coordinate:function(e){return e.x+" "+e.y},point:function(e){return e.coordinate.x+" "+e.coordinate.y},multipoint:function(e){for(var t=[],n=0,o=e.geometries.length;n<o;++n)t.push("("+this.extract.point.apply(this,[e.geometries[n]])+")");return t.join(",")},linestring:function(e){for(var t=[],n=0,o=e.points.length;n<o;++n)t.push(this.extract.coordinate.apply(this,[e.points[n]]));return t.join(",")},multilinestring:function(e){for(var t=[],n=0,o=e.geometries.length;n<o;++n)t.push("("+this.extract.linestring.apply(this,[e.geometries[n]])+")");return t.join(",")},polygon:function(e){var t=[];t.push("("+this.extract.linestring.apply(this,[e.shell])+")");for(var n=0,o=e.holes.length;n<o;++n)t.push("("+this.extract.linestring.apply(this,[e.holes[n]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],n=0,o=e.geometries.length;n<o;++n)t.push("("+this.extract.polygon.apply(this,[e.geometries[n]])+")");return t.join(",")},geometrycollection:function(e){for(var t=[],n=0,o=e.geometries.length;n<o;++n)t.push(this.extractGeometry.apply(this,[e.geometries[n]]));return t.join(",")}},jsts.io.WKTParser.prototype.parse={point:function(e){if(void 0===e)return this.geometryFactory.createPoint(null);var t=e.trim().split(this.regExes.spaces);return this.geometryFactory.createPoint(new jsts.geom.Coordinate(t[0],t[1]))},multipoint:function(e){if(void 0===e)return this.geometryFactory.createMultiPoint(null);for(var t,n=e.trim().split(","),o=[],i=0,r=n.length;i<r;++i)t=n[i].replace(this.regExes.trimParens,"$1"),o.push(this.parse.point.apply(this,[t]));return this.geometryFactory.createMultiPoint(o)},linestring:function(e){if(void 0===e)return this.geometryFactory.createLineString(null);for(var t,n=e.trim().split(","),o=[],i=0,r=n.length;i<r;++i)t=n[i].trim().split(this.regExes.spaces),o.push(new jsts.geom.Coordinate(t[0],t[1]));return this.geometryFactory.createLineString(o)},linearring:function(e){if(void 0===e)return this.geometryFactory.createLinearRing(null);for(var t,n=e.trim().split(","),o=[],i=0,r=n.length;i<r;++i)t=n[i].trim().split(this.regExes.spaces),o.push(new jsts.geom.Coordinate(t[0],t[1]));return this.geometryFactory.createLinearRing(o)},multilinestring:function(e){if(void 0===e)return this.geometryFactory.createMultiLineString(null);for(var t,n=e.trim().split(this.regExes.parenComma),o=[],i=0,r=n.length;i<r;++i)t=n[i].replace(this.regExes.trimParens,"$1"),o.push(this.parse.linestring.apply(this,[t]));return this.geometryFactory.createMultiLineString(o)},polygon:function(e){if(void 0===e)return this.geometryFactory.createPolygon(null);for(var t,n,o,i,r=e.trim().split(this.regExes.parenComma),s=[],a=0,l=r.length;a<l;++a)t=r[a].replace(this.regExes.trimParens,"$1"),n=this.parse.linestring.apply(this,[t]),o=this.geometryFactory.createLinearRing(n.points),0===a?i=o:s.push(o);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(e){if(void 0===e)return this.geometryFactory.createMultiPolygon(null);for(var t,n=e.trim().split(this.regExes.doubleParenComma),o=[],i=0,r=n.length;i<r;++i)t=n[i].replace(this.regExes.trimParens,"$1"),o.push(this.parse.polygon.apply(this,[t]));return this.geometryFactory.createMultiPolygon(o)},geometrycollection:function(e){if(void 0===e)return this.geometryFactory.createGeometryCollection(null);e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var t=e.trim().split("|"),n=[],o=0,i=t.length;o<i;++o)n.push(jsts.io.WKTParser.prototype.read.apply(this,[t[o]]));return this.geometryFactory.createGeometryCollection(n)}},jsts.index.ItemVisitor=function(){},jsts.index.ItemVisitor.prototype.visitItem=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.CGAlgorithms=function(){},jsts.algorithm.CGAlgorithms.CLOCKWISE=-1,jsts.algorithm.CGAlgorithms.RIGHT=jsts.algorithm.CGAlgorithms.CLOCKWISE,jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE=1,jsts.algorithm.CGAlgorithms.LEFT=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE,jsts.algorithm.CGAlgorithms.COLLINEAR=0,jsts.algorithm.CGAlgorithms.STRAIGHT=jsts.algorithm.CGAlgorithms.COLLINEAR,jsts.algorithm.CGAlgorithms.orientationIndex=function(e,t,n){var o,i,r,s;return o=t.x-e.x,i=t.y-e.y,r=n.x-t.x,s=n.y-t.y,jsts.algorithm.RobustDeterminant.signOfDet2x2(o,i,r,s)},jsts.algorithm.CGAlgorithms.isPointInRing=function(e,t){return jsts.algorithm.CGAlgorithms.locatePointInRing(e,t)!==jsts.geom.Location.EXTERIOR},jsts.algorithm.CGAlgorithms.locatePointInRing=function(e,t){return jsts.algorithm.RayCrossingCounter.locatePointInRing(e,t)},jsts.algorithm.CGAlgorithms.isOnLine=function(e,t){var n,o,i,r,s;for(n=new jsts.algorithm.RobustLineIntersector,o=1,i=t.length;o<i;o++)if(r=t[o-1],s=t[o],n.computeIntersection(e,r,s),n.hasIntersection())return!0;return!1},jsts.algorithm.CGAlgorithms.isCCW=function(e){var t,n,o,i,r,s,a,l,c,u,d;if(t=e.length-1,t<3)throw new jsts.IllegalArgumentError("Ring has fewer than 3 points, so orientation cannot be determined");for(n=e[0],o=0,c=1;c<=t;c++)i=e[c],i.y>n.y&&(n=i,o=c);r=o;do r-=1,r<0&&(r=t);while(e[r].equals2D(n)&&r!==o);s=o;do s=(s+1)%t;while(e[s].equals2D(n)&&s!==o);return a=e[r],l=e[s],!(a.equals2D(n)||l.equals2D(n)||a.equals2D(l))&&(u=jsts.algorithm.CGAlgorithms.computeOrientation(a,n,l),d=!1,d=0===u?a.x>l.x:u>0)},jsts.algorithm.CGAlgorithms.computeOrientation=function(e,t,n){return jsts.algorithm.CGAlgorithms.orientationIndex(e,t,n)},jsts.algorithm.CGAlgorithms.distancePointLine=function(e,t,n){if(t instanceof jsts.geom.Coordinate||jsts.algorithm.CGAlgorithms.distancePointLine2.apply(this,arguments),t.x===n.x&&t.y===n.y)return e.distance(t);var o,i;return o=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)),o<=0?e.distance(t):o>=1?e.distance(n):(i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)),Math.abs(i)*Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)))},jsts.algorithm.CGAlgorithms.distancePointLinePerpendicular=function(e,t,n){var o=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y));return Math.abs(o)*Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y))},jsts.algorithm.CGAlgorithms.distancePointLine2=function(e,t){var n,o,i,r;if(0===t.length)throw new jsts.error.IllegalArgumentError("Line array must contain at least one vertex");for(n=e.distance(t[0]),o=0,i=t.length-1;o<i;o++)r=jsts.algorithm.CGAlgorithms.distancePointLine(e,t[o],t[o+1]),r<n&&(n=r);return n},jsts.algorithm.CGAlgorithms.distanceLineLine=function(e,t,n,o){if(e.equals(t))return jsts.algorithm.CGAlgorithms.distancePointLine(e,n,o);if(n.equals(o))return jsts.algorithm.CGAlgorithms.distancePointLine(o,e,t);var i,r,s,a,l,c;return i=(e.y-n.y)*(o.x-n.x)-(e.x-n.x)*(o.y-n.y),r=(t.x-e.x)*(o.y-n.y)-(t.y-e.y)*(o.x-n.x),s=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y),a=(t.x-e.x)*(o.y-n.y)-(t.y-e.y)*(o.x-n.x),0===r||0===a?Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(e,n,o),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(t,n,o),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(n,e,t),jsts.algorithm.CGAlgorithms.distancePointLine(o,e,t)))):(l=s/a,c=i/r,c<0||c>1||l<0||l>1?Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(e,n,o),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(t,n,o),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(n,e,t),jsts.algorithm.CGAlgorithms.distancePointLine(o,e,t)))):0)},jsts.algorithm.CGAlgorithms.signedArea=function(e){if(e.length<3)return 0;var t,n,o,i,r,s,a;for(t=0,n=0,o=e.length-1;n<o;n++)i=e[n].x,r=e[n].y,s=e[n+1].x,a=e[n+1].y,t+=(i+s)*(a-r);return-t/2},jsts.algorithm.CGAlgorithms.signedArea=function(e){var t,n,o,i,r,s,a,l;if(t=e.length,t<3)return 0;for(n=0,o=e[0],i=o.x,r=o.y,s=1;s<t;s++)o=e[s],a=o.x,l=o.y,n+=(i+a)*(l-r),i=a,r=l;return-n/2},jsts.algorithm.CGAlgorithms.computeLength=function(e){var t,n,o,i,r,s,a,l,c,u,d=e.length;if(d<=1)return 0;for(t=0,l=e[0],n=l.x,o=l.y,c=1,u=d,c;c<d;c++)l=e[c],i=l.x,r=l.y,s=i-n,a=r-o,t+=Math.sqrt(s*s+a*a),n=i,o=r;return t},jsts.algorithm.CGAlgorithms.length=function(){},jsts.algorithm.Angle=function(){},jsts.algorithm.Angle.PI_TIMES_2=2*Math.PI,jsts.algorithm.Angle.PI_OVER_2=Math.PI/2,jsts.algorithm.Angle.PI_OVER_4=Math.PI/4,jsts.algorithm.Angle.COUNTERCLOCKWISE=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE,jsts.algorithm.Angle.CLOCKWISE=jsts.algorithm.CGAlgorithms.CLOCKWISE,jsts.algorithm.Angle.NONE=jsts.algorithm.CGAlgorithms.COLLINEAR,jsts.algorithm.Angle.toDegrees=function(e){return 180*e/Math.PI},jsts.algorithm.Angle.toRadians=function(e){return e*Math.PI/180},jsts.algorithm.Angle.angle=function(){return 1===arguments.length?jsts.algorithm.Angle.angleFromOrigo(arguments[0]):jsts.algorithm.Angle.angleBetweenCoords(arguments[0],arguments[1])},jsts.algorithm.Angle.angleBetweenCoords=function(e,t){var n,o;
return n=t.x-e.x,o=t.y-e.y,Math.atan2(o,n)},jsts.algorithm.Angle.angleFromOrigo=function(e){return Math.atan2(e.y,e.x)},jsts.algorithm.Angle.isAcute=function(e,t,n){var o,i,r,s,a;return o=e.x-t.x,i=e.y-t.y,r=n.x-t.x,s=n.y-t.y,a=o*r+i*s,a>0},jsts.algorithm.Angle.isObtuse=function(e,t,n){var o,i,r,s,a;return o=e.x-t.x,i=e.y-t.y,r=n.x-t.x,s=n.y-t.y,a=o*r+i*s,a<0},jsts.algorithm.Angle.angleBetween=function(e,t,n){var o,i;return o=jsts.algorithm.Angle.angle(t,e),i=jsts.algorithm.Angle.angle(t,n),jsts.algorithm.Angle.diff(o,i)},jsts.algorithm.Angle.angleBetweenOriented=function(e,t,n){var o,i,r;return o=jsts.algorithm.Angle.angle(t,e),i=jsts.algorithm.Angle.angle(t,n),r=i-o,r<=-Math.PI?r+jsts.algorithm.Angle.PI_TIMES_2:r>Math.PI?r-jsts.algorithm.Angle.PI_TIMES_2:r},jsts.algorithm.Angle.interiorAngle=function(e,t,n){var o,i;return o=jsts.algorithm.Angle.angle(t,e),i=jsts.algorithm.Angle.angle(t,n),Math.abs(i-o)},jsts.algorithm.Angle.getTurn=function(e,t){var n=Math.sin(t-e);return n>0?jsts.algorithm.Angle.COUNTERCLOCKWISE:n<0?jsts.algorithm.Angle.CLOCKWISE:jsts.algorithm.Angle.NONE},jsts.algorithm.Angle.normalize=function(e){for(;e>Math.PI;)e-=jsts.algorithm.Angle.PI_TIMES_2;for(;e<=-Math.PI;)e+=jsts.algorithm.Angle.PI_TIMES_2;return e},jsts.algorithm.Angle.normalizePositive=function(e){if(e<0){for(;e<0;)e+=jsts.algorithm.Angle.PI_TIMES_2;e>=jsts.algorithm.Angle.PI_TIMES_2&&(e=0)}else{for(;e>=jsts.algorithm.Angle.PI_TIMES_2;)e-=jsts.algorithm.Angle.PI_TIMES_2;e<0&&(e=0)}return e},jsts.algorithm.Angle.diff=function(e,t){var n;return n=e<t?t-e:e-t,n>Math.PI&&(n=2*Math.PI-n),n},jsts.geom.GeometryComponentFilter=function(){},jsts.geom.GeometryComponentFilter.prototype.filter=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.util.LinearComponentExtracter=function(e,t){this.lines=e,this.isForcedToLineString=t},jsts.geom.util.LinearComponentExtracter.prototype=new jsts.geom.GeometryComponentFilter,jsts.geom.util.LinearComponentExtracter.prototype.lines=null,jsts.geom.util.LinearComponentExtracter.prototype.isForcedToLineString=!1,jsts.geom.util.LinearComponentExtracter.getLines=function(e,t){if(1==arguments.length)return jsts.geom.util.LinearComponentExtracter.getLines5.apply(this,arguments);if(2==arguments.length&&"boolean"==typeof t)return jsts.geom.util.LinearComponentExtracter.getLines6.apply(this,arguments);if(2==arguments.length&&e instanceof jsts.geom.Geometry)return jsts.geom.util.LinearComponentExtracter.getLines3.apply(this,arguments);if(3==arguments.length&&e instanceof jsts.geom.Geometry)return jsts.geom.util.LinearComponentExtracter.getLines4.apply(this,arguments);if(3==arguments.length)return jsts.geom.util.LinearComponentExtracter.getLines2.apply(this,arguments);for(var n=0;n<e.length;n++){var o=e[n];jsts.geom.util.LinearComponentExtracter.getLines3(o,t)}return t},jsts.geom.util.LinearComponentExtracter.getLines2=function(e,t,n){for(var o=0;o<e.length;o++){var i=e[o];jsts.geom.util.LinearComponentExtracter.getLines4(i,t,n)}return t},jsts.geom.util.LinearComponentExtracter.getLines3=function(e,t){return e instanceof LineString?t.add(e):e.apply(new jsts.geom.util.LinearComponentExtracter(t)),t},jsts.geom.util.LinearComponentExtracter.getLines4=function(e,t,n){return e.apply(new jsts.geom.util.LinearComponentExtracter(t,n)),t},jsts.geom.util.LinearComponentExtracter.getLines5=function(e){return jsts.geom.util.LinearComponentExtracter.getLines6(e,!1)},jsts.geom.util.LinearComponentExtracter.getLines6=function(e,t){var n=[];return e.apply(new jsts.geom.util.LinearComponentExtracter(n,t)),n},jsts.geom.util.LinearComponentExtracter.prototype.setForceToLineString=function(e){this.isForcedToLineString=e},jsts.geom.util.LinearComponentExtracter.prototype.filter=function(e){if(this.isForcedToLineString&&e instanceof jsts.geom.LinearRing){var t=e.getFactory().createLineString(e.getCoordinateSequence());return void this.lines.push(t)}(e instanceof jsts.geom.LineString||e instanceof jsts.geom.LinearRing)&&this.lines.push(e)},jsts.geom.Location=function(){},jsts.geom.Location.INTERIOR=0,jsts.geom.Location.BOUNDARY=1,jsts.geom.Location.EXTERIOR=2,jsts.geom.Location.NONE=-1,jsts.geom.Location.toLocationSymbol=function(e){switch(e){case jsts.geom.Location.EXTERIOR:return"e";case jsts.geom.Location.BOUNDARY:return"b";case jsts.geom.Location.INTERIOR:return"i";case jsts.geom.Location.NONE:return"-"}throw new jsts.IllegalArgumentError("Unknown location value: "+e)},function(){jsts.io.GeoJSONReader=function(e){this.geometryFactory=e||new jsts.geom.GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new jsts.io.GeoJSONParser(this.geometryFactory)},jsts.io.GeoJSONReader.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===jsts.geom.PrecisionModel.FIXED&&this.reducePrecision(t),t},jsts.io.GeoJSONReader.prototype.reducePrecision=function(e){var t,n;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(t=0,n=e.points.length;t<n;t++)this.precisionModel.makePrecise(e.points[t]);else if(e.geometries)for(t=0,n=e.geometries.length;t<n;t++)this.reducePrecision(e.geometries[t])}}(),jsts.geom.Geometry=function(e){this.factory=e},jsts.geom.Geometry.prototype.envelope=null,jsts.geom.Geometry.prototype.factory=null,jsts.geom.Geometry.prototype.getGeometryType=function(){return"Geometry"},jsts.geom.Geometry.hasNonEmptyElements=function(e){var t;for(t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1},jsts.geom.Geometry.hasNullElements=function(e){var t;for(t=0;t<e.length;t++)if(null===e[t])return!0;return!1},jsts.geom.Geometry.prototype.getFactory=function(){return null!==this.factory&&void 0!==this.factory||(this.factory=new jsts.geom.GeometryFactory),this.factory},jsts.geom.Geometry.prototype.getNumGeometries=function(){return 1},jsts.geom.Geometry.prototype.getGeometryN=function(e){return this},jsts.geom.Geometry.prototype.getPrecisionModel=function(){return this.getFactory().getPrecisionModel()},jsts.geom.Geometry.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getCoordinates=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getNumPoints=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.isSimple=function(){this.checkNotGeometryCollection(this);var e=new jsts.operation.IsSimpleOp(this);return e.isSimple()},jsts.geom.Geometry.prototype.isValid=function(){var e=new jsts.operation.valid.IsValidOp(this);return e.isValid()},jsts.geom.Geometry.prototype.isEmpty=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.distance=function(e){return jsts.operation.distance.DistanceOp.distance(this,e)},jsts.geom.Geometry.prototype.isWithinDistance=function(e,t){var n=this.getEnvelopeInternal().distance(e.getEnvelopeInternal());return!(n>t)&&DistanceOp.isWithinDistance(this,e,t)},jsts.geom.Geometry.prototype.isRectangle=function(){return!1},jsts.geom.Geometry.prototype.getArea=function(){return 0},jsts.geom.Geometry.prototype.getLength=function(){return 0},jsts.geom.Geometry.prototype.getCentroid=function(){if(this.isEmpty())return null;var e,t=null,n=this.getDimension();return 0===n?(e=new jsts.algorithm.CentroidPoint,e.add(this),t=e.getCentroid()):1===n?(e=new jsts.algorithm.CentroidLine,e.add(this),t=e.getCentroid()):(e=new jsts.algorithm.CentroidArea,e.add(this),t=e.getCentroid()),this.createPointFromInternalCoord(t,this)},jsts.geom.Geometry.prototype.getInteriorPoint=function(){var e,t=null,n=this.getDimension();return 0===n?(e=new jsts.algorithm.InteriorPointPoint(this),t=e.getInteriorPoint()):1===n?(e=new jsts.algorithm.InteriorPointLine(this),t=e.getInteriorPoint()):(e=new jsts.algorithm.InteriorPointArea(this),t=e.getInteriorPoint()),this.createPointFromInternalCoord(t,this)},jsts.geom.Geometry.prototype.getDimension=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getBoundary=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getBoundaryDimension=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},jsts.geom.Geometry.prototype.getEnvelopeInternal=function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),this.envelope},jsts.geom.Geometry.prototype.disjoint=function(e){return!this.intersects(e)},jsts.geom.Geometry.prototype.touches=function(e){return!!this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&this.relate(e).isTouches(this.getDimension(),e.getDimension())},jsts.geom.Geometry.prototype.intersects=function(e){return!!this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&(this.isRectangle()?jsts.operation.predicate.RectangleIntersects.intersects(this,e):e.isRectangle()?jsts.operation.predicate.RectangleIntersects.intersects(e,this):this.relate(e).isIntersects())},jsts.geom.Geometry.prototype.crosses=function(e){return!!this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&this.relate(e).isCrosses(this.getDimension(),e.getDimension())},jsts.geom.Geometry.prototype.within=function(e){return e.contains(this)},jsts.geom.Geometry.prototype.contains=function(e){return!!this.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(this.isRectangle()?jsts.operation.predicate.RectangleContains.contains(this,e):this.relate(e).isContains())},jsts.geom.Geometry.prototype.overlaps=function(e){return!!this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&this.relate(e).isOverlaps(this.getDimension(),e.getDimension())},jsts.geom.Geometry.prototype.covers=function(e){return!!this.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!this.isRectangle()||this.relate(e).isCovers())},jsts.geom.Geometry.prototype.coveredBy=function(e){return e.covers(this)},jsts.geom.Geometry.prototype.relate=function(e,t){return 1===arguments.length?this.relate2.apply(this,arguments):this.relate2(e).matches(t)},jsts.geom.Geometry.prototype.relate2=function(e){return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),jsts.operation.relate.RelateOp.relate(this,e)},jsts.geom.Geometry.prototype.equalsTopo=function(e){return!!this.getEnvelopeInternal().equals(e.getEnvelopeInternal())&&this.relate(e).isEquals(this.getDimension(),e.getDimension())},jsts.geom.Geometry.prototype.equals=function(e){return(e instanceof jsts.geom.Geometry||e instanceof jsts.geom.LinearRing||e instanceof jsts.geom.Polygon||e instanceof jsts.geom.GeometryCollection||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.MultiPolygon)&&this.equalsExact(e)},jsts.geom.Geometry.prototype.buffer=function(e,t,n){var o=new jsts.operation.buffer.BufferParameters(t,n);return jsts.operation.buffer.BufferOp.bufferOp2(this,e,o)},jsts.geom.Geometry.prototype.convexHull=function(){return new jsts.algorithm.ConvexHull(this).getConvexHull()},jsts.geom.Geometry.prototype.intersection=function(e){if(this.isEmpty())return this.getFactory().createGeometryCollection(null);if(e.isEmpty())return this.getFactory().createGeometryCollection(null);if(this.isGeometryCollection(this));return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,e,jsts.operation.overlay.OverlayOp.INTERSECTION)},jsts.geom.Geometry.prototype.union=function(e){return 0===arguments.length?jsts.operation.union.UnaryUnionOp.union(this):this.isEmpty()?e.clone():e.isEmpty()?this.clone():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,e,jsts.operation.overlay.OverlayOp.UNION))},jsts.geom.Geometry.prototype.difference=function(e){return this.isEmpty()?this.getFactory().createGeometryCollection(null):e.isEmpty()?this.clone():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,e,jsts.operation.overlay.OverlayOp.DIFFERENCE))},jsts.geom.Geometry.prototype.symDifference=function(e){return this.isEmpty()?e.clone():e.isEmpty()?this.clone():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,e,jsts.operation.overlay.OverlayOp.SYMDIFFERENCE))},jsts.geom.Geometry.prototype.equalsExact=function(e,t){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.equalsNorm=function(e){return null!==e&&void 0!==e&&this.norm().equalsExact(e.norm())},jsts.geom.Geometry.prototype.apply=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.clone=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.normalize=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.norm=function(){var e=this.clone();return e.normalize(),e},jsts.geom.Geometry.prototype.compareTo=function(e){var t=e;return this.getClassSortIndex()!==t.getClassSortIndex()?this.getClassSortIndex()-t.getClassSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)},jsts.geom.Geometry.prototype.isEquivalentClass=function(e){return this instanceof jsts.geom.Point&&e instanceof jsts.geom.Point||(!!(this instanceof jsts.geom.LineString&&e instanceof jsts.geom.LineString|e instanceof jsts.geom.LinearRing)||(!!(this instanceof jsts.geom.LinearRing&&e instanceof jsts.geom.LineString|e instanceof jsts.geom.LinearRing)||(this instanceof jsts.geom.Polygon&&e instanceof jsts.geom.Polygon||(this instanceof jsts.geom.MultiPoint&&e instanceof jsts.geom.MultiPoint||(this instanceof jsts.geom.MultiLineString&&e instanceof jsts.geom.MultiLineString||(this instanceof jsts.geom.MultiPolygon&&e instanceof jsts.geom.MultiPolygon||this instanceof jsts.geom.GeometryCollection&&e instanceof jsts.geom.GeometryCollection))))))},jsts.geom.Geometry.prototype.checkNotGeometryCollection=function(e){if(e.isGeometryCollectionBase())throw new jsts.error.IllegalArgumentError("This method does not support GeometryCollection")},jsts.geom.Geometry.prototype.isGeometryCollection=function(){return this instanceof jsts.geom.GeometryCollection},jsts.geom.Geometry.prototype.isGeometryCollectionBase=function(){return"jsts.geom.GeometryCollection"===this.CLASS_NAME},jsts.geom.Geometry.prototype.computeEnvelopeInternal=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.compareToSameClass=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.compare=function(e,t){for(var n=e.iterator(),o=t.iterator();n.hasNext()&&o.hasNext();){var i=n.next(),r=o.next(),s=i.compareTo(r);if(0!==s)return s}return n.hasNext()?1:o.hasNext()?-1:0},jsts.geom.Geometry.prototype.equal=function(e,t,n){return void 0===n||null===n||0===n?e.equals(t):e.distance(t)<=n},jsts.geom.Geometry.prototype.getClassSortIndex=function(){for(var e=[jsts.geom.Point,jsts.geom.MultiPoint,jsts.geom.LineString,jsts.geom.LinearRing,jsts.geom.MultiLineString,jsts.geom.Polygon,jsts.geom.MultiPolygon,jsts.geom.GeometryCollection],t=0;t<e.length;t++)if(this instanceof e[t])return t;return jsts.util.Assert.shouldNeverReachHere("Class not supported: "+this),-1},jsts.geom.Geometry.prototype.toString=function(){return(new jsts.io.WKTWriter).write(this)},jsts.geom.Geometry.prototype.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)},function(){jsts.geom.Coordinate=function(e,t){"number"==typeof e?(this.x=e,this.y=t):e instanceof jsts.geom.Coordinate?(this.x=parseFloat(e.x),this.y=parseFloat(e.y)):void 0===e||null===e?(this.x=0,this.y=0):"string"==typeof e&&(this.x=parseFloat(e),this.y=parseFloat(t))},jsts.geom.Coordinate.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y},jsts.geom.Coordinate.prototype.clone=function(){return new jsts.geom.Coordinate(this.x,this.y)},jsts.geom.Coordinate.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},jsts.geom.Coordinate.prototype.equals2D=function(e){return this.x===e.x&&this.y===e.y},jsts.geom.Coordinate.prototype.equals=function(e){return!(!e instanceof jsts.geom.Coordinate||void 0===e)&&this.equals2D(e)},jsts.geom.Coordinate.prototype.compareTo=function(e){return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},jsts.geom.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}}(),jsts.geom.Envelope=function(){jsts.geom.Envelope.prototype.init.apply(this,arguments)},jsts.geom.Envelope.prototype.minx=null,jsts.geom.Envelope.prototype.maxx=null,jsts.geom.Envelope.prototype.miny=null,jsts.geom.Envelope.prototype.maxy=null,jsts.geom.Envelope.prototype.init=function(){"number"==typeof arguments[0]&&4===arguments.length?this.initFromValues(arguments[0],arguments[1],arguments[2],arguments[3]):arguments[0]instanceof jsts.geom.Coordinate&&1===arguments.length?this.initFromCoordinate(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate&&2===arguments.length?this.initFromCoordinates(arguments[0],arguments[1]):arguments[0]instanceof jsts.geom.Envelope&&1===arguments.length?this.initFromEnvelope(arguments[0]):this.setToNull()},jsts.geom.Envelope.prototype.initFromValues=function(e,t,n,o){e<t?(this.minx=e,this.maxx=t):(this.minx=t,this.maxx=e),n<o?(this.miny=n,this.maxy=o):(this.miny=o,this.maxy=n)},jsts.geom.Envelope.prototype.initFromCoordinates=function(e,t){this.initFromValues(e.x,t.x,e.y,t.y)},jsts.geom.Envelope.prototype.initFromCoordinate=function(e){this.initFromValues(e.x,e.x,e.y,e.y)},jsts.geom.Envelope.prototype.initFromEnvelope=function(e){this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy},jsts.geom.Envelope.prototype.setToNull=function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},jsts.geom.Envelope.prototype.isNull=function(){return this.maxx<this.minx},jsts.geom.Envelope.prototype.getHeight=function(){return this.isNull()?0:this.maxy-this.miny},jsts.geom.Envelope.prototype.getWidth=function(){return this.isNull()?0:this.maxx-this.minx},jsts.geom.Envelope.prototype.getMinX=function(){return this.minx},jsts.geom.Envelope.prototype.getMaxX=function(){return this.maxx},jsts.geom.Envelope.prototype.getMinY=function(){return this.miny},jsts.geom.Envelope.prototype.getMaxY=function(){return this.maxy},jsts.geom.Envelope.prototype.getArea=function(){return this.getWidth()*this.getHeight()},jsts.geom.Envelope.prototype.expandToInclude=function(){arguments[0]instanceof jsts.geom.Coordinate?this.expandToIncludeCoordinate(arguments[0]):arguments[0]instanceof jsts.geom.Envelope?this.expandToIncludeEnvelope(arguments[0]):this.expandToIncludeValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.expandToIncludeCoordinate=function(e){this.expandToIncludeValues(e.x,e.y)},jsts.geom.Envelope.prototype.expandToIncludeValues=function(e,t){this.isNull()?(this.minx=e,this.maxx=e,this.miny=t,this.maxy=t):(e<this.minx&&(this.minx=e),e>this.maxx&&(this.maxx=e),t<this.miny&&(this.miny=t),t>this.maxy&&(this.maxy=t))},jsts.geom.Envelope.prototype.expandToIncludeEnvelope=function(e){e.isNull()||(this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy)))};jsts.geom.Envelope.prototype.expandBy=function(){1===arguments.length?this.expandByDistance(arguments[0]):this.expandByDistances(arguments[0],arguments[1])};jsts.geom.Envelope.prototype.expandByDistance=function(e){this.expandByDistances(e,e)},jsts.geom.Envelope.prototype.expandByDistances=function(e,t){this.isNull()||(this.minx-=e,this.maxx+=e,this.miny-=t,this.maxy+=t,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull())},jsts.geom.Envelope.prototype.translate=function(e,t){this.isNull()||this.init(this.minx+e,this.maxx+e,this.miny+t,this.maxy+t)},jsts.geom.Envelope.prototype.centre=function(){return this.isNull()?null:new jsts.geom.Coordinate((this.minx+this.maxx)/2,(this.miny+this.maxy)/2)},jsts.geom.Envelope.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new jsts.geom.Envelope;var t=this.minx>e.minx?this.minx:e.minx,n=this.miny>e.miny?this.miny:e.miny,o=this.maxx<e.maxx?this.maxx:e.maxx,i=this.maxy<e.maxy?this.maxy:e.maxy;return new jsts.geom.Envelope(t,o,n,i)},jsts.geom.Envelope.prototype.intersects=function(){return arguments[0]instanceof jsts.geom.Envelope?this.intersectsEnvelope(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate?this.intersectsCoordinate(arguments[0]):this.intersectsValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.intersectsEnvelope=function(e){if(this.isNull()||e.isNull())return!1;var t=!(e.minx>this.maxx||e.maxx<this.minx||e.miny>this.maxy||e.maxy<this.miny);return t},jsts.geom.Envelope.prototype.intersectsCoordinate=function(e){return this.intersectsValues(e.x,e.y)},jsts.geom.Envelope.prototype.intersectsValues=function(e,t){return!this.isNull()&&!(e>this.maxx||e<this.minx||t>this.maxy||t<this.miny)},jsts.geom.Envelope.prototype.contains=function(){return arguments[0]instanceof jsts.geom.Envelope?this.containsEnvelope(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate?this.containsCoordinate(arguments[0]):this.containsValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.containsEnvelope=function(e){return this.coversEnvelope(e)},jsts.geom.Envelope.prototype.containsCoordinate=function(e){return this.coversCoordinate(e)},jsts.geom.Envelope.prototype.containsValues=function(e,t){return this.coversValues(e,t)},jsts.geom.Envelope.prototype.covers=function(){return arguments[0]instanceof jsts.geom.Envelope?this.coversEnvelope(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate?this.coversCoordinate(arguments[0]):this.coversValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.coversValues=function(e,t){return!this.isNull()&&(e>=this.minx&&e<=this.maxx&&t>=this.miny&&t<=this.maxy)},jsts.geom.Envelope.prototype.coversCoordinate=function(e){return this.coversValues(e.x,e.y)},jsts.geom.Envelope.prototype.coversEnvelope=function(e){return!this.isNull()&&!e.isNull()&&(e.minx>=this.minx&&e.maxx<=this.maxx&&e.miny>=this.miny&&e.maxy<=this.maxy)},jsts.geom.Envelope.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this.maxx<e.minx&&(t=e.minx-this.maxx),this.minx>e.maxx&&(t=this.minx-e.maxx);var n=0;return this.maxy<e.miny&&(n=e.miny-this.maxy),this.miny>e.maxy&&(n=this.miny-e.maxy),0===t?n:0===n?t:Math.sqrt(t*t+n*n)},jsts.geom.Envelope.prototype.equals=function(e){return this.isNull()?e.isNull():this.maxx===e.maxx&&this.maxy===e.maxy&&this.minx===e.minx&&this.miny===e.miny},jsts.geom.Envelope.prototype.toString=function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},jsts.geom.Envelope.intersects=function(e,t,n){if(4===arguments.length)return jsts.geom.Envelope.intersectsEnvelope(arguments[0],arguments[1],arguments[2],arguments[3]);var o=e.x<t.x?e.x:t.x,i=e.x>t.x?e.x:t.x,r=e.y<t.y?e.y:t.y,s=e.y>t.y?e.y:t.y;return n.x>=o&&n.x<=i&&n.y>=r&&n.y<=s},jsts.geom.Envelope.intersectsEnvelope=function(e,t,n,o){var i=Math.min(n.x,o.x),r=Math.max(n.x,o.x),s=Math.min(e.x,t.x),a=Math.max(e.x,t.x);return!(s>r)&&(!(a<i)&&(i=Math.min(n.y,o.y),r=Math.max(n.y,o.y),s=Math.min(e.y,t.y),a=Math.max(e.y,t.y),!(s>r)&&!(a<i)))},jsts.geom.Envelope.prototype.clone=function(){return new jsts.geom.Envelope(this.minx,this.maxx,this.miny,this.maxy)},jsts.geom.util.GeometryCombiner=function(e){this.geomFactory=jsts.geom.util.GeometryCombiner.extractFactory(e),this.inputGeoms=e},jsts.geom.util.GeometryCombiner.combine=function(e){if(arguments.length>1)return this.combine2.apply(this,arguments);var t=new jsts.geom.util.GeometryCombiner(e);return t.combine()},jsts.geom.util.GeometryCombiner.combine2=function(){var e=new javascript.util.ArrayList;Array.prototype.slice.call(arguments).forEach(function(t){e.add(t)});var t=new jsts.geom.util.GeometryCombiner(e);return t.combine()},jsts.geom.util.GeometryCombiner.prototype.geomFactory=null,jsts.geom.util.GeometryCombiner.prototype.skipEmpty=!1,jsts.geom.util.GeometryCombiner.prototype.inputGeoms,jsts.geom.util.GeometryCombiner.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()},jsts.geom.util.GeometryCombiner.prototype.combine=function(){var e,t=new javascript.util.ArrayList;for(e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},jsts.geom.util.GeometryCombiner.prototype.extractElements=function(e,t){if(null!==e)for(var n=0;n<e.getNumGeometries();n++){var o=e.getGeometryN(n);this.skipEmpty&&o.isEmpty()||t.add(o)}},jsts.geom.PrecisionModel=function(e){return"number"==typeof e?(this.modelType=jsts.geom.PrecisionModel.FIXED,void(this.scale=e)):(this.modelType=e||jsts.geom.PrecisionModel.FLOATING,void(this.modelType===jsts.geom.PrecisionModel.FIXED&&(this.scale=1)))},jsts.geom.PrecisionModel.FLOATING="FLOATING",jsts.geom.PrecisionModel.FIXED="FIXED",jsts.geom.PrecisionModel.FLOATING_SINGLE="FLOATING_SINGLE",jsts.geom.PrecisionModel.prototype.scale=null,jsts.geom.PrecisionModel.prototype.modelType=null,jsts.geom.PrecisionModel.prototype.isFloating=function(){return this.modelType===jsts.geom.PrecisionModel.FLOATING||this.modelType===jsts.geom.PrecisionModel.FLOATING_SINLGE},jsts.geom.PrecisionModel.prototype.getScale=function(){return this.scale},jsts.geom.PrecisionModel.prototype.getType=function(){return this.modelType},jsts.geom.PrecisionModel.prototype.equals=function(e){return!0},jsts.geom.PrecisionModel.prototype.makePrecise=function(e){return e instanceof jsts.geom.Coordinate?void this.makePrecise2(e):isNaN(e)?e:this.modelType===jsts.geom.PrecisionModel.FIXED?Math.round(e*this.scale)/this.scale:e},jsts.geom.PrecisionModel.prototype.makePrecise2=function(e){this.modelType!==jsts.geom.PrecisionModel.FLOATING&&(e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y))},jsts.geom.PrecisionModel.prototype.compareTo=function(e){return 0},jsts.geom.CoordinateFilter=function(){},jsts.geom.CoordinateFilter.prototype.filter=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.simplify.DouglasPeuckerLineSimplifier=function(e){this.pts=e,this.seg=new jsts.geom.LineSegment},jsts.simplify.DouglasPeuckerLineSimplifier.prototype.pts=null,jsts.simplify.DouglasPeuckerLineSimplifier.prototype.usePt=null,jsts.simplify.DouglasPeuckerLineSimplifier.prototype.distanceTolerance=null,jsts.simplify.DouglasPeuckerLineSimplifier.simplify=function(e,t){var n=new jsts.simplify.DouglasPeuckerLineSimplifier(e);return n.setDistanceTolerance(t),n.simplify()},jsts.simplify.DouglasPeuckerLineSimplifier.prototype.setDistanceTolerance=function(e){this.distanceTolerance=e},jsts.simplify.DouglasPeuckerLineSimplifier.prototype.simplify=function(){this.usePt=[];for(var e=0;e<this.pts.length;e++)this.usePt[e]=!0;this.simplifySection(0,this.pts.length-1);for(var t=new jsts.geom.CoordinateList,n=0;n<this.pts.length;n++)this.usePt[n]&&t.add(new jsts.geom.Coordinate(this.pts[n]));return t.toCoordinateArray()},jsts.simplify.DouglasPeuckerLineSimplifier.prototype.seg=null,jsts.simplify.DouglasPeuckerLineSimplifier.prototype.simplifySection=function(e,t){if(e+1!=t){this.seg.p0=this.pts[e],this.seg.p1=this.pts[t];for(var n=-1,o=e,i=e+1;i<t;i++){var r=this.seg.distance(this.pts[i]);r>n&&(n=r,o=i)}if(n<=this.distanceTolerance)for(var s=e+1;s<t;s++)this.usePt[s]=!1;else this.simplifySection(e,o),this.simplifySection(o,t)}},jsts.geomgraph.EdgeIntersection=function(e,t,n){this.coord=new jsts.geom.Coordinate(e),this.segmentIndex=t,this.dist=n},jsts.geomgraph.EdgeIntersection.prototype.coord=null,jsts.geomgraph.EdgeIntersection.prototype.segmentIndex=null,jsts.geomgraph.EdgeIntersection.prototype.dist=null,jsts.geomgraph.EdgeIntersection.prototype.getCoordinate=function(){return this.coord},jsts.geomgraph.EdgeIntersection.prototype.getSegmentIndex=function(){return this.segmentIndex},jsts.geomgraph.EdgeIntersection.prototype.getDistance=function(){return this.dist},jsts.geomgraph.EdgeIntersection.prototype.compareTo=function(e){return this.compare(e.segmentIndex,e.dist)},jsts.geomgraph.EdgeIntersection.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0},jsts.geomgraph.EdgeIntersection.prototype.isEndPoint=function(e){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===e},jsts.geomgraph.EdgeIntersection.prototype.toString=function(){return""+this.segmentIndex+this.dist},function(){var e=jsts.geomgraph.EdgeIntersection,t=javascript.util.TreeMap;jsts.geomgraph.EdgeIntersectionList=function(e){this.nodeMap=new t,this.edge=e},jsts.geomgraph.EdgeIntersectionList.prototype.nodeMap=null,jsts.geomgraph.EdgeIntersectionList.prototype.edge=null,jsts.geomgraph.EdgeIntersectionList.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();if(n.coord.equals(e))return!0}return!1},jsts.geomgraph.EdgeIntersectionList.prototype.add=function(t,n,o){var i=new e(t,n,o),r=this.nodeMap.get(i);return null!==r?r:(this.nodeMap.put(i,i),i)},jsts.geomgraph.EdgeIntersectionList.prototype.iterator=function(){return this.nodeMap.values().iterator()},jsts.geomgraph.EdgeIntersectionList.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)},jsts.geomgraph.EdgeIntersectionList.prototype.addSplitEdges=function(e){this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var o=t.next(),i=this.createSplitEdge(n,o);e.add(i),n=o}},jsts.geomgraph.EdgeIntersectionList.prototype.createSplitEdge=function(e,t){var n=t.segmentIndex-e.segmentIndex+2,o=this.edge.pts[t.segmentIndex],i=t.dist>0||!t.coord.equals2D(o);i||n--;var r=[],s=0;r[s++]=new jsts.geom.Coordinate(e.coord);for(var a=e.segmentIndex+1;a<=t.segmentIndex;a++)r[s++]=this.edge.pts[a];return i&&(r[s]=t.coord),new jsts.geomgraph.Edge(r,new jsts.geomgraph.Label(this.edge.label))}}(),function(){var e=function(e){this.message=e};e.prototype=new Error,e.prototype.name="AssertionFailedException",jsts.util.AssertionFailedException=e}(),function(){var e=jsts.util.AssertionFailedException;jsts.util.Assert=function(){},jsts.util.Assert.isTrue=function(t,n){if(!t)throw null===n?new e:new e(n)},jsts.util.Assert.equals=function(t,n,o){if(!n.equals(t))throw new e("Expected "+t+" but encountered "+n+(null!=o?": "+o:""))},jsts.util.Assert.shouldNeverReachHere=function(t){throw new e("Should never reach here"+(null!=t?": "+t:""))}}(),function(){var e=jsts.geom.Location,t=jsts.util.Assert,n=javascript.util.ArrayList;jsts.operation.relate.RelateComputer=function(e){this.li=new jsts.algorithm.RobustLineIntersector,this.ptLocator=new jsts.algorithm.PointLocator,this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory),this.isolatedEdges=new n,this.arg=e},jsts.operation.relate.RelateComputer.prototype.li=null,jsts.operation.relate.RelateComputer.prototype.ptLocator=null,jsts.operation.relate.RelateComputer.prototype.arg=null,jsts.operation.relate.RelateComputer.prototype.nodes=null,jsts.operation.relate.RelateComputer.prototype.im=null,jsts.operation.relate.RelateComputer.prototype.isolatedEdges=null,jsts.operation.relate.RelateComputer.prototype.invalidPoint=null,jsts.operation.relate.RelateComputer.prototype.computeIM=function(){var t=new jsts.geom.IntersectionMatrix;if(t.set(e.EXTERIOR,e.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),
t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var n=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(n,t);var o=new jsts.operation.relate.EdgeEndBuilder,i=o.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(i);var r=o.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(r),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},jsts.operation.relate.RelateComputer.prototype.insertEdgeEnds=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.nodes.add(n)}},jsts.operation.relate.RelateComputer.prototype.computeProperIntersectionIM=function(e,t){var n=this.arg[0].getGeometry().getDimension(),o=this.arg[1].getGeometry().getDimension(),i=e.hasProperIntersection(),r=e.hasProperInteriorIntersection();2===n&&2===o?i&&t.setAtLeast("212101212"):2===n&&1===o?(i&&t.setAtLeast("FFF0FFFF2"),r&&t.setAtLeast("1FFFFF1FF")):1===n&&2===o?(i&&t.setAtLeast("F0FFFFFF2"),r&&t.setAtLeast("1F1FFFFFF")):1===n&&1===o&&r&&t.setAtLeast("0FFFFFFFF")},jsts.operation.relate.RelateComputer.prototype.copyNodesAndLabels=function(e){for(var t=this.arg[e].getNodeIterator();t.hasNext();){var n=t.next(),o=this.nodes.addNode(n.getCoordinate());o.setLabel(e,n.getLabel().getLocation(e))}},jsts.operation.relate.RelateComputer.prototype.computeIntersectionNodes=function(t){for(var n=this.arg[t].getEdgeIterator();n.hasNext();)for(var o=n.next(),i=o.getLabel().getLocation(t),r=o.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next(),a=this.nodes.addNode(s.coord);i===e.BOUNDARY?a.setLabelBoundary(t):a.getLabel().isNull(t)&&a.setLabel(t,e.INTERIOR)}},jsts.operation.relate.RelateComputer.prototype.labelIntersectionNodes=function(t){for(var n=this.arg[t].getEdgeIterator();n.hasNext();)for(var o=n.next(),i=o.getLabel().getLocation(t),r=o.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next(),a=this.nodes.find(s.coord);a.getLabel().isNull(t)&&(i===e.BOUNDARY?a.setLabelBoundary(t):a.setLabel(t,e.INTERIOR))}},jsts.operation.relate.RelateComputer.prototype.computeDisjointIM=function(t){var n=this.arg[0].getGeometry();n.isEmpty()||(t.set(e.INTERIOR,e.EXTERIOR,n.getDimension()),t.set(e.BOUNDARY,e.EXTERIOR,n.getBoundaryDimension()));var o=this.arg[1].getGeometry();o.isEmpty()||(t.set(e.EXTERIOR,e.INTERIOR,o.getDimension()),t.set(e.EXTERIOR,e.BOUNDARY,o.getBoundaryDimension()))},jsts.operation.relate.RelateComputer.prototype.labelNodeEdges=function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().computeLabelling(this.arg)}},jsts.operation.relate.RelateComputer.prototype.updateIM=function(e){for(var t=this.isolatedEdges.iterator();t.hasNext();){var n=t.next();n.updateIM(e)}for(var o=this.nodes.iterator();o.hasNext();){var i=o.next();i.updateIM(e),i.updateIMFromEdges(e)}},jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdges=function(e,t){for(var n=this.arg[e].getEdgeIterator();n.hasNext();){var o=n.next();o.isIsolated()&&(this.labelIsolatedEdge(o,t,this.arg[t].getGeometry()),this.isolatedEdges.add(o))}},jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdge=function(t,n,o){if(o.getDimension()>0){var i=this.ptLocator.locate(t.getCoordinate(),o);t.getLabel().setAllLocations(n,i)}else t.getLabel().setAllLocations(n,e.EXTERIOR)},jsts.operation.relate.RelateComputer.prototype.labelIsolatedNodes=function(){for(var e=this.nodes.iterator();e.hasNext();){var n=e.next(),o=n.getLabel();t.isTrue(o.getGeometryCount()>0,"node with empty label found"),n.isIsolated()&&(o.isNull(0)?this.labelIsolatedNode(n,0):this.labelIsolatedNode(n,1))}},jsts.operation.relate.RelateComputer.prototype.labelIsolatedNode=function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.arg[t].getGeometry());e.getLabel().setAllLocations(t,n)}}(),function(){var e=jsts.util.Assert;jsts.geomgraph.GraphComponent=function(e){this.label=e},jsts.geomgraph.GraphComponent.prototype.label=null,jsts.geomgraph.GraphComponent.prototype._isInResult=!1,jsts.geomgraph.GraphComponent.prototype._isCovered=!1,jsts.geomgraph.GraphComponent.prototype._isCoveredSet=!1,jsts.geomgraph.GraphComponent.prototype._isVisited=!1,jsts.geomgraph.GraphComponent.prototype.getLabel=function(){return this.label},jsts.geomgraph.GraphComponent.prototype.setLabel=function(e){return 2===arguments.length?void this.setLabel2.apply(this,arguments):void(this.label=e)},jsts.geomgraph.GraphComponent.prototype.setInResult=function(e){this._isInResult=e},jsts.geomgraph.GraphComponent.prototype.isInResult=function(){return this._isInResult},jsts.geomgraph.GraphComponent.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0},jsts.geomgraph.GraphComponent.prototype.isCovered=function(){return this._isCovered},jsts.geomgraph.GraphComponent.prototype.isCoveredSet=function(){return this._isCoveredSet},jsts.geomgraph.GraphComponent.prototype.isVisited=function(){return this._isVisited},jsts.geomgraph.GraphComponent.prototype.setVisited=function(e){this._isVisited=e},jsts.geomgraph.GraphComponent.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.GraphComponent.prototype.computeIM=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.GraphComponent.prototype.isIsolated=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.GraphComponent.prototype.updateIM=function(t){e.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}}(),jsts.geomgraph.Node=function(e,t){this.coord=e,this.edges=t,this.label=new jsts.geomgraph.Label(0,jsts.geom.Location.NONE)},jsts.geomgraph.Node.prototype=new jsts.geomgraph.GraphComponent,jsts.geomgraph.Node.prototype.coord=null,jsts.geomgraph.Node.prototype.edges=null,jsts.geomgraph.Node.prototype.isIsolated=function(){return 1==this.label.getGeometryCount()},jsts.geomgraph.Node.prototype.setLabel2=function(e,t){null===this.label?this.label=new jsts.geomgraph.Label(e,t):this.label.setLocation(e,t)},jsts.geomgraph.Node.prototype.setLabelBoundary=function(e){var t=jsts.geom.Location.NONE;null!==this.label&&(t=this.label.getLocation(e));var n;switch(t){case jsts.geom.Location.BOUNDARY:n=jsts.geom.Location.INTERIOR;break;case jsts.geom.Location.INTERIOR:n=jsts.geom.Location.BOUNDARY;break;default:n=jsts.geom.Location.BOUNDARY}this.label.setLocation(e,n)},jsts.geomgraph.Node.prototype.add=function(e){this.edges.insert(e),e.setNode(this)},jsts.geomgraph.Node.prototype.getCoordinate=function(){return this.coord},jsts.geomgraph.Node.prototype.getEdges=function(){return this.edges},jsts.geomgraph.Node.prototype.isIncidentEdgeInResult=function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();){var t=e.next();if(t.getEdge().isInResult())return!0}return!1},jsts.geom.Point=function(e,t){this.factory=t,void 0!==e&&(this.coordinate=e)},jsts.geom.Point.prototype=new jsts.geom.Geometry,jsts.geom.Point.constructor=jsts.geom.Point,jsts.geom.Point.CLASS_NAME="jsts.geom.Point",jsts.geom.Point.prototype.coordinate=null,jsts.geom.Point.prototype.getX=function(){return this.coordinate.x},jsts.geom.Point.prototype.getY=function(){return this.coordinate.y},jsts.geom.Point.prototype.getCoordinate=function(){return this.coordinate},jsts.geom.Point.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.coordinate]},jsts.geom.Point.prototype.getCoordinateSequence=function(){return this.isEmpty()?[]:[this.coordinate]},jsts.geom.Point.prototype.isEmpty=function(){return null===this.coordinate},jsts.geom.Point.prototype.equalsExact=function(e,t){return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.equal(e.getCoordinate(),this.getCoordinate(),t))},jsts.geom.Point.prototype.getNumPoints=function(){return this.isEmpty()?0:1},jsts.geom.Point.prototype.isSimple=function(){return!0},jsts.geom.Point.prototype.getBoundary=function(){return new jsts.geom.GeometryCollection(null)},jsts.geom.Point.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new jsts.geom.Envelope:new jsts.geom.Envelope(this.coordinate)},jsts.geom.Point.prototype.apply=function(e){if(e instanceof jsts.geom.GeometryFilter||e instanceof jsts.geom.GeometryComponentFilter)e.filter(this);else if(e instanceof jsts.geom.CoordinateFilter){if(this.isEmpty())return;e.filter(this.getCoordinate())}},jsts.geom.Point.prototype.clone=function(){return new jsts.geom.Point(this.coordinate.clone(),this.factory)},jsts.geom.Point.prototype.getDimension=function(){return 0},jsts.geom.Point.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE},jsts.geom.Point.prototype.reverse=function(){return this.clone()},jsts.geom.Point.prototype.isValid=function(){return!!jsts.operation.valid.IsValidOp.isValid(this.getCoordinate())},jsts.geom.Point.prototype.normalize=function(){},jsts.geom.Point.prototype.compareToSameClass=function(e){var t=e;return this.getCoordinate().compareTo(t.getCoordinate())},jsts.geom.Point.prototype.getGeometryType=function(){return"Point"},jsts.geom.Point.prototype.hashCode=function(){return"Point_"+this.coordinate.hashCode()},jsts.geom.Point.prototype.CLASS_NAME="jsts.geom.Point",jsts.geom.Dimension=function(){},jsts.geom.Dimension.P=0,jsts.geom.Dimension.L=1,jsts.geom.Dimension.A=2,jsts.geom.Dimension.FALSE=-1,jsts.geom.Dimension.TRUE=-2,jsts.geom.Dimension.DONTCARE=-3,jsts.geom.Dimension.toDimensionSymbol=function(e){switch(e){case jsts.geom.Dimension.FALSE:return"F";case jsts.geom.Dimension.TRUE:return"T";case jsts.geom.Dimension.DONTCARE:return"*";case jsts.geom.Dimension.P:return"0";case jsts.geom.Dimension.L:return"1";case jsts.geom.Dimension.A:return"2"}throw new jsts.IllegalArgumentError("Unknown dimension value: "+e)},jsts.geom.Dimension.toDimensionValue=function(e){switch(e.toUpperCase()){case"F":return jsts.geom.Dimension.FALSE;case"T":return jsts.geom.Dimension.TRUE;case"*":return jsts.geom.Dimension.DONTCARE;case"0":return jsts.geom.Dimension.P;case"1":return jsts.geom.Dimension.L;case"2":return jsts.geom.Dimension.A}throw new jsts.error.IllegalArgumentError("Unknown dimension symbol: "+e)},function(){var e=jsts.geom.Dimension;jsts.geom.LineString=function(e,t){this.factory=t,this.points=e||[]},jsts.geom.LineString.prototype=new jsts.geom.Geometry,jsts.geom.LineString.constructor=jsts.geom.LineString,jsts.geom.LineString.prototype.points=null,jsts.geom.LineString.prototype.getCoordinates=function(){return this.points},jsts.geom.LineString.prototype.getCoordinateSequence=function(){return this.points},jsts.geom.LineString.prototype.getCoordinateN=function(e){return this.points[e]},jsts.geom.LineString.prototype.getCoordinate=function(){return this.isEmpty()?null:this.getCoordinateN(0)},jsts.geom.LineString.prototype.getDimension=function(){return 1},jsts.geom.LineString.prototype.getBoundaryDimension=function(){return this.isClosed()?e.FALSE:0},jsts.geom.LineString.prototype.isEmpty=function(){return 0===this.points.length},jsts.geom.LineString.prototype.getNumPoints=function(){return this.points.length},jsts.geom.LineString.prototype.getPointN=function(e){return this.getFactory().createPoint(this.points[e])},jsts.geom.LineString.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},jsts.geom.LineString.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},jsts.geom.LineString.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.points.length-1))},jsts.geom.LineString.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},jsts.geom.LineString.prototype.getGeometryType=function(){return"LineString"},jsts.geom.LineString.prototype.getLength=function(){return jsts.algorithm.CGAlgorithms.computeLength(this.points)},jsts.geom.LineString.prototype.getBoundary=function(){return new jsts.operation.BoundaryOp(this).getBoundary()},jsts.geom.LineString.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new jsts.geom.Envelope;var e=new jsts.geom.Envelope;return this.points.forEach(function(t){e.expandToInclude(t)}),e},jsts.geom.LineString.prototype.equalsExact=function(e,t){return!!this.isEquivalentClass(e)&&(this.points.length===e.points.length&&(!(!this.isEmpty()||!e.isEmpty())||this.points.reduce(function(n,o,i){return n&&jsts.geom.Geometry.prototype.equal(o,e.points[i],t)})))},jsts.geom.LineString.prototype.isEquivalentClass=function(e){return e instanceof jsts.geom.LineString},jsts.geom.LineString.prototype.compareToSameClass=function(e){for(var t=e,n=0,o=this.points.length,i=0,r=t.points.length;n<o&&i<r;){var s=this.points[n].compareTo(t.points[i]);if(0!==s)return s;n++,i++}return n<o?1:i<r?-1:0},jsts.geom.LineString.prototype.apply=function(e){if(e instanceof jsts.geom.GeometryFilter||e instanceof jsts.geom.GeometryComponentFilter)e.filter(this);else if(e instanceof jsts.geom.CoordinateFilter)for(var t=0,n=this.points.length;t<n;t++)e.filter(this.points[t]);else e instanceof jsts.geom.CoordinateSequenceFilter&&this.apply2.apply(this,arguments)},jsts.geom.LineString.prototype.apply2=function(e){if(0!==this.points.length){for(var t=0;t<this.points.length&&(e.filter(this.points,t),!e.isDone());t++);e.isGeometryChanged()}},jsts.geom.LineString.prototype.clone=function(){for(var e=[],t=0,n=this.points.length;t<n;t++)e.push(this.points[t].clone());return this.factory.createLineString(e)},jsts.geom.LineString.prototype.normalize=function(){var e,t,n,o,i,r;for(r=this.points.length,t=parseInt(r/2),e=0;e<t;e++)if(n=r-1-e,o=this.points[e],i=this.points[n],!o.equals(i))return void(o.compareTo(i)>0&&this.points.reverse())},jsts.geom.LineString.prototype.CLASS_NAME="jsts.geom.LineString"}(),function(){jsts.geom.Polygon=function(e,t,n){this.shell=e||n.createLinearRing(null),this.holes=t||[],this.factory=n},jsts.geom.Polygon.prototype=new jsts.geom.Geometry,jsts.geom.Polygon.constructor=jsts.geom.Polygon,jsts.geom.Polygon.prototype.getCoordinate=function(){return this.shell.getCoordinate()},jsts.geom.Polygon.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var e=[],t=-1,n=this.shell.getCoordinates(),o=0;o<n.length;o++)t++,e[t]=n[o];for(var i=0;i<this.holes.length;i++)for(var r=this.holes[i].getCoordinates(),s=0;s<r.length;s++)t++,e[t]=r[s];return e},jsts.geom.Polygon.prototype.getNumPoints=function(){for(var e=this.shell.getNumPoints(),t=0;t<this.holes.length;t++)e+=this.holes[t].getNumPoints();return e},jsts.geom.Polygon.prototype.isEmpty=function(){return this.shell.isEmpty()},jsts.geom.Polygon.prototype.isRectangle=function(){if(0!=this.getNumInteriorRing())return!1;if(null==this.shell)return!1;if(5!=this.shell.getNumPoints())return!1;for(var e=this.shell.getCoordinateSequence(),t=this.getEnvelopeInternal(),n=0;n<5;n++){var o=e[n].x;if(o!=t.getMinX()&&o!=t.getMaxX())return!1;var i=e[n].y;if(i!=t.getMinY()&&i!=t.getMaxY())return!1}for(var r=e[0].x,s=e[0].y,n=1;n<=4;n++){var o=e[n].x,i=e[n].y,a=o!=r,l=i!=s;if(a==l)return!1;r=o,s=i}return!0},jsts.geom.Polygon.prototype.getExteriorRing=function(){return this.shell},jsts.geom.Polygon.prototype.getInteriorRingN=function(e){return this.holes[e]},jsts.geom.Polygon.prototype.getNumInteriorRing=function(){return this.holes.length},jsts.geom.Polygon.prototype.getArea=function(){var e=0;e+=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.shell.getCoordinateSequence()));for(var t=0;t<this.holes.length;t++)e-=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.holes[t].getCoordinateSequence()));return e},jsts.geom.Polygon.prototype.getLength=function(){var e=0;e+=this.shell.getLength();for(var t=0;t<this.holes.length;t++)e+=this.holes[t].getLength();return e},jsts.geom.Polygon.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString(null);var e=[];e[0]=this.shell.clone();for(var t=0,n=this.holes.length;t<n;t++)e[t+1]=this.holes[t].clone();return e.length<=1?e[0]:this.getFactory().createMultiLineString(e)},jsts.geom.Polygon.prototype.computeEnvelopeInternal=function(){return this.shell.getEnvelopeInternal()},jsts.geom.Polygon.prototype.getDimension=function(){return 2},jsts.geom.Polygon.prototype.getBoundaryDimension=function(){return 1},jsts.geom.Polygon.prototype.equalsExact=function(e,t){if(!this.isEquivalentClass(e))return!1;if(this.isEmpty()&&e.isEmpty())return!0;if(this.isEmpty()!==e.isEmpty())return!1;if(!this.shell.equalsExact(e.shell,t))return!1;if(this.holes.length!==e.holes.length)return!1;if(this.holes.length!==e.holes.length)return!1;for(var n=0;n<this.holes.length;n++)if(!this.holes[n].equalsExact(e.holes[n],t))return!1;return!0},jsts.geom.Polygon.prototype.compareToSameClass=function(e){return this.shell.compareToSameClass(e.shell)},jsts.geom.Polygon.prototype.apply=function(e){if(e instanceof jsts.geom.GeometryComponentFilter){e.filter(this),this.shell.apply(e);for(var t=0,n=this.holes.length;t<n;t++)this.holes[t].apply(e)}else if(e instanceof jsts.geom.GeometryFilter)e.filter(this);else if(e instanceof jsts.geom.CoordinateFilter){this.shell.apply(e);for(var t=0,n=this.holes.length;t<n;t++)this.holes[t].apply(e)}else e instanceof jsts.geom.CoordinateSequenceFilter&&this.apply2.apply(this,arguments)},jsts.geom.Polygon.prototype.apply2=function(e){if(this.shell.apply(e),!e.isDone())for(var t=0;t<this.holes.length&&(this.holes[t].apply(e),!e.isDone());t++);e.isGeometryChanged()},jsts.geom.Polygon.prototype.clone=function(){for(var e=[],t=0,n=this.holes.length;t<n;t++)e.push(this.holes[t].clone());return this.factory.createPolygon(this.shell.clone(),e)},jsts.geom.Polygon.prototype.normalize=function(){this.normalize2(this.shell,!0);for(var e=0,t=this.holes.length;e<t;e++)this.normalize2(this.holes[e],!1);this.holes.sort()},jsts.geom.Polygon.prototype.normalize2=function(e,t){if(!e.isEmpty()){var n=e.points.slice(0,e.points.length-1),o=jsts.geom.CoordinateArrays.minCoordinate(e.points);jsts.geom.CoordinateArrays.scroll(n,o),e.points=n.concat(),e.points[n.length]=n[0],jsts.algorithm.CGAlgorithms.isCCW(e.points)===t&&e.points.reverse()}},jsts.geom.Polygon.prototype.getGeometryType=function(){return"Polygon"},jsts.geom.Polygon.prototype.CLASS_NAME="jsts.geom.Polygon"}(),function(){var e=jsts.geom.Geometry,t=javascript.util.TreeSet,n=javascript.util.Arrays;jsts.geom.GeometryCollection=function(e,t){this.geometries=e||[],this.factory=t},jsts.geom.GeometryCollection.prototype=new e,jsts.geom.GeometryCollection.constructor=jsts.geom.GeometryCollection,jsts.geom.GeometryCollection.prototype.isEmpty=function(){for(var e=0,t=this.geometries.length;e<t;e++){var n=this.getGeometryN(e);if(!n.isEmpty())return!1}return!0},jsts.geom.GeometryCollection.prototype.getArea=function(){for(var e=0,t=0,n=this.geometries.length;t<n;t++)e+=this.getGeometryN(t).getArea();return e},jsts.geom.GeometryCollection.prototype.getLength=function(){for(var e=0,t=0,n=this.geometries.length;t<n;t++)e+=this.getGeometryN(t).getLength();return e},jsts.geom.GeometryCollection.prototype.getCoordinate=function(){return this.isEmpty()?null:this.getGeometryN(0).getCoordinate()},jsts.geom.GeometryCollection.prototype.getCoordinates=function(){for(var e=[],t=-1,n=0,o=this.geometries.length;n<o;n++)for(var i=this.getGeometryN(n),r=i.getCoordinates(),s=0;s<r.length;s++)t++,e[t]=r[s];return e},jsts.geom.GeometryCollection.prototype.getNumGeometries=function(){return this.geometries.length},jsts.geom.GeometryCollection.prototype.getGeometryN=function(e){var t=this.geometries[e];return t instanceof jsts.geom.Coordinate&&(t=new jsts.geom.Point(t)),t},jsts.geom.GeometryCollection.prototype.getNumPoints=function(e){for(var t=0,n=0;n<this.geometries.length;n++)t+=this.geometries[n].getNumPoints();return t},jsts.geom.GeometryCollection.prototype.equalsExact=function(e,t){if(!this.isEquivalentClass(e))return!1;if(this.geometries.length!==e.geometries.length)return!1;for(var n=0,o=this.geometries.length;n<o;n++){var i=this.getGeometryN(n);if(!i.equalsExact(e.getGeometryN(n),t))return!1}return!0},jsts.geom.GeometryCollection.prototype.clone=function(){for(var e=[],t=0,n=this.geometries.length;t<n;t++)e.push(this.geometries[t].clone());return this.factory.createGeometryCollection(e)},jsts.geom.GeometryCollection.prototype.normalize=function(){for(var e=0,t=this.geometries.length;e<t;e++)this.getGeometryN(e).normalize();this.geometries.sort()},jsts.geom.GeometryCollection.prototype.compareToSameClass=function(e){var o=new t(n.asList(this.geometries)),i=new t(n.asList(e.geometries));return this.compare(o,i)},jsts.geom.GeometryCollection.prototype.apply=function(e){if(e instanceof jsts.geom.GeometryFilter||e instanceof jsts.geom.GeometryComponentFilter){e.filter(this);for(var t=0,n=this.geometries.length;t<n;t++)this.getGeometryN(t).apply(e)}else if(e instanceof jsts.geom.CoordinateFilter)for(var t=0,n=this.geometries.length;t<n;t++)this.getGeometryN(t).apply(e);else e instanceof jsts.geom.CoordinateSequenceFilter&&this.apply2.apply(this,arguments)},jsts.geom.GeometryCollection.prototype.apply2=function(e){if(0!=this.geometries.length){for(var t=0;t<this.geometries.length&&(this.geometries[t].apply(e),!e.isDone());t++);e.isGeometryChanged()}},jsts.geom.GeometryCollection.prototype.getDimension=function(){for(var e=jsts.geom.Dimension.FALSE,t=0,n=this.geometries.length;t<n;t++){var o=this.getGeometryN(t);e=Math.max(e,o.getDimension())}return e},jsts.geom.GeometryCollection.prototype.computeEnvelopeInternal=function(){for(var e=new jsts.geom.Envelope,t=0,n=this.geometries.length;t<n;t++){var o=this.getGeometryN(t);e.expandToInclude(o.getEnvelopeInternal())}return e},jsts.geom.GeometryCollection.prototype.CLASS_NAME="jsts.geom.GeometryCollection"}(),jsts.algorithm.Centroid=function(e){this.areaBasePt=null,this.triangleCent3=new jsts.geom.Coordinate,this.areasum2=0,this.cg3=new jsts.geom.Coordinate,this.lineCentSum=new jsts.geom.Coordinate,this.totalLength=0,this.ptCount=0,this.ptCentSum=new jsts.geom.Coordinate,this.add(e)},jsts.algorithm.Centroid.getCentroid=function(e){var t=new jsts.algorithm.Centroid(e);return t.getCentroid()},jsts.algorithm.Centroid.centroid3=function(e,t,n,o){o.x=e.x+t.x+n.x,o.y=e.y+t.y+n.y},jsts.algorithm.Centroid.area2=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)},jsts.algorithm.Centroid.prototype.add=function(e){if(!e.isEmpty())if(e instanceof jsts.geom.Point)this.addPoint(e.getCoordinate());else if(e instanceof jsts.geom.LineString)this.addLineSegments(e.getCoordinates());else if(e instanceof jsts.geom.Polygon)this.addPolygon(e);else if(e instanceof jsts.geom.GeometryCollection)for(var t=0;t<e.getNumGeometries();t++)this.add(e.getGeometryN(t))},jsts.algorithm.Centroid.prototype.getCentroid=function(){var e=new jsts.geom.Coordinate;if(Math.abs(this.areasum2)>0)e.x=this.cg3.x/3/this.areasum2,e.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)e.x=this.lineCentSum.x/this.totalLength,e.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;e.x=this.ptCentSum.x/this.ptCount,e.y=this.ptCentSum.y/this.ptCount}return e},jsts.algorithm.Centroid.prototype.setBasePoint=function(e){null===this.areaBasePt&&(this.areaBasePt=e)},jsts.algorithm.Centroid.prototype.addPolygon=function(e){this.addShell(e.getExteriorRing().getCoordinates());for(var t=0;t<e.getNumInteriorRing();t++)this.addHole(e.getInteriorRingN(t).getCoordinates())},jsts.algorithm.Centroid.prototype.addShell=function(e){e.length>0&&this.setBasePoint(e[0]);for(var t=!jsts.algorithm.CGAlgorithms.isCCW(e),n=0;n<e.length-1;n++)this.addTriangle(this.areaBasePt,e[n],e[n+1],t);this.addLineSegments(e)},jsts.algorithm.Centroid.prototype.addHole=function(e){for(var t=jsts.algorithm.CGAlgorithms.isCCW(e),n=0;n<e.length-1;n++)this.addTriangle(this.areaBasePt,e[n],e[n+1],t);this.addLineSegments(e)},jsts.algorithm.Centroid.prototype.addTriangle=function(e,t,n,o){var i=o?1:-1;jsts.algorithm.Centroid.centroid3(e,t,n,this.triangleCent3);var r=jsts.algorithm.Centroid.area2(e,t,n);this.cg3.x+=i*r*this.triangleCent3.x,this.cg3.y+=i*r*this.triangleCent3.y,this.areasum2+=i*r},jsts.algorithm.Centroid.prototype.addLineSegments=function(e){for(var t=0,n=0;n<e.length-1;n++){var o=e[n].distance(e[n+1]);if(0!==o){t+=o;var i=(e[n].x+e[n+1].x)/2;this.lineCentSum.x+=o*i;var r=(e[n].y+e[n+1].y)/2;this.lineCentSum.y+=o*r}}this.totalLength+=t,0===t&&e.length>0&&this.addPoint(e[0])},jsts.algorithm.Centroid.prototype.addPoint=function(e){this.ptCount+=1,this.ptCentSum.x+=e.x,this.ptCentSum.y+=e.y},function(){var e=function(e){this.deList=new javascript.util.ArrayList,this.factory=e};e.findEdgeRingContaining=function(e,t){for(var n=e.getRing(),o=n.getEnvelopeInternal(),i=n.getCoordinateN(0),r=null,s=null,a=t.iterator();a.hasNext();){var l=a.next(),c=l.getRing(),u=c.getEnvelopeInternal();null!=r&&(s=r.getRing().getEnvelopeInternal());var d=!1;u.equals(o)||(i=jsts.geom.CoordinateArrays.ptNotInList(n.getCoordinates(),c.getCoordinates()),u.contains(o)&&jsts.algorithm.CGAlgorithms.isPointInRing(i,c.getCoordinates())&&(d=!0),d&&(null==r||s.contains(u))&&(r=l))}return r},e.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(!isInList(o,t))return o}return null},e.isInList=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return!0;return!1},e.prototype.factory=null,e.prototype.deList=null,e.prototype.ring=null,e.prototype.ringPts=null,e.prototype.holes=null,e.prototype.add=function(e){this.deList.add(e)},e.prototype.isHole=function(){var e=this.getRing();return jsts.algorithm.CGAlgorithms.isCCW(e.getCoordinates())},e.prototype.addHole=function(e){null==this.holes&&(this.holes=new javascript.util.ArrayList),this.holes.add(e)},e.prototype.getPolygon=function(){var e=null;if(null!=this.holes){e=[];for(var t=0;t<this.holes.size();t++)e[t]=this.holes.get(t)}var n=this.factory.createPolygon(this.ring,e);return n},e.prototype.isValid=function(){return this.getCoordinates(),!(this.ringPts.length<=3)&&(this.getRing(),this.ring.isValid())},e.prototype.getCoordinates=function(){if(null==this.ringPts){for(var t=new jsts.geom.CoordinateList,n=this.deList.iterator();n.hasNext();){var o=n.next(),i=o.getEdge();e.addEdge(i.getLine().getCoordinates(),o.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},e.prototype.getLineString=function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},e.prototype.getRing=function(){if(null!=this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&console.log(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(e){console.log(this.ringPts)}return this.ring},e.addEdge=function(e,t,n){if(t)for(var o=0;o<e.length;o++)n.add(e[o],!1);else for(var o=e.length-1;o>=0;o--)n.add(e[o],!1)},jsts.operation.polygonize.EdgeRing=e}(),function(){var e=function(){};e.setVisited=function(e,t){for(;e.hasNext();){var n=e.next();n.setVisited(t)}},e.setMarked=function(e,t){for(;e.hasNext();){var n=e.next();n.setMarked(t)}},e.getComponentWithVisitedState=function(e,t){for(;e.hasNext();){var n=e.next();if(n.isVisited()==t)return n}return null},e.prototype._isMarked=!1,e.prototype._isVisited=!1,e.prototype.data,e.prototype.isVisited=function(){return this._isVisited},e.prototype.setVisited=function(e){this._isVisited=e},e.prototype.isMarked=function(){return this._isMarked},e.prototype.setMarked=function(e){this._isMarked=e},e.prototype.setContext=function(e){this.data=e},e.prototype.getContext=function(){return data},e.prototype.setData=function(e){this.data=e},e.prototype.getData=function(){return data},e.prototype.isRemoved=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.planargraph.GraphComponent=e}(),function(){var e=jsts.planargraph.GraphComponent,t=function(e,t){void 0!==e&&this.setDirectedEdges(e,t)};t.prototype=new e,t.prototype.dirEdge=null,t.prototype.setDirectedEdges=function(e,t){this.dirEdge=[e,t],e.setEdge(this),t.setEdge(this),e.setSym(t),t.setSym(e),e.getFromNode().addOutEdge(e),t.getFromNode().addOutEdge(t)},t.prototype.getDirEdge=function(e){return e instanceof jsts.planargraph.Node&&this.getDirEdge2(e),this.dirEdge[e]},t.prototype.getDirEdge2=function(e){return this.dirEdge[0].getFromNode()==e?this.dirEdge[0]:this.dirEdge[1].getFromNode()==e?this.dirEdge[1]:null},t.prototype.getOppositeNode=function(e){return this.dirEdge[0].getFromNode()==e?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()==e?this.dirEdge[1].getToNode():null},t.prototype.remove=function(){this.dirEdge=null},t.prototype.isRemoved=function(){return null==dirEdge},jsts.planargraph.Edge=t}(),jsts.operation.polygonize.PolygonizeEdge=function(e){this.line=e},jsts.operation.polygonize.PolygonizeEdge.prototype=new jsts.planargraph.Edge,jsts.operation.polygonize.PolygonizeEdge.prototype.line=null,jsts.operation.polygonize.PolygonizeEdge.prototype.getLine=function(){return this.line},function(){var e=javascript.util.ArrayList,t=jsts.planargraph.GraphComponent,n=function(e,t,n,o){if(void 0!==e){this.from=e,this.to=t,this.edgeDirection=o,this.p0=e.getCoordinate(),this.p1=n;var i=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y;this.quadrant=jsts.geomgraph.Quadrant.quadrant(i,r),this.angle=Math.atan2(r,i)}};n.prototype=new t,n.toEdges=function(t){for(var n=new e,o=t.iterator();o.hasNext();)n.add(o.next().parentEdge);return n},n.prototype.parentEdge=null,n.prototype.from=null,n.prototype.to=null,n.prototype.p0=null,n.prototype.p1=null,n.prototype.sym=null,n.prototype.edgeDirection=null,n.prototype.quadrant=null,n.prototype.angle=null,n.prototype.getEdge=function(){return this.parentEdge},n.prototype.setEdge=function(e){this.parentEdge=e},n.prototype.getQuadrant=function(){return this.quadrant},n.prototype.getDirectionPt=function(){return this.p1},n.prototype.getEdgeDirection=function(){return this.edgeDirection},n.prototype.getFromNode=function(){return this.from},n.prototype.getToNode=function(){return this.to},n.prototype.getCoordinate=function(){return this.from.getCoordinate()},n.prototype.getAngle=function(){return this.angle},n.prototype.getSym=function(){return this.sym},n.prototype.setSym=function(e){this.sym=e},n.prototype.remove=function(){this.sym=null,this.parentEdge=null},n.prototype.isRemoved=function(){return null==this.parentEdge},n.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)},n.prototype.compareDirection=function(e){return this.quadrant>e.quadrant?1:this.quadrant<e.quadrant?-1:jsts.algorithm.CGAlgorithms.computeOrientation(e.p0,e.p1,this.p1)},jsts.planargraph.DirectedEdge=n}(),function(){var e=jsts.planargraph.DirectedEdge,t=function(t,n,o,i){e.apply(this,arguments)};t.prototype=new e,t.prototype.edgeRing=null,t.prototype.next=null,t.prototype.label=-1,t.prototype.getLabel=function(){return this.label},t.prototype.setLabel=function(e){this.label=e},t.prototype.getNext=function(){return this.next},t.prototype.setNext=function(e){this.next=e},t.prototype.isInRing=function(){return null!=this.edgeRing},t.prototype.setRing=function(e){this.edgeRing=e},jsts.operation.polygonize.PolygonizeDirectedEdge=t}(),function(){var e=javascript.util.ArrayList,t=function(){this.outEdges=new e};t.prototype.outEdges=null,t.prototype.sorted=!1,t.prototype.add=function(e){this.outEdges.add(e),this.sorted=!1},t.prototype.remove=function(e){this.outEdges.remove(e)},t.prototype.iterator=function(){return this.sortEdges(),this.outEdges.iterator()},t.prototype.getDegree=function(){return this.outEdges.size()},t.prototype.getCoordinate=function(){var e=iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()},t.prototype.getEdges=function(){return this.sortEdges(),this.outEdges},t.prototype.sortEdges=function(){if(!this.sorted){var e=this.outEdges.toArray();e.sort(function(e,t){return e.compareTo(t)}),this.outEdges=javascript.util.Arrays.asList(e),this.sorted=!0;
}},t.prototype.getIndex=function(e){if(e instanceof jsts.planargraph.DirectedEdge)return this.getIndex2(e);if("number"==typeof e)return this.getIndex3(e);this.sortEdges();for(var t=0;t<this.outEdges.size();t++){var n=this.outEdges.get(t);if(n.getEdge()==e)return t}return-1},t.prototype.getIndex2=function(e){this.sortEdges();for(var t=0;t<this.outEdges.size();t++){var n=this.outEdges.get(t);if(n==e)return t}return-1},t.prototype.getIndex3=function(e){var t=toInt(e%this.outEdges.size());return t<0&&(t+=this.outEdges.size()),t},t.prototype.getNextEdge=function(e){var t=this.getIndex(e);return this.outEdges.get(getIndex(t+1))},t.prototype.getNextCWEdge=function(e){var t=this.getIndex(e);return this.outEdges.get(getIndex(t-1))},jsts.planargraph.DirectedEdgeStar=t}(),function(){var e=jsts.planargraph.GraphComponent,t=jsts.planargraph.DirectedEdgeStar,n=function(e,n){this.pt=e,this.deStar=n||new t};n.prototype=new e,n.getEdgesBetween=function(e,t){var n=DirectedEdge.toEdges(e.getOutEdges().getEdges()),o=new javascript.util.HashSet(n),i=DirectedEdge.toEdges(t.getOutEdges().getEdges());return o.retainAll(i),o},n.prototype.pt=null,n.prototype.deStar=null,n.prototype.getCoordinate=function(){return this.pt},n.prototype.addOutEdge=function(e){this.deStar.add(e)},n.prototype.getOutEdges=function(){return this.deStar},n.prototype.getDegree=function(){return this.deStar.getDegree()},n.prototype.getIndex=function(e){return this.deStar.getIndex(e)},n.prototype.remove=function(e){return void 0===e?this.remove2():void this.deStar.remove(e)},n.prototype.remove2=function(){this.pt=null},n.prototype.isRemoved=function(){return null==this.pt},jsts.planargraph.Node=n}(),function(){var e=function(){this.nodeMap=new javascript.util.TreeMap};e.prototype.nodeMap=null,e.prototype.add=function(e){return this.nodeMap.put(e.getCoordinate(),e),e},e.prototype.remove=function(e){return this.nodeMap.remove(e)},e.prototype.find=function(e){return this.nodeMap.get(e)},e.prototype.iterator=function(){return this.nodeMap.values().iterator()},e.prototype.values=function(){return this.nodeMap.values()},jsts.planargraph.NodeMap=e}(),function(){var e=javascript.util.ArrayList,t=function(){this.edges=new javascript.util.HashSet,this.dirEdges=new javascript.util.HashSet,this.nodeMap=new jsts.planargraph.NodeMap};t.prototype.edges=null,t.prototype.dirEdges=null,t.prototype.nodeMap=null,t.prototype.findNode=function(e){return this.nodeMap.find(e)},t.prototype.add=function(e){return e instanceof jsts.planargraph.Edge?this.add2(e):e instanceof jsts.planargraph.DirectedEdge?this.add3(e):void this.nodeMap.add(e)},t.prototype.add2=function(e){this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))},t.prototype.add3=function(e){this.dirEdges.add(e)},t.prototype.nodeIterator=function(){return this.nodeMap.iterator()},t.prototype.contains=function(e){return e instanceof jsts.planargraph.DirectedEdge?this.contains2(e):this.edges.contains(e)},t.prototype.contains2=function(e){return this.dirEdges.contains(e)},t.prototype.getNodes=function(){return this.nodeMap.values()},t.prototype.dirEdgeIterator=function(){return this.dirEdges.iterator()},t.prototype.edgeIterator=function(){return this.edges.iterator()},t.prototype.getEdges=function(){return this.edges},t.prototype.remove=function(e){return e instanceof jsts.planargraph.DirectedEdge?this.remove2(e):(this.remove(e.getDirEdge(0)),this.remove(e.getDirEdge(1)),this.edges.remove(e),void this.edge.remove())},t.prototype.remove2=function(e){if(e instanceof jsts.planargraph.Node)return this.remove3(e);var t=e.getSym();null!=t&&t.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)},t.prototype.remove3=function(e){for(var t=e.getOutEdges().getEdges(),n=t.iterator();n.hasNext();){var o=n.next(),i=o.getSym();null!=i&&this.remove(i),this.dirEdges.remove(o);var r=o.getEdge();null!=r&&this.edges.remove(r)}this.nodeMap.remove(e.getCoordinate()),e.remove()},t.prototype.findNodesOfDegree=function(t){for(var n=new e,o=this.nodeIterator();o.hasNext();){var i=o.next();i.getDegree()==t&&n.add(i)}return n},jsts.planargraph.PlanarGraph=t}(),function(){var e=javascript.util.ArrayList,t=javascript.util.Stack,n=javascript.util.HashSet,o=jsts.util.Assert,i=jsts.operation.polygonize.EdgeRing,r=jsts.operation.polygonize.PolygonizeEdge,s=jsts.operation.polygonize.PolygonizeDirectedEdge,a=jsts.planargraph.PlanarGraph,l=jsts.planargraph.Node,c=function(e){a.apply(this),this.factory=e};c.prototype=new a,c.getDegreeNonDeleted=function(e){for(var t=e.getOutEdges().getEdges(),n=0,o=t.iterator();o.hasNext();){var i=o.next();i.isMarked()||n++}return n},c.getDegree=function(e,t){for(var n=e.getOutEdges().getEdges(),o=0,i=n.iterator();i.hasNext();){var r=i.next();r.getLabel()==t&&o++}return o},c.deleteAllEdges=function(e){for(var t=e.getOutEdges().getEdges(),n=t.iterator();n.hasNext();){var o=n.next();o.setMarked(!0);var i=o.getSym();null!=i&&i.setMarked(!0)}},c.prototype.factory=null,c.prototype.addEdge=function(e){if(!e.isEmpty()){var t=jsts.geom.CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(!(t.length<2)){var n=t[0],o=t[t.length-1],i=this.getNode(n),a=this.getNode(o),l=new s(i,a,t[1],(!0)),c=new s(a,i,t[t.length-2],(!1)),u=new r(e);u.setDirectedEdges(l,c),this.add(u)}}},c.prototype.getNode=function(e){var t=this.findNode(e);return null==t&&(t=new l(e),this.add(t)),t},c.prototype.computeNextCWEdges=function(){for(var e=this.nodeIterator();e.hasNext();){var t=e.next();c.computeNextCWEdges(t)}},c.prototype.convertMaximalToMinimalEdgeRings=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),o=n.getLabel(),i=c.findIntersectionNodes(n,o);if(null!=i)for(var r=i.iterator();r.hasNext();){var s=r.next();c.computeNextCCWEdges(s,o)}}},c.findIntersectionNodes=function(t,n){var i=t,r=null;do{var s=i.getFromNode();c.getDegree(s,n)>1&&(null==r&&(r=new e),r.add(s)),i=i.getNext(),o.isTrue(null!=i,"found null DE in ring"),o.isTrue(i==t||!i.isInRing(),"found DE already in ring")}while(i!=t);return r},c.prototype.getEdgeRings=function(){this.computeNextCWEdges(),c.label(this.dirEdges,-1);var t=c.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var n=new e,o=this.dirEdges.iterator();o.hasNext();){var i=o.next();if(!i.isMarked()&&!i.isInRing()){var r=this.findEdgeRing(i);n.add(r)}}return n},c.findLabeledEdgeRings=function(t){for(var n=new e,o=1,i=t.iterator();i.hasNext();){var r=i.next();if(!(r.isMarked()||r.getLabel()>=0)){n.add(r);var s=c.findDirEdgesInRing(r);c.label(s,o),o++}}return n},c.prototype.deleteCutEdges=function(){this.computeNextCWEdges(),c.findLabeledEdgeRings(this.dirEdges);for(var t=new e,n=this.dirEdges.iterator();n.hasNext();){var o=n.next();if(!o.isMarked()){var i=o.getSym();if(o.getLabel()==i.getLabel()){o.setMarked(!0),i.setMarked(!0);var r=o.getEdge();t.add(r.getLine())}}}return t},c.label=function(e,t){for(var n=e.iterator();n.hasNext();){var o=n.next();o.setLabel(t)}},c.computeNextCWEdges=function(e){for(var t=e.getOutEdges(),n=null,o=null,i=t.getEdges().iterator();i.hasNext();){var r=i.next();if(!r.isMarked()){if(null==n&&(n=r),null!=o){var s=o.getSym();s.setNext(r)}o=r}}if(null!=o){var s=o.getSym();s.setNext(n)}},c.computeNextCCWEdges=function(e,t){for(var n=e.getOutEdges(),i=null,r=null,s=n.getEdges(),a=s.size()-1;a>=0;a--){var l=s.get(a),c=l.getSym(),u=null;l.getLabel()==t&&(u=l);var d=null;c.getLabel()==t&&(d=c),null==u&&null==d||(null!=d&&(r=d),null!=u&&(null!=r&&(r.setNext(u),r=null),null==i&&(i=u)))}null!=r&&(o.isTrue(null!=i),r.setNext(i))},c.findDirEdgesInRing=function(t){var n=t,i=new e;do i.add(n),n=n.getNext(),o.isTrue(null!=n,"found null DE in ring"),o.isTrue(n==t||!n.isInRing(),"found DE already in ring");while(n!=t);return i},c.prototype.findEdgeRing=function(e){var t=e,n=new i(this.factory);do n.add(t),t.setRing(n),t=t.getNext(),o.isTrue(null!=t,"found null DE in ring"),o.isTrue(t==e||!t.isInRing(),"found DE already in ring");while(t!=e);return n},c.prototype.deleteDangles=function(){for(var e=this.findNodesOfDegree(1),o=new n,i=new t,r=e.iterator();r.hasNext();)i.push(r.next());for(;!i.isEmpty();){var s=i.pop();c.deleteAllEdges(s);for(var a=s.getOutEdges().getEdges(),r=a.iterator();r.hasNext();){var l=r.next();l.setMarked(!0);var u=l.getSym();null!=u&&u.setMarked(!0);var d=l.getEdge();o.add(d.getLine());var p=l.getToNode();1==c.getDegreeNonDeleted(p)&&i.push(p)}}return o},c.prototype.computeDepthParity=function(){for(;;){var e=null;if(null==e)return;this.computeDepthParity(e)}},c.prototype.computeDepthParity=function(e){},jsts.operation.polygonize.PolygonizeGraph=c}(),jsts.index.strtree.Interval=function(){var e;return 1===arguments.length?(e=arguments[0],jsts.index.strtree.Interval(e.min,e.max)):void(2===arguments.length&&(jsts.util.Assert.isTrue(this.min<=this.max),this.min=arguments[0],this.max=arguments[1]))},jsts.index.strtree.Interval.prototype.min=null,jsts.index.strtree.Interval.prototype.max=null,jsts.index.strtree.Interval.prototype.getCentre=function(){return(this.min+this.max)/2},jsts.index.strtree.Interval.prototype.expandToInclude=function(e){return this.max=Math.max(this.max,e.max),this.min=Math.min(this.min,e.min),this},jsts.index.strtree.Interval.prototype.intersects=function(e){return!(e.min>this.max||e.max<this.min)},jsts.index.strtree.Interval.prototype.equals=function(e){return e instanceof jsts.index.strtree.Interval&&(other=e,this.min===other.min&&this.max===other.max)},jsts.geom.GeometryFactory=function(e){this.precisionModel=e||new jsts.geom.PrecisionModel},jsts.geom.GeometryFactory.prototype.precisionModel=null,jsts.geom.GeometryFactory.prototype.getPrecisionModel=function(){return this.precisionModel},jsts.geom.GeometryFactory.prototype.createPoint=function(e){var t=new jsts.geom.Point(e,this);return t},jsts.geom.GeometryFactory.prototype.createLineString=function(e){var t=new jsts.geom.LineString(e,this);return t},jsts.geom.GeometryFactory.prototype.createLinearRing=function(e){var t=new jsts.geom.LinearRing(e,this);return t},jsts.geom.GeometryFactory.prototype.createPolygon=function(e,t){var n=new jsts.geom.Polygon(e,t,this);return n},jsts.geom.GeometryFactory.prototype.createMultiPoint=function(e){if(e&&e[0]instanceof jsts.geom.Coordinate){var t,n=[];for(t=0;t<e.length;t++)n.push(this.createPoint(e[t]));e=n}return new jsts.geom.MultiPoint(e,this)},jsts.geom.GeometryFactory.prototype.createMultiLineString=function(e){return new jsts.geom.MultiLineString(e,this)},jsts.geom.GeometryFactory.prototype.createMultiPolygon=function(e){return new jsts.geom.MultiPolygon(e,this)},jsts.geom.GeometryFactory.prototype.buildGeometry=function(e){for(var t=null,n=!1,o=!1,i=e.iterator();i.hasNext();){var r=i.next(),s=r.CLASS_NAME;null===t&&(t=s),s!==t&&(n=!0),r.isGeometryCollectionBase()&&(o=!0)}if(null===t)return this.createGeometryCollection(null);if(n||o)return this.createGeometryCollection(e.toArray());var a=e.get(0),l=e.size()>1;if(l){if(a instanceof jsts.geom.Polygon)return this.createMultiPolygon(e.toArray());if(a instanceof jsts.geom.LineString)return this.createMultiLineString(e.toArray());if(a instanceof jsts.geom.Point)return this.createMultiPoint(e.toArray());jsts.util.Assert.shouldNeverReachHere("Unhandled class: "+a)}return a},jsts.geom.GeometryFactory.prototype.createGeometryCollection=function(e){return new jsts.geom.GeometryCollection(e,this)},jsts.geom.GeometryFactory.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new jsts.geom.Coordinate(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new jsts.geom.Coordinate(e.getMinX(),e.getMinY()),new jsts.geom.Coordinate(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new jsts.geom.Coordinate(e.getMinX(),e.getMinY()),new jsts.geom.Coordinate(e.getMinX(),e.getMaxY()),new jsts.geom.Coordinate(e.getMaxX(),e.getMaxY()),new jsts.geom.Coordinate(e.getMaxX(),e.getMinY()),new jsts.geom.Coordinate(e.getMinX(),e.getMinY())]),null)},jsts.geomgraph.NodeFactory=function(){},jsts.geomgraph.NodeFactory.prototype.createNode=function(e){return new jsts.geomgraph.Node(e,null)},function(){jsts.geomgraph.Position=function(){},jsts.geomgraph.Position.ON=0,jsts.geomgraph.Position.LEFT=1,jsts.geomgraph.Position.RIGHT=2,jsts.geomgraph.Position.opposite=function(e){return e===jsts.geomgraph.Position.LEFT?jsts.geomgraph.Position.RIGHT:e===jsts.geomgraph.Position.RIGHT?jsts.geomgraph.Position.LEFT:e}}(),jsts.geomgraph.TopologyLocation=function(){if(this.location=[],3===arguments.length){var e=arguments[0],t=arguments[1],n=arguments[2];this.init(3),this.location[jsts.geomgraph.Position.ON]=e,this.location[jsts.geomgraph.Position.LEFT]=t,this.location[jsts.geomgraph.Position.RIGHT]=n}else if(arguments[0]instanceof jsts.geomgraph.TopologyLocation){var o=arguments[0];if(this.init(o.location.length),null!=o)for(var i=0;i<this.location.length;i++)this.location[i]=o.location[i]}else if("number"==typeof arguments[0]){var e=arguments[0];this.init(1),this.location[jsts.geomgraph.Position.ON]=e}else if(arguments[0]instanceof Array){var r=arguments[0];this.init(r.length)}},jsts.geomgraph.TopologyLocation.prototype.location=null,jsts.geomgraph.TopologyLocation.prototype.init=function(e){this.location[e-1]=null,this.setAllLocations(jsts.geom.Location.NONE)},jsts.geomgraph.TopologyLocation.prototype.get=function(e){return e<this.location.length?this.location[e]:jsts.geom.Location.NONE},jsts.geomgraph.TopologyLocation.prototype.isNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==jsts.geom.Location.NONE)return!1;return!0},jsts.geomgraph.TopologyLocation.prototype.isAnyNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===jsts.geom.Location.NONE)return!0;return!1},jsts.geomgraph.TopologyLocation.prototype.isEqualOnSide=function(e,t){return this.location[t]==e.location[t]},jsts.geomgraph.TopologyLocation.prototype.isArea=function(){return this.location.length>1},jsts.geomgraph.TopologyLocation.prototype.isLine=function(){return 1===this.location.length},jsts.geomgraph.TopologyLocation.prototype.flip=function(){if(!(this.location.length<=1)){var e=this.location[jsts.geomgraph.Position.LEFT];this.location[jsts.geomgraph.Position.LEFT]=this.location[jsts.geomgraph.Position.RIGHT],this.location[jsts.geomgraph.Position.RIGHT]=e}},jsts.geomgraph.TopologyLocation.prototype.setAllLocations=function(e){for(var t=0;t<this.location.length;t++)this.location[t]=e},jsts.geomgraph.TopologyLocation.prototype.setAllLocationsIfNull=function(e){for(var t=0;t<this.location.length;t++)this.location[t]===jsts.geom.Location.NONE&&(this.location[t]=e)},jsts.geomgraph.TopologyLocation.prototype.setLocation=function(e,t){void 0!==t?this.location[e]=t:this.setLocation(jsts.geomgraph.Position.ON,e)},jsts.geomgraph.TopologyLocation.prototype.getLocations=function(){return location},jsts.geomgraph.TopologyLocation.prototype.setLocations=function(e,t,n){this.location[jsts.geomgraph.Position.ON]=e,this.location[jsts.geomgraph.Position.LEFT]=t,this.location[jsts.geomgraph.Position.RIGHT]=n},jsts.geomgraph.TopologyLocation.prototype.allPositionsEqual=function(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0},jsts.geomgraph.TopologyLocation.prototype.merge=function(e){if(e.location.length>this.location.length){var t=[];t[jsts.geomgraph.Position.ON]=this.location[jsts.geomgraph.Position.ON],t[jsts.geomgraph.Position.LEFT]=jsts.geom.Location.NONE,t[jsts.geomgraph.Position.RIGHT]=jsts.geom.Location.NONE,this.location=t}for(var n=0;n<this.location.length;n++)this.location[n]===jsts.geom.Location.NONE&&n<e.location.length&&(this.location[n]=e.location[n])},jsts.geomgraph.Label=function(){this.elt=[];var e,t,n,o,i;4===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3],this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE),this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE),this.elt[e].setLocations(t,n,i)):3===arguments.length?(t=arguments[0],n=arguments[1],i=arguments[2],this.elt[0]=new jsts.geomgraph.TopologyLocation(t,n,i),this.elt[1]=new jsts.geomgraph.TopologyLocation(t,n,i)):2===arguments.length?(e=arguments[0],t=arguments[1],this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE),this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE),this.elt[e].setLocation(t)):arguments[0]instanceof jsts.geomgraph.Label?(o=arguments[0],this.elt[0]=new jsts.geomgraph.TopologyLocation(o.elt[0]),this.elt[1]=new jsts.geomgraph.TopologyLocation(o.elt[1])):"number"==typeof arguments[0]&&(t=arguments[0],this.elt[0]=new jsts.geomgraph.TopologyLocation(t),this.elt[1]=new jsts.geomgraph.TopologyLocation(t))},jsts.geomgraph.Label.toLineLabel=function(e){var t,n=new jsts.geomgraph.Label(jsts.geom.Location.NONE);for(t=0;t<2;t++)n.setLocation(t,e.getLocation(t));return n},jsts.geomgraph.Label.prototype.elt=null,jsts.geomgraph.Label.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},jsts.geomgraph.Label.prototype.getLocation=function(e,t){return 1==arguments.length?this.getLocation2.apply(this,arguments):this.elt[e].get(t)},jsts.geomgraph.Label.prototype.getLocation2=function(e){return this.elt[e].get(jsts.geomgraph.Position.ON)},jsts.geomgraph.Label.prototype.setLocation=function(e,t,n){return 2==arguments.length?void this.setLocation2.apply(this,arguments):void this.elt[e].setLocation(t,n)},jsts.geomgraph.Label.prototype.setLocation2=function(e,t){this.elt[e].setLocation(jsts.geomgraph.Position.ON,t)},jsts.geomgraph.Label.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)},jsts.geomgraph.Label.prototype.setAllLocationsIfNull=function(e,t){return 1==arguments.length?void this.setAllLocationsIfNull2.apply(this,arguments):void this.elt[e].setAllLocationsIfNull(t)},jsts.geomgraph.Label.prototype.setAllLocationsIfNull2=function(e){this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)};jsts.geomgraph.Label.prototype.merge=function(e){var t;for(t=0;t<2;t++)null===this.elt[t]&&null!==e.elt[t]?this.elt[t]=new jsts.geomgraph.TopologyLocation(e.elt[t]):this.elt[t].merge(e.elt[t])};jsts.geomgraph.Label.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e},jsts.geomgraph.Label.prototype.isNull=function(e){return this.elt[e].isNull()},jsts.geomgraph.Label.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()},jsts.geomgraph.Label.prototype.isArea=function(){return 1==arguments.length?this.isArea2(arguments[0]):this.elt[0].isArea()||this.elt[1].isArea()},jsts.geomgraph.Label.prototype.isArea2=function(e){return this.elt[e].isArea()},jsts.geomgraph.Label.prototype.isLine=function(e){return this.elt[e].isLine()},jsts.geomgraph.Label.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)},jsts.geomgraph.Label.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)},jsts.geomgraph.Label.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new jsts.geomgraph.TopologyLocation(this.elt[e].location[0]))},jsts.geomgraph.EdgeRing=function(e,t){this.edges=[],this.pts=[],this.holes=[],this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE),this.geometryFactory=t,e&&(this.computePoints(e),this.computeRing())},jsts.geomgraph.EdgeRing.prototype.startDe=null,jsts.geomgraph.EdgeRing.prototype.maxNodeDegree=-1,jsts.geomgraph.EdgeRing.prototype.edges=null,jsts.geomgraph.EdgeRing.prototype.pts=null,jsts.geomgraph.EdgeRing.prototype.label=null,jsts.geomgraph.EdgeRing.prototype.ring=null,jsts.geomgraph.EdgeRing.prototype._isHole=null,jsts.geomgraph.EdgeRing.prototype.shell=null,jsts.geomgraph.EdgeRing.prototype.holes=null,jsts.geomgraph.EdgeRing.prototype.geometryFactory=null,jsts.geomgraph.EdgeRing.prototype.isIsolated=function(){return 1==this.label.getGeometryCount()},jsts.geomgraph.EdgeRing.prototype.isHole=function(){return this._isHole},jsts.geomgraph.EdgeRing.prototype.getCoordinate=function(e){return this.pts[e]},jsts.geomgraph.EdgeRing.prototype.getLinearRing=function(){return this.ring},jsts.geomgraph.EdgeRing.prototype.getLabel=function(){return this.label},jsts.geomgraph.EdgeRing.prototype.isShell=function(){return null===this.shell},jsts.geomgraph.EdgeRing.prototype.getShell=function(){return this.shell},jsts.geomgraph.EdgeRing.prototype.setShell=function(e){this.shell=e,null!==e&&e.addHole(this)},jsts.geomgraph.EdgeRing.prototype.addHole=function(e){this.holes.push(e)},jsts.geomgraph.EdgeRing.prototype.toPolygon=function(e){for(var t=[],n=0;n<this.holes.length;n++)t[n]=this.holes[n].getLinearRing();var o=this.geometryFactory.createPolygon(this.getLinearRing(),t);return o},jsts.geomgraph.EdgeRing.prototype.computeRing=function(){if(null===this.ring){for(var e=[],t=0;t<this.pts.length;t++)e[t]=this.pts[t];this.ring=this.geometryFactory.createLinearRing(e),this._isHole=jsts.algorithm.CGAlgorithms.isCCW(this.ring.getCoordinates())}},jsts.geomgraph.EdgeRing.prototype.getNext=function(e){throw new jsts.error.AbstractInvocationError},jsts.geomgraph.EdgeRing.prototype.setEdgeRing=function(e,t){throw new jsts.error.AbstractInvocationError},jsts.geomgraph.EdgeRing.prototype.getEdges=function(){return this.edges},jsts.geomgraph.EdgeRing.prototype.computePoints=function(e){this.startDe=e;var t=e,n=!0;do{if(null===t)throw new jsts.error.TopologyError("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new jsts.error.TopologyError("Directed Edge visited twice during ring-building at "+t.getCoordinate());this.edges.push(t);var o=t.getLabel();jsts.util.Assert.isTrue(o.isArea()),this.mergeLabel(o),this.addPoints(t.getEdge(),t.isForward(),n),n=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this.startDe)},jsts.geomgraph.EdgeRing.prototype.getMaxNodeDegree=function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},jsts.geomgraph.EdgeRing.prototype.computeMaxNodeDegree=function(){this.maxNodeDegree=0;var e=this.startDe;do{var t=e.getNode(),n=t.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),e=this.getNext(e)}while(e!==this.startDe);this.maxNodeDegree*=2},jsts.geomgraph.EdgeRing.prototype.setInResult=function(){var e=this.startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!=this.startDe)},jsts.geomgraph.EdgeRing.prototype.mergeLabel=function(e){this.mergeLabel2(e,0),this.mergeLabel2(e,1)},jsts.geomgraph.EdgeRing.prototype.mergeLabel2=function(e,t){var n=e.getLocation(t,jsts.geomgraph.Position.RIGHT);if(n!=jsts.geom.Location.NONE)return this.label.getLocation(t)===jsts.geom.Location.NONE?void this.label.setLocation(t,n):void 0},jsts.geomgraph.EdgeRing.prototype.addPoints=function(e,t,n){var o=e.getCoordinates();if(t){var i=1;n&&(i=0);for(var r=i;r<o.length;r++)this.pts.push(o[r])}else{var i=o.length-2;n&&(i=o.length-1);for(var r=i;r>=0;r--)this.pts.push(o[r])}},jsts.geomgraph.EdgeRing.prototype.containsPoint=function(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e))return!1;if(!jsts.algorithm.CGAlgorithms.isPointInRing(e,t.getCoordinates()))return!1;for(var o=0;o<this.holes.length;o++){var i=this.holes[o];if(i.containsPoint(e))return!1}return!0},function(){jsts.geom.LinearRing=function(e,t){jsts.geom.LineString.apply(this,arguments)},jsts.geom.LinearRing.prototype=new jsts.geom.LineString,jsts.geom.LinearRing.constructor=jsts.geom.LinearRing,jsts.geom.LinearRing.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE},jsts.geom.LinearRing.prototype.isSimple=function(){return!0},jsts.geom.LinearRing.prototype.getGeometryType=function(){return"LinearRing"},jsts.geom.LinearRing.MINIMUM_VALID_SIZE=4,jsts.geom.LinearRing.prototype.CLASS_NAME="jsts.geom.LinearRing"}(),jsts.index.strtree.Boundable=function(){},jsts.index.strtree.Boundable.prototype.getBounds=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractNode=function(e){this.level=e,this.childBoundables=[]},jsts.index.strtree.AbstractNode.prototype=new jsts.index.strtree.Boundable,jsts.index.strtree.AbstractNode.constructor=jsts.index.strtree.AbstractNode,jsts.index.strtree.AbstractNode.prototype.childBoundables=null,jsts.index.strtree.AbstractNode.prototype.bounds=null,jsts.index.strtree.AbstractNode.prototype.level=null,jsts.index.strtree.AbstractNode.prototype.getChildBoundables=function(){return this.childBoundables},jsts.index.strtree.AbstractNode.prototype.computeBounds=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractNode.prototype.getBounds=function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds},jsts.index.strtree.AbstractNode.prototype.getLevel=function(){return this.level},jsts.index.strtree.AbstractNode.prototype.addChildBoundable=function(e){this.childBoundables.push(e)},function(){jsts.noding.Noder=function(){},jsts.noding.Noder.prototype.computeNodes=jsts.abstractFunc,jsts.noding.Noder.prototype.getNodedSubstrings=jsts.abstractFunc}(),function(){var e=jsts.noding.Noder;jsts.noding.SinglePassNoder=function(){},jsts.noding.SinglePassNoder.prototype=new e,jsts.noding.SinglePassNoder.constructor=jsts.noding.SinglePassNoder,jsts.noding.SinglePassNoder.prototype.segInt=null,jsts.noding.SinglePassNoder.prototype.setSegmentIntersector=function(e){this.segInt=e}}(),jsts.index.SpatialIndex=function(){},jsts.index.SpatialIndex.prototype.insert=function(e,t){throw new jsts.error.AbstractMethodInvocationError},jsts.index.SpatialIndex.prototype.query=function(e,t){throw new jsts.error.AbstractMethodInvocationError},jsts.index.SpatialIndex.prototype.remove=function(e,t){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree=function(e){void 0!==e&&(this.itemBoundables=[],jsts.util.Assert.isTrue(e>1,"Node capacity must be greater than 1"),this.nodeCapacity=e)},jsts.index.strtree.AbstractSTRtree.IntersectsOp=function(){},jsts.index.strtree.AbstractSTRtree.IntersectsOp.prototype.intersects=function(e,t){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree.prototype.root=null,jsts.index.strtree.AbstractSTRtree.prototype.built=!1,jsts.index.strtree.AbstractSTRtree.prototype.itemBoundables=null,jsts.index.strtree.AbstractSTRtree.prototype.nodeCapacity=null,jsts.index.strtree.AbstractSTRtree.prototype.build=function(){jsts.util.Assert.isTrue(!this.built),this.root=0===this.itemBoundables.length?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.built=!0},jsts.index.strtree.AbstractSTRtree.prototype.createNode=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables=function(e,t){jsts.util.Assert.isTrue(!(0===e.length));var n=[];n.push(this.createNode(t));for(var o=[],i=0;i<e.length;i++)o.push(e[i]);o.sort(this.getComparator());for(var i=0;i<o.length;i++){var r=o[i];this.lastNode(n).getChildBoundables().length===this.getNodeCapacity()&&n.push(this.createNode(t)),this.lastNode(n).addChildBoundable(r)}return n},jsts.index.strtree.AbstractSTRtree.prototype.lastNode=function(e){return e[e.length-1]},jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles=function(e,t){return e>t?1:e<t?-1:0},jsts.index.strtree.AbstractSTRtree.prototype.createHigherLevels=function(e,t){jsts.util.Assert.isTrue(!(0===e.length));var n=this.createParentBoundables(e,t+1);return 1===n.length?n[0]:this.createHigherLevels(n,t+1)},jsts.index.strtree.AbstractSTRtree.prototype.getRoot=function(){return this.built||this.build(),this.root},jsts.index.strtree.AbstractSTRtree.prototype.getNodeCapacity=function(){return this.nodeCapacity},jsts.index.strtree.AbstractSTRtree.prototype.size=function(){return 1===arguments.length?this.size2(arguments[0]):(this.built||this.build(),0===this.itemBoundables.length?0:this.size2(root))},jsts.index.strtree.AbstractSTRtree.prototype.size2=function(e){for(var t=0,n=e.getChildBoundables(),o=0;o<n.length;o++){var i=n[o];i instanceof jsts.index.strtree.AbstractNode?t+=this.size(i):i instanceof jsts.index.strtree.ItemBoundable&&(t+=1)}return t},jsts.index.strtree.AbstractSTRtree.prototype.depth=function(){return 1===arguments.length?this.depth2(arguments[0]):(this.built||this.build(),0===this.itemBoundables.length?0:this.depth2(root))},jsts.index.strtree.AbstractSTRtree.prototype.depth2=function(){for(var e=0,t=node.getChildBoundables(),n=0;n<t.length;n++){var o=t[n];if(o instanceof jsts.index.strtree.AbstractNode){var i=this.depth(o);i>e&&(e=i)}}return e+1},jsts.index.strtree.AbstractSTRtree.prototype.insert=function(e,t){jsts.util.Assert.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.push(new jsts.index.strtree.ItemBoundable(e,t))},jsts.index.strtree.AbstractSTRtree.prototype.query=function(e){arguments.length>1&&this.query2.apply(this,arguments),this.built||this.build();var t=[];return 0===this.itemBoundables.length?(jsts.util.Assert.isTrue(null===this.root.getBounds()),t):(this.getIntersectsOp().intersects(this.root.getBounds(),e)&&this.query3(e,this.root,t),t)},jsts.index.strtree.AbstractSTRtree.prototype.query2=function(e,t){arguments.length>2&&this.query3.apply(this,arguments),this.built||this.build(),0===this.itemBoundables.length&&jsts.util.Assert.isTrue(null===this.root.getBounds()),this.getIntersectsOp().intersects(this.root.getBounds(),e)&&this.query4(e,this.root,t)},jsts.index.strtree.AbstractSTRtree.prototype.query3=function(e,t,n){arguments[2]instanceof Array||this.query4.apply(this,arguments);for(var o=t.getChildBoundables(),i=0;i<o.length;i++){var r=o[i];this.getIntersectsOp().intersects(r.getBounds(),e)&&(r instanceof jsts.index.strtree.AbstractNode?this.query3(e,r,n):r instanceof jsts.index.strtree.ItemBoundable?n.push(r.getItem()):jsts.util.Assert.shouldNeverReachHere())}},jsts.index.strtree.AbstractSTRtree.prototype.query4=function(e,t,n){for(var o=t.getChildBoundables(),i=0;i<o.length;i++){var r=o[i];this.getIntersectsOp().intersects(r.getBounds(),e)&&(r instanceof jsts.index.strtree.AbstractNode?this.query4(e,r,n):r instanceof jsts.index.strtree.ItemBoundable?n.visitItem(r.getItem()):jsts.util.Assert.shouldNeverReachHere())}},jsts.index.strtree.AbstractSTRtree.prototype.getIntersectsOp=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree.prototype.itemsTree=function(){if(1===arguments.length)return this.itemsTree2.apply(this,arguments);this.built||this.build();var e=this.itemsTree2(this.root);return null===e?[]:e},jsts.index.strtree.AbstractSTRtree.prototype.itemsTree2=function(e){for(var t=[],n=e.getChildBoundables(),o=0;o<n.length;o++){var i=n[o];if(i instanceof jsts.index.strtree.AbstractNode){var r=this.itemsTree(i);null!=r&&t.push(r)}else i instanceof jsts.index.strtree.ItemBoundable?t.push(i.getItem()):jsts.util.Assert.shouldNeverReachHere()}return t.length<=0?null:t},jsts.index.strtree.AbstractSTRtree.prototype.remove=function(e,t){return this.built||this.build(),0===this.itemBoundables.length&&jsts.util.Assert.isTrue(null==this.root.getBounds()),!!this.getIntersectsOp().intersects(this.root.getBounds(),e)&&this.remove2(e,this.root,t)},jsts.index.strtree.AbstractSTRtree.prototype.remove2=function(e,t,n){var o=this.removeItem(t,n);if(o)return!0;for(var i=null,r=t.getChildBoundables(),s=0;s<r.length;s++){var a=r[s];if(this.getIntersectsOp().intersects(a.getBounds(),e)&&a instanceof jsts.index.strtree.AbstractNode&&(o=this.remove(e,a,n))){i=a;break}}return null!=i&&0===i.getChildBoundables().length&&r.splice(r.indexOf(i),1),o},jsts.index.strtree.AbstractSTRtree.prototype.removeItem=function(e,t){for(var n=null,o=e.getChildBoundables(),i=0;i<o.length;i++){var r=o[i];r instanceof jsts.index.strtree.ItemBoundable&&r.getItem()===t&&(n=r);
}return null!==n&&(o.splice(o.indexOf(n),1),!0)},jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel=function(e){if(arguments.length>1)return void this.boundablesAtLevel2.apply(this,arguments);var t=[];return this.boundablesAtLevel2(e,this.root,t),t},jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel2=function(e,t,n){if(jsts.util.Assert.isTrue(e>-2),t.getLevel()===e)return void n.add(t);for(var o=node.getChildBoundables(),i=0;i<o.length;i++){var r=o[i];r instanceof jsts.index.strtree.AbstractNode?this.boundablesAtLevel(e,r,n):(jsts.util.Assert.isTrue(r instanceof jsts.index.strtree.ItemBoundable),e===-1&&n.add(r))}},jsts.index.strtree.AbstractSTRtree.prototype.getComparator=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.STRtree=function(e){e=e||jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY,jsts.index.strtree.AbstractSTRtree.call(this,e)},jsts.index.strtree.STRtree.prototype=new jsts.index.strtree.AbstractSTRtree,jsts.index.strtree.STRtree.constructor=jsts.index.strtree.STRtree,jsts.index.strtree.STRtree.prototype.xComparator=function(e,t){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreX(e.getBounds()),jsts.index.strtree.STRtree.prototype.centreX(t.getBounds()))},jsts.index.strtree.STRtree.prototype.yComparator=function(e,t){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreY(e.getBounds()),jsts.index.strtree.STRtree.prototype.centreY(t.getBounds()))},jsts.index.strtree.STRtree.prototype.centreX=function(e){return jsts.index.strtree.STRtree.prototype.avg(e.getMinX(),e.getMaxX())},jsts.index.strtree.STRtree.prototype.centreY=function(e){return jsts.index.strtree.STRtree.prototype.avg(e.getMinY(),e.getMaxY())},jsts.index.strtree.STRtree.prototype.avg=function(e,t){return(e+t)/2},jsts.index.strtree.STRtree.prototype.intersectsOp={intersects:function(e,t){return e.intersects(t)}},jsts.index.strtree.STRtree.prototype.createParentBoundables=function(e,t){jsts.util.Assert.isTrue(!(0===e.length));for(var n=Math.ceil(e.length/this.getNodeCapacity()),o=[],i=0;i<e.length;i++)o.push(e[i]);o.sort(this.xComparator);var r=this.verticalSlices(o,Math.ceil(Math.sqrt(n)));return this.createParentBoundablesFromVerticalSlices(r,t)},jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlices=function(e,t){jsts.util.Assert.isTrue(e.length>0);for(var n=[],o=0;o<e.length;o++)n=n.concat(this.createParentBoundablesFromVerticalSlice(e[o],t));return n},jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlice=function(e,t){return jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables.call(this,e,t)},jsts.index.strtree.STRtree.prototype.verticalSlices=function(e,t){for(var n,o,i=Math.ceil(e.length/t),r=[],s=0,a=0;a<t;a++)for(r[a]=[],n=0;s<e.length&&n<i;)o=e[s++],r[a].push(o),n++;return r},jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY=10,jsts.index.strtree.STRtree.prototype.createNode=function(e){var t=new jsts.index.strtree.AbstractNode(e);return t.computeBounds=function(){for(var e=null,t=this.getChildBoundables(),n=0;n<t.length;n++){var o=t[n];null===e?e=new jsts.geom.Envelope(o.getBounds()):e.expandToInclude(o.getBounds())}return e},t},jsts.index.strtree.STRtree.prototype.getIntersectsOp=function(){return this.intersectsOp},jsts.index.strtree.STRtree.prototype.insert=function(e,t){e.isNull()||jsts.index.strtree.AbstractSTRtree.prototype.insert.call(this,e,t)},jsts.index.strtree.STRtree.prototype.query=function(e,t){return jsts.index.strtree.AbstractSTRtree.prototype.query.apply(this,arguments)},jsts.index.strtree.STRtree.prototype.remove=function(e,t){return jsts.index.strtree.AbstractSTRtree.prototype.remove.call(this,e,t)},jsts.index.strtree.STRtree.prototype.size=function(){return jsts.index.strtree.AbstractSTRtree.prototype.size.call(this)},jsts.index.strtree.STRtree.prototype.depth=function(){return jsts.index.strtree.AbstractSTRtree.prototype.depth.call(this)},jsts.index.strtree.STRtree.prototype.getComparator=function(){return this.yComparator},jsts.index.strtree.STRtree.prototype.nearestNeighbour=function(e){var t=new jsts.index.strtree.BoundablePair(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour4(t)},jsts.index.strtree.STRtree.prototype.nearestNeighbour2=function(e,t,n){var o=new jsts.index.strtree.ItemBoundable(e,t),i=new jsts.index.strtree.BoundablePair(this.getRoot(),o,n);return this.nearestNeighbour4(i)[0]},jsts.index.strtree.STRtree.prototype.nearestNeighbour3=function(e,t){var n=new jsts.index.strtree.BoundablePair(this.getRoot(),e.getRoot(),t);return this.nearestNeighbour4(n)},jsts.index.strtree.STRtree.prototype.nearestNeighbour4=function(e){return this.nearestNeighbour5(e,Double.POSITIVE_INFINITY)},jsts.index.strtree.STRtree.prototype.nearestNeighbour5=function(e,t){var n=t,o=null,i=[];for(i.push(e);!i.isEmpty()&&n>0;){var r=i.pop(),s=r.getDistance();if(s>=n)break;r.isLeaves()?(n=s,o=r):r.expandToQueue(i,n)}return[o.getBoundable(0).getItem(),o.getBoundable(1).getItem()]},jsts.noding.SegmentString=function(){},jsts.noding.SegmentString.prototype.getData=jsts.abstractFunc,jsts.noding.SegmentString.prototype.setData=jsts.abstractFunc,jsts.noding.SegmentString.prototype.size=jsts.abstractFunc,jsts.noding.SegmentString.prototype.getCoordinate=jsts.abstractFunc,jsts.noding.SegmentString.prototype.getCoordinates=jsts.abstractFunc,jsts.noding.SegmentString.prototype.isClosed=jsts.abstractFunc,jsts.noding.NodableSegmentString=function(){},jsts.noding.NodableSegmentString.prototype=new jsts.noding.SegmentString,jsts.noding.NodableSegmentString.prototype.addIntersection=jsts.abstractFunc,jsts.noding.NodedSegmentString=function(e,t){this.nodeList=new jsts.noding.SegmentNodeList(this),this.pts=e,this.data=t},jsts.noding.NodedSegmentString.prototype=new jsts.noding.NodableSegmentString,jsts.noding.NodedSegmentString.constructor=jsts.noding.NodedSegmentString,jsts.noding.NodedSegmentString.getNodedSubstrings=function(e){if(2===arguments.length)return void jsts.noding.NodedSegmentString.getNodedSubstrings2.apply(this,arguments);var t=new javascript.util.ArrayList;return jsts.noding.NodedSegmentString.getNodedSubstrings2(e,t),t},jsts.noding.NodedSegmentString.getNodedSubstrings2=function(e,t){for(var n=e.iterator();n.hasNext();){var o=n.next();o.getNodeList().addSplitEdges(t)}},jsts.noding.NodedSegmentString.prototype.nodeList=null,jsts.noding.NodedSegmentString.prototype.pts=null,jsts.noding.NodedSegmentString.prototype.data=null,jsts.noding.NodedSegmentString.prototype.getData=function(){return this.data},jsts.noding.NodedSegmentString.prototype.setData=function(e){this.data=e},jsts.noding.NodedSegmentString.prototype.getNodeList=function(){return this.nodeList},jsts.noding.NodedSegmentString.prototype.size=function(){return this.pts.length},jsts.noding.NodedSegmentString.prototype.getCoordinate=function(e){return this.pts[e]},jsts.noding.NodedSegmentString.prototype.getCoordinates=function(){return this.pts},jsts.noding.NodedSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.noding.NodedSegmentString.prototype.getSegmentOctant=function(e){return e===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))},jsts.noding.NodedSegmentString.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:jsts.noding.Octant.octant(e,t)},jsts.noding.NodedSegmentString.prototype.addIntersections=function(e,t,n){for(var o=0;o<e.getIntersectionNum();o++)this.addIntersection(e,t,n,o)},jsts.noding.NodedSegmentString.prototype.addIntersection=function(e,t,n,o){if(e instanceof jsts.geom.Coordinate)return void this.addIntersection2.apply(this,arguments);var i=new jsts.geom.Coordinate(e.getIntersection(o));this.addIntersection2(i,t)},jsts.noding.NodedSegmentString.prototype.addIntersection2=function(e,t){this.addIntersectionNode(e,t)},jsts.noding.NodedSegmentString.prototype.addIntersectionNode=function(e,t){var n=t,o=n+1;if(o<this.pts.length){var i=this.pts[o];e.equals2D(i)&&(n=o)}var r=this.nodeList.add(e,n);return r},jsts.noding.NodedSegmentString.prototype.toString=function(){var e=new jsts.geom.GeometryFactory;return(new jsts.io.WKTWriter).write(e.createLineString(this.pts))},jsts.index.chain.MonotoneChainBuilder=function(){},jsts.index.chain.MonotoneChainBuilder.toIntArray=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t},jsts.index.chain.MonotoneChainBuilder.getChains=function(e){return 2===arguments.length?jsts.index.chain.MonotoneChainBuilder.getChains2.apply(this,arguments):jsts.index.chain.MonotoneChainBuilder.getChains2(e,null)},jsts.index.chain.MonotoneChainBuilder.getChains2=function(e,t){for(var n=[],o=jsts.index.chain.MonotoneChainBuilder.getChainStartIndices(e),i=0;i<o.length-1;i++){var r=new jsts.index.chain.MonotoneChain(e,o[i],o[i+1],t);n.push(r)}return n},jsts.index.chain.MonotoneChainBuilder.getChainStartIndices=function(e){var t=0,n=[];n.push(t);do{var o=jsts.index.chain.MonotoneChainBuilder.findChainEnd(e,t);n.push(o),t=o}while(t<e.length-1);var i=jsts.index.chain.MonotoneChainBuilder.toIntArray(n);return i},jsts.index.chain.MonotoneChainBuilder.findChainEnd=function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var o=jsts.geomgraph.Quadrant.quadrant(e[n],e[n+1]),i=t+1;i<e.length;){if(!e[i-1].equals2D(e[i])){var r=jsts.geomgraph.Quadrant.quadrant(e[i-1],e[i]);if(r!==o)break}i++}return i-1},jsts.algorithm.LineIntersector=function(){this.inputLines=[[],[]],this.intPt=[null,null],this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.LineIntersector.NO_INTERSECTION=0,jsts.algorithm.LineIntersector.POINT_INTERSECTION=1,jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION=2,jsts.algorithm.LineIntersector.prototype.setPrecisionModel=function(e){this.precisionModel=e},jsts.algorithm.LineIntersector.prototype.getEndpoint=function(e,t){return this.inputLines[e][t]},jsts.algorithm.LineIntersector.computeEdgeDistance=function(e,t,n){var o=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),r=-1;if(e.equals(t))r=0;else if(e.equals(n))r=o>i?o:i;else{var s=Math.abs(e.x-t.x),a=Math.abs(e.y-t.y);r=o>i?s:a,0!==r||e.equals(t)||(r=Math.max(s,a))}if(0===r&&!e.equals(t))throw new jsts.error.IllegalArgumentError("Bad distance calculation");return r},jsts.algorithm.LineIntersector.nonRobustComputeEdgeDistance=function(e,t,n){var o=e.x-t.x,i=e.y-t.y,r=Math.sqrt(o*o+i*i);if(0!==r||e.equals(t))throw new jsts.error.IllegalArgumentError("Invalid distance calculation");return r},jsts.algorithm.LineIntersector.prototype.result=null,jsts.algorithm.LineIntersector.prototype.inputLines=null,jsts.algorithm.LineIntersector.prototype.intPt=null,jsts.algorithm.LineIntersector.prototype.intLineIndex=null,jsts.algorithm.LineIntersector.prototype._isProper=null,jsts.algorithm.LineIntersector.prototype.pa=null,jsts.algorithm.LineIntersector.prototype.pb=null,jsts.algorithm.LineIntersector.prototype.precisionModel=null,jsts.algorithm.LineIntersector.prototype.computeIntersection=function(e,t,n){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.LineIntersector.prototype.isCollinear=function(){return this.result===jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION},jsts.algorithm.LineIntersector.prototype.computeIntersection=function(e,t,n,o){this.inputLines[0][0]=e,this.inputLines[0][1]=t,this.inputLines[1][0]=n,this.inputLines[1][1]=o,this.result=this.computeIntersect(e,t,n,o)},jsts.algorithm.LineIntersector.prototype.computeIntersect=function(e,t,n,o){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.LineIntersector.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},jsts.algorithm.LineIntersector.prototype.hasIntersection=function(){return this.result!==jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.LineIntersector.prototype.getIntersectionNum=function(){return this.result},jsts.algorithm.LineIntersector.prototype.getIntersection=function(e){return this.intPt[e]},jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(){null===this.intLineIndex&&(this.intLineIndex=[[],[]],this.computeIntLineIndex(0),this.computeIntLineIndex(1))},jsts.algorithm.LineIntersector.prototype.isIntersection=function(e){var t;for(t=0;t<this.result;t++)if(this.intPt[t].equals2D(e))return!0;return!1},jsts.algorithm.LineIntersector.prototype.isInteriorIntersection=function(){return 1===arguments.length?this.isInteriorIntersection2.apply(this,arguments):!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1)},jsts.algorithm.LineIntersector.prototype.isInteriorIntersection2=function(e){var t;for(t=0;t<this.result;t++)if(!this.intPt[t].equals2D(this.inputLines[e][0])&&!this.intPt[t].equals2D(this.inputLines[e][1]))return!0;return!1},jsts.algorithm.LineIntersector.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},jsts.algorithm.LineIntersector.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this.intPt[intLineIndex[e][t]]},jsts.algorithm.LineIntersector.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this.intLineIndex[e][t]},jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(e){var t=this.getEdgeDistance(e,0),n=this.getEdgeDistance(e,1);t>n?(this.intLineIndex[e][0]=0,this.intLineIndex[e][1]=1):(this.intLineIndex[e][0]=1,this.intLineIndex[e][1]=0)},jsts.algorithm.LineIntersector.prototype.getEdgeDistance=function(e,t){var n=jsts.algorithm.LineIntersector.computeEdgeDistance(this.intPt[t],this.inputLines[e][0],this.inputLines[e][1]);return n},jsts.algorithm.RobustLineIntersector=function(){jsts.algorithm.RobustLineIntersector.prototype.constructor.call(this)},jsts.algorithm.RobustLineIntersector.prototype=new jsts.algorithm.LineIntersector,jsts.algorithm.RobustLineIntersector.prototype.computeIntersection=function(e,t,n){return 4===arguments.length?void jsts.algorithm.LineIntersector.prototype.computeIntersection.apply(this,arguments):(this._isProper=!1,jsts.geom.Envelope.intersects(t,n,e)&&0===jsts.algorithm.CGAlgorithms.orientationIndex(t,n,e)&&0===jsts.algorithm.CGAlgorithms.orientationIndex(n,t,e)?(this._isProper=!0,(e.equals(t)||e.equals(n))&&(this._isProper=!1),void(this.result=jsts.algorithm.LineIntersector.POINT_INTERSECTION)):void(this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION))},jsts.algorithm.RobustLineIntersector.prototype.computeIntersect=function(e,t,n,o){if(this._isProper=!1,!jsts.geom.Envelope.intersects(e,t,n,o))return jsts.algorithm.LineIntersector.NO_INTERSECTION;var i=jsts.algorithm.CGAlgorithms.orientationIndex(e,t,n),r=jsts.algorithm.CGAlgorithms.orientationIndex(e,t,o);if(i>0&&r>0||i<0&&r<0)return jsts.algorithm.LineIntersector.NO_INTERSECTION;var s=jsts.algorithm.CGAlgorithms.orientationIndex(n,o,e),a=jsts.algorithm.CGAlgorithms.orientationIndex(n,o,t);if(s>0&&a>0||s<0&&a<0)return jsts.algorithm.LineIntersector.NO_INTERSECTION;var l=0===i&&0===r&&0===s&&0===a;return l?this.computeCollinearIntersection(e,t,n,o):(0===i||0===r||0===s||0===a?(this._isProper=!1,e.equals2D(n)||e.equals2D(o)?this.intPt[0]=e:t.equals2D(n)||t.equals2D(o)?this.intPt[0]=t:0===i?this.intPt[0]=new jsts.geom.Coordinate(n):0===r?this.intPt[0]=new jsts.geom.Coordinate(o):0===s?this.intPt[0]=new jsts.geom.Coordinate(e):0===a&&(this.intPt[0]=new jsts.geom.Coordinate(t))):(this._isProper=!0,this.intPt[0]=this.intersection(e,t,n,o)),jsts.algorithm.LineIntersector.POINT_INTERSECTION)},jsts.algorithm.RobustLineIntersector.prototype.computeCollinearIntersection=function(e,t,n,o){var i=jsts.geom.Envelope.intersects(e,t,n),r=jsts.geom.Envelope.intersects(e,t,o),s=jsts.geom.Envelope.intersects(n,o,e),a=jsts.geom.Envelope.intersects(n,o,t);return i&&r?(this.intPt[0]=n,this.intPt[1]=o,jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION):s&&a?(this.intPt[0]=e,this.intPt[1]=t,jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION):i&&s?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||r||a?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):i&&a?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||r||s?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):r&&s?(this.intPt[0]=o,this.intPt[1]=e,!o.equals(e)||i||a?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):r&&a?(this.intPt[0]=o,this.intPt[1]=t,!o.equals(t)||i||s?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.RobustLineIntersector.prototype.intersection=function(e,t,n,o){var i=this.intersectionWithNormalization(e,t,n,o);return this.isInSegmentEnvelopes(i)||(i=jsts.algorithm.CentralEndpointIntersector.getIntersection(e,t,n,o)),null!==this.precisionModel&&this.precisionModel.makePrecise(i),i},jsts.algorithm.RobustLineIntersector.prototype.intersectionWithNormalization=function(e,t,n,o){var i=new jsts.geom.Coordinate(e),r=new jsts.geom.Coordinate(t),s=new jsts.geom.Coordinate(n),a=new jsts.geom.Coordinate(o),l=new jsts.geom.Coordinate;this.normalizeToEnvCentre(i,r,s,a,l);var c=this.safeHCoordinateIntersection(i,r,s,a);return c.x+=l.x,c.y+=l.y,c};jsts.algorithm.RobustLineIntersector.prototype.safeHCoordinateIntersection=function(e,t,n,o){var i=null;try{i=jsts.algorithm.HCoordinate.intersection(e,t,n,o)}catch(r){if(!(r instanceof jsts.error.NotRepresentableError))throw r;i=jsts.algorithm.CentralEndpointIntersector.getIntersection(e,t,n,o)}return i};jsts.algorithm.RobustLineIntersector.prototype.normalizeToMinimum=function(e,t,n,o,i){i.x=this.smallestInAbsValue(e.x,t.x,n.x,o.x),i.y=this.smallestInAbsValue(e.y,t.y,n.y,o.y),e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,o.x-=i.x,o.y-=i.y},jsts.algorithm.RobustLineIntersector.prototype.normalizeToEnvCentre=function(e,t,n,o,i){var r=e.x<t.x?e.x:t.x,s=e.y<t.y?e.y:t.y,a=e.x>t.x?e.x:t.x,l=e.y>t.y?e.y:t.y,c=n.x<o.x?n.x:o.x,u=n.y<o.y?n.y:o.y,d=n.x>o.x?n.x:o.x,p=n.y>o.y?n.y:o.y,g=r>c?r:c,h=a<d?a:d,m=s>u?s:u,f=l<p?l:p,y=(g+h)/2,v=(m+f)/2;i.x=y,i.y=v,e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,o.x-=i.x,o.y-=i.y},jsts.algorithm.RobustLineIntersector.prototype.smallestInAbsValue=function(e,t,n,o){var i=e,r=Math.abs(i);return Math.abs(t)<r&&(i=t,r=Math.abs(t)),Math.abs(n)<r&&(i=n,r=Math.abs(n)),Math.abs(o)<r&&(i=o),i},jsts.algorithm.RobustLineIntersector.prototype.isInSegmentEnvelopes=function(e){var t=new jsts.geom.Envelope(this.inputLines[0][0],this.inputLines[0][1]),n=new jsts.geom.Envelope(this.inputLines[1][0],this.inputLines[1][1]);return t.contains(e)&&n.contains(e)},jsts.algorithm.HCoordinate=function(){this.x=0,this.y=0,this.w=1,1===arguments.length?this.initFrom1Coordinate(arguments[0]):2===arguments.length&&arguments[0]instanceof jsts.geom.Coordinate?this.initFrom2Coordinates(arguments[0],arguments[1]):2===arguments.length&&arguments[0]instanceof jsts.algorithm.HCoordinate?this.initFrom2HCoordinates(arguments[0],arguments[1]):2===arguments.length?this.initFromXY(arguments[0],arguments[1]):3===arguments.length?this.initFromXYW(arguments[0],arguments[1],arguments[2]):4===arguments.length&&this.initFromXYW(arguments[0],arguments[1],arguments[2],arguments[3])},jsts.algorithm.HCoordinate.intersection=function(e,t,n,o){var i,r,s,a,l,c,u,d,p,g,h;if(i=e.y-t.y,r=t.x-e.x,s=e.x*t.y-t.x*e.y,a=n.y-o.y,l=o.x-n.x,c=n.x*o.y-o.x*n.y,u=r*c-l*s,d=a*s-i*c,p=i*l-a*r,g=u/p,h=d/p,!isFinite(g)||!isFinite(h))throw new jsts.error.NotRepresentableError;return new jsts.geom.Coordinate(g,h)},jsts.algorithm.HCoordinate.prototype.initFrom1Coordinate=function(e){this.x=e.x,this.y=e.y,this.w=1},jsts.algorithm.HCoordinate.prototype.initFrom2Coordinates=function(e,t){this.x=e.y-t.y,this.y=t.x-e.x,this.w=e.x*t.y-t.x*e.y},jsts.algorithm.HCoordinate.prototype.initFrom2HCoordinates=function(e,t){this.x=e.y*t.w-t.y*e.w,this.y=t.x*e.w-e.x*t.w,this.w=e.x*t.y-t.x*e.y},jsts.algorithm.HCoordinate.prototype.initFromXYW=function(e,t,n){this.x=e,this.y=t,this.w=n},jsts.algorithm.HCoordinate.prototype.initFromXY=function(e,t){this.x=e,this.y=t,this.w=1},jsts.algorithm.HCoordinate.prototype.initFrom4Coordinates=function(e,t,n,o){var i,r,s,a,l,c;i=e.y-t.y,r=t.x-e.x,s=e.x*t.y-t.x*e.y,a=n.y-o.y,l=o.x-n.x,c=n.x*o.y-o.x*n.y,this.x=r*c-l*s,this.y=a*s-i*c,this.w=i*l-a*r},jsts.algorithm.HCoordinate.prototype.getX=function(){var e=this.x/this.w;if(!isFinite(e))throw new jsts.error.NotRepresentableError;return e},jsts.algorithm.HCoordinate.prototype.getY=function(){var e=this.y/this.w;if(!isFinite(e))throw new jsts.error.NotRepresentableError;return e},jsts.algorithm.HCoordinate.prototype.getCoordinate=function(){var e=new jsts.geom.Coordinate;return e.x=this.getX(),e.y=this.getY(),e},jsts.geom.LineSegment=function(){0===arguments.length?(this.p0=new jsts.geom.Coordinate,this.p1=new jsts.geom.Coordinate):1===arguments.length?(this.p0=arguments[0].p0,this.p1=arguments[0].p1):2===arguments.length?(this.p0=arguments[0],this.p1=arguments[1]):4===arguments.length&&(this.p0=new jsts.geom.Coordinate(arguments[0],arguments[1]),this.p1=new jsts.geom.Coordinate(arguments[2],arguments[3]))},jsts.geom.LineSegment.prototype.p0=null,jsts.geom.LineSegment.prototype.p1=null,jsts.geom.LineSegment.midPoint=function(e,t){return new jsts.geom.Coordinate((e.x+t.x)/2,(e.y+t.y)/2)},jsts.geom.LineSegment.prototype.getCoordinate=function(e){return 0===e?this.p0:this.p1},jsts.geom.LineSegment.prototype.getLength=function(){return this.p0.distance(this.p1)},jsts.geom.LineSegment.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},jsts.geom.LineSegment.prototype.isVertical=function(){return this.p0.x===this.p1.x},jsts.geom.LineSegment.prototype.orientationIndex=function(e){return e instanceof jsts.geom.LineSegment?this.orientationIndex1(e):e instanceof jsts.geom.Coordinate?this.orientationIndex2(e):void 0},jsts.geom.LineSegment.prototype.orientationIndex1=function(e){var t=jsts.algorithm.CGAlgorithms.orientationIndex(this.p0,this.p1,e.p0),n=jsts.algorithm.CGAlgorithms.orientationIndex(this.p0,this.p1,e.p1);return t>=0&&n>=0?Math.max(t,n):t<=0&&n<=0?Math.max(t,n):0},jsts.geom.LineSegment.prototype.orientationIndex2=function(e){return jsts.algorithm.CGAlgorithms.orientationIndex(this.p0,this.p1,e)},jsts.geom.LineSegment.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e},jsts.geom.LineSegment.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},jsts.geom.LineSegment.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},jsts.geom.LineSegment.prototype.midPoint=function(){return jsts.geom.LineSegment.midPoint(this.p0,this.p1)},jsts.geom.LineSegment.prototype.distance=function(e){return e instanceof jsts.geom.LineSegment?this.distance1(e):e instanceof jsts.geom.Coordinate?this.distance2(e):void 0},jsts.geom.LineSegment.prototype.distance1=function(e){return jsts.algorithm.CGAlgorithms.distanceLineLine(this.p0,this.p1,e.p0,e.p1)},jsts.geom.LineSegment.prototype.distance2=function(e){return jsts.algorithm.CGAlgorithms.distancePointLine(e,this.p0,this.p1)},jsts.geom.LineSegment.prototype.pointAlong=function(e){var t=new jsts.geom.Coordinate;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t},jsts.geom.LineSegment.prototype.pointAlongOffset=function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),o=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,s=Math.sqrt(i*i+r*r),a=0,l=0;if(0!==t){if(s<=0)throw"Cannot compute offset from zero-length line segment";a=t*i/s,l=t*r/s}var c=n-l,u=o+a,d=new jsts.geom.Coordinate(c,u);return d},jsts.geom.LineSegment.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,o=t*t+n*n,i=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/o;return i},jsts.geom.LineSegment.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||isNaN(t))&&(t=1),t},jsts.geom.LineSegment.prototype.project=function(e){return e instanceof jsts.geom.Coordinate?this.project1(e):e instanceof jsts.geom.LineSegment?this.project2(e):void 0},jsts.geom.LineSegment.prototype.project1=function(e){if(e.equals(this.p0)||e.equals(this.p1))return new jsts.geom.Coordinate(e);var t=this.projectionFactor(e),n=new jsts.geom.Coordinate;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n},jsts.geom.LineSegment.prototype.project2=function(e){var t=this.projectionFactor(e.p0),n=this.projectionFactor(e.p1);if(t>=1&&n>=1)return null;if(t<=0&&n<=0)return null;var o=this.project(e.p0);t<0&&(o=p0),t>1&&(o=p1);var i=this.project(e.p1);return n<0&&(i=p0),n>1&&(i=p1),new jsts.geom.LineSegment(o,i)},jsts.geom.LineSegment.prototype.closestPoint=function(e){var t=this.projectionFactor(e);if(t>0&&t<1)return this.project(e);var n=this.p0.distance(e),o=this.p1.distance(e);return n<o?this.p0:this.p1},jsts.geom.LineSegment.prototype.closestPoints=function(e){var t=this.intersection(e);if(null!==t)return[t,t];var n,o=[],i=Number.MAX_VALUE,r=this.closestPoint(e.p0);i=r.distance(e.p0),o[0]=r,o[1]=e.p0;var s=this.closestPoint(e.p1);n=s.distance(e.p1),n<i&&(i=n,o[0]=s,o[1]=e.p1);var a=e.closestPoint(this.p0);n=a.distance(this.p0),n<i&&(i=n,o[0]=this.p0,o[1]=a);var l=e.closestPoint(this.p1);return n=l.distance(this.p1),n<i&&(i=n,o[0]=this.p1,o[1]=l),o},jsts.geom.LineSegment.prototype.intersection=function(e){var t=new jsts.algorithm.RobustLineIntersector;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null},jsts.geom.LineSegment.prototype.setCoordinates=function(e){return e instanceof jsts.geom.Coordinate?void this.setCoordinates2.apply(this,arguments):void this.setCoordinates2(e.p0,e.p1)},jsts.geom.LineSegment.prototype.setCoordinates2=function(e,t){this.p0.x=e.x,this.p0.y=e.y,this.p1.x=t.x,this.p1.y=t.y},jsts.geom.LineSegment.prototype.distancePerpendicular=function(e){return jsts.algorithm.CGAlgorithms.distancePointLinePerpendicular(e,this.p0,this.p1)},jsts.geom.LineSegment.prototype.lineIntersection=function(e){try{var t=jsts.algorithm.HCoordinate.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(e){}return null},jsts.geom.LineSegment.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])},jsts.geom.LineSegment.prototype.equals=function(e){return e instanceof jsts.geom.LineSegment&&(this.p0.equals(e.p0)&&this.p1.equals(e.p1))},jsts.geom.LineSegment.prototype.compareTo=function(e){var t=this.p0.compareTo(e.p0);return 0!==t?t:this.p1.compareTo(e.p1)},jsts.geom.LineSegment.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&this.p1.equals(e.p1)||this.p0.equals(e.p1)&&this.p1.equals(e.p0)},jsts.geom.LineSegment.prototype.toString=function(){return"LINESTRING("+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},jsts.index.chain.MonotoneChainOverlapAction=function(){this.tempEnv1=new jsts.geom.Envelope,this.tempEnv2=new jsts.geom.Envelope,this.overlapSeg1=new jsts.geom.LineSegment,this.overlapSeg2=new jsts.geom.LineSegment},jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv1=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv2=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg1=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg2=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap=function(e,t,n,o){this.mc1.getLineSegment(t,this.overlapSeg1),this.mc2.getLineSegment(o,this.overlapSeg2),this.overlap2(this.overlapSeg1,this.overlapSeg2)},jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap2=function(e,t){},function(){var e=jsts.index.chain.MonotoneChainOverlapAction,t=jsts.noding.SinglePassNoder,n=jsts.index.strtree.STRtree,o=jsts.noding.NodedSegmentString,i=jsts.index.chain.MonotoneChainBuilder,r=function(e){this.si=e};r.prototype=new e,r.constructor=r,r.prototype.si=null,r.prototype.overlap=function(e,t,n,o){var i=e.getContext(),r=n.getContext();this.si.processIntersections(i,t,r,o)},jsts.noding.MCIndexNoder=function(){this.monoChains=[],this.index=new n},jsts.noding.MCIndexNoder.prototype=new t,jsts.noding.MCIndexNoder.constructor=jsts.noding.MCIndexNoder,jsts.noding.MCIndexNoder.prototype.monoChains=null,jsts.noding.MCIndexNoder.prototype.index=null,jsts.noding.MCIndexNoder.prototype.idCounter=0,jsts.noding.MCIndexNoder.prototype.nodedSegStrings=null,jsts.noding.MCIndexNoder.prototype.nOverlaps=0,jsts.noding.MCIndexNoder.prototype.getMonotoneChains=function(){return this.monoChains},jsts.noding.MCIndexNoder.prototype.getIndex=function(){return this.index},jsts.noding.MCIndexNoder.prototype.getNodedSubstrings=function(){return o.getNodedSubstrings(this.nodedSegStrings)},jsts.noding.MCIndexNoder.prototype.computeNodes=function(e){this.nodedSegStrings=e;for(var t=e.iterator();t.hasNext();)this.add(t.next());this.intersectChains()},jsts.noding.MCIndexNoder.prototype.intersectChains=function(){for(var e=new r(this.segInt),t=0;t<this.monoChains.length;t++)for(var n=this.monoChains[t],o=this.index.query(n.getEnvelope()),i=0;i<o.length;i++){var s=o[i];if(s.getId()>n.getId()&&(n.computeOverlaps(s,e),this.nOverlaps++),this.segInt.isDone())return}},jsts.noding.MCIndexNoder.prototype.add=function(e){for(var t=i.getChains(e.getCoordinates(),e),n=0;n<t.length;n++){var o=t[n];o.setId(this.idCounter++),this.index.insert(o.getEnvelope(),o),this.monoChains.push(o)}}}(),jsts.simplify.LineSegmentIndex=function(){this.index=new jsts.index.quadtree.Quadtree},jsts.simplify.LineSegmentIndex.prototype.index=null,jsts.simplify.LineSegmentIndex.prototype.add=function(e){if(e instanceof jsts.geom.LineSegment)return void this.add2(e);for(var t=e.getSegments(),n=0;n<t.length;n++){var o=t[n];this.add2(o)}},jsts.simplify.LineSegmentIndex.prototype.add2=function(e){this.index.insert(new jsts.geom.Envelope(e.p0,e.p1),e)},jsts.simplify.LineSegmentIndex.prototype.remove=function(e){this.index.remove(new jsts.geom.Envelope(e.p0,e.p1),e)},jsts.simplify.LineSegmentIndex.prototype.query=function(e){var t=new jsts.geom.Envelope(e.p0,e.p1),n=new jsts.simplify.LineSegmentIndex.LineSegmentVisitor(e);this.index.query(t,n);var o=n.getItems();return o},jsts.simplify.LineSegmentIndex.LineSegmentVisitor=function(e){this.items=[],this.querySeg=e},jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype=new jsts.index.ItemVisitor,jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.querySeg=null,jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.items=null,jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.visitItem=function(e){var t=e;jsts.geom.Envelope.intersects(t.p0,t.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.push(e)},jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.getItems=function(){return this.items},jsts.geomgraph.EdgeEndStar=function(){this.edgeMap=new javascript.util.TreeMap,this.edgeList=null,this.ptInAreaLocation=[jsts.geom.Location.NONE,jsts.geom.Location.NONE]},jsts.geomgraph.EdgeEndStar.prototype.edgeMap=null,jsts.geomgraph.EdgeEndStar.prototype.edgeList=null,jsts.geomgraph.EdgeEndStar.prototype.ptInAreaLocation=null,jsts.geomgraph.EdgeEndStar.prototype.insert=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.EdgeEndStar.prototype.insertEdgeEnd=function(e,t){this.edgeMap.put(e,t),this.edgeList=null},jsts.geomgraph.EdgeEndStar.prototype.getCoordinate=function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()},jsts.geomgraph.EdgeEndStar.prototype.getDegree=function(){return this.edgeMap.size()},jsts.geomgraph.EdgeEndStar.prototype.iterator=function(){return this.getEdges().iterator()},jsts.geomgraph.EdgeEndStar.prototype.getEdges=function(){return null===this.edgeList&&(this.edgeList=new javascript.util.ArrayList(this.edgeMap.values())),
this.edgeList},jsts.geomgraph.EdgeEndStar.prototype.getNextCW=function(e){this.getEdges();var t=this.edgeList.indexOf(e),n=t-1;return 0===t&&(n=this.edgeList.length-1),this.edgeList[n]},jsts.geomgraph.EdgeEndStar.prototype.computeLabelling=function(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],n=this.iterator();n.hasNext();)for(var o=n.next(),i=o.getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===jsts.geom.Location.BOUNDARY&&(t[r]=!0);for(var n=this.iterator();n.hasNext();)for(var o=n.next(),i=o.getLabel(),r=0;r<2;r++)if(i.isAnyNull(r)){var s=jsts.geom.Location.NONE;if(t[r])s=jsts.geom.Location.EXTERIOR;else{var a=o.getCoordinate();s=this.getLocation(r,a,e)}i.setAllLocationsIfNull(r,s)}},jsts.geomgraph.EdgeEndStar.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.computeLabel(e)}},jsts.geomgraph.EdgeEndStar.prototype.getLocation=function(e,t,n){return this.ptInAreaLocation[e]===jsts.geom.Location.NONE&&(this.ptInAreaLocation[e]=jsts.algorithm.locate.SimplePointInAreaLocator.locate(t,n[e].getGeometry())),this.ptInAreaLocation[e]},jsts.geomgraph.EdgeEndStar.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},jsts.geomgraph.EdgeEndStar.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,o=t.get(n).getLabel(),i=o.getLocation(e,jsts.geomgraph.Position.LEFT);jsts.util.Assert.isTrue(i!=jsts.geom.Location.NONE,"Found unlabelled area edge");for(var r=i,s=this.iterator();s.hasNext();){var a=s.next(),l=a.getLabel();jsts.util.Assert.isTrue(l.isArea(e),"Found non-area edge");var c=l.getLocation(e,jsts.geomgraph.Position.LEFT),u=l.getLocation(e,jsts.geomgraph.Position.RIGHT);if(c===u)return!1;if(u!==r)return!1;r=c}return!0},jsts.geomgraph.EdgeEndStar.prototype.propagateSideLabels=function(e){for(var t=jsts.geom.Location.NONE,n=this.iterator();n.hasNext();){var o=n.next(),i=o.getLabel();i.isArea(e)&&i.getLocation(e,jsts.geomgraph.Position.LEFT)!==jsts.geom.Location.NONE&&(t=i.getLocation(e,jsts.geomgraph.Position.LEFT))}if(t!==jsts.geom.Location.NONE)for(var r=t,n=this.iterator();n.hasNext();){var o=n.next(),i=o.getLabel();if(i.getLocation(e,jsts.geomgraph.Position.ON)===jsts.geom.Location.NONE&&i.setLocation(e,jsts.geomgraph.Position.ON,r),i.isArea(e)){var s=i.getLocation(e,jsts.geomgraph.Position.LEFT),a=i.getLocation(e,jsts.geomgraph.Position.RIGHT);if(a!==jsts.geom.Location.NONE){if(a!==r)throw new jsts.error.TopologyError("side location conflict",o.getCoordinate());s===jsts.geom.Location.NONE&&jsts.util.Assert.shouldNeverReachHere("found single null side (at "+o.getCoordinate()+")"),r=s}else jsts.util.Assert.isTrue(i.getLocation(e,jsts.geomgraph.Position.LEFT)===jsts.geom.Location.NONE,"found single null side"),i.setLocation(e,jsts.geomgraph.Position.RIGHT,r),i.setLocation(e,jsts.geomgraph.Position.LEFT,r)}}},jsts.geomgraph.EdgeEndStar.prototype.findIndex=function(e){this.iterator();for(var t=0;t<this.edgeList.size();t++){var n=this.edgeList.get(t);if(n===e)return t}return-1},jsts.operation.relate.EdgeEndBundleStar=function(){jsts.geomgraph.EdgeEndStar.apply(this,arguments)},jsts.operation.relate.EdgeEndBundleStar.prototype=new jsts.geomgraph.EdgeEndStar,jsts.operation.relate.EdgeEndBundleStar.prototype.insert=function(e){var t=this.edgeMap.get(e);null===t?(t=new jsts.operation.relate.EdgeEndBundle(e),this.insertEdgeEnd(e,t)):t.insert(e)},jsts.operation.relate.EdgeEndBundleStar.prototype.updateIM=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.updateIM(e)}},jsts.index.ArrayListVisitor=function(){this.items=[]},jsts.index.ArrayListVisitor.prototype.visitItem=function(e){this.items.push(e)},jsts.index.ArrayListVisitor.prototype.getItems=function(){return this.items},jsts.algorithm.distance.DistanceToPoint=function(){},jsts.algorithm.distance.DistanceToPoint.computeDistance=function(e,t,n){if(e instanceof jsts.geom.LineString)jsts.algorithm.distance.DistanceToPoint.computeDistance2(e,t,n);else if(e instanceof jsts.geom.Polygon)jsts.algorithm.distance.DistanceToPoint.computeDistance4(e,t,n);else if(e instanceof jsts.geom.GeometryCollection)for(var o=e,i=0;i<o.getNumGeometries();i++){var r=o.getGeometryN(i);jsts.algorithm.distance.DistanceToPoint.computeDistance(r,t,n)}else n.setMinimum(e.getCoordinate(),t)},jsts.algorithm.distance.DistanceToPoint.computeDistance2=function(e,t,n){for(var o=new jsts.geom.LineSegment,i=e.getCoordinates(),r=0;r<i.length-1;r++){o.setCoordinates(i[r],i[r+1]);var s=o.closestPoint(t);n.setMinimum(s,t)}},jsts.algorithm.distance.DistanceToPoint.computeDistance3=function(e,t,n){var o=e.closestPoint(t);n.setMinimum(o,t)},jsts.algorithm.distance.DistanceToPoint.computeDistance4=function(e,t,n){jsts.algorithm.distance.DistanceToPoint.computeDistance2(e.getExteriorRing(),t,n);for(var o=0;o<e.getNumInteriorRing();o++)jsts.algorithm.distance.DistanceToPoint.computeDistance2(e.getInteriorRingN(o),t,n)},jsts.index.strtree.ItemBoundable=function(e,t){this.bounds=e,this.item=t},jsts.index.strtree.ItemBoundable.prototype=new jsts.index.strtree.Boundable,jsts.index.strtree.ItemBoundable.constructor=jsts.index.strtree.ItemBoundable,jsts.index.strtree.ItemBoundable.prototype.bounds=null,jsts.index.strtree.ItemBoundable.prototype.item=null,jsts.index.strtree.ItemBoundable.prototype.getBounds=function(){return this.bounds},jsts.index.strtree.ItemBoundable.prototype.getItem=function(){return this.item},function(){var e=javascript.util.ArrayList,t=javascript.util.TreeMap;jsts.geomgraph.EdgeList=function(){this.edges=new e,this.ocaMap=new t},jsts.geomgraph.EdgeList.prototype.edges=null,jsts.geomgraph.EdgeList.prototype.ocaMap=null,jsts.geomgraph.EdgeList.prototype.add=function(e){this.edges.add(e);var t=new jsts.noding.OrientedCoordinateArray(e.getCoordinates());this.ocaMap.put(t,e)},jsts.geomgraph.EdgeList.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next())},jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges},jsts.geomgraph.EdgeList.prototype.findEqualEdge=function(e){var t=new jsts.noding.OrientedCoordinateArray(e.getCoordinates()),n=this.ocaMap.get(t);return n},jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges},jsts.geomgraph.EdgeList.prototype.iterator=function(){return this.edges.iterator()},jsts.geomgraph.EdgeList.prototype.get=function(e){return this.edges.get(e)},jsts.geomgraph.EdgeList.prototype.findEdgeIndex=function(e){for(var t=0;t<this.edges.size();t++)if(this.edges.get(t).equals(e))return t;return-1}}(),jsts.operation.IsSimpleOp=function(e){this.geom=e},jsts.operation.IsSimpleOp.prototype.geom=null,jsts.operation.IsSimpleOp.prototype.isClosedEndpointsInInterior=!0,jsts.operation.IsSimpleOp.prototype.nonSimpleLocation=null,jsts.operation.IsSimpleOp.prototype.IsSimpleOp=function(e){this.geom=e},jsts.operation.IsSimpleOp.prototype.isSimple=function(){return this.nonSimpleLocation=null,this.geom instanceof jsts.geom.LineString?this.isSimpleLinearGeometry(this.geom):this.geom instanceof jsts.geom.MultiLineString?this.isSimpleLinearGeometry(this.geom):!(this.geom instanceof jsts.geom.MultiPoint)||this.isSimpleMultiPoint(this.geom)},jsts.operation.IsSimpleOp.prototype.isSimpleMultiPoint=function(e){if(e.isEmpty())return!0;for(var t=[],n=0;n<e.getNumGeometries();n++){for(var o=e.getGeometryN(n),i=o.getCoordinate(),r=0;r<t.length;r++){var s=t[r];if(i.equals2D(s))return this.nonSimpleLocation=i,!1}t.push(i)}return!0},jsts.operation.IsSimpleOp.prototype.isSimpleLinearGeometry=function(e){if(e.isEmpty())return!0;var t=new jsts.geomgraph.GeometryGraph(0,e),n=new jsts.algorithm.RobustLineIntersector,o=t.computeSelfNodes(n,!0);return!o.hasIntersection()||(o.hasProperIntersection()?(this.nonSimpleLocation=o.getProperIntersectionPoint(),!1):!this.hasNonEndpointIntersection(t)&&(!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(t)))},jsts.operation.IsSimpleOp.prototype.hasNonEndpointIntersection=function(e){for(var t=e.getEdgeIterator();t.hasNext();)for(var n=t.next(),o=n.getMaximumSegmentIndex(),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var r=i.next();if(!r.isEndPoint(o))return this.nonSimpleLocation=r.getCoordinate(),!0}return!1},jsts.operation.IsSimpleOp.prototype.hasClosedEndpointIntersection=function(e){for(var t=new javascript.util.TreeMap,n=e.getEdgeIterator();n.hasNext();){var o=n.next(),i=(o.getMaximumSegmentIndex(),o.isClosed()),r=o.getCoordinate(0);this.addEndpoint(t,r,i);var s=o.getCoordinate(o.getNumPoints()-1);this.addEndpoint(t,s,i)}for(var n=t.values().iterator();n.hasNext();){var a=n.next();if(a.isClosed&&2!=a.degree)return this.nonSimpleLocation=a.getCoordinate(),!0}return!1},jsts.operation.IsSimpleOp.EndpointInfo=function(e){this.pt=e,this.isClosed=!1,this.degree=0},jsts.operation.IsSimpleOp.EndpointInfo.prototype.pt=null,jsts.operation.IsSimpleOp.EndpointInfo.prototype.isClosed=null,jsts.operation.IsSimpleOp.EndpointInfo.prototype.degree=null,jsts.operation.IsSimpleOp.EndpointInfo.prototype.getCoordinate=function(){return this.pt},jsts.operation.IsSimpleOp.EndpointInfo.prototype.addEndpoint=function(e){this.degree++,this.isClosed=this.isClosed||e},jsts.operation.IsSimpleOp.prototype.addEndpoint=function(e,t,n){var o=e.get(t);null===o&&(o=new jsts.operation.IsSimpleOp.EndpointInfo(t),e.put(t,o)),o.addEndpoint(n)},function(){var e=function(){this.snapTolerance=0,this.seg=new jsts.geom.LineSegment,this.allowSnappingToSourceVertices=!1,this.isClosed=!1,this.srcPts=[],arguments[0]instanceof jsts.geom.LineString?this.initFromLine.apply(this,arguments):this.initFromPoints.apply(this,arguments)};e.prototype.initFromLine=function(e,t){this.initFromPoints(e.getCoordinates(),t)},e.prototype.initFromPoints=function(e,t){this.srcPts=e,this.isClosed=this.calcIsClosed(e),this.snapTolerance=t},e.prototype.setAllowSnappingToSourceVertices=function(e){this.allowSnappingToSourceVertices=e},e.prototype.calcIsClosed=function(e){return!(e.length<=1)&&e[0].equals(e[e.length-1])},e.prototype.snapTo=function(e){var t=new jsts.geom.CoordinateList(this.srcPts);return this.snapVertices(t,e),this.snapSegments(t,e),t.toCoordinateArray()},e.prototype.snapVertices=function(e,t){var n,o,i=this.isClosed?e.size()-1:e.size(),r=0;for(r;r<i;r++)n=e.get(r),o=this.findSnapForVertex(n,t),null!==o&&(e.set(r,new jsts.geom.Coordinate(o)),0===r&&this.isClosed&&e.set(e.size()-1,new jsts.geom.Coordinate(o)))},e.prototype.findSnapForVertex=function(e,t){var n=0,o=t.length;for(n=0;n<o;n++){if(e.equals(t[n]))return null;if(e.distance(t[n])<this.snapTolerance)return t[n]}return null},e.prototype.snapSegments=function(e,t){if(0!==t.length){var n,o,i,r=t.length;for(t.length>1&&t[0].equals2D(t[t.length-1])&&(r=t.length-1),n=0;n<r;n++)o=t[n],i=this.findSegmentIndexToSnap(o,e),i>=0&&e.add(i+1,new jsts.geom.Coordinate(o),!1)}},e.prototype.findSegmentIndexToSnap=function(e,t){var n,o=Number.MAX_VALUE,i=-1,r=0;for(r;r<t.size()-1;r++){if(this.seg.p0=t.get(r),this.seg.p1=t.get(r+1),this.seg.p0.equals(e)||this.seg.p1.equals(e)){if(this.allowSnappingToSourceVertices)continue;return-1}n=this.seg.distance(e),n<this.snapTolerance&&n<o&&(o=n,i=r)}return i},jsts.operation.overlay.snap.LineStringSnapper=e}(),function(){var e=javascript.util.ArrayList,t=jsts.geom.GeometryComponentFilter,n=jsts.geom.LineString,o=jsts.operation.polygonize.EdgeRing,i=jsts.operation.polygonize.PolygonizeGraph,r=function(){var o=this,i=function(){};i.prototype=new t,i.prototype.filter=function(e){e instanceof n&&o.add(e)},this.lineStringAdder=new i,this.dangles=new e,this.cutEdges=new e,this.invalidRingLines=new e};r.prototype.lineStringAdder=null,r.prototype.graph=null,r.prototype.dangles=null,r.prototype.cutEdges=null,r.prototype.invalidRingLines=null,r.prototype.holeList=null,r.prototype.shellList=null,r.prototype.polyList=null,r.prototype.add=function(e){if(e instanceof jsts.geom.LineString)return this.add3(e);if(e instanceof jsts.geom.Geometry)return this.add2(e);for(var t=e.iterator();t.hasNext();){var n=t.next();this.add2(n)}},r.prototype.add2=function(e){e.apply(this.lineStringAdder)},r.prototype.add3=function(e){null==this.graph&&(this.graph=new i(e.getFactory())),this.graph.addEdge(e)},r.prototype.getPolygons=function(){return this.polygonize(),this.polyList},r.prototype.getDangles=function(){return this.polygonize(),this.dangles},r.prototype.getCutEdges=function(){return this.polygonize(),this.cutEdges},r.prototype.getInvalidRingLines=function(){return this.polygonize(),this.invalidRingLines},r.prototype.polygonize=function(){if(null==this.polyList&&(this.polyList=new e,null!=this.graph)){this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),n=new e;this.invalidRingLines=new e,this.findValidRings(t,n,this.invalidRingLines),this.findShellsAndHoles(n),r.assignHolesToShells(this.holeList,this.shellList),this.polyList=new e;for(var o=this.shellList.iterator();o.hasNext();){var i=o.next();this.polyList.add(i.getPolygon())}}},r.prototype.findValidRings=function(e,t,n){for(var o=e.iterator();o.hasNext();){var i=o.next();i.isValid()?t.add(i):n.add(i.getLineString())}},r.prototype.findShellsAndHoles=function(t){this.holeList=new e,this.shellList=new e;for(var n=t.iterator();n.hasNext();){var o=n.next();o.isHole()?this.holeList.add(o):this.shellList.add(o)}},r.assignHolesToShells=function(e,t){for(var n=e.iterator();n.hasNext();){var o=n.next();r.assignHoleToShell(o,t)}},r.assignHoleToShell=function(e,t){var n=o.findEdgeRingContaining(e,t);null!=n&&n.addHole(e.getRing())},jsts.operation.polygonize.Polygonizer=r}(),jsts.geomgraph.index.EdgeSetIntersector=function(){},jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections=function(e,t,n){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections2=function(e,t,n){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.index.SimpleMCSweepLineIntersector=function(){this.events=[]},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector,jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.events=null,jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.nOverlaps=0,jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.computeIntersections=function(e,t,n){return t instanceof javascript.util.List?void this.computeIntersections2.apply(this,arguments):(n?this.addList2(e,null):this.addList(e),void this.computeIntersections3(t))},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.computeIntersections2=function(e,t,n){this.addList2(e,e),this.addList2(t,t),this.computeIntersections3(n)},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.add=function(e,t){if(e instanceof javascript.util.List)return void this.addList.apply(this,arguments);for(var n=e.getMonotoneChainEdge(),o=n.getStartIndexes(),i=0;i<o.length-1;i++){var r=new jsts.geomgraph.index.MonotoneChain(n,i),s=new jsts.geomgraph.index.SweepLineEvent(n.getMinX(i),r,t);this.events.push(s),this.events.push(new jsts.geomgraph.index.SweepLineEvent(n.getMaxX(i),s))}},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.addList=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.add(n,n)}},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.addList2=function(e,t){for(var n=e.iterator();n.hasNext();){var o=n.next();this.add(o,t)}},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.prepareEvents=function(){this.events.sort(function(e,t){return e.compareTo(t)});for(var e=0;e<this.events.length;e++){var t=this.events[e];t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(e)}},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.computeIntersections3=function(e){this.nOverlaps=0,this.prepareEvents();for(var t=0;t<this.events.length;t++){var n=this.events[t];n.isInsert()&&this.processOverlaps(t,n.getDeleteEventIndex(),n,e)}},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.processOverlaps=function(e,t,n,o){for(var i=n.getObject(),r=e;r<t;r++){var s=this.events[r];if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,o),this.nOverlaps++)}}},jsts.algorithm.locate.SimplePointInAreaLocator=function(e){this.geom=e},jsts.algorithm.locate.SimplePointInAreaLocator.locate=function(e,t){return t.isEmpty()?jsts.geom.Location.EXTERIOR:jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(e,t)?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR},jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint=function(e,t){if(t instanceof jsts.geom.Polygon)return jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon(e,t);if(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)for(var n=0;n<t.geometries.length;n++){var o=t.geometries[n];if(o!==t&&jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(e,o))return!0}return!1},jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var n=t.getExteriorRing();if(!jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(e,n))return!1;for(var o=0;o<t.getNumInteriorRing();o++){var i=t.getInteriorRingN(o);if(jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(e,i))return!1}return!0},jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing=function(e,t){return!!t.getEnvelopeInternal().intersects(e)&&jsts.algorithm.CGAlgorithms.isPointInRing(e,t.getCoordinates())},jsts.algorithm.locate.SimplePointInAreaLocator.prototype.geom=null,jsts.algorithm.locate.SimplePointInAreaLocator.prototype.locate=function(e){return jsts.algorithm.locate.SimplePointInAreaLocator.locate(e,geom)},function(){var e=jsts.geom.Location,t=jsts.geomgraph.Position,n=jsts.geomgraph.EdgeEndStar,o=jsts.util.Assert;jsts.geomgraph.DirectedEdgeStar=function(){jsts.geomgraph.EdgeEndStar.call(this)},jsts.geomgraph.DirectedEdgeStar.prototype=new n,jsts.geomgraph.DirectedEdgeStar.constructor=jsts.geomgraph.DirectedEdgeStar,jsts.geomgraph.DirectedEdgeStar.prototype.resultAreaEdgeList=null,jsts.geomgraph.DirectedEdgeStar.prototype.label=null,jsts.geomgraph.DirectedEdgeStar.prototype.insert=function(e){var t=e;this.insertEdgeEnd(t,t)},jsts.geomgraph.DirectedEdgeStar.prototype.getLabel=function(){return this.label},jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(){for(var e=0,t=this.iterator();t.hasNext();){var n=t.next();n.isInResult()&&e++}return e},jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(e){for(var t=0,n=this.iterator();n.hasNext();){var o=n.next();o.getEdgeRing()===e&&t++}return t},jsts.geomgraph.DirectedEdgeStar.prototype.getRightmostEdge=function(){var e=this.getEdges(),t=e.size();if(t<1)return null;var n=e.get(0);if(1==t)return n;var i=e.get(t-1),r=n.getQuadrant(),s=i.getQuadrant();if(jsts.geomgraph.Quadrant.isNorthern(r)&&jsts.geomgraph.Quadrant.isNorthern(s))return n;if(!jsts.geomgraph.Quadrant.isNorthern(r)&&!jsts.geomgraph.Quadrant.isNorthern(s))return i;return 0!=n.getDy()?n:0!=i.getDy()?i:(o.shouldNeverReachHere("found two horizontal edges incident on node"),null)},jsts.geomgraph.DirectedEdgeStar.prototype.computeLabelling=function(t){n.prototype.computeLabelling.call(this,t),this.label=new jsts.geomgraph.Label(e.NONE);for(var o=this.iterator();o.hasNext();)for(var i=o.next(),r=i.getEdge(),s=r.getLabel(),a=0;a<2;a++){var l=s.getLocation(a);l!==e.INTERIOR&&l!==e.BOUNDARY||this.label.setLocation(a,e.INTERIOR)}},jsts.geomgraph.DirectedEdgeStar.prototype.mergeSymLabels=function(){for(var e=this.iterator();e.hasNext();){var t=e.next(),n=t.getLabel();n.merge(t.getSym().getLabel())}},jsts.geomgraph.DirectedEdgeStar.prototype.updateLabelling=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next(),o=n.getLabel();o.setAllLocationsIfNull(0,e.getLocation(0)),o.setAllLocationsIfNull(1,e.getLocation(1))}},jsts.geomgraph.DirectedEdgeStar.prototype.getResultAreaEdges=function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new javascript.util.ArrayList;for(var e=this.iterator();e.hasNext();){var t=e.next();(t.isInResult()||t.getSym().isInResult())&&this.resultAreaEdgeList.add(t)}return this.resultAreaEdgeList},jsts.geomgraph.DirectedEdgeStar.prototype.SCANNING_FOR_INCOMING=1,jsts.geomgraph.DirectedEdgeStar.prototype.LINKING_TO_OUTGOING=2,jsts.geomgraph.DirectedEdgeStar.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var e=null,t=null,n=this.SCANNING_FOR_INCOMING,i=0;i<this.resultAreaEdgeList.size();i++){var r=this.resultAreaEdgeList.get(i),s=r.getSym();if(r.getLabel().isArea())switch(null===e&&r.isInResult()&&(e=r),n){case this.SCANNING_FOR_INCOMING:if(!s.isInResult())continue;t=s,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!r.isInResult())continue;t.setNext(r),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===e)throw new jsts.error.TopologyError("no outgoing dirEdge found",this.getCoordinate());o.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),t.setNext(e)}},jsts.geomgraph.DirectedEdgeStar.prototype.linkMinimalDirectedEdges=function(e){for(var t=null,n=null,i=this.SCANNING_FOR_INCOMING,r=this.resultAreaEdgeList.size()-1;r>=0;r--){var s=this.resultAreaEdgeList.get(r),a=s.getSym();switch(null===t&&s.getEdgeRing()===e&&(t=s),i){case this.SCANNING_FOR_INCOMING:if(a.getEdgeRing()!=e)continue;n=a,i=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(s.getEdgeRing()!==e)continue;n.setNextMin(s),i=this.SCANNING_FOR_INCOMING}}i===this.LINKING_TO_OUTGOING&&(o.isTrue(null!==t,"found null for first outgoing dirEdge"),o.isTrue(t.getEdgeRing()===e,"unable to link last incoming dirEdge"),n.setNextMin(t))},jsts.geomgraph.DirectedEdgeStar.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var e=null,t=null,n=this.edgeList.size()-1;n>=0;n--){var o=this.edgeList.get(n),i=o.getSym();null===t&&(t=i),null!==e&&i.setNext(e),e=o}t.setNext(e)},jsts.geomgraph.DirectedEdgeStar.prototype.findCoveredLineEdges=function(){for(var t=e.NONE,n=this.iterator();n.hasNext();){var o=n.next(),i=o.getSym();if(!o.isLineEdge()){if(o.isInResult()){t=e.INTERIOR;break}if(i.isInResult()){t=e.EXTERIOR;break}}}if(t!==e.NONE)for(var r=t,n=this.iterator();n.hasNext();){var o=n.next(),i=o.getSym();o.isLineEdge()?o.getEdge().setCovered(r===e.INTERIOR):(o.isInResult()&&(r=e.EXTERIOR),i.isInResult()&&(r=e.INTERIOR))}},jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths=function(e){if(2===arguments.length)return void this.computeDepths2.apply(this,arguments);var n=this.findIndex(e),o=(e.getLabel(),e.getDepth(t.LEFT)),i=e.getDepth(t.RIGHT),r=this.computeDepths2(n+1,this.edgeList.size(),o),s=this.computeDepths2(0,n,r);if(s!=i)throw new jsts.error.TopologyError("depth mismatch at "+e.getCoordinate())},jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths2=function(e,n,o){for(var i=o,r=e;r<n;r++){var s=this.edgeList.get(r);s.getLabel();s.setEdgeDepths(t.RIGHT,i),i=s.getDepth(t.LEFT)}return i}}(),jsts.algorithm.CentroidLine=function(){this.centSum=new jsts.geom.Coordinate},jsts.algorithm.CentroidLine.prototype.centSum=null,jsts.algorithm.CentroidLine.prototype.totalLength=0,jsts.algorithm.CentroidLine.prototype.add=function(e){if(e instanceof Array)return void this.add2.apply(this,arguments);if(e instanceof jsts.geom.LineString)this.add(e.getCoordinates());else if(e instanceof jsts.geom.Polygon){var t=e;this.add(t.getExteriorRing().getCoordinates());for(var n=0;n<t.getNumInteriorRing();n++)this.add(t.getInteriorRingN(n).getCoordinates())}else if(e instanceof jsts.geom.GeometryCollection||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.MultiPolygon)for(var o=e,n=0;n<o.getNumGeometries();n++)this.add(o.getGeometryN(n))},jsts.algorithm.CentroidLine.prototype.getCentroid=function(){var e=new jsts.geom.Coordinate;return e.x=this.centSum.x/this.totalLength,e.y=this.centSum.y/this.totalLength,e},jsts.algorithm.CentroidLine.prototype.add2=function(e){for(var t=0;t<e.length-1;t++){var n=e[t].distance(e[t+1]);this.totalLength+=n;var o=(e[t].x+e[t+1].x)/2;this.centSum.x+=n*o;var i=(e[t].y+e[t+1].y)/2;this.centSum.y+=n*i}},jsts.algorithm.PointLocator=function(e){this.boundaryRule=e?e:jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE},jsts.algorithm.PointLocator.prototype.boundaryRule=null,jsts.algorithm.PointLocator.prototype.isIn=null,jsts.algorithm.PointLocator.prototype.numBoundaries=null,jsts.algorithm.PointLocator.prototype.intersects=function(e,t){return this.locate(e,t)!==jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locate=function(e,t){return t.isEmpty()?jsts.geom.Location.EXTERIOR:t instanceof jsts.geom.Point?this.locate2(e,t):t instanceof jsts.geom.LineString?this.locate3(e,t):t instanceof jsts.geom.Polygon?this.locate4(e,t):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(e,t),this.boundaryRule.isInBoundary(this.numBoundaries)?jsts.geom.Location.BOUNDARY:this.numBoundaries>0||this.isIn?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR)},jsts.algorithm.PointLocator.prototype.computeLocation=function(e,t){if(t instanceof jsts.geom.Point||t instanceof jsts.geom.LineString||t instanceof jsts.geom.Polygon)this.updateLocationInfo(this.locate(e,t));else if(t instanceof jsts.geom.MultiLineString)for(var n=t,o=0;o<n.getNumGeometries();o++){var i=n.getGeometryN(o);this.updateLocationInfo(this.locate(e,i))}else if(t instanceof jsts.geom.MultiPolygon)for(var r=t,o=0;o<r.getNumGeometries();o++){var s=r.getGeometryN(o);this.updateLocationInfo(this.locate(e,s))}else if(t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.GeometryCollection)for(var o=0;o<t.getNumGeometries();o++){var a=t.getGeometryN(o);a!==t&&this.computeLocation(e,a)}},jsts.algorithm.PointLocator.prototype.updateLocationInfo=function(e){e===jsts.geom.Location.INTERIOR&&(this.isIn=!0),e===jsts.geom.Location.BOUNDARY&&this.numBoundaries++},jsts.algorithm.PointLocator.prototype.locate2=function(e,t){var n=t.getCoordinate();return n.equals2D(e)?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locate3=function(e,t){if(!t.getEnvelopeInternal().intersects(e))return jsts.geom.Location.EXTERIOR;var n=t.getCoordinates();return t.isClosed()||!e.equals(n[0])&&!e.equals(n[n.length-1])?jsts.algorithm.CGAlgorithms.isOnLine(e,n)?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR:jsts.geom.Location.BOUNDARY},jsts.algorithm.PointLocator.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?jsts.algorithm.CGAlgorithms.locatePointInRing(e,t.getCoordinates()):jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locate4=function(e,t){if(t.isEmpty())return jsts.geom.Location.EXTERIOR;var n=t.getExteriorRing(),o=this.locateInPolygonRing(e,n);if(o===jsts.geom.Location.EXTERIOR)return jsts.geom.Location.EXTERIOR;if(o===jsts.geom.Location.BOUNDARY)return jsts.geom.Location.BOUNDARY;for(var i=0;i<t.getNumInteriorRing();i++){var r=t.getInteriorRingN(i),s=this.locateInPolygonRing(e,r);if(s===jsts.geom.Location.INTERIOR)return jsts.geom.Location.EXTERIOR;if(s===jsts.geom.Location.BOUNDARY)return jsts.geom.Location.BOUNDARY}return jsts.geom.Location.INTERIOR},function(){var e=jsts.geom.Location,t=javascript.util.ArrayList,n=javascript.util.TreeMap;jsts.geomgraph.NodeMap=function(e){this.nodeMap=new n,this.nodeFact=e},jsts.geomgraph.NodeMap.prototype.nodeMap=null,jsts.geomgraph.NodeMap.prototype.nodeFact=null,jsts.geomgraph.NodeMap.prototype.addNode=function(e){var t,n;if(e instanceof jsts.geom.Coordinate)return n=e,t=this.nodeMap.get(n),null===t&&(t=this.nodeFact.createNode(n),this.nodeMap.put(n,t)),t;if(e instanceof jsts.geomgraph.Node){var o=e;return n=o.getCoordinate(),t=this.nodeMap.get(n),null===t?(this.nodeMap.put(n,o),o):(t.mergeLabel(o),t)}},jsts.geomgraph.NodeMap.prototype.add=function(e){var t=e.getCoordinate(),n=this.addNode(t);n.add(e)},jsts.geomgraph.NodeMap.prototype.find=function(e){return this.nodeMap.get(e)},jsts.geomgraph.NodeMap.prototype.values=function(){return this.nodeMap.values()},jsts.geomgraph.NodeMap.prototype.iterator=function(){return this.values().iterator()},jsts.geomgraph.NodeMap.prototype.getBoundaryNodes=function(n){for(var o=new t,i=this.iterator();i.hasNext();){var r=i.next();r.getLabel().getLocation(n)===e.BOUNDARY&&o.add(r)}return o}}(),function(){var e=javascript.util.ArrayList;jsts.geomgraph.PlanarGraph=function(t){this.edges=new e,this.edgeEndList=new e,this.nodes=new jsts.geomgraph.NodeMap(t||new jsts.geomgraph.NodeFactory)},jsts.geomgraph.PlanarGraph.prototype.edges=null,jsts.geomgraph.PlanarGraph.prototype.nodes=null,jsts.geomgraph.PlanarGraph.prototype.edgeEndList=null,jsts.geomgraph.PlanarGraph.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}},jsts.geomgraph.PlanarGraph.prototype.getEdgeIterator=function(){return this.edges.iterator()},jsts.geomgraph.PlanarGraph.prototype.getEdgeEnds=function(){return this.edgeEndList},jsts.geomgraph.PlanarGraph.prototype.isBoundaryNode=function(e,t){var n=this.nodes.find(t);if(null===n)return!1;var o=n.getLabel();return null!==o&&o.getLocation(e)===jsts.geom.Location.BOUNDARY},jsts.geomgraph.PlanarGraph.prototype.insertEdge=function(e){this.edges.add(e)},jsts.geomgraph.PlanarGraph.prototype.add=function(e){this.nodes.add(e),this.edgeEndList.add(e)},jsts.geomgraph.PlanarGraph.prototype.getNodeIterator=function(){return this.nodes.iterator()},jsts.geomgraph.PlanarGraph.prototype.getNodes=function(){return this.nodes.values()},jsts.geomgraph.PlanarGraph.prototype.addNode=function(e){return this.nodes.addNode(e)},jsts.geomgraph.PlanarGraph.prototype.addEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.edges.add(n);var o=new jsts.geomgraph.DirectedEdge(n,(!0)),i=new jsts.geomgraph.DirectedEdge(n,(!1));o.setSym(i),i.setSym(o),this.add(o),this.add(i)}},jsts.geomgraph.PlanarGraph.prototype.linkResultDirectedEdges=function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}},jsts.geomgraph.PlanarGraph.prototype.findEdgeInSameDirection=function(e,t){var n,o,i=0,r=this.edges.size();for(i;i<r;i++){if(n=this.edges.get(i),o=n.getCoordinates(),this.matchInSameDirection(e,t,o[0],o[1]))return n;if(this.matchInSameDirection(e,t,o[o.length-1],o[o.length-2]))return n}return null},jsts.geomgraph.PlanarGraph.prototype.matchInSameDirection=function(e,t,n,o){return!!e.equals(n)&&(jsts.algorithm.CGAlgorithms.computeOrientation(e,t,o)===jsts.algorithm.CGAlgorithms.COLLINEAR&&jsts.geomgraph.Quadrant.quadrant(e,t)===jsts.geomgraph.Quadrant.quadrant(n,o))},jsts.geomgraph.PlanarGraph.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null}}(),jsts.noding.SegmentIntersector=function(){},jsts.noding.SegmentIntersector.prototype.processIntersections=jsts.abstractFunc,jsts.noding.SegmentIntersector.prototype.isDone=jsts.abstractFunc,function(){var e=jsts.noding.SegmentIntersector,t=javascript.util.ArrayList;jsts.noding.InteriorIntersectionFinder=function(e){this.li=e,this.intersections=new t,this.interiorIntersection=null},jsts.noding.InteriorIntersectionFinder.prototype=new e,jsts.noding.InteriorIntersectionFinder.constructor=jsts.noding.InteriorIntersectionFinder,jsts.noding.InteriorIntersectionFinder.prototype.findAllIntersections=!1,jsts.noding.InteriorIntersectionFinder.prototype.isCheckEndSegmentsOnly=!1,jsts.noding.InteriorIntersectionFinder.prototype.li=null,jsts.noding.InteriorIntersectionFinder.prototype.interiorIntersection=null,
jsts.noding.InteriorIntersectionFinder.prototype.intSegments=null,jsts.noding.InteriorIntersectionFinder.prototype.intersections=null,jsts.noding.InteriorIntersectionFinder.prototype.setFindAllIntersections=function(e){this.findAllIntersections=e},jsts.noding.InteriorIntersectionFinder.prototype.getIntersections=function(){return intersections},jsts.noding.InteriorIntersectionFinder.prototype.setCheckEndSegmentsOnly=function(e){this.isCheckEndSegmentsOnly=e},jsts.noding.InteriorIntersectionFinder.prototype.hasIntersection=function(){return null!=this.interiorIntersection},jsts.noding.InteriorIntersectionFinder.prototype.getInteriorIntersection=function(){return this.interiorIntersection},jsts.noding.InteriorIntersectionFinder.prototype.getIntersectionSegments=function(){return this.intSegments},jsts.noding.InteriorIntersectionFinder.prototype.processIntersections=function(e,t,n,o){if(!this.hasIntersection()&&(e!=n||t!=o)){if(this.isCheckEndSegmentsOnly){var i=this.isEndSegment(e,t)||isEndSegment(n,o);if(!i)return}var r=e.getCoordinates()[t],s=e.getCoordinates()[t+1],a=n.getCoordinates()[o],l=n.getCoordinates()[o+1];this.li.computeIntersection(r,s,a,l),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=[],this.intSegments[0]=r,this.intSegments[1]=s,this.intSegments[2]=a,this.intSegments[3]=l,this.interiorIntersection=this.li.getIntersection(0),this.intersections.add(this.interiorIntersection))}},jsts.noding.InteriorIntersectionFinder.prototype.isEndSegment=function(e,t){return 0==t||t>=e.size()-2},jsts.noding.InteriorIntersectionFinder.prototype.isDone=function(){return!this.findAllIntersections&&null!=this.interiorIntersection}}(),function(){var e=jsts.algorithm.RobustLineIntersector,t=jsts.noding.InteriorIntersectionFinder,n=jsts.noding.MCIndexNoder;jsts.noding.FastNodingValidator=function(t){this.li=new e,this.segStrings=t},jsts.noding.FastNodingValidator.prototype.li=null,jsts.noding.FastNodingValidator.prototype.segStrings=null,jsts.noding.FastNodingValidator.prototype.findAllIntersections=!1,jsts.noding.FastNodingValidator.prototype.segInt=null,jsts.noding.FastNodingValidator.prototype._isValid=!0,jsts.noding.FastNodingValidator.prototype.setFindAllIntersections=function(e){this.findAllIntersections=e},jsts.noding.FastNodingValidator.prototype.getIntersections=function(){return segInt.getIntersections()},jsts.noding.FastNodingValidator.prototype.isValid=function(){return this.execute(),this._isValid},jsts.noding.FastNodingValidator.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+jsts.io.WKTWriter.toLineString(e[0],e[1])+" and "+jsts.io.WKTWriter.toLineString(e[2],e[3])},jsts.noding.FastNodingValidator.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new jsts.error.TopologyError(this.getErrorMessage(),this.segInt.getInteriorIntersection())},jsts.noding.FastNodingValidator.prototype.execute=function(){null==this.segInt&&this.checkInteriorIntersections()},jsts.noding.FastNodingValidator.prototype.checkInteriorIntersections=function(){this._isValid=!0,this.segInt=new t(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var e=new n;if(e.setSegmentIntersector(this.segInt),e.computeNodes(this.segStrings),this.segInt.hasIntersection())return void(this._isValid=!1)}}(),function(){jsts.noding.BasicSegmentString=function(e,t){this.pts=e,this.data=t},jsts.noding.BasicSegmentString.prototype=new jsts.noding.SegmentString,jsts.noding.BasicSegmentString.prototype.pts=null,jsts.noding.BasicSegmentString.prototype.data=null,jsts.noding.BasicSegmentString.prototype.getData=function(){return this.data},jsts.noding.BasicSegmentString.prototype.setData=function(e){this.data=e},jsts.noding.BasicSegmentString.prototype.size=function(){return this.pts.length},jsts.noding.BasicSegmentString.prototype.getCoordinate=function(e){return this.pts[e]},jsts.noding.BasicSegmentString.prototype.getCoordinates=function(){return this.pts},jsts.noding.BasicSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.noding.BasicSegmentString.prototype.getSegmentOctant=function(e){return e==this.pts.length-1?-1:jsts.noding.Octant.octant(this.getCoordinate(e),this.getCoordinate(e+1))}}(),function(){var e=jsts.noding.FastNodingValidator,t=jsts.noding.BasicSegmentString,n=javascript.util.ArrayList;jsts.geomgraph.EdgeNodingValidator=function(t){this.nv=new e(jsts.geomgraph.EdgeNodingValidator.toSegmentStrings(t))},jsts.geomgraph.EdgeNodingValidator.checkValid=function(e){var t=new jsts.geomgraph.EdgeNodingValidator(e);t.checkValid()},jsts.geomgraph.EdgeNodingValidator.toSegmentStrings=function(e){for(var o=new n,i=e.iterator();i.hasNext();){var r=i.next();o.add(new t(r.getCoordinates(),r))}return o},jsts.geomgraph.EdgeNodingValidator.prototype.nv=null,jsts.geomgraph.EdgeNodingValidator.prototype.checkValid=function(){this.nv.checkValid()}}(),jsts.operation.GeometryGraphOperation=function(e,t,n){if(this.li=new jsts.algorithm.RobustLineIntersector,this.arg=[],void 0!==e){if(void 0===t)return this.setComputationPrecision(e.getPrecisionModel()),void(this.arg[0]=new jsts.geomgraph.GeometryGraph(0,e));n=n||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,e.getPrecisionModel().compareTo(t.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(t.getPrecisionModel()),this.arg[0]=new jsts.geomgraph.GeometryGraph(0,e,n),this.arg[1]=new jsts.geomgraph.GeometryGraph(1,t,n)}},jsts.operation.GeometryGraphOperation.prototype.li=null,jsts.operation.GeometryGraphOperation.prototype.resultPrecisionModel=null,jsts.operation.GeometryGraphOperation.prototype.arg=null,jsts.operation.GeometryGraphOperation.prototype.getArgGeometry=function(e){return arg[e].getGeometry()},jsts.operation.GeometryGraphOperation.prototype.setComputationPrecision=function(e){this.resultPrecisionModel=e,this.li.setPrecisionModel(this.resultPrecisionModel)},jsts.operation.overlay.OverlayNodeFactory=function(){},jsts.operation.overlay.OverlayNodeFactory.prototype=new jsts.geomgraph.NodeFactory,jsts.operation.overlay.OverlayNodeFactory.constructor=jsts.operation.overlay.OverlayNodeFactory,jsts.operation.overlay.OverlayNodeFactory.prototype.createNode=function(e){return new jsts.geomgraph.Node(e,new jsts.geomgraph.DirectedEdgeStar)},jsts.operation.overlay.PolygonBuilder=function(e){this.shellList=[],this.geometryFactory=e},jsts.operation.overlay.PolygonBuilder.prototype.geometryFactory=null,jsts.operation.overlay.PolygonBuilder.prototype.shellList=null,jsts.operation.overlay.PolygonBuilder.prototype.add=function(e){return 2===arguments.length?void this.add2.apply(this,arguments):void this.add2(e.getEdgeEnds(),e.getNodes())},jsts.operation.overlay.PolygonBuilder.prototype.add2=function(e,t){jsts.geomgraph.PlanarGraph.linkResultDirectedEdges(t);var n=this.buildMaximalEdgeRings(e),o=[],i=this.buildMinimalEdgeRings(n,this.shellList,o);this.sortShellsAndHoles(i,this.shellList,o),this.placeFreeHoles(this.shellList,o)},jsts.operation.overlay.PolygonBuilder.prototype.getPolygons=function(){var e=this.computePolygons(this.shellList);return e},jsts.operation.overlay.PolygonBuilder.prototype.buildMaximalEdgeRings=function(e){for(var t=[],n=e.iterator();n.hasNext();){var o=n.next();if(o.isInResult()&&o.getLabel().isArea()&&null==o.getEdgeRing()){var i=new jsts.operation.overlay.MaximalEdgeRing(o,this.geometryFactory);t.push(i),i.setInResult()}}return t},jsts.operation.overlay.PolygonBuilder.prototype.buildMinimalEdgeRings=function(e,t,n){for(var o=[],i=0;i<e.length;i++){var r=e[i];if(r.getMaxNodeDegree()>2){r.linkDirectedEdgesForMinimalEdgeRings();var s=r.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),t.push(a)):s.forEach(function(e){n.push(e)})}else o.push(r)}return o},jsts.operation.overlay.PolygonBuilder.prototype.findShell=function(e){for(var t=0,n=null,o=0;o<e.length;o++){var i=e[o];i.isHole()||(n=i,t++)}return jsts.util.Assert.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n},jsts.operation.overlay.PolygonBuilder.prototype.placePolygonHoles=function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.isHole()&&o.setShell(e)}},jsts.operation.overlay.PolygonBuilder.prototype.sortShellsAndHoles=function(e,t,n){for(var o=0;o<e.length;o++){var i=e[o];i.isHole()?n.push(i):t.push(i)}};jsts.operation.overlay.PolygonBuilder.prototype.placeFreeHoles=function(e,t){for(var n=0;n<t.length;n++){var o=t[n];if(null==o.getShell()){var i=this.findEdgeRingContaining(o,e);if(null===i)throw new jsts.error.TopologyError("unable to assign hole to a shell",o.getCoordinate(0));o.setShell(i)}}};jsts.operation.overlay.PolygonBuilder.prototype.findEdgeRingContaining=function(e,t){for(var n=e.getLinearRing(),o=n.getEnvelopeInternal(),i=n.getCoordinateN(0),r=null,s=null,a=0;a<t.length;a++){var l=t[a],c=l.getLinearRing(),u=c.getEnvelopeInternal();null!==r&&(s=r.getLinearRing().getEnvelopeInternal());var d=!1;u.contains(o)&&jsts.algorithm.CGAlgorithms.isPointInRing(i,c.getCoordinates())&&(d=!0),d&&(null==r||s.contains(u))&&(r=l)}return r},jsts.operation.overlay.PolygonBuilder.prototype.computePolygons=function(e){for(var t=new javascript.util.ArrayList,n=0;n<e.length;n++){var o=e[n],i=o.toPolygon(this.geometryFactory);t.add(i)}return t},jsts.operation.overlay.PolygonBuilder.prototype.containsPoint=function(e){for(var t=0;t<this.shellList.length;t++){var n=this.shellList[t];if(n.containsPoint(e))return!0}return!1},function(){var e=jsts.util.Assert,t=javascript.util.ArrayList,n=function(e,n,o){this.lineEdgesList=new t,this.resultLineList=new t,this.op=e,this.geometryFactory=n,this.ptLocator=o};n.prototype.op=null,n.prototype.geometryFactory=null,n.prototype.ptLocator=null,n.prototype.lineEdgesList=null,n.prototype.resultLineList=null,n.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this.resultLineList},n.prototype.findCoveredLineEdges=function(){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var o=n.next(),i=o.getEdge();if(o.isLineEdge()&&!i.isCoveredSet()){var r=this.op.isCoveredByA(o.getCoordinate());i.setCovered(r)}}},n.prototype.collectLines=function(e){for(var t=this.op.getGraph().getEdgeEnds().iterator();t.hasNext();){var n=t.next();this.collectLineEdge(n,e,this.lineEdgesList),this.collectBoundaryTouchEdge(n,e,this.lineEdgesList)}},n.prototype.collectLineEdge=function(e,t,n){var o=e.getLabel(),i=e.getEdge();e.isLineEdge()&&(e.isVisited()||!jsts.operation.overlay.OverlayOp.isResultOfOp(o,t)||i.isCovered()||(n.add(i),e.setVisitedEdge(!0)))},n.prototype.collectBoundaryTouchEdge=function(t,n,o){var i=t.getLabel();t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()||(e.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),jsts.operation.overlay.OverlayOp.isResultOfOp(i,n)&&n===jsts.operation.overlay.OverlayOp.INTERSECTION&&(o.add(t.getEdge()),t.setVisitedEdge(!0)))},n.prototype.buildLines=function(e){for(var t=this.lineEdgesList.iterator();t.hasNext();){var n=t.next(),o=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(o),n.setInResult(!0)}},n.prototype.labelIsolatedLines=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),o=n.getLabel();n.isIsolated()&&(o.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},n.prototype.labelIsolatedLine=function(e,t){var n=ptLocator.locate(e.getCoordinate(),op.getArgGeometry(t));e.getLabel().setLocation(t,n)},jsts.operation.overlay.LineBuilder=n}(),function(){var e=javascript.util.ArrayList,t=function(t,n,o){this.resultPointList=new e,this.op=t,this.geometryFactory=n};t.prototype.op=null,t.prototype.geometryFactory=null,t.prototype.resultPointList=null,t.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this.resultPointList},t.prototype.extractNonCoveredResultNodes=function(e){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&e!==jsts.operation.overlay.OverlayOp.INTERSECTION)){var o=n.getLabel();jsts.operation.overlay.OverlayOp.isResultOfOp(o,e)&&this.filterCoveredNodeToPoint(n)}}},t.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this.op.isCoveredByLA(t)){var n=this.geometryFactory.createPoint(t);this.resultPointList.add(n)}},jsts.operation.overlay.PointBuilder=t}(),function(){var e=jsts.algorithm.PointLocator,t=jsts.geom.Location,n=jsts.geomgraph.EdgeList,o=jsts.geomgraph.Label,i=jsts.geomgraph.PlanarGraph,r=jsts.geomgraph.Position,s=jsts.geomgraph.EdgeNodingValidator,a=jsts.operation.GeometryGraphOperation,l=jsts.operation.overlay.OverlayNodeFactory,c=jsts.operation.overlay.PolygonBuilder,u=jsts.operation.overlay.LineBuilder,d=jsts.operation.overlay.PointBuilder,p=jsts.util.Assert,g=javascript.util.ArrayList;jsts.operation.overlay.OverlayOp=function(t,o){this.ptLocator=new e,this.edgeList=new n,this.resultPolyList=new g,this.resultLineList=new g,this.resultPointList=new g,a.call(this,t,o),this.graph=new i(new l),this.geomFact=t.getFactory()},jsts.operation.overlay.OverlayOp.prototype=new a,jsts.operation.overlay.OverlayOp.constructor=jsts.operation.overlay.OverlayOp,jsts.operation.overlay.OverlayOp.INTERSECTION=1,jsts.operation.overlay.OverlayOp.UNION=2,jsts.operation.overlay.OverlayOp.DIFFERENCE=3,jsts.operation.overlay.OverlayOp.SYMDIFFERENCE=4,jsts.operation.overlay.OverlayOp.overlayOp=function(e,t,n){var o=new jsts.operation.overlay.OverlayOp(e,t),i=o.getResultGeometry(n);return i},jsts.operation.overlay.OverlayOp.isResultOfOp=function(e,t){if(3===arguments.length)return jsts.operation.overlay.OverlayOp.isResultOfOp2.apply(this,arguments);var n=e.getLocation(0),o=e.getLocation(1);return jsts.operation.overlay.OverlayOp.isResultOfOp2(n,o,t)},jsts.operation.overlay.OverlayOp.isResultOfOp2=function(e,n,o){switch(e==t.BOUNDARY&&(e=t.INTERIOR),n==t.BOUNDARY&&(n=t.INTERIOR),o){case jsts.operation.overlay.OverlayOp.INTERSECTION:return e==t.INTERIOR&&n==t.INTERIOR;case jsts.operation.overlay.OverlayOp.UNION:return e==t.INTERIOR||n==t.INTERIOR;case jsts.operation.overlay.OverlayOp.DIFFERENCE:return e==t.INTERIOR&&n!=t.INTERIOR;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:return e==t.INTERIOR&&n!=t.INTERIOR||e!=t.INTERIOR&&n==t.INTERIOR}return!1},jsts.operation.overlay.OverlayOp.prototype.ptLocator=null,jsts.operation.overlay.OverlayOp.prototype.geomFact=null,jsts.operation.overlay.OverlayOp.prototype.resultGeom=null,jsts.operation.overlay.OverlayOp.prototype.graph=null,jsts.operation.overlay.OverlayOp.prototype.edgeList=null,jsts.operation.overlay.OverlayOp.prototype.resultPolyList=null,jsts.operation.overlay.OverlayOp.prototype.resultLineList=null,jsts.operation.overlay.OverlayOp.prototype.resultPointList=null,jsts.operation.overlay.OverlayOp.prototype.getResultGeometry=function(e){return this.computeOverlay(e),this.resultGeom},jsts.operation.overlay.OverlayOp.prototype.getGraph=function(){return this.graph},jsts.operation.overlay.OverlayOp.prototype.computeOverlay=function(e){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var t=new g;this.arg[0].computeSplitEdges(t),this.arg[1].computeSplitEdges(t);this.insertUniqueEdges(t),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),s.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(e),this.cancelDuplicateResultEdges();var n=new c(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var o=new u(this,this.geomFact,this.ptLocator);this.resultLineList=o.build(e);var i=new d(this,this.geomFact,this.ptLocator);this.resultPointList=i.build(e),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,e)},jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.insertUniqueEdge(n)}},jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdge=function(e){var t=this.edgeList.findEqualEdge(e);if(null!==t){var n=t.getLabel(),i=e.getLabel();t.isPointwiseEqual(e)||(i=new o(e.getLabel()),i.flip());var r=t.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this.edgeList.add(e)},jsts.operation.overlay.OverlayOp.prototype.computeLabelsFromDepths=function(){for(var e=this.edgeList.iterator();e.hasNext();){var t=e.next(),n=t.getLabel(),o=t.getDepth();if(!o.isNull()){o.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||o.isNull(i)||(0==o.getDelta(i)?n.toLine(i):(p.isTrue(!o.isNull(i,r.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,r.LEFT,o.getLocation(i,r.LEFT)),p.isTrue(!o.isNull(i,r.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,r.RIGHT,o.getLocation(i,r.RIGHT))))}}},jsts.operation.overlay.OverlayOp.prototype.replaceCollapsedEdges=function(){for(var e=new g,t=this.edgeList.iterator();t.hasNext();){var n=t.next();n.isCollapsed()&&(t.remove(),e.add(n.getCollapsedEdge()))}this.edgeList.addAll(e)},jsts.operation.overlay.OverlayOp.prototype.copyPoints=function(e){for(var t=this.arg[e].getNodeIterator();t.hasNext();){var n=t.next(),o=this.graph.addNode(n.getCoordinate());o.setLabel(e,n.getLabel().getLocation(e))}},jsts.operation.overlay.OverlayOp.prototype.computeLabelling=function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},jsts.operation.overlay.OverlayOp.prototype.mergeSymLabels=function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().mergeSymLabels()}},jsts.operation.overlay.OverlayOp.prototype.updateNodeLabelling=function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getEdges().getLabel();t.getLabel().merge(n)}},jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNodes=function(){for(var e=0,t=this.graph.getNodes().iterator();t.hasNext();){var n=t.next(),o=n.getLabel();n.isIsolated()&&(e++,o.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(o)}},jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNode=function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.arg[t].getGeometry());e.getLabel().setLocation(t,n)},jsts.operation.overlay.OverlayOp.prototype.findResultAreaEdges=function(e){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var n=t.next(),o=n.getLabel();o.isArea()&&!n.isInteriorAreaEdge()&&jsts.operation.overlay.OverlayOp.isResultOfOp(o.getLocation(0,r.RIGHT),o.getLocation(1,r.RIGHT),e)&&n.setInResult(!0)}},jsts.operation.overlay.OverlayOp.prototype.cancelDuplicateResultEdges=function(){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var t=e.next(),n=t.getSym();t.isInResult()&&n.isInResult()&&(t.setInResult(!1),n.setInResult(!1))}},jsts.operation.overlay.OverlayOp.prototype.isCoveredByLA=function(e){return!!this.isCovered(e,this.resultLineList)||!!this.isCovered(e,this.resultPolyList)},jsts.operation.overlay.OverlayOp.prototype.isCoveredByA=function(e){return!!this.isCovered(e,this.resultPolyList)},jsts.operation.overlay.OverlayOp.prototype.isCovered=function(e,n){for(var o=n.iterator();o.hasNext();){var i=o.next(),r=this.ptLocator.locate(e,i);if(r!=t.EXTERIOR)return!0}return!1},jsts.operation.overlay.OverlayOp.prototype.computeGeometry=function(e,t,n,o){var i=new g;return i.addAll(e),i.addAll(t),i.addAll(n),this.geomFact.buildGeometry(i)},jsts.operation.overlay.OverlayOp.prototype.createEmptyResult=function(e){var t=null;switch(resultDimension(e,this.arg[0].getGeometry(),this.arg[1].getGeometry())){case-1:t=geomFact.createGeometryCollection();break;case 0:t=geomFact.createPoint(null);break;case 1:t=geomFact.createLineString(null);break;case 2:t=geomFact.createPolygon(null,null)}return t},jsts.operation.overlay.OverlayOp.prototype.resultDimension=function(e,t,n){var o=t.getDimension(),i=n.getDimension(),r=-1;switch(e){case jsts.operation.overlay.OverlayOp.INTERSECTION:r=Math.min(o,i);break;case jsts.operation.overlay.OverlayOp.UNION:r=Math.max(o,i);break;case jsts.operation.overlay.OverlayOp.DIFFERENCE:r=o;break;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:r=Math.max(o,i)}return r}}(),jsts.index.IntervalSize=function(){},jsts.index.IntervalSize.MIN_BINARY_EXPONENT=-50,jsts.index.IntervalSize.isZeroWidth=function(e,t){var n=t-e;if(0===n)return!0;var o,i,r;return o=Math.max(Math.abs(e),Math.abs(t)),i=n/o,r=jsts.index.DoubleBits.exponent(i),r<=jsts.index.IntervalSize.MIN_BINARY_EXPONENT},jsts.geomgraph.index.SimpleEdgeSetIntersector=function(){},jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector,jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.nOverlaps=0,jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections=function(e,t,n){if(t instanceof javascript.util.List)return void this.computeIntersections2.apply(this,arguments);this.nOverlaps=0;for(var o=e.iterator();o.hasNext();)for(var i=o.next(),r=e.iterator();r.hasNext();){var s=r.next();(n||i!=s)&&this.computeIntersects(i,s,t)}},jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections2=function(e,t,n){this.nOverlaps=0;for(var o=e.iterator();o.hasNext();)for(var i=o.next(),r=t.iterator();r.hasNext();){var s=r.next();this.computeIntersects(i,s,n)}},jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersects=function(e,t,n){var o,i,r=e.getCoordinates(),s=t.getCoordinates();for(o=0;o<r.length-1;o++)for(i=0;i<s.length-1;i++)n.addIntersections(e,o,t,i)},jsts.geomgraph.Edge=function(e,t){this.pts=e,this.label=t,this.eiList=new jsts.geomgraph.EdgeIntersectionList(this),this.depth=new jsts.geomgraph.Depth},jsts.geomgraph.Edge.prototype=new jsts.geomgraph.GraphComponent,jsts.geomgraph.Edge.constructor=jsts.geomgraph.Edge,jsts.geomgraph.Edge.updateIM=function(e,t){t.setAtLeastIfValid(e.getLocation(0,jsts.geomgraph.Position.ON),e.getLocation(1,jsts.geomgraph.Position.ON),1),e.isArea()&&(t.setAtLeastIfValid(e.getLocation(0,jsts.geomgraph.Position.LEFT),e.getLocation(1,jsts.geomgraph.Position.LEFT),2),t.setAtLeastIfValid(e.getLocation(0,jsts.geomgraph.Position.RIGHT),e.getLocation(1,jsts.geomgraph.Position.RIGHT),2))},jsts.geomgraph.Edge.prototype.pts=null,jsts.geomgraph.Edge.prototype.env=null,jsts.geomgraph.Edge.prototype.name=null,jsts.geomgraph.Edge.prototype.mce=null,jsts.geomgraph.Edge.prototype._isIsolated=!0,jsts.geomgraph.Edge.prototype.depth=null,jsts.geomgraph.Edge.prototype.depthDelta=0,jsts.geomgraph.Edge.prototype.eiList=null,jsts.geomgraph.Edge.prototype.getNumPoints=function(){return this.pts.length},jsts.geomgraph.Edge.prototype.getEnvelope=function(){if(null===this.env){this.env=new jsts.geom.Envelope;for(var e=0;e<this.pts.length;e++)this.env.expandToInclude(pts[e])}return env},jsts.geomgraph.Edge.prototype.getDepth=function(){return this.depth},jsts.geomgraph.Edge.prototype.getDepthDelta=function(){return this.depthDelta},jsts.geomgraph.Edge.prototype.setDepthDelta=function(e){this.depthDelta=e},jsts.geomgraph.Edge.prototype.getCoordinates=function(){return this.pts},jsts.geomgraph.Edge.prototype.getCoordinate=function(e){return void 0===e?this.pts.length>0?this.pts[0]:null:this.pts[e]},jsts.geomgraph.Edge.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.geomgraph.Edge.prototype.setIsolated=function(e){this._isIsolated=e},jsts.geomgraph.Edge.prototype.isIsolated=function(){return this._isIsolated},jsts.geomgraph.Edge.prototype.addIntersections=function(e,t,n){for(var o=0;o<e.getIntersectionNum();o++)this.addIntersection(e,t,n,o)},jsts.geomgraph.Edge.prototype.addIntersection=function(e,t,n,o){var i=new jsts.geom.Coordinate(e.getIntersection(o)),r=t,s=e.getEdgeDistance(n,o),a=r+1;if(a<this.pts.length){var l=this.pts[a];i.equals2D(l)&&(r=a,s=0)}this.eiList.add(i,r,s)},jsts.geomgraph.Edge.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},jsts.geomgraph.Edge.prototype.getEdgeIntersectionList=function(){return this.eiList},jsts.geomgraph.Edge.prototype.getMonotoneChainEdge=function(){return null==this.mce&&(this.mce=new jsts.geomgraph.index.MonotoneChainEdge(this)),this.mce},jsts.geomgraph.Edge.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.geomgraph.Edge.prototype.isCollapsed=function(){return!!this.label.isArea()&&(3==this.pts.length&&!!this.pts[0].equals(this.pts[2]))},jsts.geomgraph.Edge.prototype.getCollapsedEdge=function(){var e=[];e[0]=this.pts[0],e[1]=this.pts[1];var t=new jsts.geomgraph.Edge(e,jsts.geomgraph.Label.toLineLabel(this.label));return t},jsts.geomgraph.Edge.prototype.computeIM=function(e){jsts.geomgraph.Edge.updateIM(this.label,e)},jsts.geomgraph.Edge.prototype.isPointwiseEqual=function(e){if(this.pts.length!=e.pts.length)return!1;for(var t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(e.pts[t]))return!1;return!0},function(){var e=javascript.util.ArrayList,t=function(){};t.prototype.inputGeom=null,t.prototype.factory=null,t.prototype.pruneEmptyGeometry=!0,t.prototype.preserveGeometryCollectionType=!0,t.prototype.preserveCollections=!1,t.prototype.reserveType=!1,t.prototype.getInputGeometry=function(){return this.inputGeom},t.prototype.transform=function(e){if(this.inputGeom=e,this.factory=e.getFactory(),e instanceof jsts.geom.Point)return this.transformPoint(e,null);if(e instanceof jsts.geom.MultiPoint)return this.transformMultiPoint(e,null);if(e instanceof jsts.geom.LinearRing)return this.transformLinearRing(e,null);if(e instanceof jsts.geom.LineString)return this.transformLineString(e,null);if(e instanceof jsts.geom.MultiLineString)return this.transformMultiLineString(e,null);if(e instanceof jsts.geom.Polygon)return this.transformPolygon(e,null);if(e instanceof jsts.geom.MultiPolygon)return this.transformMultiPolygon(e,null);if(e instanceof jsts.geom.GeometryCollection)return this.transformGeometryCollection(e,null);throw new jsts.error.IllegalArgumentException("Unknown Geometry subtype: "+e.getClass().getName())},t.prototype.createCoordinateSequence=function(e){return this.factory.getCoordinateSequenceFactory().create(e)},t.prototype.copy=function(e){if(e instanceof javascript.util.ArrayList)return e.clone();if(e instanceof Array){for(var t=new Array,n=0;n<e.length;n++)t.push(e[n]);return t}},t.prototype.transformCoordinates=function(e,t){return this.copy(e)},t.prototype.transformPoint=function(e,t){return this.factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))},t.prototype.transformMultiPoint=function(t,n){for(var o=new e,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!=r&&(r.isEmpty()||o.add(r))}return this.factory.buildGeometry(o)},t.prototype.transformLinearRing=function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e),o=n.length;return o>0&&o<4&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},t.prototype.transformLineString=function(e,t){return this.factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))},t.prototype.transformMultiLineString=function(t,n){for(var o=new e,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!=r&&(r.isEmpty()||o.add(r))}return this.factory.buildGeometry(o)},t.prototype.transformPolygon=function(t,n){var o=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!=i&&i instanceof jsts.geom.LinearRing&&!i.isEmpty()||(o=!1);for(var r=new e,s=0;s<t.getNumInteriorRing();s++){var a=this.transformLinearRing(t.getInteriorRingN(s),t);null==a||a.isEmpty()||(a instanceof jsts.geom.LinearRing||(o=!1),r.add(a))}if(o)return this.factory.createPolygon(i,r.toArray());var l=new e;return null!=i&&l.add(i),l.addAll(r),this.factory.buildGeometry(l)},t.prototype.transformMultiPolygon=function(t,n){for(var o=new e,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!=r&&(r.isEmpty()||o.add(r))}return this.factory.buildGeometry(o)},t.prototype.transformGeometryCollection=function(t,n){for(var o=new e,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!=r&&(this.pruneEmptyGeometry&&r.isEmpty()||o.add(r))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(GeometryFactory.toGeometryArray(o)):this.factory.buildGeometry(o)},jsts.geom.util.GeometryTransformer=t}(),function(){var e=jsts.operation.overlay.snap.LineStringSnapper,t=jsts.geom.PrecisionModel,n=javascript.util.TreeSet,o=function(e,t,n){this.snapTolerance=e,this.snapPts=t,this.isSelfSnap=n||!1};o.prototype=new jsts.geom.util.GeometryTransformer,o.prototype.snapTolerance=null,o.prototype.snapPts=null,o.prototype.isSelfSnap=!1,o.prototype.transformCoordinates=function(e,t){var n=e,o=this.snapLine(n,this.snapPts);return o},o.prototype.snapLine=function(t,n){var o=new e(t,this.snapTolerance);return o.setAllowSnappingToSourceVertices(this.isSelfSnap),o.snapTo(n)};var i=function(e){this.srcGeom=e};i.SNAP_PRECISION_FACTOR=1e-9,i.computeOverlaySnapTolerance=function(e){if(2===arguments.length)return i.computeOverlaySnapTolerance2.apply(this,arguments);var n=this.computeSizeBasedSnapTolerance(e),o=e.getPrecisionModel();if(o.getType()==t.FIXED){var r=1/o.getScale()*2/1.415;r>n&&(n=r)}return n},i.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal(),n=Math.min(t.getHeight(),t.getWidth()),o=n*i.SNAP_PRECISION_FACTOR;return o},i.computeOverlaySnapTolerance2=function(e,t){return Math.min(this.computeOverlaySnapTolerance(e),this.computeOverlaySnapTolerance(t))},i.snap=function(e,t,n){var o=[],r=new i(e);o[0]=r.snapTo(t,n);var s=new i(t);return o[1]=s.snapTo(o[0],n),o},i.snapToSelf=function(e,t,n){var o=new i(e);return o.snapToSelf(t,n)},i.prototype.srcGeom=null,i.prototype.snapTo=function(e,t){var n=this.extractTargetCoordinates(e),i=new o(t,n);return i.transform(this.srcGeom)},i.prototype.snapToSelf=function(e,t){var n=this.extractTargetCoordinates(srcGeom),i=new o(e,n,(!0)),r=i.transform(srcGeom),s=r;return t&&s instanceof Polygonal&&(s=r.buffer(0)),s},i.prototype.extractTargetCoordinates=function(e){for(var t=new n,o=e.getCoordinates(),i=0;i<o.length;i++)t.add(o[i]);return t.toArray()},i.prototype.computeSnapTolerance=function(e){var t=this.computeMinimumSegmentLength(e),n=t/10;return n},i.prototype.computeMinimumSegmentLength=function(e){for(var t=Number.MAX_VALUE,n=0;n<e.length-1;n++){var o=e[n].distance(e[n+1]);o<t&&(t=o)}return t},jsts.operation.overlay.snap.GeometrySnapper=i}(),function(){var e=jsts.operation.overlay.OverlayOp,t=jsts.operation.overlay.snap.GeometrySnapper,n=function(e,t){this.geom=[],this.geom[0]=e,this.geom[1]=t,this.computeSnapTolerance()};n.overlayOp=function(e,t,o){var i=new n(e,t);return i.getResultGeometry(o)},n.intersection=function(t,n){return this.overlayOp(t,n,e.INTERSECTION)},n.union=function(t,n){return this.overlayOp(t,n,e.UNION)},n.difference=function(t,n){return overlayOp(t,n,e.DIFFERENCE)},n.symDifference=function(t,n){return overlayOp(t,n,e.SYMDIFFERENCE)},n.prototype.geom=null,n.prototype.snapTolerance=null,n.prototype.computeSnapTolerance=function(){this.snapTolerance=t.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},n.prototype.getResultGeometry=function(t){var n=this.snap(this.geom),o=e.overlayOp(n[0],n[1],t);return this.prepareResult(o)},n.prototype.selfSnap=function(e){var n=new t(e),o=n.snapTo(e,this.snapTolerance);return o},n.prototype.snap=function(e){
var n=e,o=t.snap(n[0],n[1],this.snapTolerance);return o},n.prototype.prepareResult=function(e){return e},n.prototype.cbr=null,n.prototype.removeCommonBits=function(e){this.cbr=new jsts.precision.CommonBitsRemover,this.cbr.add(this.geom[0]),this.cbr.add(this.geom[1]);var t=[];return t[0]=cbr.removeCommonBits(this.geom[0].clone()),t[1]=cbr.removeCommonBits(this.geom[1].clone()),t},jsts.operation.overlay.snap.SnapOverlayOp=n}(),jsts.noding.Octant=function(){throw jsts.error.AbstractMethodInvocationError()},jsts.noding.Octant.octant=function(e,t){if(e instanceof jsts.geom.Coordinate)return jsts.noding.Octant.octant2.apply(this,arguments);if(0===e&&0===t)throw new jsts.error.IllegalArgumentError("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),o=Math.abs(t);return e>=0?t>=0?n>=o?0:1:n>=o?7:6:t>=0?n>=o?3:2:n>=o?4:5},jsts.noding.Octant.octant2=function(e,t){var n=t.x-e.x,o=t.y-e.y;if(0===n&&0===o)throw new jsts.error.IllegalArgumentError("Cannot compute the octant for two identical points "+e);return jsts.noding.Octant.octant(n,o)},jsts.operation.union.UnionInteracting=function(e,t){this.g0=e,this.g1=t,this.geomFactory=e.getFactory(),this.interacts0=[],this.interacts1=[]},jsts.operation.union.UnionInteracting.union=function(e,t){var n=new jsts.operation.union.UnionInteracting(e,t);return n.union()},jsts.operation.union.UnionInteracting.prototype.geomFactory=null,jsts.operation.union.UnionInteracting.prototype.g0=null,jsts.operation.union.UnionInteracting.prototype.g1=null,jsts.operation.union.UnionInteracting.prototype.interacts0=null,jsts.operation.union.UnionInteracting.prototype.interacts1=null,jsts.operation.union.UnionInteracting.prototype.union=function(){this.computeInteracting();var e=this.extractElements(this.g0,this.interacts0,!0),t=this.extractElements(this.g1,this.interacts1,!0);e.isEmpty()||t.isEmpty();var n=in0.union(t),o=this.extractElements(this.g0,this.interacts0,!1),i=this.extractElements(this.g1,this.interacts1,!1),r=jsts.geom.util.GeometryCombiner.combine(n,o,i);return r},jsts.operation.union.UnionInteracting.prototype.bufferUnion=function(e,t){var n=e.getFactory(),o=n.createGeometryCollection([e,t]),i=o.buffer(0);return i},jsts.operation.union.UnionInteracting.prototype.computeInteracting=function(e){if(e){for(var t=!1,n=0,o=g1.getNumGeometries();n<o;n++){var i=this.g1.getGeometryN(n),r=i.getEnvelopeInternal().intersects(e.getEnvelopeInternal());r&&(this.interacts1[n]=!0,t=!0)}return t}for(var n=0,o=this.g0.getNumGeometries();n<o;n++){var s=this.g0.getGeometryN(n);this.interacts0[n]=this.computeInteracting(s)}},jsts.operation.union.UnionInteracting.prototype.extractElements=function(e,t,n){for(var o=[],i=0,r=e.getNumGeometries();i<r;i++){var s=e.getGeometryN(i);t[i]===n&&o.push(s)}return this.geomFactory.buildGeometry(o)},jsts.triangulate.quadedge.TrianglePredicate=function(){},jsts.triangulate.quadedge.TrianglePredicate.isInCircleNonRobust=function(e,t,n,o){var i=(e.x*e.x+e.y*e.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(t,n,o)-(t.x*t.x+t.y*t.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(e,n,o)+(n.x*n.x+n.y*n.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(e,t,o)-(o.x*o.x+o.y*o.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(e,t,n)>0;return i},jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized=function(e,t,n,o){var i,r,s,a,l,c,u,d,p,g,h,m,f;return i=e.x-o.x,r=e.y-o.y,s=t.x-o.x,a=t.y-o.y,l=n.x-o.x,c=n.y-o.y,u=i*a-s*r,d=s*c-l*a,p=l*r-i*c,g=i*i+r*r,h=s*s+a*a,m=l*l+c*c,f=g*d+h*p+m*u,f>0},jsts.triangulate.quadedge.TrianglePredicate.triArea=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)},jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust=function(e,t,n,o){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized(e,t,n,o)},jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDSlow=function(e,t,n,o){var i,r,s,a,l,c,u,d,p,g,h,m,f,y;return i=jsts.math.DD.valueOf(o.x),r=jsts.math.DD.valueOf(o.y),s=jsts.math.DD.valueOf(e.x),a=jsts.math.DD.valueOf(e.y),l=jsts.math.DD.valueOf(t.x),c=jsts.math.DD.valueOf(t.y),u=jsts.math.DD.valueOf(n.x),d=jsts.math.DD.valueOf(n.y),p=s.multiply(s).add(a.multiply(a)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(l,c,u,d,i,r)),g=l.multiply(l).add(c.multiply(c)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(s,a,u,d,i,r)),h=u.multiply(u).add(d.multiply(d)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(s,a,l,c,i,r)),m=i.multiply(i).add(r.multiply(r)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(s,a,l,c,u,d)),f=p.subtract(g).add(h).subtract(m),y=f.doubleValue()>0},jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow=function(e,t,n,o,i,r){return n.subtract(e).multiply(r.subtract(t)).subtract(o.subtract(t).multiply(i.subtract(e)))},jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDFast=function(e,t,n,o){var i,r,s,a,l,c;return i=jsts.math.DD.sqr(e.x).selfAdd(jsts.math.DD.sqr(e.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(t,n,o)),r=jsts.math.DD.sqr(t.x).selfAdd(jsts.math.DD.sqr(t.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(e,n,o)),s=jsts.math.DD.sqr(n.x).selfAdd(jsts.math.DD.sqr(n.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(e,t,o)),a=jsts.math.DD.sqr(o.x).selfAdd(jsts.math.DD.sqr(o.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(e,t,n)),l=i.selfSubtract(r).selfAdd(s).selfSubtract(a),c=l.doubleValue()>0},jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast=function(e,t,n){var o,i;return o=jsts.math.DD.valueOf(t.x).selfSubtract(e.x).selfMultiply(jsts.math.DD.valueOf(n.y).selfSubtract(e.y)),i=jsts.math.DD.valueOf(t.y).selSubtract(e.y).selfMultiply(jsts.math.DD.valueOf(n.x).selfSubtract(e.x)),o.selfSubtract(i)},jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDNormalized=function(e,t,n,o){var i,r,s,a,l,c,u,d,p,g,h,m,f,y;return i=jsts.math.DD.valueOf(e.x).selfSubtract(o.x),r=jsts.math.DD.valueOf(e.y).selfSubtract(o.y),s=jsts.math.DD.valueOf(t.x).selfSubtract(o.x),s=jsts.math.DD.valueOf(t.y).selfSubtract(o.y),l=jsts.math.DD.valueOf(n.x).selfSubtract(o.x),l=jsts.math.DD.valueOf(n.y).selfSubtract(o.y),u=i.multiply(a).selfSubtract(s.multiply(r)),d=s.multiply(c).selfSubtract(l.multiply(a)),p=l.multiply(r).selfSubtract(i.multiply(c)),g=i.multiply(i).selfAdd(r.multiply(r)),h=s.multiply(s).selfAdd(a.multiply(a)),m=l.multiply(l).selfAdd(c.multiply(c)),f=g.selfMultiply(d).selfAdd(h.selfMultiply(p)).selfAdd(m.selfMultiply(u)),y=f.doubleValue()>0},jsts.triangulate.quadedge.TrianglePredicate.isInCircleCC=function(e,t,n,o){var i,r,s;return i=jsts.geom.Triangle.circumcentre(e,t,n),r=e.distance(i),s=o.distance(i)-r,s<=0},jsts.operation.union.PointGeometryUnion=function(e,t){this.pointGeom=e,this.otherGeom=t,this.geomFact=t.getFactory()},jsts.operation.union.PointGeometryUnion.union=function(e,t){var n=new jsts.operation.union.PointGeometryUnion(e,t);return n.union()},jsts.operation.union.PointGeometryUnion.prototype.pointGeom=null,jsts.operation.union.PointGeometryUnion.prototype.otherGeom=null,jsts.operation.union.PointGeometryUnion.prototype.geomFact=null,jsts.operation.union.PointGeometryUnion.prototype.union=function(){for(var e=new jsts.algorithm.PointLocator,t=[],n=0,o=this.pointGeom.getNumGeometries();n<o;n++){var i=this.pointGeom.getGeometryN(n),r=i.getCoordinate(),s=e.locate(r,this.otherGeom);if(s===jsts.geom.Location.EXTERIOR){for(var a=!0,l=t.length;n--;)if(t[l].equals(r)){a=!1;break}a&&t.push(r)}}if(t.sort(function(e,t){return e.compareTo(t)}),0===t.length)return this.otherGeom;var c=null,u=jsts.geom.CoordinateArrays.toCoordinateArray(t);return c=1===u.length?this.geomFact.createPoint(u[0]):this.geomFact.createMultiPoint(u),jsts.geom.util.GeometryCombiner.combine(c,this.otherGeom)},jsts.noding.IntersectionFinderAdder=function(e){this.li=e,this.interiorIntersections=new javascript.util.ArrayList},jsts.noding.IntersectionFinderAdder.prototype=new jsts.noding.SegmentIntersector,jsts.noding.IntersectionFinderAdder.constructor=jsts.noding.IntersectionFinderAdder,jsts.noding.IntersectionFinderAdder.prototype.li=null,jsts.noding.IntersectionFinderAdder.prototype.interiorIntersections=null,jsts.noding.IntersectionFinderAdder.prototype.getInteriorIntersections=function(){return this.interiorIntersections},jsts.noding.IntersectionFinderAdder.prototype.processIntersections=function(e,t,n,o){if(e!==n||t!==o){var i=e.getCoordinates()[t],r=e.getCoordinates()[t+1],s=n.getCoordinates()[o],a=n.getCoordinates()[o+1];if(this.li.computeIntersection(i,r,s,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var l=0;l<this.li.getIntersectionNum();l++)this.interiorIntersections.add(this.li.getIntersection(l));e.addIntersections(this.li,t,0),n.addIntersections(this.li,o,1)}}},jsts.noding.IntersectionFinderAdder.prototype.isDone=function(){return!1},function(){jsts.densify.Densifier=function(e){this.geom=e},jsts.densify.Densifier.prototype.densify=function(e,t){var n=new jsts.densify.Densifier(e);return n.setDistanceTolerance(t),n.getResultGeometry()},jsts.densify.Densifier.densifyPoints=function(e,t,n){var o=new jsts.geom.LineSegment,r=new jsts.geom.CoordinateList;for(i=0;i<e.length-1;i++){o.p0=e[i],o.p1=e[i+1],r.add(o.p0,!1);var s=o.getLength(),a=s/t+1;if(a>1){var l=s/a;for(j=1;j<a;j++){var c=j*l/s,u=o.pointAlong(c);n.makePrecise(u),r.add(u,!1)}}}return r.add(e[e.length-1],!1),r.toCoordinateArray()},jsts.densify.Densifier.prototype.setDistanceTolerance=function(e){if(e<=0)throw new jsts.error.IllegalArgumentError("Tolerance must be positive");this.distanceTolerance=e},jsts.densify.Densifier.prototype.getResultGeometry=function(){return new jsts.densify.Densifier.DensifyTransformer(this.distanceTolerance).transform(this.geom)},jsts.densify.Densifier.DensifyTransformer=function(e){jsts.geom.util.GeometryTransformer.call(this),this.distanceTolerance=e},jsts.densify.Densifier.DensifyTransformer.prototype=new jsts.geom.util.GeometryTransformer,jsts.densify.Densifier.DensifyTransformer.constructor=jsts.densify.Densifier.DensifyTransformer,jsts.densify.Densifier.DensifyTransformer.CLASS_NAME="jsts.densify.Densifier.DensifyTransformer",jsts.densify.Densifier.DensifyTransformer.prototype.transformCoordinates=function(e,t){var n=e;n instanceof Array||(n=e.toCoordinateArray());var o=jsts.densify.Densifier.densifyPoints(n,this.distanceTolerance,t.getPrecisionModel());return t instanceof jsts.geom.LineString&&1==o.length&&(o=new jsts.geom.Coordinate(0)),o},jsts.densify.Densifier.DensifyTransformer.prototype.transformPolygon=function(e,t){var n=jsts.geom.util.GeometryTransformer.prototype.transformPolygon.call(this,e,t);return t instanceof jsts.geom.MultiPolygon?n:this.createValidArea(n)},jsts.densify.Densifier.DensifyTransformer.prototype.transformMultiPolygon=function(e,t){var n=this._super.transformMultiPolygon(e,t);return this.createValidArea(n)},jsts.densify.Densifier.DensifyTransformer.prototype.createValidArea=function(e){return e.buffer(0)},jsts.densify.Densifier.DensifyTransformer.CLASS_NAME="jsts.densify.Densifier.DensifyTransformer"}(),jsts.operation.valid.ConnectedInteriorTester=function(e){this.geomGraph=e,this.geometryFactory=new jsts.geom.GeometryFactory,this.disconnectedRingcoord=null},jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint=function(e,t){var n=0,o=e.length;for(n;n<o;n++)if(!e[n].equals(t))return e[n];return null},jsts.operation.valid.ConnectedInteriorTester.prototype.getCoordinate=function(){return this.disconnectedRingcoord},jsts.operation.valid.ConnectedInteriorTester.prototype.isInteriorsConnected=function(){var e=new javascript.util.ArrayList;this.geomGraph.computeSplitEdges(e);var t=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory);t.addEdges(e),this.setInteriorEdgesInResult(t),t.linkResultDirectedEdges();var n=this.buildEdgeRings(t.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),t),!this.hasUnvisitedShellEdge(n)},jsts.operation.valid.ConnectedInteriorTester.prototype.setInteriorEdgesInResult=function(e){for(var t,n=e.getEdgeEnds().iterator();n.hasNext();)t=n.next(),t.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR&&t.setInResult(!0)},jsts.operation.valid.ConnectedInteriorTester.prototype.buildEdgeRings=function(e){for(var t=new javascript.util.ArrayList,n=e.iterator();n.hasNext();){var o=n.next();if(o.isInResult()&&null==o.getEdgeRing()){var i=new jsts.operation.overlay.MaximalEdgeRing(o,this.geometryFactory);i.linkDirectedEdgesForMinimalEdgeRings();var r=i.buildMinimalRings(),s=0,a=r.length;for(s;s<a;s++)t.add(r[s])}}return t},jsts.operation.valid.ConnectedInteriorTester.prototype.visitShellInteriors=function(e,t){if(e instanceof jsts.geom.Polygon){var n=e;this.visitInteriorRing(n.getExteriorRing(),t)}if(e instanceof jsts.geom.MultiPolygon)for(var o=e,i=0;i<o.getNumGeometries();i++){var n=o.getGeometryN(i);this.visitInteriorRing(n.getExteriorRing(),t)}},jsts.operation.valid.ConnectedInteriorTester.prototype.visitInteriorRing=function(e,t){var n=e.getCoordinates(),o=n[0],i=jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint(n,o),r=t.findEdgeInSameDirection(o,i),s=t.findEdgeEnd(r),a=null;s.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR?a=s:s.getSym().getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR&&(a=s.getSym()),this.visitLinkedDirectedEdges(a)},jsts.operation.valid.ConnectedInteriorTester.prototype.visitLinkedDirectedEdges=function(e){var t=e,n=e;do n.setVisited(!0),n=n.getNext();while(n!=t)},jsts.operation.valid.ConnectedInteriorTester.prototype.hasUnvisitedShellEdge=function(e){for(var t=0;t<e.size();t++){var n=e.get(t);if(!n.isHole()){var o=n.getEdges(),i=o[0];if(i.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR)for(var r=0;r<o.length;r++)if(i=o[r],!i.isVisited())return disconnectedRingcoord=i.getCoordinate(),!0}}return!1},jsts.algorithm.InteriorPointLine=function(e){this.centroid,this.minDistance=Number.MAX_VALUE,this.interiorPoint=null,this.centroid=e.getCentroid().getCoordinate(),this.addInterior(e),null==this.interiorPoint&&this.addEndpoints(e)},jsts.algorithm.InteriorPointLine.prototype.getInteriorPoint=function(){return this.interiorPoint},jsts.algorithm.InteriorPointLine.prototype.addInterior=function(e){if(e instanceof jsts.geom.LineString)this.addInteriorCoord(e.getCoordinates());else if(e instanceof jsts.geom.GeometryCollection)for(var t=0;t<e.getNumGeometries();t++)this.addInterior(e.getGeometryN(t))},jsts.algorithm.InteriorPointLine.prototype.addInteriorCoord=function(e){for(var t=1;t<e.length-1;t++)this.add(e[t])},jsts.algorithm.InteriorPointLine.prototype.addEndpoints=function(e){if(e instanceof jsts.geom.LineString)this.addEndpointsCoord(e.getCoordinates());else if(e instanceof jsts.geom.GeometryCollection)for(var t=0;t<e.getNumGeometries();t++)this.addEndpoints(e.getGeometryN(t))},jsts.algorithm.InteriorPointLine.prototype.addEndpointsCoord=function(e){this.add(e[0]),this.add(e[e.length-1])},jsts.algorithm.InteriorPointLine.prototype.add=function(e){var t=e.distance(this.centroid);t<this.minDistance&&(this.interiorPoint=new jsts.geom.Coordinate(e),this.minDistance=t)},jsts.index.chain.MonotoneChainSelectAction=function(){this.tempEnv1=new jsts.geom.Envelope,this.selectedSegment=new jsts.geom.LineSegment},jsts.index.chain.MonotoneChainSelectAction.prototype.tempEnv1=null,jsts.index.chain.MonotoneChainSelectAction.prototype.selectedSegment=null,jsts.index.chain.MonotoneChainSelectAction.prototype.select=function(e,t){e.getLineSegment(t,this.selectedSegment),this.select2(this.selectedSegment)},jsts.index.chain.MonotoneChainSelectAction.prototype.select2=function(e){},jsts.algorithm.MCPointInRing=function(e){this.ring=e,this.tree=null,this.crossings=0,this.interval=new jsts.index.bintree.Interval,this.buildIndex()},jsts.algorithm.MCPointInRing.MCSelecter=function(e,t){this.parent=t,this.p=e},jsts.algorithm.MCPointInRing.MCSelecter.prototype=new jsts.index.chain.MonotoneChainSelectAction,jsts.algorithm.MCPointInRing.MCSelecter.prototype.constructor=jsts.algorithm.MCPointInRing.MCSelecter,jsts.algorithm.MCPointInRing.MCSelecter.prototype.select2=function(e){this.parent.testLineSegment.apply(this.parent,[this.p,e])},jsts.algorithm.MCPointInRing.prototype.buildIndex=function(){this.tree=new jsts.index.bintree.Bintree;for(var e=jsts.geom.CoordinateArrays.removeRepeatedPoints(this.ring.getCoordinates()),t=jsts.index.chain.MonotoneChainBuilder.getChains(e),n=0;n<t.length;n++){var o=t[n],i=o.getEnvelope();this.interval.min=i.getMinY(),this.interval.max=i.getMaxY(),this.tree.insert(this.interval,o)}},jsts.algorithm.MCPointInRing.prototype.isInside=function(e){this.crossings=0;var t=new jsts.geom.Envelope((-Number.MAX_VALUE),Number.MAX_VALUE,e.y,e.y);this.interval.min=e.y,this.interval.max=e.y;for(var n=this.tree.query(this.interval),o=new jsts.algorithm.MCPointInRing.MCSelecter(e,this),i=n.iterator();i.hasNext();){var r=i.next();this.testMonotoneChain(t,o,r)}return this.crossings%2==1},jsts.algorithm.MCPointInRing.prototype.testMonotoneChain=function(e,t,n){n.select(e,t)},jsts.algorithm.MCPointInRing.prototype.testLineSegment=function(e,t){var n,o,i,r,s,a,l;a=t.p0,l=t.p1,o=a.x-e.x,i=a.y-e.y,r=l.x-e.x,s=l.y-e.y,(i>0&&s<=0||s>0&&i<=0)&&(n=jsts.algorithm.RobustDeterminant.signOfDet2x2(o,i,r,s)/(s-i),0<n&&this.crossings++)},jsts.operation.valid.TopologyValidationError=function(e,t){this.errorType=e,this.pt=null,null!=t&&(this.pt=t.clone())},jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL=2,jsts.operation.valid.TopologyValidationError.NESTED_HOLES=3,jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR=4,jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION=5,jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION=6,jsts.operation.valid.TopologyValidationError.NESTED_SHELLS=7,jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS=8,jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS=9,jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE=10,jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED=11,jsts.operation.valid.TopologyValidationError.prototype.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],jsts.operation.valid.TopologyValidationError.prototype.getCoordinate=function(){return this.pt},jsts.operation.valid.TopologyValidationError.prototype.getErrorType=function(){return this.errorType},jsts.operation.valid.TopologyValidationError.prototype.getMessage=function(){return this.errMsg[this.errorType]},jsts.operation.valid.TopologyValidationError.prototype.toString=function(){var e="";return null!=this.pt?(e=" at or near point "+this.pt,this.getMessage()+e):e},function(){var e=jsts.geom.Coordinate,t=jsts.geom.Envelope,n=jsts.algorithm.RobustLineIntersector;jsts.algorithm.RectangleLineIntersector=function(t){this.rectEnv=t,this.diagUp0=new e(this.rectEnv.getMinX(),this.rectEnv.getMinY()),this.diagUp1=new e(this.rectEnv.getMaxX(),this.rectEnv.getMaxY()),this.diagDown0=new e(this.rectEnv.getMinX(),this.rectEnv.getMaxY()),this.diagDown1=new e(this.rectEnv.getMaxX(),this.rectEnv.getMinY())},jsts.algorithm.RectangleLineIntersector.prototype.li=new n,jsts.algorithm.RectangleLineIntersector.prototype.rectEnv,jsts.algorithm.RectangleLineIntersector.prototype.diagUp0,jsts.algorithm.RectangleLineIntersector.prototype.diagUp1,jsts.algorithm.RectangleLineIntersector.prototype.diagDown0,jsts.algorithm.RectangleLineIntersector.prototype.diagDown1,jsts.algorithm.RectangleLineIntersector.prototype.intersects=function(e,n){var o=new t(e,n);if(!this.rectEnv.intersects(o))return!1;if(this.rectEnv.intersects(e))return!0;if(this.rectEnv.intersects(n))return!0;if(e.compareTo(n)>0){var i=e;e=n,n=i}var r=!1;return n.y>e.y&&(r=!0),r?this.li.computeIntersection(e,n,this.diagDown0,this.diagDown1):this.li.computeIntersection(e,n,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()}}(),function(){jsts.geom.MultiPolygon=function(e,t){this.geometries=e||[],this.factory=t},jsts.geom.MultiPolygon.prototype=new jsts.geom.GeometryCollection,jsts.geom.MultiPolygon.constructor=jsts.geom.MultiPolygon,jsts.geom.MultiPolygon.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString(null);for(var e=[],t=0;t<this.geometries.length;t++)for(var n=this.geometries[t],o=n.getBoundary(),i=0;i<o.getNumGeometries();i++)e.push(o.getGeometryN(i));return this.getFactory().createMultiLineString(e)},jsts.geom.MultiPolygon.prototype.equalsExact=function(e,t){return!!this.isEquivalentClass(e)&&jsts.geom.GeometryCollection.prototype.equalsExact.call(this,e,t)},jsts.geom.MultiPolygon.prototype.CLASS_NAME="jsts.geom.MultiPolygon"}(),jsts.geom.CoordinateSequenceFilter=function(){},jsts.geom.CoordinateSequenceFilter.prototype.filter=jsts.abstractFunc,jsts.geom.CoordinateSequenceFilter.prototype.isDone=jsts.abstractFunc,jsts.geom.CoordinateSequenceFilter.prototype.isGeometryChanged=jsts.abstractFunc,jsts.operation.linemerge.LineMergeDirectedEdge=function(e,t,n,o){jsts.planargraph.DirectedEdge.call(this,e,t,n,o)},jsts.operation.linemerge.LineMergeDirectedEdge.prototype=new jsts.planargraph.DirectedEdge,jsts.operation.linemerge.LineMergeDirectedEdge.constructor=jsts.operation.linemerge.LineMergeDirectedEdge,jsts.operation.linemerge.LineMergeDirectedEdge.prototype.getNext=function(){return 2!=this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)==this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(jsts.util.Assert.isTrue(this.getToNode().getOutEdges().getEdges().get(1)==this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},function(){var e=function(){if(this.min=0,this.max=0,1===arguments.length){var e=arguments[0];this.init(e.min,e.max)}else 2===arguments.length&&this.init(arguments[0],arguments[1])};e.prototype.init=function(e,t){this.min=e,this.max=t,e>t&&(this.min=t,this.max=e)},e.prototype.getMin=function(){return this.min},e.prototype.getMax=function(){return this.max},e.prototype.getWidth=function(){return this.max-this.min},e.prototype.expandToInclude=function(e){e.max>this.max&&(this.max=e.max),e.min<this.min&&(this.min=e.min)},e.prototype.overlaps=function(){return 1===arguments.length?this.overlapsInterval.apply(this,arguments):this.overlapsMinMax.apply(this,arguments)},e.prototype.overlapsInterval=function(e){return this.overlaps(e.min,e.max)},e.prototype.overlapsMinMax=function(e,t){return!(this.min>t||this.max<e)},e.prototype.contains=function(){var e;return arguments[0]instanceof jsts.index.bintree.Interval?(e=arguments[0],this.containsMinMax(e.min,e.max)):1===arguments.length?this.containsPoint(arguments[0]):this.containsMinMax(arguments[0],arguments[1])},e.prototype.containsMinMax=function(e,t){return e>=this.min&&t<=this.max},e.prototype.containsPoint=function(e){return e>=this.min&&e<=this.max},jsts.index.bintree.Interval=e}(),jsts.index.DoubleBits=function(){},jsts.index.DoubleBits.powerOf2=function(e){return Math.pow(2,e)},jsts.index.DoubleBits.exponent=function(e){return jsts.index.DoubleBits.CVTFWD(64,e)-1023},jsts.index.DoubleBits.CVTFWD=function(e,t){var n,o,i,r,s="",a={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},l={32:8,64:11}[e];if(r||(n=t<0||1/t<0,isFinite(t)||(r=a[e],n&&(r.d+=1<<e/4-1),o=Math.pow(2,l)-1,i=0)),!r){for(o={32:127,64:1023}[e],i=Math.abs(t);i>=2;)o++,i/=2;for(;i<1&&o>0;)o--,i*=2;o<=0&&(i/=2,s="Zero or Denormal"),32===e&&o>254&&(s="Too big for Single",r={d:n?255:127,c:128,b:0,a:0},o=Math.pow(2,l)-1,i=0)}return o},function(){var e=jsts.index.DoubleBits,t=jsts.index.bintree.Interval,n=function(e){this.pt=0,this.level=0,this.computeKey(e)};n.computeLevel=function(t){var n,o=t.getWidth();return n=e.exponent(o)+1},n.prototype.getPoint=function(){return this.pt},n.prototype.getLevel=function(){return this.level},n.prototype.getInterval=function(){return this.interval},n.prototype.computeKey=function(e){for(this.level=n.computeLevel(e),this.interval=new t,this.computeInterval(this.level,e);!this.interval.contains(e);)this.level+=1,this.computeInterval(this.level,e)},n.prototype.computeInterval=function(t,n){var o=e.powerOf2(t);this.pt=Math.floor(n.getMin()/o)*o,this.interval.init(this.pt,this.pt+o)},jsts.index.bintree.Key=n}(),jsts.operation.buffer.SubgraphDepthLocater=function(e){this.subgraphs=[],this.seg=new jsts.geom.LineSegment,this.subgraphs=e},jsts.operation.buffer.SubgraphDepthLocater.prototype.subgraphs=null,jsts.operation.buffer.SubgraphDepthLocater.prototype.seg=null,jsts.operation.buffer.SubgraphDepthLocater.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);if(0===t.length)return 0;t.sort();var n=t[0];return n.leftDepth},jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments=function(e){if(3===arguments.length)return void this.findStabbedSegments2.apply(this,arguments);for(var t=[],n=0;n<this.subgraphs.length;n++){var o=this.subgraphs[n],i=o.getEnvelope();e.y<i.getMinY()||e.y>i.getMaxY()||this.findStabbedSegments2(e,o.getDirectedEdges(),t)}return t},jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments2=function(e,t,n){if(arguments[1]instanceof jsts.geomgraph.DirectedEdge)return void this.findStabbedSegments3(e,t,n);for(var o=t.iterator();o.hasNext();){var i=o.next();i.isForward()&&this.findStabbedSegments3(e,i,n)}},jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments3=function(e,t,n){for(var o=t.getEdge().getCoordinates(),i=0;i<o.length-1;i++){this.seg.p0=o[i],this.seg.p1=o[i+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var r=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(r<e.x||this.seg.isHorizontal()||e.y<this.seg.p0.y||e.y>this.seg.p1.y||jsts.algorithm.CGAlgorithms.computeOrientation(this.seg.p0,this.seg.p1,e)===jsts.algorithm.CGAlgorithms.RIGHT)){var s=t.getDepth(jsts.geomgraph.Position.LEFT);this.seg.p0.equals(o[i])||(s=t.getDepth(jsts.geomgraph.Position.RIGHT));var a=new jsts.operation.buffer.SubgraphDepthLocater.DepthSegment(this.seg,s);n.push(a)}}},jsts.operation.buffer.SubgraphDepthLocater.DepthSegment=function(e,t){this.upwardSeg=new jsts.geom.LineSegment(e),this.leftDepth=t},jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.upwardSeg=null,jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.leftDepth=null,jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareTo=function(e){var t=e,n=this.upwardSeg.orientationIndex(t.upwardSeg);return 0===n&&(n=-1*t.upwardSeg.orientationIndex(upwardSeg)),0!==n?n:this.compareX(this.upwardSeg,t.upwardSeg)},jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareX=function(e,t){var n=e.p0.compareTo(t.p0);return 0!==n?n:e.p1.compareTo(t.p1)},jsts.noding.snapround.HotPixel=function(e,t,n){this.corner=[],this.originalPt=e,this.pt=e,this.scaleFactor=t,this.li=n,1!==this.scaleFactor&&(this.pt=new jsts.geom.Coordinate(this.scale(e.x),this.scale(e.y)),this.p0Scaled=new jsts.geom.Coordinate,this.p1Scaled=new jsts.geom.Coordinate),this.initCorners(this.pt)},jsts.noding.snapround.HotPixel.prototype.li=null,jsts.noding.snapround.HotPixel.prototype.pt=null,jsts.noding.snapround.HotPixel.prototype.originalPt=null,jsts.noding.snapround.HotPixel.prototype.ptScaled=null,jsts.noding.snapround.HotPixel.prototype.p0Scaled=null,jsts.noding.snapround.HotPixel.prototype.p1Scaled=null,jsts.noding.snapround.HotPixel.prototype.scaleFactor=void 0,jsts.noding.snapround.HotPixel.prototype.minx=void 0,jsts.noding.snapround.HotPixel.prototype.maxx=void 0,jsts.noding.snapround.HotPixel.prototype.miny=void 0,jsts.noding.snapround.HotPixel.prototype.maxy=void 0,jsts.noding.snapround.HotPixel.prototype.corner=null,jsts.noding.snapround.HotPixel.prototype.safeEnv=null,jsts.noding.snapround.HotPixel.prototype.getCoordinate=function(){return this.originalPt},jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR=.75,jsts.noding.snapround.HotPixel.prototype.getSafeEnvelope=function(){if(null===this.safeEnv){var e=jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new jsts.geom.Envelope(this.originalPt.x-e,this.originalPt.x+e,this.originalPt.y-e,this.originalPt.y+e)}return this.safeEnv},jsts.noding.snapround.HotPixel.prototype.initCorners=function(e){var t=.5;this.minx=e.x-t,this.maxx=e.x+t,this.miny=e.y-t,this.maxy=e.y+t,this.corner[0]=new jsts.geom.Coordinate(this.maxx,this.maxy),this.corner[1]=new jsts.geom.Coordinate(this.minx,this.maxy),this.corner[2]=new jsts.geom.Coordinate(this.minx,this.miny),this.corner[3]=new jsts.geom.Coordinate(this.maxx,this.miny)},jsts.noding.snapround.HotPixel.prototype.scale=function(e){return Math.round(e*this.scaleFactor)},jsts.noding.snapround.HotPixel.prototype.intersects=function(e,t){return 1===this.scaleFactor?this.intersectsScaled(e,t):(this.copyScaled(e,this.p0Scaled),this.copyScaled(t,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},jsts.noding.snapround.HotPixel.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)},jsts.noding.snapround.HotPixel.prototype.intersectsScaled=function(e,t){var n=Math.min(e.x,t.x),o=Math.max(e.x,t.x),i=Math.min(e.y,t.y),r=Math.max(e.y,t.y),s=this.maxx<n||this.minx>o||this.maxy<i||this.miny>r;if(s)return!1;var a=this.intersectsToleranceSquare(e,t);return jsts.util.Assert.isTrue(!(s&&a),"Found bad envelope test"),a},jsts.noding.snapround.HotPixel.prototype.intersectsToleranceSquare=function(e,t){var n=!1,o=!1;return this.li.computeIntersection(e,t,this.corner[0],this.corner[1]),!!this.li.isProper()||(this.li.computeIntersection(e,t,this.corner[1],this.corner[2]),!!this.li.isProper()||(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(e,t,this.corner[2],this.corner[3]),!!this.li.isProper()||(this.li.hasIntersection()&&(o=!0),this.li.computeIntersection(e,t,this.corner[3],this.corner[0]),!!this.li.isProper()||(!(!n||!o)||(!!e.equals(this.pt)||!!t.equals(this.pt))))))},jsts.noding.snapround.HotPixel.prototype.intersectsPixelClosure=function(e,t){return this.li.computeIntersection(e,t,this.corner[0],this.corner[1]),!!this.li.hasIntersection()||(this.li.computeIntersection(e,t,this.corner[1],this.corner[2]),!!this.li.hasIntersection()||(this.li.computeIntersection(e,t,this.corner[2],this.corner[3]),!!this.li.hasIntersection()||(this.li.computeIntersection(e,t,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},jsts.noding.snapround.HotPixel.prototype.addSnappedNode=function(e,t){var n=e.getCoordinate(t),o=e.getCoordinate(t+1);return!!this.intersects(n,o)&&(e.addIntersection(this.getCoordinate(),t),!0)},jsts.operation.buffer.BufferInputLineSimplifier=function(e){this.inputLine=e},jsts.operation.buffer.BufferInputLineSimplifier.simplify=function(e,t){var n=new jsts.operation.buffer.BufferInputLineSimplifier(e);return n.simplify(t)},jsts.operation.buffer.BufferInputLineSimplifier.INIT=0,jsts.operation.buffer.BufferInputLineSimplifier.DELETE=1,jsts.operation.buffer.BufferInputLineSimplifier.KEEP=1,jsts.operation.buffer.BufferInputLineSimplifier.prototype.inputLine=null,jsts.operation.buffer.BufferInputLineSimplifier.prototype.distanceTol=null,jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeleted=null,jsts.operation.buffer.BufferInputLineSimplifier.prototype.angleOrientation=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE,jsts.operation.buffer.BufferInputLineSimplifier.prototype.simplify=function(e){this.distanceTol=Math.abs(e),e<0&&(this.angleOrientation=jsts.algorithm.CGAlgorithms.CLOCKWISE),this.isDeleted=[],this.isDeleted.length=this.inputLine.length;var t=!1;do t=this.deleteShallowConcavities();while(t);
return this.collapseLine()};jsts.operation.buffer.BufferInputLineSimplifier.prototype.deleteShallowConcavities=function(){for(var e=1,t=(this.inputLine.length-1,this.findNextNonDeletedIndex(e)),n=this.findNextNonDeletedIndex(t),o=!1;n<this.inputLine.length;){var i=!1;this.isDeletable(e,t,n,this.distanceTol)&&(this.isDeleted[t]=jsts.operation.buffer.BufferInputLineSimplifier.DELETE,i=!0,o=!0),e=i?n:t,t=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(t)}return o};jsts.operation.buffer.BufferInputLineSimplifier.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this.inputLine.length&&this.isDeleted[t]===jsts.operation.buffer.BufferInputLineSimplifier.DELETE;)t++;return t},jsts.operation.buffer.BufferInputLineSimplifier.prototype.collapseLine=function(){for(var e=[],t=0;t<this.inputLine.length;t++)this.isDeleted[t]!==jsts.operation.buffer.BufferInputLineSimplifier.DELETE&&e.push(this.inputLine[t]);return e},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeletable=function(e,t,n,o){var i=this.inputLine[e],r=this.inputLine[t],s=this.inputLine[n];return!!this.isConcave(i,r,s)&&(!!this.isShallow(i,r,s,o)&&this.isShallowSampled(i,r,e,n,o))},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowConcavity=function(e,t,n,o){var i=jsts.algorithm.CGAlgorithms.computeOrientation(e,t,n),r=i===this.angleOrientation;if(!r)return!1;var s=jsts.algorithm.CGAlgorithms.distancePointLine(t,e,n);return s<o},jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK=10,jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowSampled=function(e,t,n,o,i){var r=parseInt((o-n)/jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK);r<=0&&(r=1);for(var s=n;s<o;s+=r)if(!this.isShallow(e,t,this.inputLine[s],i))return!1;return!0},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallow=function(e,t,n,o){var i=jsts.algorithm.CGAlgorithms.distancePointLine(t,e,n);return i<o},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isConcave=function(e,t,n){var o=jsts.algorithm.CGAlgorithms.computeOrientation(e,t,n),i=o===this.angleOrientation;return i},jsts.geomgraph.index.SweepLineEvent=function(e,t,n){return t instanceof jsts.geomgraph.index.SweepLineEvent?(this.eventType=jsts.geomgraph.index.SweepLineEvent.DELETE,this.xValue=e,void(this.insertEvent=t)):(this.eventType=jsts.geomgraph.index.SweepLineEvent.INSERT,this.label=n,this.xValue=e,void(this.obj=t))},jsts.geomgraph.index.SweepLineEvent.INSERT=1,jsts.geomgraph.index.SweepLineEvent.DELETE=2,jsts.geomgraph.index.SweepLineEvent.prototype.label=null,jsts.geomgraph.index.SweepLineEvent.prototype.xValue=null,jsts.geomgraph.index.SweepLineEvent.prototype.eventType=null,jsts.geomgraph.index.SweepLineEvent.prototype.insertEvent=null,jsts.geomgraph.index.SweepLineEvent.prototype.deleteEventIndex=null,jsts.geomgraph.index.SweepLineEvent.prototype.obj=null,jsts.geomgraph.index.SweepLineEvent.prototype.isInsert=function(){return this.eventType==jsts.geomgraph.index.SweepLineEvent.INSERT},jsts.geomgraph.index.SweepLineEvent.prototype.isDelete=function(){return this.eventType==jsts.geomgraph.index.SweepLineEvent.DELETE},jsts.geomgraph.index.SweepLineEvent.prototype.getInsertEvent=function(){return this.insertEvent},jsts.geomgraph.index.SweepLineEvent.prototype.getDeleteEventIndex=function(){return this.deleteEventIndex},jsts.geomgraph.index.SweepLineEvent.prototype.setDeleteEventIndex=function(e){this.deleteEventIndex=e},jsts.geomgraph.index.SweepLineEvent.prototype.getObject=function(){return this.obj},jsts.geomgraph.index.SweepLineEvent.prototype.isSameLabel=function(e){return null!=this.label&&this.label==e.label},jsts.geomgraph.index.SweepLineEvent.prototype.compareTo=function(e){return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},jsts.geom.CoordinateList=function(e,t){this.array=[],t=void 0===t||t,void 0!==e&&this.add(e,t)},jsts.geom.CoordinateList.prototype=new javascript.util.ArrayList,jsts.geom.CoordinateList.prototype.iterator=null,jsts.geom.CoordinateList.prototype.remove=null,jsts.geom.CoordinateList.prototype.get=function(e){return this.array[e]},jsts.geom.CoordinateList.prototype.set=function(e,t){var n=this.array[e];return this.array[e]=t,n},jsts.geom.CoordinateList.prototype.size=function(){return this.array.length},jsts.geom.CoordinateList.prototype.add=function(){return arguments.length>1?this.addCoordinates.apply(this,arguments):this.array.push(arguments[0])},jsts.geom.CoordinateList.prototype.addCoordinates=function(e,t,n){if(e instanceof jsts.geom.Coordinate)return this.addCoordinate.apply(this,arguments);if("number"==typeof e)return this.insertCoordinate.apply(this,arguments);if(n=void 0===n||n)for(var o=0;o<e.length;o++)this.addCoordinate(e[o],t);else for(var o=e.length-1;o>=0;o--)this.addCoordinate(e[o],t);return!0},jsts.geom.CoordinateList.prototype.addCoordinate=function(e,t){if(!t&&this.size()>=1){var n=this.get(this.size()-1);if(n.equals2D(e))return}this.add(e)},jsts.geom.CoordinateList.prototype.insertCoordinate=function(e,t,n){if(!n){var o=e>0?e-1:-1;if(o!==-1&&this.get(o).equals2D(t))return;var i=e<this.size()-1?e+1:-1;if(i!==-1&&this.get(i).equals2D(t))return}this.array.splice(e,0,t)},jsts.geom.CoordinateList.prototype.closeRing=function(){this.size()>0&&this.addCoordinate(new jsts.geom.Coordinate(this.get(0)),!1)},jsts.geom.CoordinateList.prototype.toArray=function(){return this.array},jsts.geom.CoordinateList.prototype.toCoordinateArray=function(){return this.array},jsts.operation.buffer.OffsetSegmentGenerator=function(e,t,n){this.seg0=new jsts.geom.LineSegment,this.seg1=new jsts.geom.LineSegment,this.offset0=new jsts.geom.LineSegment,this.offset1=new jsts.geom.LineSegment,this.precisionModel=e,this.bufParams=t,this.li=new jsts.algorithm.RobustLineIntersector,this.filletAngleQuantum=Math.PI/2/t.getQuadrantSegments(),this.bufParams.getQuadrantSegments()>=8&&this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_ROUND&&(this.closingSegLengthFactor=jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR=80,jsts.operation.buffer.OffsetSegmentGenerator.prototype.maxCurveSegmentError=0,jsts.operation.buffer.OffsetSegmentGenerator.prototype.filletAngleQuantum=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.closingSegLengthFactor=1,jsts.operation.buffer.OffsetSegmentGenerator.prototype.segList=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.distance=0,jsts.operation.buffer.OffsetSegmentGenerator.prototype.precisionModel=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.bufParams=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.li=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.s0=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.s1=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.s2=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg0=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg1=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset0=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset1=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.side=0,jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=!1,jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=function(){return this.hasNarrowConcaveAngle},jsts.operation.buffer.OffsetSegmentGenerator.prototype.init=function(e){this.distance=e,this.maxCurveSegmentError=this.distance*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new jsts.operation.buffer.OffsetSegmentString,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(this.distance*jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.initSideSegments=function(e,t,n){this.s1=e,this.s2=t,this.side=n,this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.getCoordinates=function(){return this.segList.getCoordinates()},jsts.operation.buffer.OffsetSegmentGenerator.prototype.closeRing=function(){this.segList.closeRing()},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addSegments=function(e,t){this.segList.addPts(e,t)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFirstSegment=function(){this.segList.addPt(this.offset1.p0)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLastSegment=function(){this.segList.addPt(this.offset1.p1)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addNextSegment=function(e,t){if(this.s0=this.s1,this.s1=this.s2,this.s2=e,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),!this.s1.equals(this.s2)){var n=jsts.algorithm.CGAlgorithms.computeOrientation(this.s0,this.s1,this.s2),o=n===jsts.algorithm.CGAlgorithms.CLOCKWISE&&this.side===jsts.geomgraph.Position.LEFT||n===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE&&this.side===jsts.geomgraph.Position.RIGHT;0==n?this.addCollinear(t):o?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addCollinear=function(e){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var t=this.li.getIntersectionNum();t>=2&&(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL||this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE?(e&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance))},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addOutsideTurn=function(e,t){return this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR?void this.segList.addPt(this.offset0.p1):void(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(t&&this.segList.addPt(this.offset0.p1),this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,e,this.distance),this.segList.addPt(this.offset1.p0)))},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addInsideTurn=function(e,t){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this.hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var n=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var o=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(o)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.computeOffsetSegment=function(e,t,n,o){var i=t===jsts.geomgraph.Position.LEFT?1:-1,r=e.p1.x-e.p0.x,s=e.p1.y-e.p0.y,a=Math.sqrt(r*r+s*s),l=i*n*r/a,c=i*n*s/a;o.p0.x=e.p0.x-c,o.p0.y=e.p0.y+l,o.p1.x=e.p1.x-c,o.p1.y=e.p1.y+l},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLineEndCap=function(e,t){var n=new jsts.geom.LineSegment(e,t),o=new jsts.geom.LineSegment;this.computeOffsetSegment(n,jsts.geomgraph.Position.LEFT,this.distance,o);var i=new jsts.geom.LineSegment;this.computeOffsetSegment(n,jsts.geomgraph.Position.RIGHT,this.distance,i);var r=t.x-e.x,s=t.y-e.y,a=Math.atan2(s,r);switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:this.segList.addPt(o.p1),this.addFillet(t,a+Math.PI/2,a-Math.PI/2,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance),this.segList.addPt(i.p1);break;case jsts.operation.buffer.BufferParameters.CAP_FLAT:this.segList.addPt(o.p1),this.segList.addPt(i.p1);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:var l=new jsts.geom.Coordinate;l.x=Math.abs(this.distance)*Math.cos(a),l.y=Math.abs(this.distance)*Math.sin(a);var c=new jsts.geom.Coordinate(o.p1.x+l.x,o.p1.y+l.y),u=new jsts.geom.Coordinate(i.p1.x+l.x,i.p1.y+l.y);this.segList.addPt(c),this.segList.addPt(u)}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addMitreJoin=function(e,t,n,o){var i=!0,r=null;try{r=jsts.algorithm.HCoordinate.intersection(t.p0,t.p1,n.p0,n.p1);var s=o<=0?1:r.distance(e)/Math.abs(o);s>this.bufParams.getMitreLimit()&&(this.isMitreWithinLimit=!1)}catch(e){e instanceof jsts.error.NotRepresentableError&&(r=new jsts.geom.Coordinate(0,0),this.isMitreWithinLimit=!1)}i?this.segList.addPt(r):this.addLimitedMitreJoin(t,n,o,bufParams.getMitreLimit())},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLimitedMitreJoin=function(e,t,n,o){var i=this.seg0.p1,r=jsts.algorithm.Angle.angle(i,this.seg0.p0),s=(jsts.algorithm.Angle.angle(i,this.seg1.p1),jsts.algorithm.Angle.angleBetweenOriented(this.seg0.p0,i,this.seg1.p1)),a=s/2,l=jsts.algorithm.Angle.normalize(r+a),c=jsts.algorithm.Angle.normalize(l+Math.PI),u=o*n,d=u*Math.abs(Math.sin(a)),p=n-d,g=i.x+u*Math.cos(c),h=i.y+u*Math.sin(c),m=new jsts.geom.Coordinate(g,h),f=new jsts.geom.LineSegment(i,m),y=f.pointAlongOffset(1,p),v=f.pointAlongOffset(1,-p);this.side==jsts.geomgraph.Position.LEFT?(this.segList.addPt(y),this.segList.addPt(v)):(this.segList.addPt(v),this.segList.addPt(y))},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addBevelJoin=function(e,t){this.segList.addPt(e.p1),this.segList.addPt(t.p0)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet=function(e,t,n,o,i){if(!(n instanceof jsts.geom.Coordinate))return void this.addFillet2.apply(this,arguments);var r=t.x-e.x,s=t.y-e.y,a=Math.atan2(s,r),l=n.x-e.x,c=n.y-e.y,u=Math.atan2(c,l);o===jsts.algorithm.CGAlgorithms.CLOCKWISE?a<=u&&(a+=2*Math.PI):a>=u&&(a-=2*Math.PI),this.segList.addPt(t),this.addFillet(e,a,u,o,i),this.segList.addPt(n)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet2=function(e,t,n,o,i){var r=o===jsts.algorithm.CGAlgorithms.CLOCKWISE?-1:1,s=Math.abs(t-n),a=parseInt(s/this.filletAngleQuantum+.5);if(!(a<1)){var l,c;l=0,c=s/a;for(var u=l,d=new jsts.geom.Coordinate;u<s;){var p=t+r*u;d.x=e.x+i*Math.cos(p),d.y=e.y+i*Math.sin(p),this.segList.addPt(d),u+=c}}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.createCircle=function(e){var t=new jsts.geom.Coordinate(e.x+this.distance,e.y);this.segList.addPt(t),this.addFillet(e,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},jsts.operation.buffer.OffsetSegmentGenerator.prototype.createSquare=function(e){this.segList.addPt(new jsts.geom.Coordinate(e.x+distance,e.y+distance)),this.segList.addPt(new jsts.geom.Coordinate(e.x+distance,e.y-distance)),this.segList.addPt(new jsts.geom.Coordinate(e.x-distance,e.y-distance)),this.segList.addPt(new jsts.geom.Coordinate(e.x-distance,e.y+distance)),this.segList.closeRing()},jsts.operation.overlay.MaximalEdgeRing=function(e,t){jsts.geomgraph.EdgeRing.call(this,e,t)},jsts.operation.overlay.MaximalEdgeRing.prototype=new jsts.geomgraph.EdgeRing,jsts.operation.overlay.MaximalEdgeRing.constructor=jsts.operation.overlay.MaximalEdgeRing,jsts.operation.overlay.MaximalEdgeRing.prototype.getNext=function(e){return e.getNext()},jsts.operation.overlay.MaximalEdgeRing.prototype.setEdgeRing=function(e,t){e.setEdgeRing(t)},jsts.operation.overlay.MaximalEdgeRing.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var e=this.startDe;do{var t=e.getNode();t.getEdges().linkMinimalDirectedEdges(this),e=e.getNext()}while(e!=this.startDe)},jsts.operation.overlay.MaximalEdgeRing.prototype.buildMinimalRings=function(){var e=[],t=this.startDe;do{if(null===t.getMinEdgeRing()){var n=new jsts.operation.overlay.MinimalEdgeRing(t,this.geometryFactory);e.push(n)}t=t.getNext()}while(t!=this.startDe);return e},jsts.algorithm.CentroidPoint=function(){this.centSum=new jsts.geom.Coordinate},jsts.algorithm.CentroidPoint.prototype.ptCount=0,jsts.algorithm.CentroidPoint.prototype.centSum=null,jsts.algorithm.CentroidPoint.prototype.add=function(e){if(e instanceof jsts.geom.Point)this.add2(e.getCoordinate());else if(e instanceof jsts.geom.GeometryCollection||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.MultiPolygon)for(var t=e,n=0;n<t.getNumGeometries();n++)this.add(t.getGeometryN(n))},jsts.algorithm.CentroidPoint.prototype.add2=function(e){this.ptCount+=1,this.centSum.x+=e.x,this.centSum.y+=e.y},jsts.algorithm.CentroidPoint.prototype.getCentroid=function(){var e=new jsts.geom.Coordinate;return e.x=this.centSum.x/this.ptCount,e.y=this.centSum.y/this.ptCount,e},jsts.operation.distance.ConnectedElementLocationFilter=function(e){this.locations=e},jsts.operation.distance.ConnectedElementLocationFilter.prototype=new jsts.geom.GeometryFilter,jsts.operation.distance.ConnectedElementLocationFilter.prototype.locations=null,jsts.operation.distance.ConnectedElementLocationFilter.getLocations=function(e){var t=[];return e.apply(new jsts.operation.distance.ConnectedElementLocationFilter(t)),t},jsts.operation.distance.ConnectedElementLocationFilter.prototype.filter=function(e){(e instanceof jsts.geom.Point||e instanceof jsts.geom.LineString||e instanceof jsts.geom.Polygon)&&this.locations.push(new jsts.operation.distance.GeometryLocation(e,0,e.getCoordinate()))},jsts.geomgraph.index.MonotoneChainEdge=function(e){this.e=e,this.pts=e.getCoordinates();var t=new jsts.geomgraph.index.MonotoneChainIndexer;this.startIndex=t.getChainStartIndices(this.pts)},jsts.geomgraph.index.MonotoneChainEdge.prototype.e=null,jsts.geomgraph.index.MonotoneChainEdge.prototype.pts=null,jsts.geomgraph.index.MonotoneChainEdge.prototype.startIndex=null,jsts.geomgraph.index.MonotoneChainEdge.prototype.env1=new jsts.geom.Envelope,jsts.geomgraph.index.MonotoneChainEdge.prototype.env2=new jsts.geom.Envelope,jsts.geomgraph.index.MonotoneChainEdge.prototype.getCoordinates=function(){return this.pts},jsts.geomgraph.index.MonotoneChainEdge.prototype.getStartIndexes=function(){return this.startIndex},jsts.geomgraph.index.MonotoneChainEdge.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n},jsts.geomgraph.index.MonotoneChainEdge.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n},jsts.geomgraph.index.MonotoneChainEdge.prototype.computeIntersects=function(e,t){for(var n=0;n<this.startIndex.length-1;n++)for(var o=0;o<e.startIndex.length-1;o++)this.computeIntersectsForChain(n,e,o,t)},jsts.geomgraph.index.MonotoneChainEdge.prototype.computeIntersectsForChain=function(e,t,n,o){this.computeIntersectsForChain2(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],o)},jsts.geomgraph.index.MonotoneChainEdge.prototype.computeIntersectsForChain2=function(e,t,n,o,i,r){var s=this.pts[e],a=this.pts[t],l=n.pts[o],c=n.pts[i];if(t-e==1&&i-o==1)return void r.addIntersections(this.e,e,n.e,o);if(this.env1.init(s,a),this.env2.init(l,c),this.env1.intersects(this.env2)){var u=Math.floor((e+t)/2),d=Math.floor((o+i)/2);e<u&&(o<d&&this.computeIntersectsForChain2(e,u,n,o,d,r),d<i&&this.computeIntersectsForChain2(e,u,n,d,i,r)),u<t&&(o<d&&this.computeIntersectsForChain2(u,t,n,o,d,r),d<i&&this.computeIntersectsForChain2(u,t,n,d,i,r))}},function(){var e=javascript.util.ArrayList;jsts.operation.relate.EdgeEndBuilder=function(){},jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds=function(t){if(2==arguments.length)return void this.computeEdgeEnds2.apply(this,arguments);for(var n=new e,o=t;o.hasNext();){var i=o.next();this.computeEdgeEnds2(i,n)}return n},jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds2=function(e,t){var n=e.getEdgeIntersectionList();n.addEndpoints();var o=n.iterator(),i=null,r=null;if(o.hasNext()){var s=o.next();do i=r,r=s,s=null,o.hasNext()&&(s=o.next()),null!==r&&(this.createEdgeEndForPrev(e,t,r,i),this.createEdgeEndForNext(e,t,r,s));while(null!==r)}},jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForPrev=function(e,t,n,o){var i=n.segmentIndex;if(0===n.dist){if(0===i)return;i--}var r=e.getCoordinate(i);null!==o&&o.segmentIndex>=i&&(r=o.coord);var s=new jsts.geomgraph.Label(e.getLabel());s.flip();var a=new jsts.geomgraph.EdgeEnd(e,n.coord,r,s);t.add(a)},jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForNext=function(e,t,n,o){var i=n.segmentIndex+1;if(!(i>=e.getNumPoints()&&null===o)){var r=e.getCoordinate(i);null!==o&&o.segmentIndex===n.segmentIndex&&(r=o.coord);var s=new jsts.geomgraph.EdgeEnd(e,n.coord,r,new jsts.geomgraph.Label(e.getLabel()));t.add(s)}}}(),jsts.operation.linemerge.LineMergeGraph=function(){jsts.planargraph.PlanarGraph.call(this)},jsts.operation.linemerge.LineMergeGraph.prototype=new jsts.planargraph.PlanarGraph,jsts.operation.linemerge.LineMergeGraph.constructor=jsts.operation.linemerge.LineMergeGraph,jsts.operation.linemerge.LineMergeGraph.prototype.addEdge=function(e){if(!e.isEmpty()){var t=jsts.geom.CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(!(t.length<=1)){var n=t[0],o=t[t.length-1],i=this.getNode(n),r=this.getNode(o),s=new jsts.operation.linemerge.LineMergeDirectedEdge(i,r,t[1],(!0)),a=new jsts.operation.linemerge.LineMergeDirectedEdge(r,i,t[t.length-2],(!1)),l=new jsts.operation.linemerge.LineMergeEdge(e);l.setDirectedEdges(s,a),this.add(l)}}},jsts.operation.linemerge.LineMergeGraph.prototype.getNode=function(e){var t=this.findNode(e);return null==t&&(t=new jsts.planargraph.Node(e),this.add(t)),t},function(){var e=javascript.util.ArrayList,t=javascript.util.TreeSet,n=jsts.geom.CoordinateFilter;jsts.util.UniqueCoordinateArrayFilter=function(){this.treeSet=new t,this.list=new e},jsts.util.UniqueCoordinateArrayFilter.prototype=new n,jsts.util.UniqueCoordinateArrayFilter.prototype.treeSet=null,jsts.util.UniqueCoordinateArrayFilter.prototype.list=null,jsts.util.UniqueCoordinateArrayFilter.prototype.getCoordinates=function(){return this.list.toArray()},jsts.util.UniqueCoordinateArrayFilter.prototype.filter=function(e){this.treeSet.contains(e)||(this.list.add(e),this.treeSet.add(e))}}(),function(){var e=jsts.algorithm.CGAlgorithms,t=jsts.util.UniqueCoordinateArrayFilter,n=jsts.util.Assert,o=javascript.util.Stack,i=javascript.util.ArrayList,r=javascript.util.Arrays,s=function(e){this.origin=e};s.prototype.origin=null,s.prototype.compare=function(e,t){var n=e,o=t;return s.polarCompare(this.origin,n,o)},s.polarCompare=function(t,n,o){var i=n.x-t.x,r=n.y-t.y,s=o.x-t.x,a=o.y-t.y,l=e.computeOrientation(t,n,o);if(l==e.COUNTERCLOCKWISE)return 1;if(l==e.CLOCKWISE)return-1;var c=i*i+r*r,u=s*s+a*a;return c<u?-1:c>u?1:0},jsts.algorithm.ConvexHull=function(){if(1===arguments.length){var e=arguments[0];this.inputPts=jsts.algorithm.ConvexHull.extractCoordinates(e),this.geomFactory=e.getFactory()}else this.pts=arguments[0],this.geomFactory=arguments[1]},jsts.algorithm.ConvexHull.prototype.geomFactory=null,jsts.algorithm.ConvexHull.prototype.inputPts=null,jsts.algorithm.ConvexHull.extractCoordinates=function(e){var n=new t;return e.apply(n),n.getCoordinates()},jsts.algorithm.ConvexHull.prototype.getConvexHull=function(){if(0==this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1==this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2==this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var e=this.inputPts;this.inputPts.length>50&&(e=this.reduce(this.inputPts));var t=this.preSort(e),n=this.grahamScan(t),o=n.toArray();return this.lineOrPolygon(o)},jsts.algorithm.ConvexHull.prototype.reduce=function(t){var n=this.computeOctRing(t);if(null==n)return this.inputPts;for(var o=new javascript.util.TreeSet,i=0;i<n.length;i++)o.add(n[i]);for(var i=0;i<t.length;i++)e.isPointInRing(t[i],n)||o.add(t[i]);var r=o.toArray();return r.length<3?this.padArray3(r):r},jsts.algorithm.ConvexHull.prototype.padArray3=function(e){for(var t=[],n=0;n<t.length;n++)n<e.length?t[n]=e[n]:t[n]=e[0];return t},jsts.algorithm.ConvexHull.prototype.preSort=function(e){for(var t,n=1;n<e.length;n++)(e[n].y<e[0].y||e[n].y==e[0].y&&e[n].x<e[0].x)&&(t=e[0],e[0]=e[n],e[n]=t);return r.sort(e,1,e.length,new s(e[0])),e},jsts.algorithm.ConvexHull.prototype.grahamScan=function(t){var n,i=new o;n=i.push(t[0]),n=i.push(t[1]),n=i.push(t[2]);for(var r=3;r<t.length;r++){for(n=i.pop();!i.empty()&&e.computeOrientation(i.peek(),n,t[r])>0;)n=i.pop();n=i.push(n),n=i.push(t[r])}return n=i.push(t[0]),i},jsts.algorithm.ConvexHull.prototype.isBetween=function(t,n,o){if(0!==e.computeOrientation(t,n,o))return!1;if(t.x!=o.x){if(t.x<=n.x&&n.x<=o.x)return!0;if(o.x<=n.x&&n.x<=t.x)return!0}if(t.y!=o.y){if(t.y<=n.y&&n.y<=o.y)return!0;if(o.y<=n.y&&n.y<=t.y)return!0}return!1},jsts.algorithm.ConvexHull.prototype.computeOctRing=function(e){var t=this.computeOctPts(e),n=new jsts.geom.CoordinateList;return n.add(t,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},jsts.algorithm.ConvexHull.prototype.computeOctPts=function(e){for(var t=[],n=0;n<8;n++)t[n]=e[0];for(var o=1;o<e.length;o++)e[o].x<t[0].x&&(t[0]=e[o]),e[o].x-e[o].y<t[1].x-t[1].y&&(t[1]=e[o]),e[o].y>t[2].y&&(t[2]=e[o]),e[o].x+e[o].y>t[3].x+t[3].y&&(t[3]=e[o]),e[o].x>t[4].x&&(t[4]=e[o]),e[o].x-e[o].y>t[5].x-t[5].y&&(t[5]=e[o]),e[o].y<t[6].y&&(t[6]=e[o]),e[o].x+e[o].y<t[7].x+t[7].y&&(t[7]=e[o]);return t},jsts.algorithm.ConvexHull.prototype.lineOrPolygon=function(e){if(e=this.cleanRing(e),3==e.length)return this.geomFactory.createLineString([e[0],e[1]]);var t=this.geomFactory.createLinearRing(e);return this.geomFactory.createPolygon(t,null)},jsts.algorithm.ConvexHull.prototype.cleanRing=function(e){n.equals(e[0],e[e.length-1]);for(var t=new i,o=null,r=0;r<=e.length-2;r++){var s=e[r],a=e[r+1];s.equals(a)||null!=o&&this.isBetween(o,s,a)||(t.add(s),o=s)}t.add(e[e.length-1]);var l=[];return t.toArray(l)}}(),jsts.algorithm.MinimumDiameter=function(e,t){this.convexHullPts=null,this.minBaseSeg=new jsts.geom.LineSegment,this.minWidthPt=null,this.minPtIndex=0,this.minWidth=0,jsts.algorithm.MinimumDiameter.inputGeom=e,jsts.algorithm.MinimumDiameter.isConvex=t||!1},jsts.algorithm.MinimumDiameter.inputGeom=null,jsts.algorithm.MinimumDiameter.isConvex=!1,jsts.algorithm.MinimumDiameter.nextIndex=function(e,t){return t++,t>=e.length&&(t=0),t},jsts.algorithm.MinimumDiameter.computeC=function(e,t,n){return e*n.y-t*n.x},jsts.algorithm.MinimumDiameter.computeSegmentForLine=function(e,t,n){var o,i;return Math.abs(t)>Math.abs(e)?(o=new jsts.geom.Coordinate(0,n/t),i=new jsts.geom.Coordinate(1,n/t-e/t)):(o=new jsts.geom.Coordinate(n/e,0),i=new jsts.geom.Coordinate(n/e-t/e,1)),new jsts.geom.LineSegment(o,i)},jsts.algorithm.MinimumDiameter.prototype.getLength=function(){return this.computeMinimumDiameter(),this.minWidth},jsts.algorithm.MinimumDiameter.prototype.getWidthCoordinate=function(){return this.computeMinimumDiameter(),this.minWidthPt},jsts.algorithm.MinimumDiameter.prototype.getSupportingSegment=function(){this.computeMinimumDiameter();var e=[this.minBaseSeg.p0,this.minBaseSeg.p1];return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLineString(e)},jsts.algorithm.MinimumDiameter.prototype.getDiameter=function(){if(this.computeMinimumDiameter(),null===this.minWidthPt)return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLineString(null);var e=this.minBaseSeg.project(this.minWidthPt);return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLineString([e,this.minWidthPt])},jsts.algorithm.MinimumDiameter.prototype.computeMinimumDiameter=function(){if(null===this.minWidthPt)if(jsts.algorithm.MinimumDiameter.isConvex)this.computeWidthConvex(jsts.algorithm.MinimumDiameter.inputGeom);else{var e=new jsts.algorithm.ConvexHull(jsts.algorithm.MinimumDiameter.inputGeom).getConvexHull();this.computeWidthConvex(e)}},jsts.algorithm.MinimumDiameter.prototype.computeWidthConvex=function(e){e instanceof jsts.geom.Polygon?this.convexHullPts=e.getExteriorRing().getCoordinates():this.convexHullPts=e.getCoordinates(),0===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):1===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):2===this.convexHullPts.length||3===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},jsts.algorithm.MinimumDiameter.prototype.computeConvexRingMinDiameter=function(e){this.minWidth=Number.MAX_VALUE;for(var t=1,n=new jsts.geom.LineSegment,o=0;o<e.length-1;o++)n.p0=e[o],n.p1=e[o+1],t=this.findMaxPerpDistance(e,n,t)},jsts.algorithm.MinimumDiameter.prototype.findMaxPerpDistance=function(e,t,n){for(var o=t.distancePerpendicular(e[n]),i=o,r=n,s=r;i>=o;)o=i,r=s,s=jsts.algorithm.MinimumDiameter.nextIndex(e,r),i=t.distancePerpendicular(e[s]);return o<this.minWidth&&(this.minPtIndex=r,this.minWidth=o,this.minWidthPt=e[this.minPtIndex],this.minBaseSeg=new jsts.geom.LineSegment(t)),r},jsts.algorithm.MinimumDiameter.prototype.getMinimumRectangle=function(){if(this.computeMinimumDiameter(),0===this.minWidth)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(jsts.algorithm.MinimumDiameter.inputGeom.getFactory());for(var e=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,t=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=Number.MAX_VALUE,o=-Number.MAX_VALUE,i=Number.MAX_VALUE,r=-Number.MAX_VALUE,s=0;s<this.convexHullPts.length;s++){var a=jsts.algorithm.MinimumDiameter.computeC(e,t,this.convexHullPts[s]);a>o&&(o=a),a<n&&(n=a);var l=jsts.algorithm.MinimumDiameter.computeC(-t,e,this.convexHullPts[s]);l>r&&(r=l),l<i&&(i=l)}var c=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-e,-t,r),u=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-e,-t,i),d=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-t,e,o),p=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-t,e,n),g=d.lineIntersection(c),h=p.lineIntersection(c),m=p.lineIntersection(u),f=d.lineIntersection(u),y=jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLinearRing([g,h,m,f,g]);return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createPolygon(y,null)},function(){jsts.io.GeoJSONParser=function(e){this.geometryFactory=e||new jsts.geom.GeometryFactory,this.geometryTypes=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"]},jsts.io.GeoJSONParser.prototype.read=function(e){var t;t="string"==typeof e?JSON.parse(e):e;var n=t.type;if(!this.parse[n])throw new Error("Unknown GeoJSON type: "+t.type);return this.geometryTypes.indexOf(n)!=-1?this.parse[n].apply(this,[t.coordinates]):"GeometryCollection"===n?this.parse[n].apply(this,[t.geometries]):this.parse[n].apply(this,[t]);
},jsts.io.GeoJSONParser.prototype.parse={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var o=e.geometry.type;if(!this.parse[o])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=this.parse.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t={};if(e.features){t.features=[];for(var n=0;n<e.features.length;++n)t.features.push(this.read(e.features[n]))}return e.bbox&&(t.bbox=this.parse.bbox.apply(this,[e.bbox])),t},coordinates:function(e){for(var t=[],n=0;n<e.length;++n){var o=e[n];t.push(new jsts.geom.Coordinate(o[0],o[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new jsts.geom.Coordinate(e[0],e[1]),new jsts.geom.Coordinate(e[2],e[1]),new jsts.geom.Coordinate(e[2],e[3]),new jsts.geom.Coordinate(e[0],e[3]),new jsts.geom.Coordinate(e[0],e[1])])},Point:function(e){var t=new jsts.geom.Coordinate(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=[],n=0;n<e.length;++n)t.push(this.parse.Point.apply(this,[e[n]]));return this.geometryFactory.createMultiPoint(t)},LineString:function(e){var t=this.parse.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=[],n=0;n<e.length;++n)t.push(this.parse.LineString.apply(this,[e[n]]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(e){for(var t=this.parse.coordinates.apply(this,[e[0]]),n=this.geometryFactory.createLinearRing(t),o=[],i=1;i<e.length;++i){var r=e[i],s=this.parse.coordinates.apply(this,[r]),a=this.geometryFactory.createLinearRing(s);o.push(a)}return this.geometryFactory.createPolygon(n,o)},MultiPolygon:function(e){for(var t=[],n=0;n<e.length;++n){var o=e[n];t.push(this.parse.Polygon.apply(this,[o]))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(e){for(var t=[],n=0;n<e.length;++n){var o=e[n];t.push(this.read(o))}return this.geometryFactory.createGeometryCollection(t)}},jsts.io.GeoJSONParser.prototype.write=function(e){var t=e.CLASS_NAME.slice(10);if(!this.extract[t])throw new Error("Geometry is not supported");return this.extract[t].apply(this,[e])},jsts.io.GeoJSONParser.prototype.extract={coordinate:function(e){return[e.x,e.y]},Point:function(e){var t=this.extract.coordinate.apply(this,[e.coordinate]);return{type:"Point",coordinates:t}},MultiPoint:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var o=e.geometries[n],i=this.extract.Point.apply(this,[o]);t.push(i.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(e){for(var t=[],n=0;n<e.points.length;++n){var o=e.points[n];t.push(this.extract.coordinate.apply(this,[o]))}return{type:"LineString",coordinates:t}},MultiLineString:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var o=e.geometries[n],i=this.extract.LineString.apply(this,[o]);t.push(i.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(e){var t=[],n=this.extract.LineString.apply(this,[e.shell]);t.push(n.coordinates);for(var o=0;o<e.holes.length;++o){var i=e.holes[o],r=this.extract.LineString.apply(this,[i]);t.push(r.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var o=e.geometries[n],i=this.extract.Polygon.apply(this,[o]);t.push(i.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var o=e.geometries[n],i=o.CLASS_NAME.slice(10);t.push(this.extract[i].apply(this,[o]))}return{type:"GeometryCollection",geometries:t}}}}(),jsts.triangulate.quadedge.Vertex=function(){1===arguments.length?this.initFromCoordinate(arguments[0]):this.initFromXY(arguments[0],arguments[1])},jsts.triangulate.quadedge.Vertex.LEFT=0,jsts.triangulate.quadedge.Vertex.RIGHT=1,jsts.triangulate.quadedge.Vertex.BEYOND=2,jsts.triangulate.quadedge.Vertex.BEHIND=3,jsts.triangulate.quadedge.Vertex.BETWEEN=4,jsts.triangulate.quadedge.Vertex.ORIGIN=5,jsts.triangulate.quadedge.Vertex.DESTINATION=6,jsts.triangulate.quadedge.Vertex.prototype.initFromXY=function(e,t){this.p=new jsts.geom.Coordinate(e,t)},jsts.triangulate.quadedge.Vertex.prototype.initFromCoordinate=function(e){this.p=new jsts.geom.Coordinate(e)},jsts.triangulate.quadedge.Vertex.prototype.getX=function(){return this.p.x},jsts.triangulate.quadedge.Vertex.prototype.getY=function(){return this.p.y},jsts.triangulate.quadedge.Vertex.prototype.getZ=function(){return this.p.z},jsts.triangulate.quadedge.Vertex.prototype.setZ=function(e){this.p.z=e},jsts.triangulate.quadedge.Vertex.prototype.getCoordinate=function(){return this.p},jsts.triangulate.quadedge.Vertex.prototype.toString=function(){return"POINT ("+this.p.x+" "+this.p.y+")"},jsts.triangulate.quadedge.Vertex.prototype.equals=function(){return 1===arguments.length?this.equalsExact(arguments[0]):this.equalsWithTolerance(arguments[0],arguments[1])},jsts.triangulate.quadedge.Vertex.prototype.equalsExact=function(e){return this.p.x===e.getX()&&this.p.y===e.getY()},jsts.triangulate.quadedge.Vertex.prototype.equalsWithTolerance=function(e,t){return this.p.distance(e.getCoordinate())<t},jsts.triangulate.quadedge.Vertex.prototype.classify=function(e,t){var n,o,i,r;return n=this,o=t.sub(e),i=n.sub(e),r=o.crossProduct(i),r>0?jsts.triangulate.quadedge.Vertex.LEFT:r<0?jsts.triangulate.quadedge.Vertex.RIGHT:o.getX()*i.getX()<0||o.getY()*i.getY()<0?jsts.triangulate.quadedge.Vertex.BEHIND:o.magn()<i.magn()?jsts.triangulate.quadedge.Vertex.BEYOND:e.equals(n)?jsts.triangulate.quadedge.Vertex.ORIGIN:t.equals(n)?jsts.triangulate.quadedge.Vertex.DESTINATION:jsts.triangulate.quadedge.Vertex.BETWEEN},jsts.triangulate.quadedge.Vertex.prototype.crossProduct=function(e){return this.p.x*e.getY()-this.p.y*e.getX()},jsts.triangulate.quadedge.Vertex.prototype.dot=function(e){return this.p.x*e.getX()+this.p.y*e.getY()},jsts.triangulate.quadedge.Vertex.prototype.times=function(e){return new jsts.triangulate.quadedge.Vertex(e*this.p.x,e*this.p.y)},jsts.triangulate.quadedge.Vertex.prototype.sum=function(e){return new jsts.triangulate.quadedge.Vertex(this.p.x+e.getX(),this.p.y+e.getY())},jsts.triangulate.quadedge.Vertex.prototype.sub=function(e){return new jsts.triangulate.quadedge.Vertex(this.p.x-e.getX(),this.p.y-e.getY())},jsts.triangulate.quadedge.Vertex.prototype.magn=function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},jsts.triangulate.quadedge.Vertex.prototype.cross=function(){return new Vertex(this.p.y,(-this.p.x))},jsts.triangulate.quadedge.Vertex.prototype.isInCircle=function(e,t,n){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust(e.p,t.p,n.p,this.p)},jsts.triangulate.quadedge.Vertex.prototype.isCCW=function(e,t){return(e.p.x-this.p.x)*(t.p.y-this.p.y)-(e.p.y-this.p.y)*(t.p.x-this.p.x)>0},jsts.triangulate.quadedge.Vertex.prototype.rightOf=function(e){return this.isCCW(e.dest(),e.orig())},jsts.triangulate.quadedge.Vertex.prototype.leftOf=function(e){return this.isCCW(e.orig(),e.dest())},jsts.triangulate.quadedge.Vertex.prototype.bisector=function(e,t){var n,o,i,r;return n=t.getX()-e.getX(),o=t.getY()-e.getY(),i=new jsts.algorithm.HCoordinate(e.getX()+n/2,e.getY()+o/2,1),r=new jsts.algorithm.HCoordinate(e.getX()-o+n/2,e.getY()+n+o/2,1),new jsts.algorithm.HCoordinate(i,r)},jsts.triangulate.quadedge.Vertex.prototype.distance=function(e,t){return e.p.distance(t.p)},jsts.triangulate.quadedge.Vertex.prototype.circumRadiusRatio=function(e,t){var n,o,i,r;return n=this.circleCenter(e,t),o=this.distance(n,e),i=this.distance(this,e),r=this.distance(e,t),r<i&&(i=r),r=this.distance(t,this),r<i&&(i=r),o/i},jsts.triangulate.quadedge.Vertex.prototype.midPoint=function(e){var t,n;return t=(this.p.x+e.getX())/2,n=(this.p.y+e.getY())/2,new jsts.triangulate.quadedge.Vertex(t,n)},jsts.triangulate.quadedge.Vertex.prototype.circleCenter=function(e,t){var n,o,i,r,s;n=new jsts.triangulate.quadedge.Vertex(this.getX(),this.getY()),o=this.bisector(n,e),i=this.bisector(e,t),r=new jsts.algorithm.HCoordinate(o,i),s=null;try{s=new jsts.triangulate.quadedge.Vertex(r.getX(),r.getY())}catch(e){}return s},jsts.operation.valid.IsValidOp=function(e){this.parentGeometry=e,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null},jsts.operation.valid.IsValidOp.isValid=function(e){if(arguments[0]instanceof jsts.geom.Coordinate)return!isNaN(e.x)&&(!(!isFinite(e.x)&&!isNaN(e.x))&&(!isNaN(e.y)&&!(!isFinite(e.y)&&!isNaN(e.y))));var t=new jsts.operation.valid.IsValidOp(e);return t.isValid()},jsts.operation.valid.IsValidOp.findPtNotNode=function(e,t,n){for(var o=n.findEdge(t),i=o.getEdgeIntersectionList(),r=0;r<e.length;r++){var s=e[r];if(!i.isIntersection(s))return s}return null},jsts.operation.valid.IsValidOp.prototype.setSelfTouchingRingFormingHoleValid=function(e){this.isSelfTouchingRingFormingHoleValid=e},jsts.operation.valid.IsValidOp.prototype.isValid=function(){return this.checkValid(this.parentGeometry),null==this.validErr},jsts.operation.valid.IsValidOp.prototype.getValidationError=function(){return this.checkValid(this.parentGeometry),this.validErr},jsts.operation.valid.IsValidOp.prototype.checkValid=function(e){if(this.validErr=null,!e.isEmpty())if(e instanceof jsts.geom.Point)this.checkValidPoint(e);else if(e instanceof jsts.geom.MultiPoint)this.checkValidMultiPoint(e);else if(e instanceof jsts.geom.LinearRing)this.checkValidLinearRing(e);else if(e instanceof jsts.geom.LineString)this.checkValidLineString(e);else if(e instanceof jsts.geom.Polygon)this.checkValidPolygon(e);else if(e instanceof jsts.geom.MultiPolygon)this.checkValidMultiPolygon(e);else{if(!(e instanceof jsts.geom.GeometryCollection))throw e.constructor;this.checkValidGeometryCollection(e)}},jsts.operation.valid.IsValidOp.prototype.checkValidPoint=function(e){this.checkInvalidCoordinates(e.getCoordinates())},jsts.operation.valid.IsValidOp.prototype.checkValidMultiPoint=function(e){this.checkInvalidCoordinates(e.getCoordinates())},jsts.operation.valid.IsValidOp.prototype.checkValidLineString=function(e){if(this.checkInvalidCoordinates(e.getCoordinates()),null==this.validErr){var t=new jsts.geomgraph.GeometryGraph(0,e);this.checkTooFewPoints(t)}},jsts.operation.valid.IsValidOp.prototype.checkValidLinearRing=function(e){if(this.checkInvalidCoordinates(e.getCoordinates()),null==this.validErr&&(this.checkClosedRing(e),null==this.validErr)){var t=new jsts.geomgraph.GeometryGraph(0,e);if(this.checkTooFewPoints(t),null==this.validErr){var n=new jsts.algorithm.RobustLineIntersector;t.computeSelfNodes(n,!0),this.checkNoSelfIntersectingRings(t)}}},jsts.operation.valid.IsValidOp.prototype.checkValidPolygon=function(e){if(this.checkInvalidCoordinates(e),null==this.validErr&&(this.checkClosedRings(e),null==this.validErr)){var t=new jsts.geomgraph.GeometryGraph(0,e);this.checkTooFewPoints(t),null==this.validErr&&(this.checkConsistentArea(t),null==this.validErr&&(this.isSelfTouchingRingFormingHoleValid||(this.checkNoSelfIntersectingRings(t),null==this.validErr))&&(this.checkHolesInShell(e,t),null==this.validErr&&(this.checkHolesNotNested(e,t),null==this.validErr&&this.checkConnectedInteriors(t))))}},jsts.operation.valid.IsValidOp.prototype.checkValidMultiPolygon=function(e){for(var t=e.getNumGeometries(),n=0;n<t;n++){var o=e.getGeometryN(n);if(this.checkInvalidCoordinates(o),null!=this.validErr)return;if(this.checkClosedRings(o),null!=this.validErr)return}var i=new jsts.geomgraph.GeometryGraph(0,e);if(this.checkTooFewPoints(i),null==this.validErr&&(this.checkConsistentArea(i),null==this.validErr&&(this.isSelfTouchingRingFormingHoleValid||(this.checkNoSelfIntersectingRings(i),null==this.validErr)))){for(var n=0;n<e.getNumGeometries();n++){var o=e.getGeometryN(n);if(this.checkHolesInShell(o,i),null!=this.validErr)return}for(var n=0;n<e.getNumGeometries();n++){var o=e.getGeometryN(n);if(this.checkHolesNotNested(o,i),null!=this.validErr)return}this.checkShellsNotNested(e,i),null==this.validErr&&this.checkConnectedInteriors(i)}},jsts.operation.valid.IsValidOp.prototype.checkValidGeometryCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);if(this.checkValid(n),null!=this.validErr)return}},jsts.operation.valid.IsValidOp.prototype.checkInvalidCoordinates=function(e){if(e instanceof jsts.geom.Polygon){var t=e;if(this.checkInvalidCoordinates(t.getExteriorRing().getCoordinates()),null!=this.validErr)return;for(var n=0;n<t.getNumInteriorRing();n++)if(this.checkInvalidCoordinates(t.getInteriorRingN(n).getCoordinates()),null!=this.validErr)return}else for(var o=e,n=0;n<o.length;n++)if(!jsts.operation.valid.IsValidOp.isValid(o[n]))return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE,o[n]))},jsts.operation.valid.IsValidOp.prototype.checkClosedRings=function(e){if(this.checkClosedRing(e.getExteriorRing()),null==this.validErr)for(var t=0;t<e.getNumInteriorRing();t++)if(this.checkClosedRing(e.getInteriorRingN(t)),null!=this.validErr)return},jsts.operation.valid.IsValidOp.prototype.checkClosedRing=function(e){if(!e.isClosed()){var t=null;e.getNumPoints()>=1&&(t=e.getCoordinateN(0)),this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED,t)}},jsts.operation.valid.IsValidOp.prototype.checkTooFewPoints=function(e){if(e.hasTooFewPoints)return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS,e.getInvalidPoint()))},jsts.operation.valid.IsValidOp.prototype.checkConsistentArea=function(e){var t=new jsts.operation.valid.ConsistentAreaTester(e),n=t.isNodeConsistentArea();return n?void(t.hasDuplicateRings()&&(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS,t.getInvalidPoint()))):void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION,t.getInvalidPoint()))},jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRings=function(e){for(var t=e.getEdgeIterator();t.hasNext();){var n=t.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!=this.validErr)return}},jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRing=function(e){for(var t=[],n=!0,o=e.iterator();o.hasNext();){var i=o.next();if(n)n=!1;else{if(t.indexOf(i.coord)>=0)return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION,i.coord));t.push(i.coord)}}},jsts.operation.valid.IsValidOp.prototype.checkHolesInShell=function(e,t){for(var n=e.getExteriorRing(),o=new jsts.algorithm.MCPointInRing(n),i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i),s=jsts.operation.valid.IsValidOp.findPtNotNode(r.getCoordinates(),n,t);if(null==s)return;var a=!o.isInside(s);if(a)return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL,s))}},jsts.operation.valid.IsValidOp.prototype.checkHolesNotNested=function(e,t){for(var n=new jsts.operation.valid.IndexedNestedRingTester(t),o=0;o<e.getNumInteriorRing();o++){var i=e.getInteriorRingN(o);n.add(i)}var r=n.isNonNested();r||(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_HOLES,n.getNestedPoint()))},jsts.operation.valid.IsValidOp.prototype.checkShellsNotNested=function(e,t){for(var n=0;n<e.getNumGeometries();n++)for(var o=e.getGeometryN(n),i=o.getExteriorRing(),r=0;r<e.getNumGeometries();r++)if(n!=r){var s=e.getGeometryN(r);if(this.checkShellNotNested(i,s,t),null!=this.validErr)return}},jsts.operation.valid.IsValidOp.prototype.checkShellNotNested=function(e,t,n){var o=e.getCoordinates(),i=t.getExteriorRing(),r=i.getCoordinates(),s=jsts.operation.valid.IsValidOp.findPtNotNode(o,i,n);if(null!=s){var a=jsts.algorithm.CGAlgorithms.isPointInRing(s,r);if(a){if(t.getNumInteriorRing()<=0)return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,s));for(var l=null,c=0;c<t.getNumInteriorRing();c++){var u=t.getInteriorRingN(c);if(l=this.checkShellInsideHole(e,u,n),null==l)return}this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,l)}}},jsts.operation.valid.IsValidOp.prototype.checkShellInsideHole=function(e,t,n){var o=e.getCoordinates(),i=t.getCoordinates(),r=jsts.operation.valid.IsValidOp.findPtNotNode(o,t,n);if(null!=r){var s=jsts.algorithm.CGAlgorithms.isPointInRing(r,i);if(!s)return r}var a=jsts.operation.valid.IsValidOp.findPtNotNode(i,e,n);if(null!=a){var l=jsts.algorithm.CGAlgorithms.isPointInRing(a,o);return l?a:null}return jsts.util.Assert.shouldNeverReachHere("points in shell and hole appear to be equal"),null},jsts.operation.valid.IsValidOp.prototype.checkConnectedInteriors=function(e){var t=new jsts.operation.valid.ConnectedInteriorTester(e);t.isInteriorsConnected()||(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR,t.getCoordinate()))};jsts.algorithm.RobustDeterminant=function(){};jsts.algorithm.RobustDeterminant.signOfDet2x2=function(e,t,n,o){var i,r,s,a;if(a=0,i=1,0===e||0===o)return 0===t||0===n?0:t>0?n>0?-i:i:n>0?i:-i;if(0===t||0===n)return o>0?e>0?i:-i:e>0?-i:i;if(0<t?0<o?t>o&&(i=-i,r=e,e=n,n=r,r=t,t=o,o=r):t<=-o?(i=-i,n=-n,o=-o):(r=e,e=-n,n=r,r=t,t=-o,o=r):0<o?-t<=o?(i=-i,e=-e,t=-t):(r=-e,e=n,n=r,r=-t,t=o,o=r):t>=o?(e=-e,t=-t,n=-n,o=-o):(i=-i,r=-e,e=-n,n=r,r=-t,t=-o,o=r),0<e){if(!(0<n))return i;if(e>n)return i}else{if(0<n)return-i;if(!(e>=n))return-i;i=-i,e=-e,n=-n}for(;;){if(a+=1,s=Math.floor(n/e),n-=s*e,o-=s*t,o<0)return-i;if(o>t)return i;if(e>n+n){if(t<o+o)return i}else{if(t>o+o)return-i;n=e-n,o=t-o,i=-i}if(0===o)return 0===n?0:-i;if(0===n)return i;if(s=Math.floor(e/n),e-=s*n,t-=s*o,t<0)return i;if(t>o)return-i;if(n>e+e){if(o<t+t)return-i}else{if(o>t+t)return i;e=n-e,t=o-t,i=-i}if(0===t)return 0===e?0:i;if(0===e)return-i}},jsts.algorithm.RobustDeterminant.orientationIndex=function(e,t,n){var o=t.x-e.x,i=t.y-e.y,r=n.x-t.x,s=n.y-t.y;return jsts.algorithm.RobustDeterminant.signOfDet2x2(o,i,r,s)},jsts.index.quadtree.NodeBase=function(){this.subnode=new Array(4),this.subnode[0]=null,this.subnode[1]=null,this.subnode[2]=null,this.subnode[3]=null,this.items=[]},jsts.index.quadtree.NodeBase.prototype.getSubnodeIndex=function(e,t){var n=-1;return e.getMinX()>=t.x&&(e.getMinY()>=t.y&&(n=3),e.getMaxY()<=t.y&&(n=1)),e.getMaxX()<=t.x&&(e.getMinY()>=t.y&&(n=2),e.getMaxY()<=t.y&&(n=0)),n},jsts.index.quadtree.NodeBase.prototype.getItems=function(){return this.items},jsts.index.quadtree.NodeBase.prototype.hasItems=function(){return this.items.length>0},jsts.index.quadtree.NodeBase.prototype.add=function(e){this.items.push(e)},jsts.index.quadtree.NodeBase.prototype.remove=function(e,t){if(!this.isSearchMatch(e))return!1;var n=!1,o=0;for(o;o<4;o++)if(null!==this.subnode[o]&&(n=this.subnode[o].remove(e,t))){this.subnode[o].isPrunable()&&(this.subnode[o]=null);break}if(n)return n;if(this.items.indexOf(t)!==-1){for(var o=this.items.length-1;o>=0;o--)this.items[o]===t&&this.items.splice(o,1);n=!0}return n},jsts.index.quadtree.NodeBase.prototype.isPrunable=function(){return!(this.hasChildren()||this.hasItems())},jsts.index.quadtree.NodeBase.prototype.hasChildren=function(){var e=0;for(e;e<4;e++)if(null!==this.subnode[e])return!0;return!1},jsts.index.quadtree.NodeBase.prototype.isEmpty=function(){var e=!0;this.items.length>0&&(e=!1);var t=0;for(t;t<4;t++)null!==this.subnode[t]&&(this.subnode[t].isEmpty()||(e=!1));return e},jsts.index.quadtree.NodeBase.prototype.addAllItems=function(e){e=e.concat(this.items);var t=0;for(t;t<4;t++)null!==this.subnode[t]&&(e=this.subnode[t].addAllItems(e));return e},jsts.index.quadtree.NodeBase.prototype.addAllItemsFromOverlapping=function(e,t){if(this.isSearchMatch(e)){t=t.concat(this.items);var n=0;for(n;n<4;n++)null!==this.subnode[n]&&(t=this.subnode[n].addAllItemsFromOverlapping(e,t))}},jsts.index.quadtree.NodeBase.prototype.visit=function(e,t){if(this.isSearchMatch(e)){this.visitItems(e,t);var n=0;for(n;n<4;n++)null!==this.subnode[n]&&this.subnode[n].visit(e,t)}},jsts.index.quadtree.NodeBase.prototype.visitItems=function(e,t){var n=0,o=this.items.length;for(n;n<o;n++)t.visitItem(this.items[n])},jsts.index.quadtree.NodeBase.prototype.depth=function(){var e,t=0,n=0;for(n;n<4;n++)null!==this.subnode[n]&&(e=this.subnode[n].depth(),e>t&&(t=e));return t+1},jsts.index.quadtree.NodeBase.prototype.size=function(){var e=0,t=0;for(t;t<4;t++)null!==this.subnode[t]&&(e+=this.subnode[t].size());return e+this.items.length},jsts.index.quadtree.NodeBase.prototype.getNodeCount=function(){var e=0,t=0;for(t;t<4;t++)null!==this.subnode[t]&&(e+=this.subnode[t].size());return e+1},jsts.index.quadtree.Node=function(e,t){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments),this.env=e,this.level=t,this.centre=new jsts.geom.Coordinate,this.centre.x=(e.getMinX()+e.getMaxX())/2,this.centre.y=(e.getMinY()+e.getMaxY())/2},jsts.index.quadtree.Node.prototype=new jsts.index.quadtree.NodeBase,jsts.index.quadtree.Node.createNode=function(e){var t,n;return t=new jsts.index.quadtree.Key(e),n=new jsts.index.quadtree.Node(t.getEnvelope(),t.getLevel())},jsts.index.quadtree.Node.createExpanded=function(e,t){var n,o=new jsts.geom.Envelope(t);return null!==e&&o.expandToInclude(e.env),n=jsts.index.quadtree.Node.createNode(o),null!==e&&n.insertNode(e),n},jsts.index.quadtree.Node.prototype.getEnvelope=function(){return this.env},jsts.index.quadtree.Node.prototype.isSearchMatch=function(e){return this.env.intersects(e)},jsts.index.quadtree.Node.prototype.getNode=function(e){var t,n=this.getSubnodeIndex(e,this.centre);return n!==-1?(t=this.getSubnode(n),t.getNode(e)):this},jsts.index.quadtree.Node.prototype.find=function(e){var t,n=this.getSubnodeIndex(e,this.centre);return n===-1?this:null!==this.subnode[n]?(t=this.subnode[n],t.find(e)):this},jsts.index.quadtree.Node.prototype.insertNode=function(e){var t,n=this.getSubnodeIndex(e.env,this.centre);e.level===this.level-1?this.subnode[n]=e:(t=this.createSubnode(n),t.insertNode(e),this.subnode[n]=t)},jsts.index.quadtree.Node.prototype.getSubnode=function(e){return null===this.subnode[e]&&(this.subnode[e]=this.createSubnode(e)),this.subnode[e]},jsts.index.quadtree.Node.prototype.createSubnode=function(e){var t,n,o=0,i=0,r=0,s=0;switch(e){case 0:o=this.env.getMinX(),i=this.centre.x,r=this.env.getMinY(),s=this.centre.y;break;case 1:o=this.centre.x,i=this.env.getMaxX(),r=this.env.getMinY(),s=this.centre.y;break;case 2:o=this.env.getMinX(),i=this.centre.x,r=this.centre.y,s=this.env.getMaxY();break;case 3:o=this.centre.x,i=this.env.getMaxX(),r=this.centre.y,s=this.env.getMaxY()}return t=new jsts.geom.Envelope(o,i,r,s),n=new jsts.index.quadtree.Node(t,this.level-1)},function(){jsts.triangulate.quadedge.QuadEdge=function(){this.rot=null,this.vertex=null,this.next=null,this.data=null};var e=jsts.triangulate.quadedge.QuadEdge;jsts.triangulate.quadedge.QuadEdge.makeEdge=function(t,n){var o,i,r,s,a;return o=new e,i=new e,r=new e,s=new e,o.rot=i,i.rot=r,r.rot=s,s.rot=o,o.setNext(o),i.setNext(s),r.setNext(r),s.setNext(i),a=o,a.setOrig(t),a.setDest(n),a},jsts.triangulate.quadedge.QuadEdge.connect=function(t,n){var o=e.makeEdge(t.dest(),n.orig());return e.splice(o,t.lNext()),e.splice(o.sym(),n),o},jsts.triangulate.quadedge.QuadEdge.splice=function(e,t){var n,o,i,r,s,a;n=e.oNext().rot,o=t.oNext().rot,i=t.oNext(),r=e.oNext(),s=o.oNext(),a=n.oNext(),e.setNext(i),t.setNext(r),n.setNext(s),o.setNext(a)},jsts.triangulate.quadedge.QuadEdge.swap=function(t){var n,o;n=t.oPrev(),o=t.sym().oPrev(),e.splice(t,n),e.splice(t.sym(),o),e.splice(t,n.lNext()),e.splice(t.sym(),o.lNext()),t.setOrig(n.dest()),t.setDest(o.dest())},jsts.triangulate.quadedge.QuadEdge.prototype.getPrimary=function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},jsts.triangulate.quadedge.QuadEdge.prototype.setData=function(e){this.data=e},jsts.triangulate.quadedge.QuadEdge.prototype.getData=function(){return this.data},jsts.triangulate.quadedge.QuadEdge.prototype.delete_jsts=function(){this.rot=null},jsts.triangulate.quadedge.QuadEdge.prototype.isLive=function(){return null!==this.rot},jsts.triangulate.quadedge.QuadEdge.prototype.setNext=function(e){this.next=e},jsts.triangulate.quadedge.QuadEdge.prototype.invRot=function(){return this.rot.sym()},jsts.triangulate.quadedge.QuadEdge.prototype.sym=function(){return this.rot.rot},jsts.triangulate.quadedge.QuadEdge.prototype.oNext=function(){return this.next},jsts.triangulate.quadedge.QuadEdge.prototype.oPrev=function(){return this.rot.next.rot},jsts.triangulate.quadedge.QuadEdge.prototype.dNext=function(){return this.sym().oNext().sym()},jsts.triangulate.quadedge.QuadEdge.prototype.dPrev=function(){return this.invRot().oNext().invRot()},jsts.triangulate.quadedge.QuadEdge.prototype.lNext=function(){return this.invRot().oNext().rot},jsts.triangulate.quadedge.QuadEdge.prototype.lPrev=function(){return this.next.sym()},jsts.triangulate.quadedge.QuadEdge.prototype.rNext=function(){return this.rot.next.invRot()},jsts.triangulate.quadedge.QuadEdge.prototype.rPrev=function(){return this.sym().oNext()},jsts.triangulate.quadedge.QuadEdge.prototype.setOrig=function(e){this.vertex=e},jsts.triangulate.quadedge.QuadEdge.prototype.setDest=function(e){this.sym().setOrig(e)},jsts.triangulate.quadedge.QuadEdge.prototype.orig=function(){return this.vertex},jsts.triangulate.quadedge.QuadEdge.prototype.dest=function(){return this.sym().orig()},jsts.triangulate.quadedge.QuadEdge.prototype.getLength=function(){return this.orig().getCoordinate().distance(dest().getCoordinate())},jsts.triangulate.quadedge.QuadEdge.prototype.equalsNonOriented=function(e){return!!this.equalsOriented(e)||!!this.equalsOriented(e.sym())},jsts.triangulate.quadedge.QuadEdge.prototype.equalsOriented=function(e){return!(!this.orig().getCoordinate().equals2D(e.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(e.dest().getCoordinate()))},jsts.triangulate.quadedge.QuadEdge.prototype.toLineSegment=function(){return new jsts.geom.LineSegment(this.vertex.getCoordinate(),this.dest().getCoordinate())},jsts.triangulate.quadedge.QuadEdge.prototype.toString=function(){var e,t;return e=this.vertex.getCoordinate(),t=this.dest().getCoordinate(),jsts.io.WKTWriter.toLineString(e,t)}}(),function(){var e=jsts.util.Assert;jsts.geomgraph.EdgeEnd=function(e,t,n,o){this.edge=e,t&&n&&this.init(t,n),o&&(this.label=o||null)},jsts.geomgraph.EdgeEnd.prototype.edge=null,jsts.geomgraph.EdgeEnd.prototype.label=null,jsts.geomgraph.EdgeEnd.prototype.node=null,jsts.geomgraph.EdgeEnd.prototype.p0=null,jsts.geomgraph.EdgeEnd.prototype.p1=null,jsts.geomgraph.EdgeEnd.prototype.dx=null,jsts.geomgraph.EdgeEnd.prototype.dy=null,jsts.geomgraph.EdgeEnd.prototype.quadrant=null,jsts.geomgraph.EdgeEnd.prototype.init=function(t,n){this.p0=t,this.p1=n,this.dx=n.x-t.x,this.dy=n.y-t.y,this.quadrant=jsts.geomgraph.Quadrant.quadrant(this.dx,this.dy),e.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")},jsts.geomgraph.EdgeEnd.prototype.getEdge=function(){return this.edge},jsts.geomgraph.EdgeEnd.prototype.getLabel=function(){return this.label},jsts.geomgraph.EdgeEnd.prototype.getCoordinate=function(){return this.p0},jsts.geomgraph.EdgeEnd.prototype.getDirectedCoordinate=function(){return this.p1},jsts.geomgraph.EdgeEnd.prototype.getQuadrant=function(){return this.quadrant},jsts.geomgraph.EdgeEnd.prototype.getDx=function(){return this.dx},jsts.geomgraph.EdgeEnd.prototype.getDy=function(){return this.dy},jsts.geomgraph.EdgeEnd.prototype.setNode=function(e){this.node=e},jsts.geomgraph.EdgeEnd.prototype.getNode=function(){return this.node},jsts.geomgraph.EdgeEnd.prototype.compareTo=function(e){return this.compareDirection(e)},jsts.geomgraph.EdgeEnd.prototype.compareDirection=function(e){return this.dx===e.dx&&this.dy===e.dy?0:this.quadrant>e.quadrant?1:this.quadrant<e.quadrant?-1:jsts.algorithm.CGAlgorithms.computeOrientation(e.p0,e.p1,this.p1)},jsts.geomgraph.EdgeEnd.prototype.computeLabel=function(e){}}(),jsts.operation.buffer.RightmostEdgeFinder=function(){},jsts.operation.buffer.RightmostEdgeFinder.prototype.minIndex=-1,jsts.operation.buffer.RightmostEdgeFinder.prototype.minCoord=null,jsts.operation.buffer.RightmostEdgeFinder.prototype.minDe=null,jsts.operation.buffer.RightmostEdgeFinder.prototype.orientedDe=null,jsts.operation.buffer.RightmostEdgeFinder.prototype.getEdge=function(){return this.orientedDe},jsts.operation.buffer.RightmostEdgeFinder.prototype.getCoordinate=function(){return this.minCoord},jsts.operation.buffer.RightmostEdgeFinder.prototype.findEdge=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.isForward()&&this.checkForRightmostCoordinate(n)}jsts.util.Assert.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var o=this.getRightmostSide(this.minDe,this.minIndex);o==jsts.geomgraph.Position.LEFT&&(this.orientedDe=this.minDe.getSym())},jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtNode=function(){var e=this.minDe.getNode(),t=e.getEdges();this.minDe=t.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtVertex=function(){var e=this.minDe.getEdge().getCoordinates();jsts.util.Assert.isTrue(this.minIndex>0&&this.minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this.minIndex-1],n=e[this.minIndex+1],o=jsts.algorithm.CGAlgorithms.computeOrientation(this.minCoord,n,t),i=!1;t.y<this.minCoord.y&&n.y<this.minCoord.y&&o===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE?i=!0:t.y>this.minCoord.y&&n.y>this.minCoord.y&&o===jsts.algorithm.CGAlgorithms.CLOCKWISE&&(i=!0),i&&(this.minIndex=this.minIndex-1)},jsts.operation.buffer.RightmostEdgeFinder.prototype.checkForRightmostCoordinate=function(e){for(var t=e.getEdge().getCoordinates(),n=0;n<t.length-1;n++)(null===this.minCoord||t[n].x>this.minCoord.x)&&(this.minDe=e,this.minIndex=n,this.minCoord=t[n])},jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSide=function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this.minCoord=null,this.checkForRightmostCoordinate(e)),n},jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSideOfSegment=function(e,t){var n=e.getEdge(),o=n.getCoordinates();if(t<0||t+1>=o.length)return-1;if(o[t].y==o[t+1].y)return-1;var i=jsts.geomgraph.Position.LEFT;return o[t].y<o[t+1].y&&(i=jsts.geomgraph.Position.RIGHT),i},function(){jsts.triangulate.IncrementalDelaunayTriangulator=function(e){this.subdiv=e,this.isUsingTolerance=e.getTolerance()>0},jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSites=function(e){var t,n=0,o=e.length;for(n;n<o;n++)t=e[n],this.insertSite(t)},jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSite=function(e){var t,n,o,i;if(t=this.subdiv.locate(e),this.subdiv.isVertexOfEdge(t,e))return t;this.subdiv.isOnEdge(t,e.getCoordinate())&&(t=t.oPrev(),this.subdiv.delete_jsts(t.oNext())),n=this.subdiv.makeEdge(t.orig(),e),jsts.triangulate.quadedge.QuadEdge.splice(n,t),o=n;do n=this.subdiv.connect(t,n.sym()),t=n.oPrev();while(t.lNext()!=o);for(;;)if(i=t.oPrev(),i.dest().rightOf(t)&&e.isInCircle(t.orig(),i.dest(),t.dest()))jsts.triangulate.quadedge.QuadEdge.swap(t),t=t.oPrev();else{if(t.oNext()==o)return n;t=t.oNext().lPrev()}}}(),jsts.algorithm.CentroidArea=function(){this.basePt=null,this.triangleCent3=new jsts.geom.Coordinate,
this.centSum=new jsts.geom.Coordinate,this.cg3=new jsts.geom.Coordinate},jsts.algorithm.CentroidArea.prototype.basePt=null,jsts.algorithm.CentroidArea.prototype.triangleCent3=null,jsts.algorithm.CentroidArea.prototype.areasum2=0,jsts.algorithm.CentroidArea.prototype.cg3=null,jsts.algorithm.CentroidArea.prototype.centSum=null,jsts.algorithm.CentroidArea.prototype.totalLength=0,jsts.algorithm.CentroidArea.prototype.add=function(e){if(e instanceof jsts.geom.Polygon){var t=e;this.setBasePoint(t.getExteriorRing().getCoordinateN(0)),this.add3(t)}else if(e instanceof jsts.geom.GeometryCollection||e instanceof jsts.geom.MultiPolygon)for(var n=e,o=0;o<n.getNumGeometries();o++)this.add(n.getGeometryN(o));else e instanceof Array&&this.add2(e)},jsts.algorithm.CentroidArea.prototype.add2=function(e){this.setBasePoint(e[0]),this.addShell(e)},jsts.algorithm.CentroidArea.prototype.getCentroid=function(){var e=new jsts.geom.Coordinate;return Math.abs(this.areasum2)>0?(e.x=this.cg3.x/3/this.areasum2,e.y=this.cg3.y/3/this.areasum2):(e.x=this.centSum.x/this.totalLength,e.y=this.centSum.y/this.totalLength),e},jsts.algorithm.CentroidArea.prototype.setBasePoint=function(e){null==this.basePt&&(this.basePt=e)},jsts.algorithm.CentroidArea.prototype.add3=function(e){this.addShell(e.getExteriorRing().getCoordinates());for(var t=0;t<e.getNumInteriorRing();t++)this.addHole(e.getInteriorRingN(t).getCoordinates())},jsts.algorithm.CentroidArea.prototype.addShell=function(e){for(var t=!jsts.algorithm.CGAlgorithms.isCCW(e),n=0;n<e.length-1;n++)this.addTriangle(this.basePt,e[n],e[n+1],t);this.addLinearSegments(e)},jsts.algorithm.CentroidArea.prototype.addHole=function(e){for(var t=jsts.algorithm.CGAlgorithms.isCCW(e),n=0;n<e.length-1;n++)this.addTriangle(this.basePt,e[n],e[n+1],t);this.addLinearSegments(e)},jsts.algorithm.CentroidArea.prototype.addTriangle=function(e,t,n,o){var i=o?1:-1;jsts.algorithm.CentroidArea.centroid3(e,t,n,this.triangleCent3);var r=jsts.algorithm.CentroidArea.area2(e,t,n);this.cg3.x+=i*r*this.triangleCent3.x,this.cg3.y+=i*r*this.triangleCent3.y,this.areasum2+=i*r},jsts.algorithm.CentroidArea.centroid3=function(e,t,n,o){o.x=e.x+t.x+n.x,o.y=e.y+t.y+n.y},jsts.algorithm.CentroidArea.area2=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)},jsts.algorithm.CentroidArea.prototype.addLinearSegments=function(e){for(var t=0;t<e.length-1;t++){var n=e[t].distance(e[t+1]);this.totalLength+=n;var o=(e[t].x+e[t+1].x)/2;this.centSum.x+=n*o;var i=(e[t].y+e[t+1].y)/2;this.centSum.y+=n*i}},jsts.geomgraph.index.SweepLineSegment=function(e,t){this.edge=e,this.ptIndex=t,this.pts=e.getCoordinates()},jsts.geomgraph.index.SweepLineSegment.prototype.edge=null,jsts.geomgraph.index.SweepLineSegment.prototype.pts=null,jsts.geomgraph.index.SweepLineSegment.prototype.ptIndex=null,jsts.geomgraph.index.SweepLineSegment.prototype.getMinX=function(){var e=this.pts[this.ptIndex].x,t=this.pts[this.ptIndex+1].x;return e<t?e:t},jsts.geomgraph.index.SweepLineSegment.prototype.getMaxX=function(){var e=this.pts[this.ptIndex].x,t=this.pts[this.ptIndex+1].x;return e>t?e:t},jsts.geomgraph.index.SweepLineSegment.prototype.computeIntersections=function(e,t){t.addIntersections(this.edge,this.ptIndex,e.edge,e.ptIndex)},jsts.index.quadtree.Root=function(){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments),this.origin=new jsts.geom.Coordinate(0,0)},jsts.index.quadtree.Root.prototype=new jsts.index.quadtree.NodeBase,jsts.index.quadtree.Root.prototype.insert=function(e,t){var n=this.getSubnodeIndex(e,this.origin);if(n===-1)return void this.add(t);var o=this.subnode[n];if(null===o||!o.getEnvelope().contains(e)){var i=jsts.index.quadtree.Node.createExpanded(o,e);this.subnode[n]=i}this.insertContained(this.subnode[n],e,t)},jsts.index.quadtree.Root.prototype.insertContained=function(e,t,n){var o,i,r;o=jsts.index.IntervalSize.isZeroWidth(t.getMinX(),t.getMaxX()),i=jsts.index.IntervalSize.isZeroWidth(t.getMinY(),t.getMaxY()),r=o||i?e.find(t):e.getNode(t),r.add(n)},jsts.index.quadtree.Root.prototype.isSearchMatch=function(e){return!0},jsts.geomgraph.index.MonotoneChainIndexer=function(){},jsts.geomgraph.index.MonotoneChainIndexer.toIntArray=function(e){for(var t=[],n=e.iterator();n.hasNext();){var o=n.next();t.push(o)}return t},jsts.geomgraph.index.MonotoneChainIndexer.prototype.getChainStartIndices=function(e){var t=0,n=new javascript.util.ArrayList;n.add(t);do{var o=this.findChainEnd(e,t);n.add(o),t=o}while(t<e.length-1);var i=jsts.geomgraph.index.MonotoneChainIndexer.toIntArray(n);return i},jsts.geomgraph.index.MonotoneChainIndexer.prototype.findChainEnd=function(e,t){for(var n=jsts.geomgraph.Quadrant.quadrant(e[t],e[t+1]),o=t+1;o<e.length;){var i=jsts.geomgraph.Quadrant.quadrant(e[o-1],e[o]);if(i!=n)break;o++}return o-1},jsts.noding.IntersectionAdder=function(e){this.li=e},jsts.noding.IntersectionAdder.prototype=new jsts.noding.SegmentIntersector,jsts.noding.IntersectionAdder.constructor=jsts.noding.IntersectionAdder,jsts.noding.IntersectionAdder.isAdjacentSegments=function(e,t){return 1===Math.abs(e-t)},jsts.noding.IntersectionAdder.prototype._hasIntersection=!1,jsts.noding.IntersectionAdder.prototype.hasProper=!1,jsts.noding.IntersectionAdder.prototype.hasProperInterior=!1,jsts.noding.IntersectionAdder.prototype.hasInterior=!1,jsts.noding.IntersectionAdder.prototype.properIntersectionPoint=null,jsts.noding.IntersectionAdder.prototype.li=null,jsts.noding.IntersectionAdder.prototype.isSelfIntersection=null,jsts.noding.IntersectionAdder.prototype.numIntersections=0,jsts.noding.IntersectionAdder.prototype.numInteriorIntersections=0,jsts.noding.IntersectionAdder.prototype.numProperIntersections=0,jsts.noding.IntersectionAdder.prototype.numTests=0,jsts.noding.IntersectionAdder.prototype.getLineIntersector=function(){return this.li},jsts.noding.IntersectionAdder.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint},jsts.noding.IntersectionAdder.prototype.hasIntersection=function(){return this._hasIntersection},jsts.noding.IntersectionAdder.prototype.hasProperIntersection=function(){return this.hasProper},jsts.noding.IntersectionAdder.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior},jsts.noding.IntersectionAdder.prototype.hasInteriorIntersection=function(){return this.hasInterior},jsts.noding.IntersectionAdder.prototype.isTrivialIntersection=function(e,t,n,o){if(e==n&&1==this.li.getIntersectionNum()){if(jsts.noding.IntersectionAdder.isAdjacentSegments(t,o))return!0;if(e.isClosed()){var i=e.size()-1;if(0===t&&o===i||0===o&&t===i)return!0}}return!1},jsts.noding.IntersectionAdder.prototype.processIntersections=function(e,t,n,o){if(e!==n||t!==o){this.numTests++;var i=e.getCoordinates()[t],r=e.getCoordinates()[t+1],s=n.getCoordinates()[o],a=n.getCoordinates()[o+1];this.li.computeIntersection(i,r,s,a),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(e,t,n,o)||(this._hasIntersection=!0,e.addIntersections(this.li,t,0),n.addIntersections(this.li,o,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))}},jsts.noding.IntersectionAdder.prototype.isDone=function(){return!1},jsts.operation.union.CascadedPolygonUnion=function(e){this.inputPolys=e},jsts.operation.union.CascadedPolygonUnion.union=function(e){var t=new jsts.operation.union.CascadedPolygonUnion(e);return t.union()},jsts.operation.union.CascadedPolygonUnion.prototype.inputPolys,jsts.operation.union.CascadedPolygonUnion.prototype.geomFactory=null,jsts.operation.union.CascadedPolygonUnion.prototype.STRTREE_NODE_CAPACITY=4,jsts.operation.union.CascadedPolygonUnion.prototype.union=function(){if(0===this.inputPolys.length)return null;this.geomFactory=this.inputPolys[0].getFactory();for(var e=new jsts.index.strtree.STRtree(this.STRTREE_NODE_CAPACITY),t=0,n=this.inputPolys.length;t<n;t++){var o=this.inputPolys[t];e.insert(o.getEnvelopeInternal(),o)}var i=e.itemsTree(),r=this.unionTree(i);return r},jsts.operation.union.CascadedPolygonUnion.prototype.unionTree=function(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n},jsts.operation.union.CascadedPolygonUnion.prototype.binaryUnion=function(e,t,n){if(t=t||0,n=n||e.length,n-t<=1){var o=this.getGeometry(e,t);return this.unionSafe(o,null)}if(n-t===2)return this.unionSafe(this.getGeometry(e,t),this.getGeometry(e,t+1));var i=parseInt((n+t)/2),o=this.binaryUnion(e,t,i),r=this.binaryUnion(e,i,n);return this.unionSafe(o,r)},jsts.operation.union.CascadedPolygonUnion.prototype.getGeometry=function(e,t){return t>=e.length?null:e[t]},jsts.operation.union.CascadedPolygonUnion.prototype.reduceToGeometries=function(e){for(var t=[],n=0,o=e.length;n<o;n++){var i=e[n],r=null;i instanceof Array?r=this.unionTree(i):i instanceof jsts.geom.Geometry&&(r=i),t.push(r)}return t},jsts.operation.union.CascadedPolygonUnion.prototype.unionSafe=function(e,t){return null===e&&null===t?null:null===e?t.clone():null===t?e.clone():this.unionOptimized(e,t)},jsts.operation.union.CascadedPolygonUnion.prototype.unionOptimized=function(e,t){var n=e.getEnvelopeInternal(),o=t.getEnvelopeInternal();if(!n.intersects(o)){var i=jsts.geom.util.GeometryCombiner.combine(e,t);return i}if(e.getNumGeometries<=1&&t.getNumGeometries<=1)return this.unionActual(e,t);var r=n.intersection(o);return this.unionUsingEnvelopeIntersection(e,t,r)},jsts.operation.union.CascadedPolygonUnion.prototype.unionUsingEnvelopeIntersection=function(e,t,n){var o=new javascript.util.ArrayList,i=this.extractByEnvelope(n,e,o),r=this.extractByEnvelope(n,t,o),s=this.unionActual(i,r);o.add(s);var a=jsts.geom.util.GeometryCombiner.combine(o);return a},jsts.operation.union.CascadedPolygonUnion.prototype.extractByEnvelope=function(e,t,n){for(var o=new javascript.util.ArrayList,i=0;i<t.getNumGeometries();i++){var r=t.getGeometryN(i);r.getEnvelopeInternal().intersects(e)?o.add(r):n.add(r)}return this.geomFactory.buildGeometry(o)},jsts.operation.union.CascadedPolygonUnion.prototype.unionActual=function(e,t){return e.union(t)},function(){jsts.geom.MultiPoint=function(e,t){this.geometries=e||[],this.factory=t},jsts.geom.MultiPoint.prototype=new jsts.geom.GeometryCollection,jsts.geom.MultiPoint.constructor=jsts.geom.MultiPoint,jsts.geom.MultiPoint.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},jsts.geom.MultiPoint.prototype.getGeometryN=function(e){return this.geometries[e]},jsts.geom.MultiPoint.prototype.equalsExact=function(e,t){return!!this.isEquivalentClass(e)&&jsts.geom.GeometryCollection.prototype.equalsExact.call(this,e,t)},jsts.geom.MultiPoint.prototype.CLASS_NAME="jsts.geom.MultiPoint"}(),jsts.operation.buffer.OffsetCurveBuilder=function(e,t){this.precisionModel=e,this.bufParams=t},jsts.operation.buffer.OffsetCurveBuilder.prototype.distance=0,jsts.operation.buffer.OffsetCurveBuilder.prototype.precisionModel=null,jsts.operation.buffer.OffsetCurveBuilder.prototype.bufParams=null,jsts.operation.buffer.OffsetCurveBuilder.prototype.getBufferParameters=function(){return this.bufParams},jsts.operation.buffer.OffsetCurveBuilder.prototype.getLineCurve=function(e,t){if(this.distance=t,this.distance<0&&!this.bufParams.isSingleSided())return null;if(0==this.distance)return null;var n=Math.abs(this.distance),o=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],o);else if(this.bufParams.isSingleSided()){var i=t<0;this.computeSingleSidedBufferCurve(e,i,o)}else this.computeLineBufferCurve(e,o);var r=o.getCoordinates();return r},jsts.operation.buffer.OffsetCurveBuilder.prototype.getRingCurve=function(e,t,n){if(this.distance=n,e.length<=2)return this.getLineCurve(e,n);if(0==this.distance)return jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates(e);var o=this.getSegGen(this.distance);return this.computeRingBufferCurve(e,t,o),o.getCoordinates()},jsts.operation.buffer.OffsetCurveBuilder.prototype.getOffsetCurve=function(e,t){if(this.distance=t,0===this.distance)return null;var n=this.distance<0,o=Math.abs(this.distance),i=this.getSegGen(o);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var r=i.getCoordinates();return n&&r.reverse(),r},jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t},jsts.operation.buffer.OffsetCurveBuilder.prototype.getSegGen=function(e){return new jsts.operation.buffer.OffsetSegmentGenerator(this.precisionModel,this.bufParams,e)},jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR=100,jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance=function(e){return e/jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR},jsts.operation.buffer.OffsetCurveBuilder.prototype.computePointCurve=function(e,t){switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:t.createCircle(e);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:t.createSquare(e)}},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeLineBufferCurve=function(e,t){var n=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance),o=jsts.operation.buffer.BufferInputLineSimplifier.simplify(e,n),i=o.length-1;t.initSideSegments(o[0],o[1],jsts.geomgraph.Position.LEFT);for(var r=2;r<=i;r++)t.addNextSegment(o[r],!0);t.addLastSegment(),t.addLineEndCap(o[i-1],o[i]);var s=jsts.operation.buffer.BufferInputLineSimplifier.simplify(e,-n),a=s.length-1;t.initSideSegments(s[a],s[a-1],jsts.geomgraph.Position.LEFT);for(var r=a-2;r>=0;r--)t.addNextSegment(s[r],!0);t.addLastSegment(),t.addLineEndCap(s[1],s[0]),t.closeRing()},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeSingleSidedBufferCurve=function(e,t,n){var o=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(t){n.addSegments(e,!0);var i=jsts.operation.buffer.BufferInputLineSimplifier.simplify(e,-o),r=i.length-1;n.initSideSegments(i[r],i[r-1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var s=r-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(e,!1);var a=jsts.operation.buffer.BufferInputLineSimplifier.simplify(e,o),l=a.length-1;n.initSideSegments(a[0],a[1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var s=2;s<=l;s++)n.addNextSegment(a[s],!0)}n.addLastSegment(),n.closeRing()},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeOffsetCurve=function(e,t,n){var o=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(t){var i=jsts.operation.buffer.BufferInputLineSimplifier.simplify(e,-o),r=i.length-1;n.initSideSegments(i[r],i[r-1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var s=r-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=jsts.operation.buffer.BufferInputLineSimplifier.simplify(e,o),l=a.length-1;n.initSideSegments(a[0],a[1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var s=2;s<=l;s++)n.addNextSegment(a[s],!0)}n.addLastSegment()},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeRingBufferCurve=function(e,t,n){var o=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);t===jsts.geomgraph.Position.RIGHT&&(o=-o);var i=jsts.operation.buffer.BufferInputLineSimplifier.simplify(e,o),r=i.length-1;n.initSideSegments(i[r-1],i[0],t);for(var s=1;s<=r;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},function(){var e=function(e,t,n){this.hotPixel=e,this.parentEdge=t,this.vertexIndex=n};e.prototype=new jsts.index.chain.MonotoneChainSelectAction,e.constructor=e,e.prototype.hotPixel=null,e.prototype.parentEdge=null,e.prototype.vertexIndex=null,e.prototype._isNodeAdded=!1,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(e,t){var n=e.getContext();null!==this.parentEdge&&n===this.parentEdge&&t===this.vertexIndex||(this._isNodeAdded=this.hotPixel.addSnappedNode(n,t))},jsts.noding.snapround.MCIndexPointSnapper=function(e){this.index=e},jsts.noding.snapround.MCIndexPointSnapper.prototype.index=null,jsts.noding.snapround.MCIndexPointSnapper.prototype.snap=function(t,n,o){if(1===arguments.length)return void this.snap2.apply(this,arguments);var i=t.getSafeEnvelope(),r=new e(t,n,o);return this.index.query(i,{visitItem:function(e){e.select(i,r)}}),r.isNodeAdded()},jsts.noding.snapround.MCIndexPointSnapper.prototype.snap2=function(e){return this.snap(e,null,-1)}}(),function(){var e=function(){this.items=new javascript.util.ArrayList,this.subnode=[null,null]};e.getSubnodeIndex=function(e,t){var n=-1;return e.min>=t&&(n=1),e.max<=t&&(n=0),n},e.prototype.getItems=function(){return this.items},e.prototype.add=function(e){this.items.add(e)},e.prototype.addAllItems=function(e){e.addAll(this.items);var t=0,n=2;for(t;t<n;t++)null!==this.subnode[t]&&this.subnode[t].addAllItems(e);return e},e.prototype.addAllItemsFromOverlapping=function(e,t){(null===e||this.isSearchMatch(e))&&(t.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(e,t),null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(e,t))},e.prototype.remove=function(e,t){if(!this.isSearchMatch(e))return!1;var n=!1,o=0,i=2;for(o;o<i;o++)if(null!==this.subnode[o]&&(n=this.subnode[o].remove(e,t))){this.subnode[o].isPrunable()&&(this.subnode[o]=null);break}return n?n:n=this.items.remove(t)},e.prototype.isPrunable=function(){return!(this.hasChildren()||this.hasItems())},e.prototype.hasChildren=function(){var e=0,t=2;for(e;e<t;e++)if(null!==this.subnode[e])return!0;return!1},e.prototype.hasItems=function(){return!this.items.isEmpty()},e.prototype.depth=function(){var e,t=0,n=0,o=2;for(n;n<o;n++)null!==this.subnode[n]&&(e=this.subnode[n].depth(),e>t&&(t=e));return t+1},e.prototype.size=function(){var e=0,t=0,n=2;for(t;t<n;t++)null!==this.subnode[t]&&(e+=this.subnode[t].size());return e+this.items.size()},e.prototype.nodeSize=function(){var e=0,t=0,n=2;for(t;t<n;t++)null!==this.subnode[t]&&(e+=this.subnode[t].nodeSize());return e+1},jsts.index.bintree.NodeBase=e}(),function(){var e=jsts.index.bintree.NodeBase,t=jsts.index.bintree.Key,n=jsts.index.bintree.Interval,o=function(e,t){this.items=new javascript.util.ArrayList,this.subnode=[null,null],this.interval=e,this.level=t,this.centre=(e.getMin()+e.getMax())/2};o.prototype=new e,o.constructor=o,o.createNode=function(e){var n,i;return n=new t(e),i=new o(n.getInterval(),n.getLevel())},o.createExpanded=function(e,t){var i,r;return i=new n(t),null!==e&&i.expandToInclude(e.interval),r=o.createNode(i),null!==e&&r.insert(e),r},o.prototype.getInterval=function(){return this.interval},o.prototype.isSearchMatch=function(e){return e.overlaps(this.interval)},o.prototype.getNode=function(t){var n,o=e.getSubnodeIndex(t,this.centre);return o!=-1?(n=this.getSubnode(o),n.getNode(t)):this},o.prototype.find=function(t){var n,o=e.getSubnodeIndex(t,this.centre);return o===-1?this:null!==this.subnode[o]?(n=this.subnode[o],n.find(t)):this},o.prototype.insert=function(t){var n,o=e.getSubnodeIndex(t.interval,this.centre);t.level===this.level-1?this.subnode[o]=t:(n=this.createSubnode(o),n.insert(t),this.subnode[o]=n)},o.prototype.getSubnode=function(e){return null===this.subnode[e]&&(this.subnode[e]=this.createSubnode(e)),this.subnode[e]},o.prototype.createSubnode=function(e){var t,i,r,s;switch(t=0,i=0,e){case 0:t=this.interval.getMin(),i=this.centre;break;case 1:t=this.centre,i=this.interval.getMax()}return r=new n(t,i),s=new o(r,this.level-1)},jsts.index.bintree.Node=o}(),function(){var e=jsts.index.bintree.Node,t=jsts.index.bintree.NodeBase,n=function(){this.subnode=[null,null],this.items=new javascript.util.ArrayList};n.prototype=new jsts.index.bintree.NodeBase,n.constructor=n,n.origin=0,n.prototype.insert=function(o,i){var r,s,a=t.getSubnodeIndex(o,n.origin);return a===-1?void this.add(i):(r=this.subnode[a],null!==r&&r.getInterval().contains(o)||(s=e.createExpanded(r,o),this.subnode[a]=s),void this.insertContained(this.subnode[a],o,i))},n.prototype.insertContained=function(e,t,n){var o,i;o=jsts.index.IntervalSize.isZeroWidth(t.getMin(),t.getMax()),i=o?e.find(t):e.getNode(t),i.add(n)},n.prototype.isSearchMatch=function(e){return!0},jsts.index.bintree.Root=n}(),jsts.noding.snapround.MCIndexSnapRounder=function(e){this.pm=e,this.li=new jsts.algorithm.RobustLineIntersector,this.li.setPrecisionModel(e),this.scaleFactor=e.getScale()},jsts.noding.snapround.MCIndexSnapRounder.prototype=new jsts.noding.Noder,jsts.noding.snapround.MCIndexSnapRounder.constructor=jsts.noding.snapround.MCIndexSnapRounder,jsts.noding.snapround.MCIndexSnapRounder.prototype.pm=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.li=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.scaleFactor=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.noder=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.pointSnapper=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.nodedSegStrings=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.getNodedSubstrings=function(){return jsts.noding.NodedSegmentString.getNodedSubstrings(this.nodedSegStrings)},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeNodes=function(e){this.nodedSegStrings=e,this.noder=new jsts.noding.MCIndexNoder,this.pointSnapper=new jsts.noding.snapround.MCIndexPointSnapper(this.noder.getIndex()),this.snapRound(e,this.li)},jsts.noding.snapround.MCIndexSnapRounder.prototype.snapRound=function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)},jsts.noding.snapround.MCIndexSnapRounder.prototype.findInteriorIntersections=function(e,t){var n=new jsts.noding.IntersectionFinderAdder(t);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(e),n.getInteriorIntersections()},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeIntersectionSnaps=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),o=new jsts.noding.snapround.HotPixel(n,this.scaleFactor,this.li);this.pointSnapper.snap(o)}},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps=function(e){if(e instanceof jsts.noding.NodedSegmentString)return void this.computeVertexSnaps2.apply(this,arguments);for(var t=e.iterator();t.hasNext();){var n=t.next();this.computeVertexSnaps(n)}},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps2=function(e){for(var t=e.getCoordinates(),n=0;n<t.length-1;n++){var o=new jsts.noding.snapround.HotPixel(t[n],this.scaleFactor,this.li),i=this.pointSnapper.snap(o,e,n);i&&e.addIntersection(t[n],n)}},jsts.geomgraph.Quadrant=function(){},jsts.geomgraph.Quadrant.NE=0,jsts.geomgraph.Quadrant.NW=1,jsts.geomgraph.Quadrant.SW=2,jsts.geomgraph.Quadrant.SE=3,jsts.geomgraph.Quadrant.quadrant=function(e,t){if(e instanceof jsts.geom.Coordinate)return jsts.geomgraph.Quadrant.quadrant2.apply(this,arguments);if(0===e&&0===t)throw new jsts.error.IllegalArgumentError("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?jsts.geomgraph.Quadrant.NE:jsts.geomgraph.Quadrant.SE:t>=0?jsts.geomgraph.Quadrant.NW:jsts.geomgraph.Quadrant.SW},jsts.geomgraph.Quadrant.quadrant2=function(e,t){if(t.x===e.x&&t.y===e.y)throw new jsts.error.IllegalArgumentError("Cannot compute the quadrant for two identical points "+e);return t.x>=e.x?t.y>=e.y?jsts.geomgraph.Quadrant.NE:jsts.geomgraph.Quadrant.SE:t.y>=e.y?jsts.geomgraph.Quadrant.NW:jsts.geomgraph.Quadrant.SW},jsts.geomgraph.Quadrant.isOpposite=function(e,t){if(e===t)return!1;var n=(e-t+4)%4;return 2===n},jsts.geomgraph.Quadrant.commonHalfPlane=function(e,t){if(e===t)return e;var n=(e-t+4)%4;if(2===n)return-1;var o=e<t?e:t,i=e>t?e:t;return 0===o&&3===i?3:o},jsts.geomgraph.Quadrant.isInHalfPlane=function(e,t){return t===jsts.geomgraph.Quadrant.SE?e===jsts.geomgraph.Quadrant.SE||e===jsts.geomgraph.Quadrant.SW:e===t||e===t+1},jsts.geomgraph.Quadrant.isNorthern=function(e){return e===jsts.geomgraph.Quadrant.NE||e===jsts.geomgraph.Quadrant.NW},jsts.operation.valid.ConsistentAreaTester=function(e){this.geomGraph=e,this.li=new jsts.algorithm.RobustLineIntersector,this.nodeGraph=new jsts.operation.relate.RelateNodeGraph,this.invalidPoint=null},jsts.operation.valid.ConsistentAreaTester.prototype.getInvalidPoint=function(){return this.invalidPoint},jsts.operation.valid.ConsistentAreaTester.prototype.isNodeConsistentArea=function(){var e=this.geomGraph.computeSelfNodes(this.li,!0);return e.hasProperIntersection()?(this.invalidPoint=e.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},jsts.operation.valid.ConsistentAreaTester.prototype.isNodeEdgeAreaLabelsConsistent=function(){for(var e=this.nodeGraph.getNodeIterator();e.hasNext();){var t=e.next();if(!t.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=t.getCoordinate().clone(),!1}return!0},jsts.operation.valid.ConsistentAreaTester.prototype.hasDuplicateRings=function(){for(var e=this.nodeGraph.getNodeIterator();e.hasNext();)for(var t=e.next(),n=t.getEdges().iterator();n.hasNext();){var o=n.next();if(o.getEdgeEnds().length>1)return invalidPoint=o.getEdge().getCoordinate(0),!0}return!1},jsts.precision.CommonBits=function(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp},jsts.precision.CommonBits.signExpBits=function(e){return e>>52},jsts.precision.CommonBits.numCommonMostSigMantissaBits=function(e,t){for(var n=0,o=52;o>=0;o--){if(jsts.precision.CommonBits.getBit(e,o)!=jsts.precision.CommonBits.getBit(t,o))return n;n++}return 52},jsts.precision.CommonBits.zeroLowerBits=function(e,t){var n=(1<<t)-1,o=~n,i=e&o;return i},jsts.precision.CommonBits.getBit=function(e,t){var n=1<<t;return 0!==(e&n)?1:0},jsts.precision.CommonBits.prototype.add=function(e){if(this.isFirst)return this.commonBits=e,this.commonSignExp=jsts.precision.CommonBits.signExpBits(this.commonBits),void(this.isFirst=!1);var t=jsts.precision.CommonBits.signExpBits(e);return t!==this.commonSignExp?void(this.commonBits=0):(this.commonMantissaBitsCount=jsts.precision.CommonBits.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=jsts.precision.CommonBits.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},jsts.precision.CommonBits.prototype.getCommon=function(){return this.commonBits},jsts.precision.CommonBits.prototype.toString=function(e){var t=e,n=(e>>>0).toString(2),o="0000000000000000000000000000000000000000000000000000000000000000"+n,i=o.substring(o.length-64),r=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+t+" ]";return r},jsts.precision.CommonBitsRemover=function(){this.commonCoord,this.ccFilter=new jsts.precision.CommonCoordinateFilter},jsts.precision.CommonBitsRemover.prototype.add=function(e){e.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},jsts.precision.CommonBitsRemover.prototype.getCommonCoordinate=function(){return this.commonCoord},jsts.precision.CommonBitsRemover.prototype.removeCommonBits=function(e){if(0===this.commonCoord.x&&0===this.commonCoord.y)return e;var t=new jsts.geom.Coordinate(this.commonCoord);t.x=-t.x,t.y=-t.y;var n=new jsts.precision.Translater(t);return e.apply(n),e},jsts.precision.CommonBitsRemover.prototype.addCommonBits=function(e){var t=new jsts.precision.Translater(this.commonCoord);e.apply(t)},jsts.precision.CommonCoordinateFilter=function(){this.commonBitsX=new jsts.precision.CommonBits,this.commonBitsY=new jsts.precision.CommonBits},jsts.precision.CommonCoordinateFilter.prototype=new jsts.geom.CoordinateFilter,jsts.precision.CommonCoordinateFilter.constructor=jsts.precision.CommonCoordinateFilter,jsts.precision.CommonCoordinateFilter.prototype.filter=function(e){this.commonBitsX.add(e.x),this.commonBitsY.add(e.y)},jsts.precision.CommonCoordinateFilter.prototype.getCommonCoordinate=function(){return new jsts.geom.Coordinate(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},jsts.precision.Translater=function(e){this.trans=e},jsts.precision.Translater.prototype=new jsts.geom.CoordinateFilter,jsts.precision.Translater.constructor=jsts.precision.Translater,jsts.precision.Translater.prototype.filter=function(e){e.x+=this.trans.x,e.y+=this.trans.y},jsts.precision.CommonBitsOp=function(e){this.returnToOriginalPrecision,this.cbr,this.returnToOriginalPrecision=void 0===e||e},jsts.precision.CommonBitsOp.prototype.intersection=function(e,t){var n=this.removeCommonBits(e,t);return this.computeResultPrecision(n[0].intersection(n[1]))},jsts.precision.CommonBitsOp.prototype.union=function(e,t){var n=this.removeCommonBits(e,t);return this.computeResultPrecision(n[0].union(n[1]))},jsts.precision.CommonBitsOp.prototype.difference=function(e,t){var n=this.removeCommonBits(e,t);return this.computeResultPrecision(n[0].difference(n[1]))},jsts.precision.CommonBitsOp.prototype.symDifference=function(e,t){var n=this.removeCommonBits(e,t);return this.computeResultPrecision(n[0].symDifference(n[1]))},jsts.precision.CommonBitsOp.prototype.buffer=function(e,t){var n=this.removeCommonBits(e);return this.computeResultPrecision(n.buffer(t))};jsts.precision.CommonBitsOp.prototype.computeResultPrecision=function(e){return this.returnToOriginalPrecision&&this.cbr.addCommonBits(e),e};jsts.precision.CommonBitsOp.prototype.removeCommonBits=function(){if(1===arguments.length)return this.removeCommonBits1(arguments[0]);if(2===arguments.length)return this.removeCommonBits2(arguments[0],arguments[1]);throw"Wrong argument count!"},jsts.precision.CommonBitsOp.prototype.removeCommonBits1=function(e){this.cbr=new jsts.precision.CommonBitsRemover,this.cbr.add(e);var t=this.cbr.removeCommonBits(e.clone());return t},jsts.precision.CommonBitsOp.prototype.removeCommonBits2=function(e,t){this.cbr=new jsts.precision.CommonBitsRemover,this.cbr.add(e),this.cbr.add(t);var n=[this.cbr.removeCommonBits(e.clone()),this.cbr.removeCommonBits(t.clone())];return n},jsts.precision.EnhancedPrecisionOp=function(){},jsts.precision.EnhancedPrecisionOp.intersection=function(e,t){var n;try{var o=e.intersection(t);return o}catch(e){n=e}try{var i=new jsts.precision.CommonBitsOp((!0)),r=i.intersection(e,t);if(!r.isValid())throw n;return r}catch(e){throw n}},jsts.precision.EnhancedPrecisionOp.union=function(e,t){var n;try{var o=e.union(t);return o}catch(e){n=e}try{var i=new jsts.precision.CommonBitsOp((!0)),r=i.union(e,t);if(!r.isValid())throw n;return r}catch(e){throw n}},jsts.precision.EnhancedPrecisionOp.difference=function(e,t){var n;try{var o=e.difference(t);return o}catch(e){n=e}try{var i=new jsts.precision.CommonBitsOp((!0)),r=i.difference(e,t);if(!r.isValid())throw n;return r}catch(e){throw n}},jsts.precision.EnhancedPrecisionOp.symDifference=function(e,t){var n;try{var o=e.symDifference(t);return o}catch(e){n=e}try{var i=new jsts.precision.CommonBitsOp((!0)),r=i.symDifference(e,t);if(!r.isValid())throw n;return r}catch(e){throw n}},jsts.precision.EnhancedPrecisionOp.buffer=function(e,t){var n;try{var o=e.buffer(t);return o}catch(e){n=e}try{var i=new jsts.precision.CommonBitsOp((!0)),r=i.buffer(e,t);if(!r.isValid())throw n;return r}catch(e){throw n}},jsts.operation.relate.RelateNode=function(e,t){jsts.geomgraph.Node.apply(this,arguments)},jsts.operation.relate.RelateNode.prototype=new jsts.geomgraph.Node,jsts.operation.relate.RelateNode.prototype.computeIM=function(e){e.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},jsts.operation.relate.RelateNode.prototype.updateIMFromEdges=function(e){this.edges.updateIM(e)},function(){var e=jsts.geom.Location,t=jsts.geomgraph.Position,n=jsts.geomgraph.EdgeEnd;jsts.geomgraph.DirectedEdge=function(e,t){if(n.call(this,e),this.depth=[0,-999,-999],this._isForward=t,t)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var o=e.getNumPoints()-1;this.init(e.getCoordinate(o),e.getCoordinate(o-1))}this.computeDirectedLabel()},jsts.geomgraph.DirectedEdge.prototype=new n,jsts.geomgraph.DirectedEdge.constructor=jsts.geomgraph.DirectedEdge,jsts.geomgraph.DirectedEdge.depthFactor=function(t,n){return t===e.EXTERIOR&&n===e.INTERIOR?1:t===e.INTERIOR&&n===e.EXTERIOR?-1:0;
},jsts.geomgraph.DirectedEdge.prototype._isForward=null,jsts.geomgraph.DirectedEdge.prototype._isInResult=!1,jsts.geomgraph.DirectedEdge.prototype._isVisited=!1,jsts.geomgraph.DirectedEdge.prototype.sym=null,jsts.geomgraph.DirectedEdge.prototype.next=null,jsts.geomgraph.DirectedEdge.prototype.nextMin=null,jsts.geomgraph.DirectedEdge.prototype.edgeRing=null,jsts.geomgraph.DirectedEdge.prototype.minEdgeRing=null,jsts.geomgraph.DirectedEdge.prototype.depth=null,jsts.geomgraph.DirectedEdge.prototype.getEdge=function(){return this.edge},jsts.geomgraph.DirectedEdge.prototype.setInResult=function(e){this._isInResult=e},jsts.geomgraph.DirectedEdge.prototype.isInResult=function(){return this._isInResult},jsts.geomgraph.DirectedEdge.prototype.isVisited=function(){return this._isVisited},jsts.geomgraph.DirectedEdge.prototype.setVisited=function(e){this._isVisited=e},jsts.geomgraph.DirectedEdge.prototype.setEdgeRing=function(e){this.edgeRing=e},jsts.geomgraph.DirectedEdge.prototype.getEdgeRing=function(){return this.edgeRing},jsts.geomgraph.DirectedEdge.prototype.setMinEdgeRing=function(e){this.minEdgeRing=e},jsts.geomgraph.DirectedEdge.prototype.getMinEdgeRing=function(){return this.minEdgeRing},jsts.geomgraph.DirectedEdge.prototype.getDepth=function(e){return this.depth[e]},jsts.geomgraph.DirectedEdge.prototype.setDepth=function(e,t){if(this.depth[e]!==-999&&this.depth[e]!==t)throw new jsts.error.TopologyError("assigned depths do not match",this.getCoordinate());this.depth[e]=t},jsts.geomgraph.DirectedEdge.prototype.getDepthDelta=function(){var e=this.edge.getDepthDelta();return this._isForward||(e=-e),e},jsts.geomgraph.DirectedEdge.prototype.setVisitedEdge=function(e){this.setVisited(e),this.sym.setVisited(e)},jsts.geomgraph.DirectedEdge.prototype.getSym=function(){return this.sym},jsts.geomgraph.DirectedEdge.prototype.isForward=function(){return this._isForward},jsts.geomgraph.DirectedEdge.prototype.setSym=function(e){this.sym=e},jsts.geomgraph.DirectedEdge.prototype.getNext=function(){return this.next},jsts.geomgraph.DirectedEdge.prototype.setNext=function(e){this.next=e},jsts.geomgraph.DirectedEdge.prototype.getNextMin=function(){return this.nextMin},jsts.geomgraph.DirectedEdge.prototype.setNextMin=function(e){this.nextMin=e},jsts.geomgraph.DirectedEdge.prototype.isLineEdge=function(){var t=this.label.isLine(0)||this.label.isLine(1),n=!this.label.isArea(0)||this.label.allPositionsEqual(0,e.EXTERIOR),o=!this.label.isArea(1)||this.label.allPositionsEqual(1,e.EXTERIOR);return t&&n&&o},jsts.geomgraph.DirectedEdge.prototype.isInteriorAreaEdge=function(){for(var n=!0,o=0;o<2;o++)this.label.isArea(o)&&this.label.getLocation(o,t.LEFT)===e.INTERIOR&&this.label.getLocation(o,t.RIGHT)===e.INTERIOR||(n=!1);return n},jsts.geomgraph.DirectedEdge.prototype.computeDirectedLabel=function(){this.label=new jsts.geomgraph.Label(this.edge.getLabel()),this._isForward||this.label.flip()},jsts.geomgraph.DirectedEdge.prototype.setEdgeDepths=function(e,n){var o=this.getEdge().getDepthDelta();this._isForward||(o=-o);var i=1;e===t.LEFT&&(i=-1);var r=t.opposite(e),s=o*i,a=n+s;this.setDepth(e,n),this.setDepth(r,a)}}(),jsts.operation.distance.DistanceOp=function(e,t,n){this.ptLocator=new jsts.algorithm.PointLocator,this.geom=[],this.geom[0]=e,this.geom[1]=t,this.terminateDistance=n},jsts.operation.distance.DistanceOp.prototype.geom=null,jsts.operation.distance.DistanceOp.prototype.terminateDistance=0,jsts.operation.distance.DistanceOp.prototype.ptLocator=null,jsts.operation.distance.DistanceOp.prototype.minDistanceLocation=null,jsts.operation.distance.DistanceOp.prototype.minDistance=Number.MAX_VALUE,jsts.operation.distance.DistanceOp.distance=function(e,t){var n=new jsts.operation.distance.DistanceOp(e,t,0);return n.distance()},jsts.operation.distance.DistanceOp.isWithinDistance=function(e,t,n){var o=new jsts.operation.distance.DistanceOp(e,t,n);return o.distance()<=n},jsts.operation.distance.DistanceOp.nearestPoints=function(e,t){var n=new jsts.operation.distance.DistanceOp(e,t,0);return n.nearestPoints()},jsts.operation.distance.DistanceOp.prototype.distance=function(){if(null===this.geom[0]||null===this.geom[1])throw new jsts.error.IllegalArgumentError("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},jsts.operation.distance.DistanceOp.prototype.nearestPoints=function(){this.computeMinDistance();var e=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return e},jsts.operation.distance.DistanceOp.prototype.nearestLocations=function(){return this.computeMinDistance(),this.minDistanceLocation},jsts.operation.distance.DistanceOp.prototype.updateMinDistance=function(e,t){null!==e[0]&&(t?(this.minDistanceLocation[0]=e[1],this.minDistanceLocation[1]=e[0]):(this.minDistanceLocation[0]=e[0],this.minDistanceLocation[1]=e[1]))},jsts.operation.distance.DistanceOp.prototype.computeMinDistance=function(){return arguments.length>0?void this.computeMinDistance2.apply(this,arguments):void(null===this.minDistanceLocation&&(this.minDistanceLocation=[],this.computeContainmentDistance(),this.minDistance<=this.terminateDistance||this.computeFacetDistance()))},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance=function(){if(2===arguments.length)return void this.computeContainmentDistance2.apply(this,arguments);if(3===arguments.length&&!arguments[0]instanceof jsts.operation.distance.GeometryLocation)return void this.computeContainmentDistance3.apply(this,arguments);if(3===arguments.length)return void this.computeContainmentDistance4.apply(this,arguments);var e=[];this.computeContainmentDistance2(0,e),this.minDistance<=this.terminateDistance||this.computeContainmentDistance2(1,e)},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance2=function(e,t){var n=1-e,o=jsts.geom.util.PolygonExtracter.getPolygons(this.geom[e]);if(o.length>0){var i=jsts.operation.distance.ConnectedElementLocationFilter.getLocations(this.geom[n]);if(this.computeContainmentDistance3(i,o,t),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[n]=t[0],void(this.minDistanceLocation[e]=t[1])}},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance3=function(e,t,n){for(var o=0;o<e.length;o++)for(var i=e[o],r=0;r<t.length;r++)if(this.computeContainmentDistance4(i,t[r],n),this.minDistance<=this.terminateDistance)return},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance4=function(e,t,n){var o=e.getCoordinate();if(jsts.geom.Location.EXTERIOR!==this.ptLocator.locate(o,t))return this.minDistance=0,n[0]=e,void(n[1]=new jsts.operation.distance.GeometryLocation(t,o))},jsts.operation.distance.DistanceOp.prototype.computeFacetDistance=function(){var e=[],t=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[0]),n=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[1]),o=jsts.geom.util.PointExtracter.getPoints(this.geom[0]),i=jsts.geom.util.PointExtracter.getPoints(this.geom[1]);this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this.minDistance<=this.terminateDistance||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1),this.minDistance<=this.terminateDistance||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,o,e),this.updateMinDistance(e,!0),this.minDistance<=this.terminateDistance||(e[0]=null,e[1]=null,this.computeMinDistancePoints(o,i,e),this.updateMinDistance(e,!1))))},jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLines=function(e,t,n){for(var o=0;o<e.length;o++)for(var i=e[o],r=0;r<t.length;r++){var s=t[r];if(this.computeMinDistance(i,s,n),this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistancePoints=function(e,t,n){for(var o=0;o<e.length;o++)for(var i=e[o],r=0;r<t.length;r++){var s=t[r],a=i.getCoordinate().distance(s.getCoordinate());if(a<this.minDistance&&(this.minDistance=a,n[0]=new jsts.operation.distance.GeometryLocation(i,0,i.getCoordinate()),n[1]=new jsts.operation.distance.GeometryLocation(s,0,s.getCoordinate())),this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLinesPoints=function(e,t,n){for(var o=0;o<e.length;o++)for(var i=e[o],r=0;r<t.length;r++){var s=t[r];if(this.computeMinDistance(i,s,n),this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistance2=function(e,t,n){if(t instanceof jsts.geom.Point)return void this.computeMinDistance3(e,t,n);if(!(e.getEnvelopeInternal().distance(t.getEnvelopeInternal())>this.minDistance))for(var o=e.getCoordinates(),i=t.getCoordinates(),r=0;r<o.length-1;r++)for(var s=0;s<i.length-1;s++){var a=jsts.algorithm.CGAlgorithms.distanceLineLine(o[r],o[r+1],i[s],i[s+1]);if(a<this.minDistance){this.minDistance=a;var l=new jsts.geom.LineSegment(o[r],o[r+1]),c=new jsts.geom.LineSegment(i[s],i[s+1]),u=l.closestPoints(c);n[0]=new jsts.operation.distance.GeometryLocation(e,r,u[0]),n[1]=new jsts.operation.distance.GeometryLocation(t,s,u[1])}if(this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistance3=function(e,t,n){if(!(e.getEnvelopeInternal().distance(t.getEnvelopeInternal())>this.minDistance))for(var o=e.getCoordinates(),i=t.getCoordinate(),r=0;r<o.length-1;r++){var s=jsts.algorithm.CGAlgorithms.distancePointLine(i,o[r],o[r+1]);if(s<this.minDistance){this.minDistance=s;var a=new jsts.geom.LineSegment(o[r],o[r+1]),l=a.closestPoint(i);n[0]=new jsts.operation.distance.GeometryLocation(e,r,l),n[1]=new jsts.operation.distance.GeometryLocation(t,0,i)}if(this.minDistance<=this.terminateDistance)return}},jsts.index.strtree.SIRtree=function(e){e=e||10,jsts.index.strtree.AbstractSTRtree.call(this,e)},jsts.index.strtree.SIRtree.prototype=new jsts.index.strtree.AbstractSTRtree,jsts.index.strtree.SIRtree.constructor=jsts.index.strtree.SIRtree,jsts.index.strtree.SIRtree.prototype.comperator={compare:function(e,t){return e.getBounds().getCentre()-t.getBounds().getCentre()}},jsts.index.strtree.SIRtree.prototype.intersectionOp={intersects:function(e,t){return e.intersects(t)}},jsts.index.strtree.SIRtree.prototype.createNode=function(e){var t=function(e){jsts.index.strtree.AbstractNode.apply(this,arguments)};return t.prototype=new jsts.index.strtree.AbstractNode,t.constructor=t,t.prototype.computeBounds=function(){for(var e,t=null,n=this.getChildBoundables(),o=0,i=n.length;o<i;o++)e=n[o],null===t?t=new jsts.index.strtree.Interval(e.getBounds()):t.expandToInclude(e.getBounds());return t},t},jsts.index.strtree.SIRtree.prototype.insert=function(e,t,n){jsts.index.strtree.AbstractSTRtree.prototype.insert(new jsts.index.strtree.Interval(Math.min(e,t),Math.max(e,t)),n)},jsts.index.strtree.SIRtree.prototype.query=function(e,t){t=t||e,jsts.index.strtree.AbstractSTRtree.prototype.query(new jsts.index.strtree.Interval(Math.min(e,t),Math.max(e,t)))},jsts.index.strtree.SIRtree.prototype.getIntersectsOp=function(){return this.intersectionOp},jsts.index.strtree.SIRtree.prototype.getComparator=function(){return this.comperator},jsts.simplify.DouglasPeuckerSimplifier=function(e){this.inputGeom=e,this.isEnsureValidTopology=!0},jsts.simplify.DouglasPeuckerSimplifier.prototype.inputGeom=null,jsts.simplify.DouglasPeuckerSimplifier.prototype.distanceTolerance=null,jsts.simplify.DouglasPeuckerSimplifier.prototype.isEnsureValidTopology=null,jsts.simplify.DouglasPeuckerSimplifier.simplify=function(e,t){var n=new jsts.simplify.DouglasPeuckerSimplifier(e);return n.setDistanceTolerance(t),n.getResultGeometry()},jsts.simplify.DouglasPeuckerSimplifier.prototype.setDistanceTolerance=function(e){if(e<0)throw"Tolerance must be non-negative";this.distanceTolerance=e},jsts.simplify.DouglasPeuckerSimplifier.prototype.setEnsureValid=function(e){this.isEnsureValidTopology=e},jsts.simplify.DouglasPeuckerSimplifier.prototype.getResultGeometry=function(){return this.inputGeom.isEmpty()?this.inputGeom.clone():new jsts.simplify.DPTransformer(this.distanceTolerance,this.isEnsureValidTopology).transform(this.inputGeom)},function(){jsts.operation.predicate.RectangleContains=function(e){this.rectEnv=e.getEnvelopeInternal()},jsts.operation.predicate.RectangleContains.contains=function(e,t){var n=new jsts.operation.predicate.RectangleContains(e);return n.contains(t)},jsts.operation.predicate.RectangleContains.prototype.rectEnv=null,jsts.operation.predicate.RectangleContains.prototype.contains=function(e){return!!this.rectEnv.contains(e.getEnvelopeInternal())&&!this.isContainedInBoundary(e)},jsts.operation.predicate.RectangleContains.prototype.isContainedInBoundary=function(e){if(e instanceof jsts.geom.Polygon)return!1;if(e instanceof jsts.geom.Point)return this.isPointContainedInBoundary(e.getCoordinate());if(e instanceof jsts.geom.LineString)return this.isLineStringContainedInBoundary(e);for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);if(!this.isContainedInBoundary(n))return!1}return!0},jsts.operation.predicate.RectangleContains.prototype.isPointContainedInBoundary=function(e){return e.x==this.rectEnv.getMinX()||e.x==this.rectEnv.getMaxX()||e.y==this.rectEnv.getMinY()||e.y==this.rectEnv.getMaxY()},jsts.operation.predicate.RectangleContains.prototype.isLineStringContainedInBoundary=function(e){for(var t=e.getCoordinateSequence(),n=0;n<t.length-1;n++){var o=t[n],i=t[n+1];if(!this.isLineSegmentContainedInBoundary(o,i))return!1}return!0},jsts.operation.predicate.RectangleContains.prototype.isLineSegmentContainedInBoundary=function(e,t){if(e.equals(t))return this.isPointContainedInBoundary(e);if(e.x==t.x){if(e.x==this.rectEnv.getMinX()||e.x==this.rectEnv.getMaxX())return!0}else if(e.y==t.y&&(e.y==this.rectEnv.getMinY()||e.y==this.rectEnv.getMaxY()))return!0;return!1}}(),function(){var e=jsts.geom.Location,t=jsts.geomgraph.Position;jsts.geomgraph.Depth=function(){this.depth=[[],[]];for(var e=0;e<2;e++)for(var t=0;t<3;t++)this.depth[e][t]=jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.NULL_VALUE=-1,jsts.geomgraph.Depth.depthAtLocation=function(t){return t===e.EXTERIOR?0:t===e.INTERIOR?1:jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.prototype.depth=null,jsts.geomgraph.Depth.prototype.getDepth=function(e,t){return this.depth[e][t]},jsts.geomgraph.Depth.prototype.setDepth=function(e,t,n){this.depth[e][t]=n},jsts.geomgraph.Depth.prototype.getLocation=function(t,n){return this.depth[t][n]<=0?e.EXTERIOR:e.INTERIOR},jsts.geomgraph.Depth.prototype.add=function(t,n,o){o===e.INTERIOR&&this.depth[t][n]++},jsts.geomgraph.Depth.prototype.isNull=function(){if(arguments.length>0)return this.isNull2.apply(this,arguments);for(var e=0;e<2;e++)for(var t=0;t<3;t++)if(this.depth[e][t]!==jsts.geomgraph.Depth.NULL_VALUE)return!1;return!0},jsts.geomgraph.Depth.prototype.isNull2=function(e){return arguments.length>1?this.isNull3.apply(this,arguments):this.depth[e][1]==jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.prototype.isNull3=function(e,t){return this.depth[e][t]==jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.prototype.add=function(t){for(var n=0;n<2;n++)for(var o=1;o<3;o++){var i=t.getLocation(n,o);i!==e.EXTERIOR&&i!==e.INTERIOR||(this.isNull(n,o)?this.depth[n][o]=jsts.geomgraph.Depth.depthAtLocation(i):this.depth[n][o]+=jsts.geomgraph.Depth.depthAtLocation(i))}},jsts.geomgraph.Depth.prototype.getDelta=function(e){return this.depth[e][t.RIGHT]-this.depth[e][t.LEFT]},jsts.geomgraph.Depth.prototype.normalize=function(){for(var e=0;e<2;e++)if(!this.isNull(e)){var t=this.depth[e][1];this.depth[e][2]<t&&(t=this.depth[e][2]),t<0&&(t=0);for(var n=1;n<3;n++){var o=0;this.depth[e][n]>t&&(o=1),this.depth[e][n]=o}}},jsts.geomgraph.Depth.prototype.toString=function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]}}(),jsts.algorithm.BoundaryNodeRule=function(){},jsts.algorithm.BoundaryNodeRule.prototype.isInBoundary=function(e){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.Mod2BoundaryNodeRule=function(){},jsts.algorithm.Mod2BoundaryNodeRule.prototype=new jsts.algorithm.BoundaryNodeRule,jsts.algorithm.Mod2BoundaryNodeRule.prototype.isInBoundary=function(e){return e%2===1},jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE=new jsts.algorithm.Mod2BoundaryNodeRule,jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE=jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE,jsts.operation.distance.GeometryLocation=function(e,t,n){this.component=e,this.segIndex=t,this.pt=n},jsts.operation.distance.GeometryLocation.INSIDE_AREA=-1,jsts.operation.distance.GeometryLocation.prototype.component=null,jsts.operation.distance.GeometryLocation.prototype.segIndex=null,jsts.operation.distance.GeometryLocation.prototype.pt=null,jsts.operation.distance.GeometryLocation.prototype.getGeometryComponent=function(){return this.component},jsts.operation.distance.GeometryLocation.prototype.getSegmentIndex=function(){return this.segIndex},jsts.operation.distance.GeometryLocation.prototype.getCoordinate=function(){return this.pt},jsts.operation.distance.GeometryLocation.prototype.isInsideArea=function(){return this.segIndex===jsts.operation.distance.GeometryLocation.INSIDE_AREA},jsts.geom.util.PointExtracter=function(e){this.pts=e},jsts.geom.util.PointExtracter.prototype=new jsts.geom.GeometryFilter,jsts.geom.util.PointExtracter.prototype.pts=null,jsts.geom.util.PointExtracter.getPoints=function(e,t){return void 0===t&&(t=[]),e instanceof jsts.geom.Point?t.push(e):(e instanceof jsts.geom.GeometryCollection||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.MultiPolygon)&&e.apply(new jsts.geom.util.PointExtracter(t)),t},jsts.geom.util.PointExtracter.prototype.filter=function(e){e instanceof jsts.geom.Point&&this.pts.push(e)},function(){var e=jsts.geom.Location;jsts.operation.relate.RelateNodeGraph=function(){this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory)},jsts.operation.relate.RelateNodeGraph.prototype.nodes=null,jsts.operation.relate.RelateNodeGraph.prototype.build=function(e){this.computeIntersectionNodes(e,0),this.copyNodesAndLabels(e,0);var t=new jsts.operation.relate.EdgeEndBuilder,n=t.computeEdgeEnds(e.getEdgeIterator());this.insertEdgeEnds(n)},jsts.operation.relate.RelateNodeGraph.prototype.computeIntersectionNodes=function(t,n){for(var o=t.getEdgeIterator();o.hasNext();)for(var i=o.next(),r=i.getLabel().getLocation(n),s=i.getEdgeIntersectionList().iterator();s.hasNext();){var a=s.next(),l=this.nodes.addNode(a.coord);r===e.BOUNDARY?l.setLabelBoundary(n):l.getLabel().isNull(n)&&l.setLabel(n,e.INTERIOR)}},jsts.operation.relate.RelateNodeGraph.prototype.copyNodesAndLabels=function(e,t){for(var n=e.getNodeIterator();n.hasNext();){var o=n.next(),i=this.nodes.addNode(o.getCoordinate());i.setLabel(t,o.getLabel().getLocation(t))}},jsts.operation.relate.RelateNodeGraph.prototype.insertEdgeEnds=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.nodes.add(n)}},jsts.operation.relate.RelateNodeGraph.prototype.getNodeIterator=function(){return this.nodes.iterator()}}(),jsts.operation.linemerge.EdgeString=function(e){this.factory=e,this.directedEdges=[],this.coordinates=null},jsts.operation.linemerge.EdgeString.prototype.add=function(e){this.directedEdges.push(e)},jsts.operation.linemerge.EdgeString.prototype.getCoordinates=function(){if(null===this.coordinates){for(var e=0,t=0,n=new jsts.geom.CoordinateList,o=0;o<this.directedEdges.length;++o){var i=this.directedEdges[o];i.getEdgeDirection()?e++:t++,n.add(i.getEdge().getLine().getCoordinates(),!1,i.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),t>e&&(this.coordinates=this.coordinates.reverse())}return this.coordinates},jsts.operation.linemerge.EdgeString.prototype.toLineString=function(){return this.factory.createLineString(this.getCoordinates())},jsts.geomgraph.index.SimpleSweepLineIntersector=function(){},jsts.geomgraph.index.SimpleSweepLineIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector,jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.events=[],jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.nOverlaps=null,jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.computeIntersections=function(e,t,n){return t instanceof javascript.util.List?void this.computeIntersections2.apply(this,arguments):(n?this.add(e,null):this.add(e),void this.computeIntersections3(t))},jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.computeIntersections2=function(e,t,n){this.add(e,e),this.add(t,t),this.computeIntersections3(n)},jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.add=function(e,t){if(e instanceof javascript.util.List)return void this.add2.apply(this,arguments);for(var n=e.getCoordinates(),o=0;o<n.length-1;o++){var i=new jsts.geomgraph.index.SweepLineSegment(e,o),r=new jsts.geomgraph.index.SweepLineEvent(i.getMinX(),i,t);this.events.push(r),this.events.push(new jsts.geomgraph.index.SweepLineEvent(i.getMaxX(),r))}},jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.add2=function(e,t){for(var n=e.iterator();n.hasNext();){var o=n.next();t?this.add(o,t):this.add(o,o)}},jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.prepareEvents=function(){this.events.sort(function(e,t){return e.compareTo(t)});for(var e=0;e<this.events.length;e++){var t=this.events[e];t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(e)}},jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.computeIntersections3=function(e){this.nOverlaps=0,this.prepareEvents();for(var t=0;t<this.events.length;t++){var n=this.events[t];n.isInsert()&&this.processOverlaps(t,n.getDeleteEventIndex(),n,e)}},jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.processOverlaps=function(e,t,n,o){for(var i=n.getObject(),r=e;r<t;r++){var s=this.events[r];if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,o),this.nOverlaps++)}}},jsts.triangulate.VoronoiDiagramBuilder=function(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null},jsts.triangulate.VoronoiDiagramBuilder.prototype.setSites=function(){var e=arguments[0];e instanceof jsts.geom.Geometry||e instanceof jsts.geom.Coordinate||e instanceof jsts.geom.Point||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.LineString||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.LinearRing||e instanceof jsts.geom.Polygon||e instanceof jsts.geom.MultiPolygon?this.setSitesByGeometry(e):this.setSitesByArray(e)},jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByGeometry=function(e){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(e)},jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByArray=function(e){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(e)},jsts.triangulate.VoronoiDiagramBuilder.prototype.setClipEnvelope=function(e){this.clipEnv=e},jsts.triangulate.VoronoiDiagramBuilder.prototype.setTolerance=function(e){this.tolerance=e},jsts.triangulate.VoronoiDiagramBuilder.prototype.create=function(){if(null===this.subdiv){var e,t,n,o;e=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords),this.diagramEnv=e,t=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight()),this.diagramEnv.expandBy(t),null!==this.clipEnv&&this.diagramEnv.expandToInclude(this.clipEnv),n=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords),this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(e,this.tolerance),o=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv),o.insertSites(n)}},jsts.triangulate.VoronoiDiagramBuilder.prototype.getSubdivision=function(){return this.create(),this.subdiv},jsts.triangulate.VoronoiDiagramBuilder.prototype.getDiagram=function(e){this.create();var t=this.subdiv.getVoronoiDiagram(e);return this.clipGeometryCollection(t,this.diagramEnv)},jsts.triangulate.VoronoiDiagramBuilder.prototype.clipGeometryCollection=function(e,t){var n,o,i,r,s,a;for(n=e.getFactory().toGeometry(t),o=[],i=0,r=e.getNumGeometries(),i;i<r;i++)s=e.getGeometryN(i),a=null,t.contains(s.getEnvelopeInternal())?a=s:t.intersects(s.getEnvelopeInternal())&&(a=n.intersection(s)),null===a||a.isEmpty()||o.push(a);return e.getFactory().createGeometryCollection(o)},jsts.operation.valid.IndexedNestedRingTester=function(e){this.graph=e,this.rings=new javascript.util.ArrayList,this.totalEnv=new jsts.geom.Envelope,this.index=null,this.nestedPt=null},jsts.operation.valid.IndexedNestedRingTester.prototype.getNestedPoint=function(){return this.nestedPt},jsts.operation.valid.IndexedNestedRingTester.prototype.add=function(e){this.rings.add(e),this.totalEnv.expandToInclude(e.getEnvelopeInternal())},jsts.operation.valid.IndexedNestedRingTester.prototype.isNonNested=function(){this.buildIndex();for(var e=0;e<this.rings.size();e++)for(var t=this.rings.get(e),n=t.getCoordinates(),o=this.index.query(t.getEnvelopeInternal()),i=0;i<o.length;i++){var r=o[i],s=r.getCoordinates();if(t!=r&&t.getEnvelopeInternal().intersects(r.getEnvelopeInternal())){var a=jsts.operation.valid.IsValidOp.findPtNotNode(n,r,this.graph);if(null!=a){var l=jsts.algorithm.CGAlgorithms.isPointInRing(a,s);if(l)return this.nestedPt=a,!1}}}return!0},jsts.operation.valid.IndexedNestedRingTester.prototype.buildIndex=function(){this.index=new jsts.index.strtree.STRtree;for(var e=0;e<this.rings.size();e++){var t=this.rings.get(e),n=t.getEnvelopeInternal();this.index.insert(n,t)}},jsts.geomgraph.index.MonotoneChain=function(e,t){this.mce=e,this.chainIndex=t},jsts.geomgraph.index.MonotoneChain.prototype.mce=null,jsts.geomgraph.index.MonotoneChain.prototype.chainIndex=null,jsts.geomgraph.index.MonotoneChain.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)},jsts.noding.SegmentNode=function(e,t,n,o){this.segString=e,this.coord=new jsts.geom.Coordinate(t),this.segmentIndex=n,this.segmentOctant=o,this._isInterior=!t.equals2D(e.getCoordinate(n))},jsts.noding.SegmentNode.prototype.segString=null,jsts.noding.SegmentNode.prototype.coord=null,jsts.noding.SegmentNode.prototype.segmentIndex=null,jsts.noding.SegmentNode.prototype.segmentOctant=null,jsts.noding.SegmentNode.prototype._isInterior=null,jsts.noding.SegmentNode.prototype.getCoordinate=function(){return this.coord},jsts.noding.SegmentNode.prototype.isInterior=function(){return this._isInterior},jsts.noding.SegmentNode.prototype.isEndPoint=function(e){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===this.maxSegmentIndex},jsts.noding.SegmentNode.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:jsts.noding.SegmentPointComparator.compare(this.segmentOctant,this.coord,t.coord)},function(){jsts.io.GeoJSONWriter=function(){this.parser=new jsts.io.GeoJSONParser(this.geometryFactory)},jsts.io.GeoJSONWriter.prototype.write=function(e){var t=this.parser.write(e);return t}}(),jsts.io.OpenLayersParser=function(e){this.geometryFactory=e||new jsts.geom.GeometryFactory},jsts.io.OpenLayersParser.prototype.read=function(e){return"OpenLayers.Geometry.Point"===e.CLASS_NAME?this.convertFromPoint(e):"OpenLayers.Geometry.LineString"===e.CLASS_NAME?this.convertFromLineString(e):"OpenLayers.Geometry.LinearRing"===e.CLASS_NAME?this.convertFromLinearRing(e):"OpenLayers.Geometry.Polygon"===e.CLASS_NAME?this.convertFromPolygon(e):"OpenLayers.Geometry.MultiPoint"===e.CLASS_NAME?this.convertFromMultiPoint(e):"OpenLayers.Geometry.MultiLineString"===e.CLASS_NAME?this.convertFromMultiLineString(e):"OpenLayers.Geometry.MultiPolygon"===e.CLASS_NAME?this.convertFromMultiPolygon(e):"OpenLayers.Geometry.Collection"===e.CLASS_NAME?this.convertFromCollection(e):void 0},jsts.io.OpenLayersParser.prototype.convertFromPoint=function(e){return this.geometryFactory.createPoint(new jsts.geom.Coordinate(e.x,e.y))},jsts.io.OpenLayersParser.prototype.convertFromLineString=function(e){var t,n=[];for(t=0;t<e.components.length;t++)n.push(new jsts.geom.Coordinate(e.components[t].x,e.components[t].y));return this.geometryFactory.createLineString(n)},jsts.io.OpenLayersParser.prototype.convertFromLinearRing=function(e){var t,n=[];for(t=0;t<e.components.length;t++)n.push(new jsts.geom.Coordinate(e.components[t].x,e.components[t].y));return this.geometryFactory.createLinearRing(n)},jsts.io.OpenLayersParser.prototype.convertFromPolygon=function(e){var t,n=null,o=[];for(t=0;t<e.components.length;t++){var i=this.convertFromLinearRing(e.components[t]);0===t?n=i:o.push(i)}return this.geometryFactory.createPolygon(n,o)},jsts.io.OpenLayersParser.prototype.convertFromMultiPoint=function(e){var t,n=[];for(t=0;t<e.components.length;t++)n.push(this.convertFromPoint(e.components[t]));return this.geometryFactory.createMultiPoint(n)},jsts.io.OpenLayersParser.prototype.convertFromMultiLineString=function(e){var t,n=[];for(t=0;t<e.components.length;t++)n.push(this.convertFromLineString(e.components[t]));return this.geometryFactory.createMultiLineString(n)},jsts.io.OpenLayersParser.prototype.convertFromMultiPolygon=function(e){var t,n=[];for(t=0;t<e.components.length;t++)n.push(this.convertFromPolygon(e.components[t]));return this.geometryFactory.createMultiPolygon(n)},jsts.io.OpenLayersParser.prototype.convertFromCollection=function(e){var t,n=[];for(t=0;t<e.components.length;t++)n.push(this.read(e.components[t]));return this.geometryFactory.createGeometryCollection(n)},jsts.io.OpenLayersParser.prototype.write=function(e){return"jsts.geom.Point"===e.CLASS_NAME?this.convertToPoint(e.coordinate):"jsts.geom.LineString"===e.CLASS_NAME?this.convertToLineString(e):"jsts.geom.LinearRing"===e.CLASS_NAME?this.convertToLinearRing(e):"jsts.geom.Polygon"===e.CLASS_NAME?this.convertToPolygon(e):"jsts.geom.MultiPoint"===e.CLASS_NAME?this.convertToMultiPoint(e):"jsts.geom.MultiLineString"===e.CLASS_NAME?this.convertToMultiLineString(e):"jsts.geom.MultiPolygon"===e.CLASS_NAME?this.convertToMultiPolygon(e):"jsts.geom.GeometryCollection"===e.CLASS_NAME?this.convertToCollection(e):void 0},jsts.io.OpenLayersParser.prototype.convertToPoint=function(e){return new OpenLayers.Geometry.Point(e.x,e.y)},jsts.io.OpenLayersParser.prototype.convertToLineString=function(e){var t,n=[];for(t=0;t<e.points.length;t++){var o=e.points[t];n.push(this.convertToPoint(o))}return new OpenLayers.Geometry.LineString(n)},jsts.io.OpenLayersParser.prototype.convertToLinearRing=function(e){var t,n=[];for(t=0;t<e.points.length;t++){var o=e.points[t];n.push(this.convertToPoint(o))}return new OpenLayers.Geometry.LinearRing(n)},jsts.io.OpenLayersParser.prototype.convertToPolygon=function(e){var t,n=[];for(n.push(this.convertToLinearRing(e.shell)),t=0;t<e.holes.length;t++){var o=e.holes[t];n.push(this.convertToLinearRing(o))}return new OpenLayers.Geometry.Polygon(n)},jsts.io.OpenLayersParser.prototype.convertToMultiPoint=function(e){var t,n=[];for(t=0;t<e.geometries.length;t++){var o=e.geometries[t].coordinate;n.push(new OpenLayers.Geometry.Point(o.x,o.y))}return new OpenLayers.Geometry.MultiPoint(n)},jsts.io.OpenLayersParser.prototype.convertToMultiLineString=function(e){var t,n=[];for(t=0;t<e.geometries.length;t++)n.push(this.convertToLineString(e.geometries[t]));return new OpenLayers.Geometry.MultiLineString(n)},jsts.io.OpenLayersParser.prototype.convertToMultiPolygon=function(e){var t,n=[];for(t=0;t<e.geometries.length;t++)n.push(this.convertToPolygon(e.geometries[t]));return new OpenLayers.Geometry.MultiPolygon(n)},jsts.io.OpenLayersParser.prototype.convertToCollection=function(e){var t,n=[];for(t=0;t<e.geometries.length;t++){var o=e.geometries[t],i=this.write(o);n.push(i)}return new OpenLayers.Geometry.Collection(n)},jsts.index.quadtree.Quadtree=function(){this.root=new jsts.index.quadtree.Root,this.minExtent=1},jsts.index.quadtree.Quadtree.ensureExtent=function(e,t){var n,o,i,r;
return n=e.getMinX(),o=e.getMaxX(),i=e.getMinY(),r=e.getMaxY(),n!==o&&i!==r?e:(n===o&&(n-=t/2,o=n+t/2),i===r&&(i-=t/2,r=i+t/2),new jsts.geom.Envelope(n,o,i,r))},jsts.index.quadtree.Quadtree.prototype.depth=function(){return this.root.depth()},jsts.index.quadtree.Quadtree.prototype.size=function(){return this.root.size()},jsts.index.quadtree.Quadtree.prototype.insert=function(e,t){this.collectStats(e);var n=jsts.index.quadtree.Quadtree.ensureExtent(e,this.minExtent);this.root.insert(n,t)},jsts.index.quadtree.Quadtree.prototype.remove=function(e,t){var n=jsts.index.quadtree.Quadtree.ensureExtent(e,this.minExtent);return this.root.remove(n,t)},jsts.index.quadtree.Quadtree.prototype.query=function(){return 1===arguments.length?jsts.index.quadtree.Quadtree.prototype.queryByEnvelope.apply(this,arguments):void jsts.index.quadtree.Quadtree.prototype.queryWithVisitor.apply(this,arguments)},jsts.index.quadtree.Quadtree.prototype.queryByEnvelope=function(e){var t=new jsts.index.ArrayListVisitor;return this.query(e,t),t.getItems()},jsts.index.quadtree.Quadtree.prototype.queryWithVisitor=function(e,t){this.root.visit(e,t)},jsts.index.quadtree.Quadtree.prototype.queryAll=function(){var e=[];return e=this.root.addAllItems(e)},jsts.index.quadtree.Quadtree.prototype.collectStats=function(e){var t=e.getWidth();t<this.minExtent&&t>0&&(this.minExtent=t);var n=e.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)},jsts.operation.relate.RelateNodeFactory=function(){},jsts.operation.relate.RelateNodeFactory.prototype=new jsts.geomgraph.NodeFactory,jsts.operation.relate.RelateNodeFactory.prototype.createNode=function(e){return new jsts.operation.relate.RelateNode(e,new jsts.operation.relate.EdgeEndBundleStar)},jsts.index.quadtree.Key=function(e){this.pt=new jsts.geom.Coordinate,this.level=0,this.env=null,this.computeKey(e)},jsts.index.quadtree.Key.computeQuadLevel=function(e){var t,n,o,i;return t=e.getWidth(),n=e.getHeight(),o=t>n?t:n,i=jsts.index.DoubleBits.exponent(o)+1},jsts.index.quadtree.Key.prototype.getPoint=function(){return this.pt},jsts.index.quadtree.Key.prototype.getLevel=function(){return this.level},jsts.index.quadtree.Key.prototype.getEnvelope=function(){return this.env},jsts.index.quadtree.Key.prototype.getCentre=function(){var e,t;return e=(this.env.getMinX()+this.env.getMaxX())/2,t=(this.env.getMinY()+this.env.getMaxY())/2,new jsts.geom.Coordinate(e,t)},jsts.index.quadtree.Key.prototype.computeKey=function(){arguments[0]instanceof jsts.geom.Envelope?this.computeKeyFromEnvelope(arguments[0]):this.computeKeyFromLevel(arguments[0],arguments[1])},jsts.index.quadtree.Key.prototype.computeKeyFromEnvelope=function(e){for(this.level=jsts.index.quadtree.Key.computeQuadLevel(e),this.env=new jsts.geom.Envelope,this.computeKey(this.level,e);!this.env.contains(e);)this.level+=1,this.computeKey(this.level,e)},jsts.index.quadtree.Key.prototype.computeKeyFromLevel=function(e,t){var n=jsts.index.DoubleBits.powerOf2(e);this.pt.x=Math.floor(t.getMinX()/n)*n,this.pt.y=Math.floor(t.getMinY()/n)*n,this.env.init(this.pt.x,this.pt.x+n,this.pt.y,this.pt.y+n)},jsts.geom.CoordinateArrays=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.CoordinateArrays.copyDeep=function(){return 1===arguments.length?jsts.geom.CoordinateArrays.copyDeep1(arguments[0]):void(5===arguments.length&&jsts.geom.CoordinateArrays.copyDeep2(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]))},jsts.geom.CoordinateArrays.copyDeep1=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=new jsts.geom.Coordinate(e[n]);return t},jsts.geom.CoordinateArrays.copyDeep2=function(e,t,n,o,i){for(var r=0;r<i;r++)n[o+r]=new jsts.geom.Coordinate(e[t+r])},jsts.geom.CoordinateArrays.removeRepeatedPoints=function(e){var t;return this.hasRepeatedPoints(e)?(t=new jsts.geom.CoordinateList(e,(!1)),t.toCoordinateArray()):e},jsts.geom.CoordinateArrays.hasRepeatedPoints=function(e){var t;for(t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1},jsts.geom.CoordinateArrays.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(jsts.geom.CoordinateArrays.indexOf(o,t)<0)return o}return null},jsts.geom.CoordinateArrays.increasingDirection=function(e){for(var t=0;t<parseInt(e.length/2);t++){var n=e.length-1-t,o=e[t].compareTo(e[n]);if(0!=o)return o}return 1},jsts.geom.CoordinateArrays.minCoordinate=function(e){for(var t=null,n=0;n<e.length;n++)(null===t||t.compareTo(e[n])>0)&&(t=e[n]);return t},jsts.geom.CoordinateArrays.scroll=function(e,t){var n=jsts.geom.CoordinateArrays.indexOf(t,e);if(!(n<0)){var o=e.slice(n).concat(e.slice(0,n));for(n=0;n<o.length;n++)e[n]=o[n]}},jsts.geom.CoordinateArrays.indexOf=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1},jsts.operation.overlay.MinimalEdgeRing=function(e,t){jsts.geomgraph.EdgeRing.call(this,e,t)},jsts.operation.overlay.MinimalEdgeRing.prototype=new jsts.geomgraph.EdgeRing,jsts.operation.overlay.MinimalEdgeRing.constructor=jsts.operation.overlay.MinimalEdgeRing,jsts.operation.overlay.MinimalEdgeRing.prototype.getNext=function(e){return e.getNextMin()},jsts.operation.overlay.MinimalEdgeRing.prototype.setEdgeRing=function(e,t){e.setMinEdgeRing(t)},jsts.triangulate.DelaunayTriangulationBuilder=function(){this.siteCoords=null,this.tolerance=0,this.subdiv=null},jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates=function(e){if(void 0===e||null===e)return new jsts.geom.CoordinateList([],(!1)).toArray();var t=e.getCoordinates();return jsts.triangulate.DelaunayTriangulationBuilder.unique(t)},jsts.triangulate.DelaunayTriangulationBuilder.unique=function(e){e.sort(function(e,t){return e.compareTo(t)});var t=new jsts.geom.CoordinateList(e,(!1));return t.toArray()},jsts.triangulate.DelaunayTriangulationBuilder.toVertices=function(e){var t,n=new Array(e.length),o=0,i=e.length;for(o;o<i;o++)t=e[o],n[o]=new jsts.triangulate.quadedge.Vertex(t);return n},jsts.triangulate.DelaunayTriangulationBuilder.envelope=function(e){var t=new jsts.geom.Envelope,n=0,o=e.length;for(n;n<o;n++)t.expandToInclude(e[n]);return t},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSites=function(){var e=arguments[0];e instanceof jsts.geom.Geometry||e instanceof jsts.geom.Coordinate||e instanceof jsts.geom.Point||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.LineString||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.LinearRing||e instanceof jsts.geom.Polygon||e instanceof jsts.geom.MultiPolygon?this.setSitesFromGeometry(e):this.setSitesFromCollection(e)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromGeometry=function(e){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(e)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromCollection=function(e){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(e)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setTolerance=function(e){this.tolerance=e},jsts.triangulate.DelaunayTriangulationBuilder.prototype.create=function(){if(null===this.subdiv){var e,t,n;e=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords),t=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords),this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(e,this.tolerance),n=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv),n.insertSites(t)}},jsts.triangulate.DelaunayTriangulationBuilder.prototype.getSubdivision=function(){return this.create(),this.subdiv},jsts.triangulate.DelaunayTriangulationBuilder.prototype.getEdges=function(e){return this.create(),this.subdiv.getEdges(e)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.getTriangles=function(e){return this.create(),this.subdiv.getTriangles(e)},jsts.algorithm.RayCrossingCounter=function(e){this.p=e},jsts.algorithm.RayCrossingCounter.locatePointInRing=function(e,t){for(var n=new jsts.algorithm.RayCrossingCounter(e),o=1;o<t.length;o++){var i=t[o],r=t[o-1];if(n.countSegment(i,r),n.isOnSegment())return n.getLocation()}return n.getLocation()},jsts.algorithm.RayCrossingCounter.prototype.p=null,jsts.algorithm.RayCrossingCounter.prototype.crossingCount=0;jsts.algorithm.RayCrossingCounter.prototype.isPointOnSegment=!1;jsts.algorithm.RayCrossingCounter.prototype.countSegment=function(e,t){if(!(e.x<this.p.x&&t.x<this.p.x)){if(this.p.x==t.x&&this.p.y===t.y)return void(this.isPointOnSegment=!0);if(e.y===this.p.y&&t.y===this.p.y){var n=e.x,o=t.x;return n>o&&(n=t.x,o=e.x),void(this.p.x>=n&&this.p.x<=o&&(this.isPointOnSegment=!0))}if(e.y>this.p.y&&t.y<=this.p.y||t.y>this.p.y&&e.y<=this.p.y){var i=e.x-this.p.x,r=e.y-this.p.y,s=t.x-this.p.x,a=t.y-this.p.y,l=jsts.algorithm.RobustDeterminant.signOfDet2x2(i,r,s,a);if(0===l)return void(this.isPointOnSegment=!0);a<r&&(l=-l),l>0&&this.crossingCount++}}},jsts.algorithm.RayCrossingCounter.prototype.isOnSegment=function(){return jsts.geom.isPointOnSegment},jsts.algorithm.RayCrossingCounter.prototype.getLocation=function(){return this.isPointOnSegment?jsts.geom.Location.BOUNDARY:this.crossingCount%2===1?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR},jsts.algorithm.RayCrossingCounter.prototype.isPointInPolygon=function(){return this.getLocation()!==jsts.geom.Location.EXTERIOR},jsts.operation.BoundaryOp=function(e,t){this.geom=e,this.geomFact=e.getFactory(),this.bnRule=t||jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE},jsts.operation.BoundaryOp.prototype.geom=null,jsts.operation.BoundaryOp.prototype.geomFact=null,jsts.operation.BoundaryOp.prototype.bnRule=null,jsts.operation.BoundaryOp.prototype.getBoundary=function(){return this.geom instanceof jsts.geom.LineString?this.boundaryLineString(this.geom):this.geom instanceof jsts.geom.MultiLineString?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},jsts.operation.BoundaryOp.prototype.getEmptyMultiPoint=function(){return this.geomFact.createMultiPoint(null)},jsts.operation.BoundaryOp.prototype.boundaryMultiLineString=function(e){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return 1==t.length?this.geomFact.createPoint(t[0]):this.geomFact.createMultiPoint(t)},jsts.operation.BoundaryOp.prototype.endpoints=null,jsts.operation.BoundaryOp.prototype.computeBoundaryCoordinates=function(e){var t,n,o,i=[];for(this.endpoints=[],t=0;t<e.getNumGeometries();t++)n=e.getGeometryN(t),0!=n.getNumPoints()&&(this.addEndpoint(n.getCoordinateN(0)),this.addEndpoint(n.getCoordinateN(n.getNumPoints()-1)));for(t=0;t<this.endpoints.length;t++)o=this.endpoints[t],this.bnRule.isInBoundary(o.count)&&i.push(o.coordinate);return i},jsts.operation.BoundaryOp.prototype.addEndpoint=function(e){var t,n,o=!1;for(t=0;t<this.endpoints.length;t++)if(n=this.endpoints[t],n.coordinate.equals(e)){o=!0;break}o||(n={},n.coordinate=e,n.count=0,this.endpoints.push(n)),n.count++},jsts.operation.BoundaryOp.prototype.boundaryLineString=function(e){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this.bnRule.isInBoundary(2);return t?e.getStartPoint():this.geomFact.createMultiPoint(null)}return this.geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])},jsts.operation.buffer.OffsetCurveSetBuilder=function(e,t,n){this.inputGeom=e,this.distance=t,this.curveBuilder=n,this.curveList=new javascript.util.ArrayList},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.inputGeom=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.distance=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveBuilder=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveList=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.getCurves=function(){return this.add(this.inputGeom),this.curveList},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCurve=function(e,t,n){if(!(null==e||e.length<2)){var o=new jsts.noding.NodedSegmentString(e,new jsts.geomgraph.Label(0,jsts.geom.Location.BOUNDARY,t,n));this.curveList.add(o)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.add=function(e){if(!e.isEmpty())if(e instanceof jsts.geom.Polygon)this.addPolygon(e);else if(e instanceof jsts.geom.LineString)this.addLineString(e);else if(e instanceof jsts.geom.Point)this.addPoint(e);else if(e instanceof jsts.geom.MultiPoint)this.addCollection(e);else if(e instanceof jsts.geom.MultiLineString)this.addCollection(e);else if(e instanceof jsts.geom.MultiPolygon)this.addCollection(e);else{if(!(e instanceof jsts.geom.GeometryCollection))throw new jsts.error.IllegalArgumentError;this.addCollection(e)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPoint=function(e){if(!(this.distance<=0)){var t=e.getCoordinates(),n=this.curveBuilder.getLineCurve(t,this.distance);this.addCurve(n,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addLineString=function(e){if(!(this.distance<=0)||this.curveBuilder.getBufferParameters().isSingleSided()){var t=jsts.geom.CoordinateArrays.removeRepeatedPoints(e.getCoordinates()),n=this.curveBuilder.getLineCurve(t,this.distance);this.addCurve(n,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygon=function(e){var t=this.distance,n=jsts.geomgraph.Position.LEFT;this.distance<0&&(t=-this.distance,n=jsts.geomgraph.Position.RIGHT);var o=e.getExteriorRing(),i=jsts.geom.CoordinateArrays.removeRepeatedPoints(o.getCoordinates());if(!(this.distance<0&&this.isErodedCompletely(o,this.distance)||this.distance<=0&&i.length<3)){this.addPolygonRing(i,t,n,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR);for(var r=0;r<e.getNumInteriorRing();r++){var s=e.getInteriorRingN(r),a=jsts.geom.CoordinateArrays.removeRepeatedPoints(s.getCoordinates());this.distance>0&&this.isErodedCompletely(s,-this.distance)||this.addPolygonRing(a,t,jsts.geomgraph.Position.opposite(n),jsts.geom.Location.INTERIOR,jsts.geom.Location.EXTERIOR)}}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygonRing=function(e,t,n,o,i){if(!(0==t&&e.length<jsts.geom.LinearRing.MINIMUM_VALID_SIZE)){var r=o,s=i;e.length>=jsts.geom.LinearRing.MINIMUM_VALID_SIZE&&jsts.algorithm.CGAlgorithms.isCCW(e)&&(r=i,s=o,n=jsts.geomgraph.Position.opposite(n));var a=this.curveBuilder.getRingCurve(e,n,t);this.addCurve(a,r,s)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isErodedCompletely=function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(4==n.length)return this.isTriangleErodedCompletely(n,t);var o=e.getEnvelopeInternal(),i=Math.min(o.getHeight(),o.getWidth());return t<0&&2*Math.abs(t)>i},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isTriangleErodedCompletely=function(e,t){var n=new jsts.geom.Triangle(e[0],e[1],e[2]),o=n.inCentre(),i=jsts.algorithm.CGAlgorithms.distancePointLine(o,n.p0,n.p1);return i<Math.abs(t)},jsts.operation.buffer.BufferSubgraph=function(){this.dirEdgeList=new javascript.util.ArrayList,this.nodes=new javascript.util.ArrayList,this.finder=new jsts.operation.buffer.RightmostEdgeFinder},jsts.operation.buffer.BufferSubgraph.prototype.finder=null,jsts.operation.buffer.BufferSubgraph.prototype.dirEdgeList=null,jsts.operation.buffer.BufferSubgraph.prototype.nodes=null,jsts.operation.buffer.BufferSubgraph.prototype.rightMostCoord=null,jsts.operation.buffer.BufferSubgraph.prototype.env=null,jsts.operation.buffer.BufferSubgraph.prototype.getDirectedEdges=function(){return this.dirEdgeList},jsts.operation.buffer.BufferSubgraph.prototype.getNodes=function(){return this.nodes},jsts.operation.buffer.BufferSubgraph.prototype.getEnvelope=function(){if(null===this.env){for(var e=new jsts.geom.Envelope,t=this.dirEdgeList.iterator();t.hasNext();)for(var n=t.next(),o=n.getEdge().getCoordinates(),i=0;i<o.length-1;i++)e.expandToInclude(o[i]);this.env=e}return this.env},jsts.operation.buffer.BufferSubgraph.prototype.getRightmostCoordinate=function(){return this.rightMostCoord},jsts.operation.buffer.BufferSubgraph.prototype.create=function(e){this.addReachable(e),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},jsts.operation.buffer.BufferSubgraph.prototype.addReachable=function(e){var t=[];for(t.push(e);0!==t.length;){var n=t.pop();this.add(n,t)}},jsts.operation.buffer.BufferSubgraph.prototype.add=function(e,t){e.setVisited(!0),this.nodes.add(e);for(var n=e.getEdges().iterator();n.hasNext();){var o=n.next();this.dirEdgeList.add(o);var i=o.getSym(),r=i.getNode();r.isVisited()||t.push(r)}},jsts.operation.buffer.BufferSubgraph.prototype.clearVisitedEdges=function(){for(var e=this.dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}},jsts.operation.buffer.BufferSubgraph.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this.finder.getEdge();t.getNode(),t.getLabel();t.setEdgeDepths(jsts.geomgraph.Position.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)},jsts.operation.buffer.BufferSubgraph.prototype.computeDepths=function(e){var t=[],n=[],o=e.getNode();for(n.push(o),t.push(o),e.setVisited(!0);0!==n.length;){var i=n.shift();t.push(i),this.computeNodeDepth(i);for(var r=i.getEdges().iterator();r.hasNext();){var s=r.next(),a=s.getSym();if(!a.isVisited()){var l=a.getNode();t.indexOf(l)===-1&&(n.push(l),t.push(l))}}}},jsts.operation.buffer.BufferSubgraph.prototype.computeNodeDepth=function(e){for(var t=null,n=e.getEdges().iterator();n.hasNext();){var o=n.next();if(o.isVisited()||o.getSym().isVisited()){t=o;break}}if(null==t)throw new jsts.error.TopologyError("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(var n=e.getEdges().iterator();n.hasNext();){var o=n.next();o.setVisited(!0),this.copySymDepths(o)}},jsts.operation.buffer.BufferSubgraph.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(jsts.geomgraph.Position.LEFT,e.getDepth(jsts.geomgraph.Position.RIGHT)),t.setDepth(jsts.geomgraph.Position.RIGHT,e.getDepth(jsts.geomgraph.Position.LEFT))},jsts.operation.buffer.BufferSubgraph.prototype.findResultEdges=function(){for(var e=this.dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(jsts.geomgraph.Position.RIGHT)>=1&&t.getDepth(jsts.geomgraph.Position.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}},jsts.operation.buffer.BufferSubgraph.prototype.compareTo=function(e){var t=e;return this.rightMostCoord.x<t.rightMostCoord.x?-1:this.rightMostCoord.x>t.rightMostCoord.x?1:0},jsts.simplify.DPTransformer=function(e,t){this.distanceTolerance=e,this.isEnsureValidTopology=t},jsts.simplify.DPTransformer.prototype=new jsts.geom.util.GeometryTransformer,jsts.simplify.DPTransformer.prototype.distanceTolerance=null,jsts.simplify.DPTransformer.prototype.isEnsureValidTopology=null,jsts.simplify.DPTransformer.prototype.transformCoordinates=function(e,t){var n=e,o=null;return o=0==n.length?[]:jsts.simplify.DouglasPeuckerLineSimplifier.simplify(n,this.distanceTolerance)},jsts.simplify.DPTransformer.prototype.transformPolygon=function(e,t){if(e.isEmpty())return null;var n=jsts.geom.util.GeometryTransformer.prototype.transformPolygon.apply(this,arguments);return t instanceof jsts.geom.MultiPolygon?n:this.createValidArea(n)},jsts.simplify.DPTransformer.prototype.transformLinearRing=function(e,t){var n=t instanceof jsts.geom.Polygon,o=jsts.geom.util.GeometryTransformer.prototype.transformLinearRing.apply(this,arguments);return!n||o instanceof jsts.geom.LinearRing?o:null},jsts.simplify.DPTransformer.prototype.transformMultiPolygon=function(e,t){var n=jsts.geom.util.GeometryTransformer.prototype.transformMultiPolygon.apply(this,arguments);return this.createValidArea(n)},jsts.simplify.DPTransformer.prototype.createValidArea=function(e){return this.isEnsureValidTopology?e.buffer(0):e},jsts.geom.util.GeometryExtracter=function(e,t){this.clz=e,this.comps=t},jsts.geom.util.GeometryExtracter.prototype=new jsts.geom.GeometryFilter,jsts.geom.util.GeometryExtracter.prototype.clz=null,jsts.geom.util.GeometryExtracter.prototype.comps=null,jsts.geom.util.GeometryExtracter.extract=function(e,t,n){return n=n||new javascript.util.ArrayList,e instanceof t?n.add(e):(e instanceof jsts.geom.GeometryCollection||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.MultiPolygon)&&e.apply(new jsts.geom.util.GeometryExtracter(t,n)),n},jsts.geom.util.GeometryExtracter.prototype.filter=function(e){(null===this.clz||e instanceof this.clz)&&this.comps.add(e)},function(){var e=jsts.operation.overlay.OverlayOp,t=jsts.operation.overlay.snap.SnapOverlayOp,n=function(e,t){this.geom=[],this.geom[0]=e,this.geom[1]=t};n.overlayOp=function(e,t,o){var i=new n(e,t);return i.getResultGeometry(o)},n.intersection=function(t,n){return overlayOp(t,n,e.INTERSECTION)},n.union=function(t,n){return overlayOp(t,n,e.UNION)},n.difference=function(t,n){return overlayOp(t,n,e.DIFFERENCE)},n.symDifference=function(t,n){return overlayOp(t,n,e.SYMDIFFERENCE)},n.prototype.geom=null,n.prototype.getResultGeometry=function(n){var o=null,i=!1,r=null;try{o=e.overlayOp(this.geom[0],this.geom[1],n);var s=!0;s&&(i=!0)}catch(e){r=e}if(!i)try{o=t.overlayOp(this.geom[0],this.geom[1],n)}catch(e){throw r}return o},jsts.operation.overlay.snap.SnapIfNeededOverlayOp=n}(),function(){var e=jsts.geom.util.GeometryExtracter,t=jsts.operation.union.CascadedPolygonUnion,n=jsts.operation.union.PointGeometryUnion,o=jsts.operation.overlay.OverlayOp,i=jsts.operation.overlay.snap.SnapIfNeededOverlayOp,r=javascript.util.ArrayList;jsts.operation.union.UnaryUnionOp=function(e,t){this.polygons=new r,this.lines=new r,this.points=new r,t&&(this.geomFact=t),this.extract(e)},jsts.operation.union.UnaryUnionOp.union=function(e,t){var n=new jsts.operation.union.UnaryUnionOp(e,t);return n.union()},jsts.operation.union.UnaryUnionOp.prototype.polygons=null,jsts.operation.union.UnaryUnionOp.prototype.lines=null,jsts.operation.union.UnaryUnionOp.prototype.points=null,jsts.operation.union.UnaryUnionOp.prototype.geomFact=null,jsts.operation.union.UnaryUnionOp.prototype.extract=function(t){if(t instanceof r)for(var n=t.iterator();n.hasNext();){var o=n.next();this.extract(o)}else null===this.geomFact&&(this.geomFact=t.getFactory()),e.extract(t,jsts.geom.Polygon,this.polygons),e.extract(t,jsts.geom.LineString,this.lines),e.extract(t,jsts.geom.Point,this.points)},jsts.operation.union.UnaryUnionOp.prototype.union=function(){if(null===this.geomFact)return null;var e=null;if(this.points.size()>0){var o=this.geomFact.buildGeometry(this.points);e=this.unionNoOpt(o)}var i=null;if(this.lines.size()>0){var r=this.geomFact.buildGeometry(this.lines);i=this.unionNoOpt(r)}var s=null;this.polygons.size()>0&&(s=t.union(this.polygons));var a=this.unionWithNull(i,s),l=null;return l=null===e?a:null===a?e:n(e,a),null===l?this.geomFact.createGeometryCollection(null):l},jsts.operation.union.UnaryUnionOp.prototype.unionWithNull=function(e,t){return null===e&&null===t?null:null===t?e:null===e?t:e.union(t)},jsts.operation.union.UnaryUnionOp.prototype.unionNoOpt=function(e){var t=this.geomFact.createPoint(null);return i.overlayOp(e,t,o.UNION)}}(),jsts.index.kdtree.KdNode=function(){this.left=null,this.right=null,this.count=1,2===arguments.length?this.initializeFromCoordinate.apply(this,arguments[0],arguments[1]):3===arguments.length&&this.initializeFromXY.apply(this,arguments[0],arguments[1],arguments[2])},jsts.index.kdtree.KdNode.prototype.initializeFromXY=function(e,t,n){this.p=new jsts.geom.Coordinate(e,t),this.data=n},jsts.index.kdtree.KdNode.prototype.initializeFromCoordinate=function(e,t){this.p=e,this.data=t},jsts.index.kdtree.KdNode.prototype.getX=function(){return this.p.x},jsts.index.kdtree.KdNode.prototype.getY=function(){return this.p.y},jsts.index.kdtree.KdNode.prototype.getCoordinate=function(){return this.p},jsts.index.kdtree.KdNode.prototype.getData=function(){return this.data},jsts.index.kdtree.KdNode.prototype.getLeft=function(){return this.left},jsts.index.kdtree.KdNode.prototype.getRight=function(){return this.right},jsts.index.kdtree.KdNode.prototype.increment=function(){this.count+=1},jsts.index.kdtree.KdNode.prototype.getCount=function(){return this.count},jsts.index.kdtree.KdNode.prototype.isRepeated=function(){return count>1},jsts.index.kdtree.KdNode.prototype.setLeft=function(e){this.left=e},jsts.index.kdtree.KdNode.prototype.setRight=function(e){this.right=e},jsts.algorithm.InteriorPointPoint=function(e){this.minDistance=Number.MAX_VALUE,this.interiorPoint=null,this.centroid=e.getCentroid().getCoordinate(),this.add(e)},jsts.algorithm.InteriorPointPoint.prototype.add=function(e){if(e instanceof jsts.geom.Point)this.addPoint(e.getCoordinate());else if(e instanceof jsts.geom.GeometryCollection)for(var t=0;t<e.getNumGeometries();t++)this.add(e.getGeometryN(t))},jsts.algorithm.InteriorPointPoint.prototype.addPoint=function(e){var t=e.distance(this.centroid);t<this.minDistance&&(this.interiorPoint=new jsts.geom.Coordinate(e),this.minDistance=t)},jsts.algorithm.InteriorPointPoint.prototype.getInteriorPoint=function(){return this.interiorPoint},function(){jsts.geom.MultiLineString=function(e,t){this.geometries=e||[],this.factory=t},jsts.geom.MultiLineString.prototype=new jsts.geom.GeometryCollection,jsts.geom.MultiLineString.constructor=jsts.geom.MultiLineString,jsts.geom.MultiLineString.prototype.getBoundary=function(){return new jsts.operation.BoundaryOp(this).getBoundary()},jsts.geom.MultiLineString.prototype.equalsExact=function(e,t){return!!this.isEquivalentClass(e)&&jsts.geom.GeometryCollection.prototype.equalsExact.call(this,e,t)},jsts.geom.MultiLineString.prototype.CLASS_NAME="jsts.geom.MultiLineString"}(),jsts.io.olParser=function(e){this.geometryFactory=e||new jsts.geom.GeometryFactory},jsts.io.olParser.prototype.read=function(e){return e instanceof ol.geom.Point?this.convertFromPoint(e):e instanceof ol.geom.LineString?this.convertFromLineString(e):e instanceof ol.geom.LinearRing?this.convertFromLinearRing(e):e instanceof ol.geom.Polygon?this.convertFromPolygon(e):e instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(e):e instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(e):e instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(e):e instanceof ol.geom.GeometryCollection?this.convertFromCollection(e):void 0},jsts.io.olParser.prototype.convertFromPoint=function(e){var t=e.getCoordinates();return this.geometryFactory.createPoint(new jsts.geom.Coordinate(t[0],t[1]))},jsts.io.olParser.prototype.convertFromLineString=function(e){return this.geometryFactory.createLineString(e.getCoordinates().map(function(e){return new jsts.geom.Coordinate(e[0],e[1])}))},jsts.io.olParser.prototype.convertFromLinearRing=function(e){return this.geometryFactory.createLinearRing(e.getCoordinates().map(function(e){return new jsts.geom.Coordinate(e[0],e[1])}))},jsts.io.olParser.prototype.convertFromPolygon=function(e){var t,n=e.getLinearRings(),o=null,i=[];for(t=0;t<n.length;t++){var r=this.convertFromLinearRing(n[t]);0===t?o=r:i.push(r)}return this.geometryFactory.createPolygon(o,i)},jsts.io.olParser.prototype.convertFromMultiPoint=function(e){var t=e.getPoints().map(function(e){return this.convertFromPoint(e)},this);return this.geometryFactory.createMultiPoint(t)},jsts.io.olParser.prototype.convertFromMultiLineString=function(e){var t=e.getLineStrings().map(function(e){return this.convertFromLineString(e)},this);return this.geometryFactory.createMultiLineString(t)},jsts.io.olParser.prototype.convertFromMultiPolygon=function(e){var t=e.getPolygons().map(function(e){return this.convertFromPolygon(e)},this);return this.geometryFactory.createMultiPolygon(t)},jsts.io.olParser.prototype.convertFromCollection=function(e){var t=e.getGeometries().map(function(e){return this.read(e)},this);return this.geometryFactory.createGeometryCollection(t)},jsts.io.olParser.prototype.write=function(e){return"jsts.geom.Point"===e.CLASS_NAME?this.convertToPoint(e.coordinate):"jsts.geom.LineString"===e.CLASS_NAME?this.convertToLineString(e):"jsts.geom.LinearRing"===e.CLASS_NAME?this.convertToLinearRing(e):"jsts.geom.Polygon"===e.CLASS_NAME?this.convertToPolygon(e):"jsts.geom.MultiPoint"===e.CLASS_NAME?this.convertToMultiPoint(e):"jsts.geom.MultiLineString"===e.CLASS_NAME?this.convertToMultiLineString(e):"jsts.geom.MultiPolygon"===e.CLASS_NAME?this.convertToMultiPolygon(e):"jsts.geom.GeometryCollection"===e.CLASS_NAME?this.convertToCollection(e):void 0},jsts.io.olParser.prototype.convertToPoint=function(e){return new ol.geom.Point([e.x,e.y])},jsts.io.olParser.prototype.convertToLineString=function(e){var t=e.points.map(function(e){return[e.x,e.y]},this);return new ol.geom.LineString(t)},jsts.io.olParser.prototype.convertToLinearRing=function(e){var t=e.points.map(function(e){return[e.x,e.y]},this);return new ol.geom.LinearRing(t)},jsts.io.olParser.prototype.convertToPolygon=function(e){var t,n=[];for(n.push(e.shell.points.map(function(e){return[e.x,e.y]},this)),t=0;t<e.holes.length;t++)n.push(e.holes[t].points.map(function(e){return[e.x,e.y]},this));return new ol.geom.Polygon(n)},jsts.io.olParser.prototype.convertToMultiPoint=function(e){var t,n=[];for(t=0;t<e.geometries.length;t++)n.push(this.convertToPoint(e.geometries[t]).getCoordinates());return new ol.geom.MultiPoint(n)},jsts.io.olParser.prototype.convertToMultiLineString=function(e){var t,n=[];for(t=0;t<e.geometries.length;t++)n.push(this.convertToLineString(e.geometries[t]).getCoordinates());return new ol.geom.MultiLineString(n)},jsts.io.olParser.prototype.convertToMultiPolygon=function(e){var t,n=[];for(t=0;t<e.geometries.length;t++)n.push(this.convertToPolygon(e.geometries[t]).getCoordinates());return new ol.geom.MultiPolygon(n)},jsts.io.olParser.prototype.convertToCollection=function(e){var t,n=[];for(t=0;t<e.geometries.length;t++){var o=e.geometries[t];n.push(this.write(o))}return new ol.geom.GeometryCollection(n)},function(){var e=jsts.index.bintree.Interval,t=jsts.index.bintree.Root,n=function(){this.root=new t,this.minExtent=1};n.ensureExtent=function(t,n){var o,i;return o=t.getMin(),i=t.getMax(),o!==i?t:(o===i&&(o-=n/2,i=o+n/2),new e(o,i))},n.prototype.depth=function(){return null!==this.root?this.root.depth():0},n.prototype.size=function(){return null!==this.root?this.root.size():0},n.prototype.nodeSize=function(){return null!==this.root?this.root.nodeSize():0},n.prototype.insert=function(e,t){this.collectStats(e);var o=n.ensureExtent(e,this.minExtent);this.root.insert(o,t)},n.prototype.remove=function(e,t){var o=n.ensureExtent(e,this.minExtent);return this.root.remove(o,t)},n.prototype.iterator=function(){var e=new javascript.util.ArrayList;return this.root.addAllItems(e),e.iterator()},n.prototype.query=function(){if(2!==arguments.length){var t=arguments[0];return!t instanceof e&&(t=new e(t,t)),this.queryInterval(t)}this.queryAndAdd(arguments[0],arguments[1])},n.prototype.queryInterval=function(e){var t=new javascript.util.ArrayList;return this.query(e,t),t},n.prototype.queryAndAdd=function(e,t){this.root.addAllItemsFromOverlapping(e,t)},n.prototype.collectStats=function(e){var t=e.getWidth();t<this.minExtent&&t>0&&(this.minExtent=t)},jsts.index.bintree.Bintree=n}(),jsts.algorithm.InteriorPointArea=function(e){this.factory,this.interiorPoint=null,this.maxWidth=0,this.factory=e.getFactory(),this.add(e)},jsts.algorithm.InteriorPointArea.avg=function(e,t){return(e+t)/2},jsts.algorithm.InteriorPointArea.prototype.getInteriorPoint=function(){return this.interiorPoint},jsts.algorithm.InteriorPointArea.prototype.add=function(e){if(e instanceof jsts.geom.Polygon)this.addPolygon(e);else if(e instanceof jsts.geom.GeometryCollection)for(var t=0;t<e.getNumGeometries();t++)this.add(e.getGeometryN(t))},jsts.algorithm.InteriorPointArea.prototype.addPolygon=function(e){if(!e.isEmpty()){var t,n=0,o=this.horizontalBisector(e);if(0==o.getLength())n=0,t=o.getCoordinate();else{var i=o.intersection(e),r=this.widestGeometry(i);
n=r.getEnvelopeInternal().getWidth(),t=this.centre(r.getEnvelopeInternal())}(null==this.interiorPoint||n>this.maxWidth)&&(this.interiorPoint=t,this.maxWidth=n)}},jsts.algorithm.InteriorPointArea.prototype.widestGeometry=function(e){if(e instanceof jsts.geom.GeometryCollection){var t=e;if(t.isEmpty())return t;for(var n=t.getGeometryN(0),o=1;o<t.getNumGeometries();o++)t.getGeometryN(o).getEnvelopeInternal().getWidth()>n.getEnvelopeInternal().getWidth()&&(n=t.getGeometryN(o));return n}if(e instanceof jsts.geom.Geometry)return e},jsts.algorithm.InteriorPointArea.prototype.horizontalBisector=function(e){var t=e.getEnvelopeInternal(),n=jsts.algorithm.SafeBisectorFinder.getBisectorY(e);return this.factory.createLineString([new jsts.geom.Coordinate(t.getMinX(),n),new jsts.geom.Coordinate(t.getMaxX(),n)])},jsts.algorithm.InteriorPointArea.prototype.centre=function(e){return new jsts.geom.Coordinate(jsts.algorithm.InteriorPointArea.avg(e.getMinX(),e.getMaxX()),jsts.algorithm.InteriorPointArea.avg(e.getMinY(),e.getMaxY()))},jsts.algorithm.SafeBisectorFinder=function(e){this.poly,this.centreY,this.hiY=Number.MAX_VALUE,this.loY=-Number.MAX_VALUE,this.poly=e,this.hiY=e.getEnvelopeInternal().getMaxY(),this.loY=e.getEnvelopeInternal().getMinY(),this.centreY=jsts.algorithm.InteriorPointArea.avg(this.loY,this.hiY)},jsts.algorithm.SafeBisectorFinder.getBisectorY=function(e){var t=new jsts.algorithm.SafeBisectorFinder(e);return t.getBisectorY()},jsts.algorithm.SafeBisectorFinder.prototype.getBisectorY=function(){this.process(this.poly.getExteriorRing());for(var e=0;e<this.poly.getNumInteriorRing();e++)this.process(this.poly.getInteriorRingN(e));var t=jsts.algorithm.InteriorPointArea.avg(this.hiY,this.loY);return t},jsts.algorithm.SafeBisectorFinder.prototype.process=function(e){for(var t=e.getCoordinateSequence(),n=0;n<t.length;n++){var o=t[n].y;this.updateInterval(o)}},jsts.algorithm.SafeBisectorFinder.prototype.updateInterval=function(e){e<=this.centreY?e>this.loY&&(this.loY=e):e>this.centreY&&e<this.hiY&&(this.hiY=e)},jsts.operation.buffer.BufferParameters=function(e,t,n,o){e&&this.setQuadrantSegments(e),t&&this.setEndCapStyle(t),n&&this.setJoinStyle(n),o&&this.setMitreLimit(o)},jsts.operation.buffer.BufferParameters.CAP_ROUND=1,jsts.operation.buffer.BufferParameters.CAP_FLAT=2,jsts.operation.buffer.BufferParameters.CAP_SQUARE=3,jsts.operation.buffer.BufferParameters.JOIN_ROUND=1,jsts.operation.buffer.BufferParameters.JOIN_MITRE=2,jsts.operation.buffer.BufferParameters.JOIN_BEVEL=3,jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS=8,jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT=5,jsts.operation.buffer.BufferParameters.prototype.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS,jsts.operation.buffer.BufferParameters.prototype.endCapStyle=jsts.operation.buffer.BufferParameters.CAP_ROUND,jsts.operation.buffer.BufferParameters.prototype.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_ROUND,jsts.operation.buffer.BufferParameters.prototype.mitreLimit=jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT,jsts.operation.buffer.BufferParameters.prototype._isSingleSided=!1,jsts.operation.buffer.BufferParameters.prototype.getQuadrantSegments=function(){return this.quadrantSegments},jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(e){this.quadrantSegments=e},jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(e){this.quadrantSegments=e,0===this.quadrantSegments&&(this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),e<=0&&(this.quadrantSegments=1),this.joinStyle!==jsts.operation.buffer.BufferParameters.JOIN_ROUND&&(this.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS)},jsts.operation.buffer.BufferParameters.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)},jsts.operation.buffer.BufferParameters.prototype.getEndCapStyle=function(){return this.endCapStyle},jsts.operation.buffer.BufferParameters.prototype.setEndCapStyle=function(e){this.endCapStyle=e},jsts.operation.buffer.BufferParameters.prototype.getJoinStyle=function(){return this.joinStyle},jsts.operation.buffer.BufferParameters.prototype.setJoinStyle=function(e){this.joinStyle=e},jsts.operation.buffer.BufferParameters.prototype.getMitreLimit=function(){return this.mitreLimit},jsts.operation.buffer.BufferParameters.prototype.setMitreLimit=function(e){this.mitreLimit=e},jsts.operation.buffer.BufferParameters.prototype.setSingleSided=function(e){this._isSingleSided=e},jsts.operation.buffer.BufferParameters.prototype.isSingleSided=function(){return this._isSingleSided},function(){jsts.geom.util.ShortCircuitedGeometryVisitor=function(){},jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.isDone_=!1,jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.applyTo=function(e){for(var t=0;t<e.getNumGeometries()&&!this.isDone_;t++){var n=e.getGeometryN(t);if(n instanceof jsts.geom.GeometryCollection)this.applyTo(n);else if(this.visit(n),this.isDone())return void(this.isDone_=!0)}},jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.visit=function(e){},jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.isDone=function(){}}(),function(){var e=jsts.geom.util.LinearComponentExtracter,t=jsts.algorithm.RectangleLineIntersector,n=jsts.algorithm.locate.SimplePointInAreaLocator,o=function(e){this.rectEnv=e};o.prototype=new jsts.geom.util.ShortCircuitedGeometryVisitor,o.constructor=o,o.prototype.rectEnv=null,o.prototype.intersects_=!1,o.prototype.intersects=function(){return this.intersects_},o.prototype.visit=function(e){var t=e.getEnvelopeInternal();if(this.rectEnv.intersects(t))return this.rectEnv.contains(t)?void(this.intersects_=!0):t.getMinX()>=this.rectEnv.getMinX()&&t.getMaxX()<=this.rectEnv.getMaxX()?void(this.intersects_=!0):t.getMinY()>=this.rectEnv.getMinY()&&t.getMaxY()<=this.rectEnv.getMaxY()?void(this.intersects_=!0):void 0},o.prototype.isDone=function(){return 1==this.intersects_};var i=function(e){this.rectSeq=e.getExteriorRing().getCoordinateSequence(),this.rectEnv=e.getEnvelopeInternal()};i.prototype=new jsts.geom.util.ShortCircuitedGeometryVisitor,i.constructor=i,i.prototype.rectSeq=null,i.prototype.rectEnv=null,i.prototype.containsPoint=!1,i.prototype.containsPoint=function(){return this.containsPoint_},i.prototype.visit=function(e){if(e instanceof jsts.geom.Polygon){var t=e.getEnvelopeInternal();if(this.rectEnv.intersects(t))for(var o=new jsts.geom.Coordinate,i=0;i<4;i++){var o=this.rectSeq[i];if(t.contains(o)&&n.containsPointInPolygon(o,e))return void(this.containsPoint_=!0)}}},i.prototype.isDone=function(){return 1==this.containsPoint_};var r=function(e){this.rectEnv=e.getEnvelopeInternal(),this.rectIntersector=new t(this.rectEnv)};r.prototype=new jsts.geom.util.ShortCircuitedGeometryVisitor,r.constructor=r,r.prototype.rectEnv=null,r.prototype.rectIntersector=null,r.prototype.hasIntersection=!1,r.prototype.p0=null,r.prototype.p1=null,r.prototype.intersects=function(){return this.hasIntersection},r.prototype.visit=function(t){var n=t.getEnvelopeInternal();if(this.rectEnv.intersects(n)){var o=e.getLines(t);this.checkIntersectionWithLineStrings(o)}},r.prototype.checkIntersectionWithLineStrings=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(this.checkIntersectionWithSegments(n),this.hasIntersection)return}},r.prototype.checkIntersectionWithSegments=function(e){for(var t=e.getCoordinateSequence(),n=1;n<t.length;n++)if(this.p0=t[n-1],this.p1=t[n],this.rectIntersector.intersects(this.p0,this.p1))return void(this.hasIntersection=!0)},r.prototype.isDone=function(){return 1==this.hasIntersection},jsts.operation.predicate.RectangleIntersects=function(e){this.rectangle=e,this.rectEnv=e.getEnvelopeInternal()},jsts.operation.predicate.RectangleIntersects.intersects=function(e,t){var n=new jsts.operation.predicate.RectangleIntersects(e);return n.intersects(t)},jsts.operation.predicate.RectangleIntersects.prototype.rectangle=null,jsts.operation.predicate.RectangleIntersects.prototype.rectEnv=null,jsts.operation.predicate.RectangleIntersects.prototype.intersects=function(e){if(!this.rectEnv.intersects(e.getEnvelopeInternal()))return!1;var t=new o(this.rectEnv);if(t.applyTo(e),t.intersects())return!0;var n=new i(this.rectangle);if(n.applyTo(e),n.containsPoint())return!0;var s=new r(this.rectangle);return s.applyTo(e),!!s.intersects()}}(),jsts.operation.buffer.BufferBuilder=function(e){this.bufParams=e,this.edgeList=new jsts.geomgraph.EdgeList},jsts.operation.buffer.BufferBuilder.depthDelta=function(e){var t=e.getLocation(0,jsts.geomgraph.Position.LEFT),n=e.getLocation(0,jsts.geomgraph.Position.RIGHT);return t===jsts.geom.Location.INTERIOR&&n===jsts.geom.Location.EXTERIOR?1:t===jsts.geom.Location.EXTERIOR&&n===jsts.geom.Location.INTERIOR?-1:0},jsts.operation.buffer.BufferBuilder.prototype.bufParams=null,jsts.operation.buffer.BufferBuilder.prototype.workingPrecisionModel=null,jsts.operation.buffer.BufferBuilder.prototype.workingNoder=null,jsts.operation.buffer.BufferBuilder.prototype.geomFact=null,jsts.operation.buffer.BufferBuilder.prototype.graph=null,jsts.operation.buffer.BufferBuilder.prototype.edgeList=null,jsts.operation.buffer.BufferBuilder.prototype.setWorkingPrecisionModel=function(e){this.workingPrecisionModel=e},jsts.operation.buffer.BufferBuilder.prototype.setNoder=function(e){this.workingNoder=e},jsts.operation.buffer.BufferBuilder.prototype.buffer=function(e,t){var n=this.workingPrecisionModel;null===n&&(n=e.getPrecisionModel()),this.geomFact=e.getFactory();var o=new jsts.operation.buffer.OffsetCurveBuilder(n,this.bufParams),i=new jsts.operation.buffer.OffsetCurveSetBuilder(e,t,o),r=i.getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this.graph=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory),this.graph.addEdges(this.edgeList.getEdges());var s=this.createSubgraphs(this.graph),a=new jsts.operation.overlay.PolygonBuilder(this.geomFact);this.buildSubgraphs(s,a);var l=a.getPolygons();if(l.size()<=0)return this.createEmptyResultGeometry();var c=this.geomFact.buildGeometry(l);return c},jsts.operation.buffer.BufferBuilder.prototype.getNoder=function(e){if(null!==this.workingNoder)return this.workingNoder;var t=new jsts.noding.MCIndexNoder,n=new jsts.algorithm.RobustLineIntersector;return n.setPrecisionModel(e),t.setSegmentIntersector(new jsts.noding.IntersectionAdder(n)),t},jsts.operation.buffer.BufferBuilder.prototype.computeNodedEdges=function(e,t){var n=this.getNoder(t);n.computeNodes(e);for(var o=n.getNodedSubstrings(),i=o.iterator();i.hasNext();){var r=i.next(),s=r.getData(),a=new jsts.geomgraph.Edge(r.getCoordinates(),new jsts.geomgraph.Label(s));this.insertUniqueEdge(a)}},jsts.operation.buffer.BufferBuilder.prototype.insertUniqueEdge=function(e){var t=this.edgeList.findEqualEdge(e);if(null!=t){var n=t.getLabel(),o=e.getLabel();t.isPointwiseEqual(e)||(o=new jsts.geomgraph.Label(e.getLabel()),o.flip()),n.merge(o);var i=jsts.operation.buffer.BufferBuilder.depthDelta(o),r=t.getDepthDelta(),s=r+i;t.setDepthDelta(s)}else this.edgeList.add(e),e.setDepthDelta(jsts.operation.buffer.BufferBuilder.depthDelta(e.getLabel()))},jsts.operation.buffer.BufferBuilder.prototype.createSubgraphs=function(e){for(var t=[],n=e.getNodes().iterator();n.hasNext();){var o=n.next();if(!o.isVisited()){var i=new jsts.operation.buffer.BufferSubgraph;i.create(o),t.push(i)}}var r=function(e,t){return e.compareTo(t)};return t.sort(r),t.reverse(),t},jsts.operation.buffer.BufferBuilder.prototype.buildSubgraphs=function(e,t){for(var n=[],o=0;o<e.length;o++){var i=e[o],r=i.getRightmostCoordinate(),s=new jsts.operation.buffer.SubgraphDepthLocater(n),a=s.getDepth(r);i.computeDepth(a),i.findResultEdges(),n.push(i),t.add(i.getDirectedEdges(),i.getNodes())}},jsts.operation.buffer.BufferBuilder.convertSegStrings=function(e){for(var t=new jsts.geom.GeometryFactory,n=new javascript.util.ArrayList;e.hasNext();){var o=e.next(),i=t.createLineString(o.getCoordinates());n.add(i)}return t.buildGeometry(n)},jsts.operation.buffer.BufferBuilder.prototype.createEmptyResultGeometry=function(){var e=this.geomFact.createPolygon(null,null);return e},jsts.noding.SegmentPointComparator=function(){},jsts.noding.SegmentPointComparator.compare=function(e,t,n){if(t.equals2D(n))return 0;var o=jsts.noding.SegmentPointComparator.relativeSign(t.x,n.x),i=jsts.noding.SegmentPointComparator.relativeSign(t.y,n.y);switch(e){case 0:return jsts.noding.SegmentPointComparator.compareValue(o,i);case 1:return jsts.noding.SegmentPointComparator.compareValue(i,o);case 2:return jsts.noding.SegmentPointComparator.compareValue(i,-o);case 3:return jsts.noding.SegmentPointComparator.compareValue(-o,i);case 4:return jsts.noding.SegmentPointComparator.compareValue(-o,-i);case 5:return jsts.noding.SegmentPointComparator.compareValue(-i,-o);case 6:return jsts.noding.SegmentPointComparator.compareValue(-i,o);case 7:return jsts.noding.SegmentPointComparator.compareValue(o,-i)}return 0},jsts.noding.SegmentPointComparator.relativeSign=function(e,t){return e<t?-1:e>t?1:0},jsts.noding.SegmentPointComparator.compareValue=function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0},jsts.operation.relate.RelateOp=function(){jsts.operation.GeometryGraphOperation.apply(this,arguments),this._relate=new jsts.operation.relate.RelateComputer(this.arg)},jsts.operation.relate.RelateOp.prototype=new jsts.operation.GeometryGraphOperation,jsts.operation.relate.RelateOp.relate=function(e,t,n){var o=new jsts.operation.relate.RelateOp(e,t,n),i=o.getIntersectionMatrix();return i},jsts.operation.relate.RelateOp.prototype._relate=null,jsts.operation.relate.RelateOp.prototype.getIntersectionMatrix=function(){return this._relate.computeIM()},jsts.index.chain.MonotoneChain=function(e,t,n,o){this.pts=e,this.start=t,this.end=n,this.context=o},jsts.index.chain.MonotoneChain.prototype.pts=null,jsts.index.chain.MonotoneChain.prototype.start=null,jsts.index.chain.MonotoneChain.prototype.end=null,jsts.index.chain.MonotoneChain.prototype.env=null,jsts.index.chain.MonotoneChain.prototype.context=null,jsts.index.chain.MonotoneChain.prototype.id=null,jsts.index.chain.MonotoneChain.prototype.setId=function(e){this.id=e},jsts.index.chain.MonotoneChain.prototype.getId=function(){return this.id},jsts.index.chain.MonotoneChain.prototype.getContext=function(){return this.context},jsts.index.chain.MonotoneChain.prototype.getEnvelope=function(){if(null==this.env){var e=this.pts[this.start],t=this.pts[this.end];this.env=new jsts.geom.Envelope(e,t)}return this.env},jsts.index.chain.MonotoneChain.prototype.getStartIndex=function(){return this.start},jsts.index.chain.MonotoneChain.prototype.getEndIndex=function(){return this.end},jsts.index.chain.MonotoneChain.prototype.getLineSegment=function(e,t){t.p0=this.pts[e],t.p1=this.pts[e+1]},jsts.index.chain.MonotoneChain.prototype.getCoordinates=function(){for(var e=[],t=0,n=this.start;n<=this.end;n++)e[t++]=this.pts[n];return e},jsts.index.chain.MonotoneChain.prototype.select=function(e,t){this.computeSelect2(e,this.start,this.end,t)},jsts.index.chain.MonotoneChain.prototype.computeSelect2=function(e,t,n,o){var i=this.pts[t],r=this.pts[n];if(o.tempEnv1.init(i,r),n-t===1)return void o.select(this,t);if(e.intersects(o.tempEnv1)){var s=parseInt((t+n)/2);t<s&&this.computeSelect2(e,t,s,o),s<n&&this.computeSelect2(e,s,n,o)}},jsts.index.chain.MonotoneChain.prototype.computeOverlaps=function(e,t){return 6===arguments.length?this.computeOverlaps2.apply(this,arguments):void this.computeOverlaps2(this.start,this.end,e,e.start,e.end,t)},jsts.index.chain.MonotoneChain.prototype.computeOverlaps2=function(e,t,n,o,i,r){var s=this.pts[e],a=this.pts[t],l=n.pts[o],c=n.pts[i];if(t-e===1&&i-o===1)return void r.overlap(this,e,n,o);if(r.tempEnv1.init(s,a),r.tempEnv2.init(l,c),r.tempEnv1.intersects(r.tempEnv2)){var u=parseInt((e+t)/2),d=parseInt((o+i)/2);e<u&&(o<d&&this.computeOverlaps2(e,u,n,o,d,r),d<i&&this.computeOverlaps2(e,u,n,d,i,r)),u<t&&(o<d&&this.computeOverlaps2(u,t,n,o,d,r),d<i&&this.computeOverlaps2(u,t,n,d,i,r))}},function(){var e=jsts.geom.Location,t=jsts.geom.Dimension;jsts.geom.IntersectionMatrix=function(n){var o=n;void 0===n||null===n?(this.matrix=[[],[],[]],this.setAll(t.FALSE)):"string"==typeof n?this.set(n):o instanceof jsts.geom.IntersectionMatrix&&(this.matrix[e.INTERIOR][e.INTERIOR]=o.matrix[e.INTERIOR][e.INTERIOR],this.matrix[e.INTERIOR][e.BOUNDARY]=o.matrix[e.INTERIOR][e.BOUNDARY],this.matrix[e.INTERIOR][e.EXTERIOR]=o.matrix[e.INTERIOR][e.EXTERIOR],this.matrix[e.BOUNDARY][e.INTERIOR]=o.matrix[e.BOUNDARY][e.INTERIOR],this.matrix[e.BOUNDARY][e.BOUNDARY]=o.matrix[e.BOUNDARY][e.BOUNDARY],this.matrix[e.BOUNDARY][e.EXTERIOR]=o.matrix[e.BOUNDARY][e.EXTERIOR],this.matrix[e.EXTERIOR][e.INTERIOR]=o.matrix[e.EXTERIOR][e.INTERIOR],this.matrix[e.EXTERIOR][e.BOUNDARY]=o.matrix[e.EXTERIOR][e.BOUNDARY],this.matrix[e.EXTERIOR][e.EXTERIOR]=o.matrix[e.EXTERIOR][e.EXTERIOR])},jsts.geom.IntersectionMatrix.prototype.matrix=null,jsts.geom.IntersectionMatrix.prototype.add=function(e){var t,n;for(t=0;t<3;t++)for(n=0;n<3;n++)this.setAtLeast(t,n,e.get(t,n))},jsts.geom.IntersectionMatrix.matches=function(e,n){return"string"==typeof e?jsts.geom.IntersectionMatrix.matches2.call(this,arguments):"*"===n||("T"===n&&(e>=0||e===t.TRUE)||("F"===n&&e===t.FALSE||("0"===n&&e===t.P||("1"===n&&e===t.L||"2"===n&&e===t.A))))},jsts.geom.IntersectionMatrix.matches2=function(e,t){var n=new jsts.geom.IntersectionMatrix(e);return n.matches(t)},jsts.geom.IntersectionMatrix.prototype.set=function(e,t,n){return"string"==typeof e?void this.set2(e):void(this.matrix[e][t]=n)},jsts.geom.IntersectionMatrix.prototype.set2=function(e){this.matrix=[[],[],[]],this.setAll(t.FALSE);for(var n=0;n<e.length;n++){var o=n%3,i=Math.floor(n/3);this.matrix[i][o]=t.toDimensionValue(e.charAt(n))}},jsts.geom.IntersectionMatrix.prototype.setAtLeast=function(e,t,n){return 1===arguments.length?void this.setAtLeast2(arguments[0]):void(this.matrix[e][t]<n&&(this.matrix[e][t]=n))},jsts.geom.IntersectionMatrix.prototype.setAtLeastIfValid=function(e,t,n){e>=0&&t>=0&&this.setAtLeast(e,t,n)},jsts.geom.IntersectionMatrix.prototype.setAtLeast2=function(e){var n;for(n=0;n<e.length;n++){var o=parseInt(n/3),i=parseInt(n%3);this.setAtLeast(o,i,t.toDimensionValue(e.charAt(n)))}},jsts.geom.IntersectionMatrix.prototype.setAll=function(e){var t,n;for(t=0;t<3;t++)for(n=0;n<3;n++)this.matrix[t][n]=e},jsts.geom.IntersectionMatrix.prototype.get=function(e,t){return this.matrix[e][t]},jsts.geom.IntersectionMatrix.prototype.isDisjoint=function(){return this.matrix[e.INTERIOR][e.INTERIOR]===t.FALSE&&this.matrix[e.INTERIOR][e.BOUNDARY]===t.FALSE&&this.matrix[e.BOUNDARY][e.INTERIOR]===t.FALSE&&this.matrix[e.BOUNDARY][e.BOUNDARY]===t.FALSE},jsts.geom.IntersectionMatrix.prototype.isIntersects=function(){return!this.isDisjoint()},jsts.geom.IntersectionMatrix.prototype.isTouches=function(n,o){return n>o?this.isTouches(o,n):(n==t.A&&o==t.A||n==t.L&&o==t.L||n==t.L&&o==t.A||n==t.P&&o==t.A||n==t.P&&o==t.L)&&(this.matrix[e.INTERIOR][e.INTERIOR]===t.FALSE&&(jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.BOUNDARY][e.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.BOUNDARY][e.BOUNDARY],"T")))},jsts.geom.IntersectionMatrix.prototype.isCrosses=function(n,o){return n==t.P&&o==t.L||n==t.P&&o==t.A||n==t.L&&o==t.A?jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.EXTERIOR],"T"):n==t.L&&o==t.P||n==t.A&&o==t.P||n==t.A&&o==t.L?jsts.geom.IntersectionMatrix.matches(matrix[e.INTERIOR][e.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[e.EXTERIOR][e.INTERIOR],"T"):n===t.L&&o===t.L&&0===this.matrix[e.INTERIOR][e.INTERIOR]},jsts.geom.IntersectionMatrix.prototype.isWithin=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.INTERIOR],"T")&&this.matrix[e.INTERIOR][e.EXTERIOR]==t.FALSE&&this.matrix[e.BOUNDARY][e.EXTERIOR]==t.FALSE},jsts.geom.IntersectionMatrix.prototype.isContains=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.INTERIOR],"T")&&this.matrix[e.EXTERIOR][e.INTERIOR]==t.FALSE&&this.matrix[e.EXTERIOR][e.BOUNDARY]==t.FALSE},jsts.geom.IntersectionMatrix.prototype.isCovers=function(){var n=jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.BOUNDARY][e.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.BOUNDARY][e.BOUNDARY],"T");return n&&this.matrix[e.EXTERIOR][e.INTERIOR]==t.FALSE&&this.matrix[e.EXTERIOR][e.BOUNDARY]==t.FALSE},jsts.geom.IntersectionMatrix.prototype.isCoveredBy=function(){var n=jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.BOUNDARY][e.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[e.BOUNDARY][e.BOUNDARY],"T");return n&&this.matrix[e.INTERIOR][e.EXTERIOR]===t.FALSE&&this.matrix[e.BOUNDARY][e.EXTERIOR]===t.FALSE},jsts.geom.IntersectionMatrix.prototype.isEquals=function(n,o){return n===o&&(jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.INTERIOR],"T")&&this.matrix[e.EXTERIOR][e.INTERIOR]===t.FALSE&&this.matrix[e.INTERIOR][e.EXTERIOR]===t.FALSE&&this.matrix[e.EXTERIOR][e.BOUNDARY]===t.FALSE&&this.matrix[e.BOUNDARY][e.EXTERIOR]===t.FALSE)},jsts.geom.IntersectionMatrix.prototype.isOverlaps=function(n,o){return n==t.P&&o===t.P||n==t.A&&o===t.A?jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.EXTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[e.EXTERIOR][e.INTERIOR],"T"):n===t.L&&o===t.L&&(1==this.matrix[e.INTERIOR][e.INTERIOR]&&jsts.geom.IntersectionMatrix.matches(this.matrix[e.INTERIOR][e.EXTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[e.EXTERIOR][e.INTERIOR],"T"))},jsts.geom.IntersectionMatrix.prototype.matches=function(e){if(9!=e.length)throw new jsts.error.IllegalArgumentException("Should be length 9: "+e);for(var t=0;t<3;t++)for(var n=0;n<3;n++)if(!jsts.geom.IntersectionMatrix.matches(this.matrix[t][n],e.charAt(3*t+n)))return!1;return!0},jsts.geom.IntersectionMatrix.prototype.transpose=function(){var e=matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=e,e=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=e,e=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=e,this},jsts.geom.IntersectionMatrix.prototype.toString=function(){var e,n,o="";for(e=0;e<3;e++)for(n=0;n<3;n++)o+=t.toDimensionSymbol(this.matrix[e][n]);return o}}(),jsts.triangulate.quadedge.LastFoundQuadEdgeLocator=function(e){this.subdiv=e,this.lastEdge=null,this.init()},jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.init=function(){this.lastEdge=this.findEdge()},jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.findEdge=function(){var e=this.subdiv.getEdges();return e[0]},jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.locate=function(e){this.lastEdge.isLive()||this.init();var t=this.subdiv.locateFromEdge(e,this.lastEdge);return this.lastEdge=t,t},jsts.noding.SegmentNodeList=function(e){this.nodeMap=new javascript.util.TreeMap,this.edge=e},jsts.noding.SegmentNodeList.prototype.nodeMap=null;jsts.noding.SegmentNodeList.prototype.iterator=function(){return this.nodeMap.values().iterator()};jsts.noding.SegmentNodeList.prototype.edge=null,jsts.noding.SegmentNodeList.prototype.getEdge=function(){return this.edge},jsts.noding.SegmentNodeList.prototype.add=function(e,t){var n=new jsts.noding.SegmentNode(this.edge,e,t,this.edge.getSegmentOctant(t)),o=this.nodeMap.get(n);return null!==o?(jsts.util.Assert.isTrue(o.coord.equals2D(e),"Found equal nodes with different coordinates"),o):(this.nodeMap.put(n,n),n)},jsts.noding.SegmentNodeList.prototype.addEndpoints=function(){var e=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(e),e)},jsts.noding.SegmentNodeList.prototype.addCollapsedNodes=function(){var e=[];this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var t=0;t<e.length;t++){var n=e[t];this.add(this.edge.getCoordinate(n),n)}},jsts.noding.SegmentNodeList.prototype.findCollapsesFromExistingVertices=function(e){for(var t=0;t<this.edge.size()-2;t++){var n=this.edge.getCoordinate(t),o=(this.edge.getCoordinate(t+1),this.edge.getCoordinate(t+2));n.equals2D(o)&&e.push(t+1)}},jsts.noding.SegmentNodeList.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=[null],n=this.iterator(),o=n.next();n.hasNext();){var i=n.next(),r=this.findCollapseIndex(o,i,t);r&&e.push(t[0]),o=i}},jsts.noding.SegmentNodeList.prototype.findCollapseIndex=function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var o=t.segmentIndex-e.segmentIndex;return t.isInterior()||o--,1===o&&(n[0]=e.segmentIndex+1,!0)},jsts.noding.SegmentNodeList.prototype.addSplitEdges=function(e){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),n=t.next();t.hasNext();){var o=t.next(),i=this.createSplitEdge(n,o);e.add(i),n=o}},jsts.noding.SegmentNodeList.prototype.checkSplitEdgesCorrectness=function(e){var t=edge.getCoordinates(),n=e[0],o=n.getCoordinate(0);if(!o.equals2D(t[0]))throw new Error("bad split edge start point at "+o);var i=e[e.length-1],r=i.getCoordinates(),s=r[r.length-1];if(!s.equals2D(t[t.length-1]))throw new Error("bad split edge end point at "+s)},jsts.noding.SegmentNodeList.prototype.createSplitEdge=function(e,t){var n=t.segmentIndex-e.segmentIndex+2,o=this.edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(o);i||n--;var r=[],s=0;r[s++]=new jsts.geom.Coordinate(e.coord);for(var a=e.segmentIndex+1;a<=t.segmentIndex;a++)r[s++]=this.edge.getCoordinate(a);return i&&(r[s]=t.coord),new jsts.noding.NodedSegmentString(r,this.edge.getData())},jsts.io.WKTWriter=function(){this.parser=new jsts.io.WKTParser(this.geometryFactory)},jsts.io.WKTWriter.prototype.write=function(e){var t=this.parser.write(e);return t},jsts.io.WKTWriter.toLineString=function(e,t){if(2!==arguments.length)throw new jsts.error.NotImplementedError;return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"},jsts.operation.linemerge.LineMerger=function(){this.graph=new jsts.operation.linemerge.LineMergeGraph,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null},jsts.operation.linemerge.LineMerger.prototype.addGeometry=function(e){var t=this,n=new jsts.geom.GeometryComponentFilter;n.filter=function(e){e instanceof jsts.geom.LineString&&t.addLineString(e)},e.apply(n)},jsts.operation.linemerge.LineMerger.prototype.addCollection=function(e){this.mergedLineStrings=null;for(var t=0;t<e.getNumGeometries();++t){var n=e.getGeometryN(t);this.addGeometry(n)}},jsts.operation.linemerge.LineMerger.prototype.addLineString=function(e){null==this.factory&&(this.factory=e.getFactory()),this.graph.addEdge(e)},jsts.operation.linemerge.LineMerger.prototype.merge=function(){if(null==this.mergedLineStrings){jsts.planargraph.GraphComponent.setMarked(this.graph.nodeIterator(),!1),jsts.planargraph.GraphComponent.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=[],this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=[];for(var e=0;e<this.edgeStrings.length;++e){var t=this.edgeStrings[e];this.mergedLineStrings.push(t.toLineString())}}},jsts.operation.linemerge.LineMerger.prototype.buildEdgeStringsForObviousStartNodes=function(){this.buildEdgeStringsForNonDegree2Nodes()},jsts.operation.linemerge.LineMerger.prototype.buildEdgeStringsForIsolatedLoops=function(){this.buildEdgeStringsForUnprocessedNodes()},jsts.operation.linemerge.LineMerger.prototype.buildEdgeStringsForUnprocessedNodes=function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();t.isMarked()||(jsts.util.Assert.isTrue(2==t.getDegree()),this.buildEdgeStringsStartingAt(t),t.setMarked(!0))}},jsts.operation.linemerge.LineMerger.prototype.buildEdgeStringsForNonDegree2Nodes=function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();2!=t.getDegree()&&(this.buildEdgeStringsStartingAt(t),t.setMarked(!0))}},jsts.operation.linemerge.LineMerger.prototype.buildEdgeStringsStartingAt=function(e){for(var t=e.getOutEdges().iterator();t.hasNext();){var n=t.next();n.getEdge().isMarked()||this.edgeStrings.push(this.buildEdgeStringStartingWith(n))}},jsts.operation.linemerge.LineMerger.prototype.buildEdgeStringStartingWith=function(e){var t=new jsts.operation.linemerge.EdgeString(this.factory),n=e;do t.add(n),n.getEdge().setMarked(!0),n=n.getNext();while(null!=n&&n!=e);return t},jsts.operation.linemerge.LineMerger.prototype.getMergedLineStrings=function(){return this.merge(),this.mergedLineStrings},jsts.io.WKTReader=function(e){this.geometryFactory=e||new jsts.geom.GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new jsts.io.WKTParser(this.geometryFactory)},jsts.io.WKTReader.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===jsts.geom.PrecisionModel.FIXED&&this.reducePrecision(t),t},jsts.io.WKTReader.prototype.reducePrecision=function(e){var t,n;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(t=0,n=e.points.length;t<n;t++)this.precisionModel.makePrecise(e.points[t]);else if(e.geometries)for(t=0,n=e.geometries.length;t<n;t++)this.reducePrecision(e.geometries[t])},jsts.triangulate.quadedge.QuadEdgeSubdivision=function(e,t){this.tolerance=t,this.edgeCoincidenceTolerance=t/jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR,this.visitedKey=0,this.quadEdges=[],this.startingEdge,this.tolerance,this.edgeCoincidenceTolerance,this.frameEnv,this.locator=null,this.seg=new jsts.geom.LineSegment,this.triEdges=new Array(3),this.frameVertex=new Array(3),this.createFrame(e),this.startingEdge=this.initSubdiv(),this.locator=new jsts.triangulate.quadedge.LastFoundQuadEdgeLocator(this)},jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR=1e3,jsts.triangulate.quadedge.QuadEdgeSubdivision.getTriangleEdges=function(e,t){if(t[0]=e,t[1]=t[0].lNext(),t[2]=t[1].lNext(),t[2].lNext()!=t[0])throw new jsts.IllegalArgumentError("Edges do not form a triangle")},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.createFrame=function(e){var t,n,o;t=e.getWidth(),n=e.getHeight(),o=0,o=t>n?10*t:10*n,this.frameVertex[0]=new jsts.triangulate.quadedge.Vertex((e.getMaxX()+e.getMinX())/2,e.getMaxY()+o),this.frameVertex[1]=new jsts.triangulate.quadedge.Vertex(e.getMinX()-o,e.getMinY()-o),this.frameVertex[2]=new jsts.triangulate.quadedge.Vertex(e.getMaxX()+o,e.getMinY()-o),this.frameEnv=new jsts.geom.Envelope(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.initSubdiv=function(){var e,t,n;return e=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),t=this.makeEdge(this.frameVertex[1],this.frameVertex[2]),jsts.triangulate.quadedge.QuadEdge.splice(e.sym(),t),n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]),jsts.triangulate.quadedge.QuadEdge.splice(t.sym(),n),jsts.triangulate.quadedge.QuadEdge.splice(n.sym(),e),e},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTolerance=function(){return this.tolerance},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEnvelope=function(){return new jsts.geom.Envelope(this.frameEnv);
},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdges=function(){return arguments.length>0?this.getEdgesByFactory(arguments[0]):this.quadEdges},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.setLocator=function(e){this.locator=e},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.makeEdge=function(e,t){var n=jsts.triangulate.quadedge.QuadEdge.makeEdge(e,t);return this.quadEdges.push(n),n},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.connect=function(e,t){var n=jsts.triangulate.quadedge.QuadEdge.connect(e,t);return this.quadEdges.push(n),n},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.delete_jsts=function(e){jsts.triangulate.quadedge.QuadEdge.splice(e,e.oPrev()),jsts.triangulate.quadedge.QuadEdge.splice(e.sym(),e.sym().oPrev());var t,n,o;e.eSym=e.sym(),n=e.rot,o=e.rot.sym();var i=this.quadEdges.indexOf(e);i!==-1&&this.quadEdges.splice(i,1),i=this.quadEdges.indexOf(t),i!==-1&&this.quadEdges.splice(i,1),i=this.quadEdges.indexOf(n),i!==-1&&this.quadEdges.splice(i,1),i=this.quadEdges.indexOf(o),i!==-1&&this.quadEdges.splice(i,1),e.delete_jsts(),t.delete_jsts(),n.delete_jsts(),o.delete_jsts()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateFromEdge=function(e,t){var n,o=0,i=this.quadEdges.length;for(n=t;;){if(o++,o>i)throw new jsts.error.LocateFailureError(n.toLineSegment());if(e.equals(n.orig())||e.equals(n.dest()))break;if(e.rightOf(n))n=n.sym();else if(e.rightOf(n.oNext())){if(e.rightOf(n.dPrev()))break;n=n.dPrev()}else n=n.oNext()}return n},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locate=function(){return 1===arguments.length?arguments[0]instanceof jsts.triangulate.quadedge.Vertex?this.locateByVertex(arguments[0]):this.locateByCoordinate(arguments[0]):this.locateByCoordinates(arguments[0],arguments[1])},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByVertex=function(e){return this.locator.locate(e)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByCoordinate=function(e){return this.locator.locate(new jsts.triangulate.quadedge.Vertex(e))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByCoordinates=function(e,t){var n,o,i,n=this.locator.locate(new jsts.triangulate.quadedge.Vertex(e));if(null===n)return null;o=n,n.dest().getCoordinate().equals2D(e)&&(o=n.sym()),i=o;do{if(i.dest().getCoordinate().equals2D(t))return i;i=i.oNext()}while(i!=o);return null},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.insertSite=function(e){var t,n,o;if(t=this.locate(e),e.equals(t.orig(),this.tolerance)||e.equals(t.dest(),this.tolerance))return t;n=this.makeEdge(t.orig(),e),jsts.triangulate.quadedge.QuadEdge.splice(n,t),o=n;do n=this.connect(t,n.sym()),t=n.oPrev();while(t.lNext()!=o);return o},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameEdge=function(e){return!(!this.isFrameVertex(e.orig())&&!this.isFrameVertex(e.dest()))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameBorderEdge=function(e){var t,n,o,i;return t=new Array(3),this.getTriangleEdges(e,t),n=new Array(3),this.getTriangleEdges(e.sym(),n),o=e.lNext().dest(),!!this.isFrameVertex(o)||(i=e.sym().lNext().dest(),!!this.isFrameVertex(i))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameVertex=function(e){return!!e.equals(this.frameVertex[0])||(!!e.equals(this.frameVertex[1])||!!e.equals(this.frameVertex[2]))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isOnEdge=function(e,t){this.seg.setCoordinates(e.orig().getCoordinate(),e.dest().getCoordinate());var n=this.seg.distance(t);return n<this.edgeCoincidenceTolerance},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isVertexOfEdge=function(e,t){return!(!t.equals(e.orig(),this.tolerance)&&!t.equals(e.dest(),this.tolerance))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertices=function(e){var t,n,o,i,r,s=[];for(t=0,n=this.quadEdges.length,t;t<n;t++)o=this.quadEdges[t],i=o.orig(),!e&&this.isFrameVertex(i)||s.push(i),r=o.dest(),!e&&this.isFrameVertex(r)||s.push(r);return s},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertexUniqueEdges=function(e){var t,n,o,i,r,s,a,l;for(t=[],n=[],o=0,i=this.quadEdges.length,o;o<i;o++)r=this.quadEdges[o],s=r.orig(),n.indexOf(s)===-1&&(n.push(s),!e&&this.isFrameVertex(s)||t.push(r)),a=r.sym(),l=a.orig(),n.indexOf(l)===-1&&(n.push(l),!e&&this.isFrameVertex(l)||t.push(a));return t},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getPrimaryEdges=function(e){this.visitedKey++;var t,n,o,i,r;for(t=[],n=[],n.push(this.startingEdge),o=[];n.length>0;)i=n.pop(),o.indexOf(i)===-1&&(r=i.getPrimary(),!e&&this.isFrameEdge(r)||t.push(r),n.push(i.oNext()),n.push(i.sym().oNext()),o.push(i),o.push(i.sym()));return t},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.visitTriangles=function(e,t){this.visitedKey++;var n,o,i,r;for(n=[],n.push(this.startingEdge),o=[];n.length>0;)i=n.pop(),o.indexOf(i)===-1&&(r=this.fetchTriangleToVisit(i,n,t,o),null!==r&&e.visit(r))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.fetchTriangleToVisit=function(e,t,n,o){var i,r,s,a;i=e,r=0,s=!1;do this.triEdges[r]=i,this.isFrameEdge(i)&&(s=!0),a=i.sym(),o.indexOf(a)===-1&&t.push(a),o.push(i),r++,i=i.lNext();while(i!==e);return s&&!n?null:this.triEdges},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleEdges=function(e){var t=new jsts.triangulate.quadedge.TriangleEdgesListVisitor;return this.visitTriangles(t,e),t.getTriangleEdges()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleVertices=function(e){var t=new TriangleVertexListVisitor;return this.visitTriangles(t,e),t.getTriangleVertices()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleCoordinates=function(e){var t=new jsts.triangulate.quadedge.TriangleCoordinatesVisitor;return this.visitTriangles(t,e),t.getTriangles()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdgesByFactory=function(e){var t,n,o,i,r,s;for(t=this.getPrimaryEdges(!1),n=[],o=0,i=t.length,o;o<i;o++)r=t[o],s=[],s[0]=r.orig().getCoordinate(),s[1]=r.dest().getCoordinate(),n[o]=e.createLineString(s);return e.createMultiLineString(n)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangles=function(e){var t,n,o,i,r;for(t=this.getTriangleCoordinates(!1),n=new Array(t.length),i=0,r=t.length,i;i<r;i++)o=t[i],n[i]=e.createPolygon(e.createLinearRing(o,null));return e.createGeometryCollection(n)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiDiagram=function(e){var t=this.getVoronoiCellPolygons(e);return e.createGeometryCollection(t)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygons=function(e){this.visitTriangles(new jsts.triangulate.quadedge.TriangleCircumcentreVisitor,!0);var t,n,o,i,r;for(t=[],n=this.getVertexUniqueEdges(!1),o=0,i=n.length,o;o<i;o++)r=n[o],t.push(this.getVoronoiCellPolygon(r,e));return t},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygon=function(e,t){var n,o,i,r,s;n=[],startQE=e;do o=e.rot.orig().getCoordinate(),n.push(o),e=e.oPrev();while(e!==startQE);return i=new jsts.geom.CoordinateList([],(!1)),i.add(n,!1),i.closeRing(),i.size()<4&&i.add(i.get(i.size()-1),!0),r=t.createPolygon(t.createLinearRing(i.toArray()),null),s=startQE.orig(),r},jsts.triangulate.quadedge.TriangleCircumcentreVisitor=function(){},jsts.triangulate.quadedge.TriangleCircumcentreVisitor.prototype.visit=function(e){var t,n,o,i,r,s;for(t=e[0].orig().getCoordinate(),n=e[1].orig().getCoordinate(),o=e[2].orig().getCoordinate(),i=jsts.geom.Triangle.circumcentre(t,n,o),r=new jsts.triangulate.quadedge.Vertex(i),s=0;s<3;s++)e[s].rot.setOrig(r)},jsts.triangulate.quadedge.TriangleEdgesListVisitor=function(){this.triList=[]},jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.visit=function(e){var t=e.concat();this.triList.push(t)},jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.getTriangleEdges=function(){return this.triList},jsts.triangulate.quadedge.TriangleVertexListVisitor=function(){this.triList=[]},jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.visit=function(e){var t=[];t.push(trieEdges[0].orig()),t.push(trieEdges[1].orig()),t.push(trieEdges[2].orig()),this.triList.push(t)},jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.getTriangleVertices=function(){return this.triList},jsts.triangulate.quadedge.TriangleCoordinatesVisitor=function(){this.coordList=new jsts.geom.CoordinateList([],(!1)),this.triCoords=[]},jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.visit=function(e){this.coordList=new jsts.geom.CoordinateList([],(!1));var t,n,o=0;for(o;o<3;o++)t=e[o].orig(),this.coordList.add(t.getCoordinate());if(this.coordList.size()>0){if(this.coordList.closeRing(),n=this.coordList.toArray(),4!==n.length)return;this.triCoords.push(n)}},jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.getTriangles=function(){return this.triCoords},jsts.operation.relate.EdgeEndBundle=function(){this.edgeEnds=[];var e=arguments[0]instanceof jsts.geomgraph.EdgeEnd?arguments[0]:arguments[1],t=e.getEdge(),n=e.getCoordinate(),o=e.getDirectedCoordinate(),i=new jsts.geomgraph.Label(e.getLabel());jsts.geomgraph.EdgeEnd.call(this,t,n,o,i),this.insert(e)},jsts.operation.relate.EdgeEndBundle.prototype=new jsts.geomgraph.EdgeEnd,jsts.operation.relate.EdgeEndBundle.prototype.edgeEnds=null,jsts.operation.relate.EdgeEndBundle.prototype.getLabel=function(){return this.label},jsts.operation.relate.EdgeEndBundle.prototype.getEdgeEnds=function(){return this.edgeEnds},jsts.operation.relate.EdgeEndBundle.prototype.insert=function(e){this.edgeEnds.push(e)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabel=function(e){for(var t=!1,n=0;n<this.edgeEnds.length;n++){var o=this.edgeEnds[n];o.getLabel().isArea()&&(t=!0)}t?this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE):this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE);for(var n=0;n<2;n++)this.computeLabelOn(n,e),t&&this.computeLabelSides(n)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabelOn=function(e,t){for(var n=0,o=!1,i=0;i<this.edgeEnds.length;i++){var r=this.edgeEnds[i],s=r.getLabel().getLocation(e);s==jsts.geom.Location.BOUNDARY&&n++,s==jsts.geom.Location.INTERIOR&&(o=!0)}var s=jsts.geom.Location.NONE;o&&(s=jsts.geom.Location.INTERIOR),n>0&&(s=jsts.geomgraph.GeometryGraph.determineBoundary(t,n)),this.label.setLocation(e,s)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSides=function(e){this.computeLabelSide(e,jsts.geomgraph.Position.LEFT),this.computeLabelSide(e,jsts.geomgraph.Position.RIGHT)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSide=function(e,t){for(var n=0;n<this.edgeEnds.length;n++){var o=this.edgeEnds[n];if(o.getLabel().isArea()){var i=o.getLabel().getLocation(e,t);if(i===jsts.geom.Location.INTERIOR)return void this.label.setLocation(e,t,jsts.geom.Location.INTERIOR);i===jsts.geom.Location.EXTERIOR&&this.label.setLocation(e,t,jsts.geom.Location.EXTERIOR)}}},jsts.operation.relate.EdgeEndBundle.prototype.updateIM=function(e){jsts.geomgraph.Edge.updateIM(this.label,e)},jsts.index.kdtree.KdTree=function(e){var t=0;void 0!==e&&(t=e),this.root=null,this.last=null,this.numberOfNodes=0,this.tolerance=t},jsts.index.kdtree.KdTree.prototype.insert=function(){return 1===arguments.length?this.insertCoordinate.apply(this,arguments[0]):this.insertWithData.apply(this,arguments[0],arguments[1])},jsts.index.kdtree.KdTree.prototype.insertCoordinate=function(e){return this.insertWithData(e,null)},jsts.index.kdtree.KdTree.prototype.insertWithData=function(e,t){if(null===this.root)return this.root=new jsts.index.kdtree.KdNode(e,t),this.root;for(var n=this.root,o=this.root,i=!0,r=!0;n!==last;){if(r=i?e.x<n.getX():e.y<n.getY(),o=n,n=r?n.getLeft():n.getRight(),null!==n){var s=e.distance(n.getCoordinate())<=this.tolerance;if(s)return n.increment(),n}i=!i}this.numberOfNodes=numberOfNodes+1;var a=new jsts.index.kdtree.KdNode(e,t);return a.setLeft(this.last),a.setRight(this.last),r?o.setLeft(a):o.setRight(a),a},jsts.index.kdtree.KdTree.prototype.queryNode=function(e,t,n,o,i){if(e!==t){var r,s,a;o?(r=n.getMinX(),s=n.getMaxX(),a=e.getX()):(r=n.getMinY(),s=n.getMaxY(),a=e.getY());var l=r<a,c=a<=s;l&&this.queryNode(e.getLeft(),t,n,!o,i),n.contains(e.getCoordinate())&&i.add(e),c&&this.queryNode(e.getRight(),t,n,!o,i)}},jsts.index.kdtree.KdTree.prototype.query=function(){return 1===arguments.length?this.queryByEnvelope.apply(this,arguments[0]):this.queryWithArray.apply(this,arguments[0],arguments[1])},jsts.index.kdtree.KdTree.prototype.queryByEnvelope=function(e){var t=[];return this.queryNode(this.root,this.last,e,!0,t),t},jsts.index.kdtree.KdTree.prototype.queryWithArray=function(e,t){this.queryNode(this.root,this.last,e,!0,t)},jsts.geom.Triangle=function(e,t,n){this.p0=e,this.p1=t,this.p2=n},jsts.geom.Triangle.isAcute=function(e,t,n){return!!jsts.algorithm.Angle.isAcute(e,t,n)&&(!!jsts.algorithm.Angle.isAcute(t,n,e)&&!!jsts.algorithm.Angle.isAcute(n,e,t))},jsts.geom.Triangle.perpendicularBisector=function(e,t){var n,o,i,r;return n=t.x-e.x,o=t.y-e.y,i=new jsts.algorithm.HCoordinate(e.x+n/2,e.y+o/2,1),r=new jsts.algorithm.HCoordinate(e.x-o+n/2,e.y+n+o/2,1),new jsts.algorithm.HCoordinate(i,r)},jsts.geom.Triangle.circumcentre=function(e,t,n){var o,i,r,s,a,l,c,u,d,p,g;return o=n.x,i=n.y,r=e.x-o,s=e.y-i,a=t.x-o,l=t.y-i,c=2*jsts.geom.Triangle.det(r,s,a,l),u=jsts.geom.Triangle.det(s,r*r+s*s,l,a*a+l*l),d=jsts.geom.Triangle.det(r,r*r+s*s,a,a*a+l*l),p=o-u/c,g=i+d/c,new jsts.geom.Coordinate(p,g)},jsts.geom.Triangle.det=function(e,t,n,o){return e*o-t*n},jsts.geom.Triangle.inCentre=function(e,t,n){var o,i,r,s,a,l;return o=t.distance(n),i=e.distance(n),r=e.distance(t),s=o+i+r,a=(o*e.x+i*t.x+r*n.x)/s,l=(o*e.y+i*t.y+r*n.y)/s,new jsts.geom.Coordinate(a,l)},jsts.geom.Triangle.centroid=function(e,t,n){var o,i;return o=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3,new jsts.geom.Coordinate(o,i)},jsts.geom.Triangle.longestSideLength=function(e,t,n){var o,i,r,s;return o=e.distance(t),i=t.distance(n),r=n.distance(e),s=o,i>s&&(s=i),r>s&&(s=r),s},jsts.geom.Triangle.angleBisector=function(e,t,n){var o,i,r,s,a,l;return o=t.distance(e),i=t.distance(n),r=o/(o+i),s=n.x-e.x,a=n.y-e.y,l=new jsts.geom.Coordinate(e.x+r*s,e.y+r*a)},jsts.geom.Triangle.area=function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)},jsts.geom.Triangle.signedArea=function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2},jsts.geom.Triangle.prototype.inCentre=function(){return jsts.geom.Triangle.inCentre(this.p0,this.p1,this.p2)},jsts.noding.OrientedCoordinateArray=function(e){this.pts=e,this._orientation=jsts.noding.OrientedCoordinateArray.orientation(e)},jsts.noding.OrientedCoordinateArray.prototype.pts=null,jsts.noding.OrientedCoordinateArray.prototype._orientation=void 0,jsts.noding.OrientedCoordinateArray.orientation=function(e){return 1===jsts.geom.CoordinateArrays.increasingDirection(e)},jsts.noding.OrientedCoordinateArray.prototype.compareTo=function(e){var t=e,n=jsts.noding.OrientedCoordinateArray.compareOriented(this.pts,this._orientation,t.pts,t._orientation);return n},jsts.noding.OrientedCoordinateArray.compareOriented=function(e,t,n,o){for(var i=t?1:-1,r=o?1:-1,s=t?e.length:-1,a=o?n.length:-1,l=t?0:e.length-1,c=o?0:n.length-1;;){var u=e[l].compareTo(n[c]);if(0!==u)return u;l+=i,c+=r;var d=l===s,p=c===a;if(d&&!p)return-1;if(!d&&p)return 1;if(d&&p)return 0}},jsts.algorithm.CentralEndpointIntersector=function(e,t,n,o){this.pts=[e,t,n,o],this.compute()},jsts.algorithm.CentralEndpointIntersector.getIntersection=function(e,t,n,o){var i=new jsts.algorithm.CentralEndpointIntersector(e,t,n,o);return i.getIntersection()},jsts.algorithm.CentralEndpointIntersector.prototype.pts=null,jsts.algorithm.CentralEndpointIntersector.prototype.intPt=null,jsts.algorithm.CentralEndpointIntersector.prototype.compute=function(){var e=jsts.algorithm.CentralEndpointIntersector.average(this.pts);this.intPt=this.findNearestPoint(e,this.pts)},jsts.algorithm.CentralEndpointIntersector.prototype.getIntersection=function(){return this.intPt},jsts.algorithm.CentralEndpointIntersector.average=function(e){var t,n=new jsts.geom.Coordinate,o=e.length;for(t=0;t<o;t++)n.x+=e[t].x,n.y+=e[t].y;return o>0&&(n.x/=o,n.y/=o),n},jsts.algorithm.CentralEndpointIntersector.prototype.findNearestPoint=function(e,t){var n,o,i=Number.MAX_VALUE,r=null;for(n=0;n<t.length;n++)o=e.distance(t[n]),o<i&&(i=o,r=t[n]);return r},jsts.operation.buffer.BufferOp=function(e,t){this.argGeom=e,this.bufParams=t?t:new jsts.operation.buffer.BufferParameters},jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS=12,jsts.operation.buffer.BufferOp.precisionScaleFactor=function(e,t,n){var o=e.getEnvelopeInternal(),i=Math.max(o.getHeight(),o.getWidth()),r=t>0?t:0,s=i+2*r,a=Math.log(s)/Math.log(10)+1,l=a-n,c=Math.pow(10,-l);return c},jsts.operation.buffer.BufferOp.bufferOp=function(e,t){if(arguments.length>2)return jsts.operation.buffer.BufferOp.bufferOp2.apply(this,arguments);var n=new jsts.operation.buffer.BufferOp(e),o=n.getResultGeometry(t);return o},jsts.operation.buffer.BufferOp.bufferOp2=function(e,t,n){if(arguments.length>3)return jsts.operation.buffer.BufferOp.bufferOp3.apply(this,arguments);var o=new jsts.operation.buffer.BufferOp(e,n),i=o.getResultGeometry(t);return i},jsts.operation.buffer.BufferOp.bufferOp3=function(e,t,n){if(arguments.length>4)return jsts.operation.buffer.BufferOp.bufferOp4.apply(this,arguments);var o=new jsts.operation.buffer.BufferOp(e);o.setQuadrantSegments(n);var i=o.getResultGeometry(t);return i},jsts.operation.buffer.BufferOp.bufferOp4=function(e,t,n,o){var i=new jsts.operation.buffer.BufferOp(e);i.setQuadrantSegments(n),i.setEndCapStyle(o);var r=i.getResultGeometry(t);return r},jsts.operation.buffer.BufferOp.prototype.argGeom=null,jsts.operation.buffer.BufferOp.prototype.distance=null,jsts.operation.buffer.BufferOp.prototype.bufParams=null,jsts.operation.buffer.BufferOp.prototype.resultGeometry=null,jsts.operation.buffer.BufferOp.prototype.setEndCapStyle=function(e){this.bufParams.setEndCapStyle(e)},jsts.operation.buffer.BufferOp.prototype.setQuadrantSegments=function(e){this.bufParams.setQuadrantSegments(e)},jsts.operation.buffer.BufferOp.prototype.getResultGeometry=function(e){return this.distance=e,this.computeGeometry(),this.resultGeometry},jsts.operation.buffer.BufferOp.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null===this.resultGeometry){var e=this.argGeom.getPrecisionModel();e.getType()===jsts.geom.PrecisionModel.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()}},jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision=function(){var e,t=null;for(e=jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS;e>=0;e--){try{this.bufferReducedPrecision2(e)}catch(e){t=e}if(null!==this.resultGeometry)return}throw t},jsts.operation.buffer.BufferOp.prototype.bufferOriginalPrecision=function(){try{var e=new jsts.operation.buffer.BufferBuilder(this.bufParams);this.resultGeometry=e.buffer(this.argGeom,this.distance)}catch(e){}},jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision2=function(e){var t=jsts.operation.buffer.BufferOp.precisionScaleFactor(this.argGeom,this.distance,e),n=new jsts.geom.PrecisionModel(t);this.bufferFixedPrecision(n)},jsts.operation.buffer.BufferOp.prototype.bufferFixedPrecision=function(e){var t=new jsts.noding.ScaledNoder(new jsts.noding.snapround.MCIndexSnapRounder(new jsts.geom.PrecisionModel(1)),e.getScale()),n=new jsts.operation.buffer.BufferBuilder(this.bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this.resultGeometry=n.buffer(this.argGeom,this.distance)},function(){var e=jsts.geom.Location,t=jsts.geomgraph.Position,n=jsts.util.Assert;jsts.geomgraph.GeometryGraph=function(e,t,n){jsts.geomgraph.PlanarGraph.call(this),this.lineEdgeMap=new javascript.util.HashMap,this.ptLocator=new jsts.algorithm.PointLocator,this.argIndex=e,this.parentGeom=t,this.boundaryNodeRule=n||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,null!==t&&this.add(t)},jsts.geomgraph.GeometryGraph.prototype=new jsts.geomgraph.PlanarGraph,jsts.geomgraph.GeometryGraph.constructor=jsts.geomgraph.GeometryGraph,jsts.geomgraph.GeometryGraph.prototype.createEdgeSetIntersector=function(){return new jsts.geomgraph.index.SimpleMCSweepLineIntersector},jsts.geomgraph.GeometryGraph.determineBoundary=function(t,n){return t.isInBoundary(n)?e.BOUNDARY:e.INTERIOR},jsts.geomgraph.GeometryGraph.prototype.parentGeom=null,jsts.geomgraph.GeometryGraph.prototype.lineEdgeMap=null,jsts.geomgraph.GeometryGraph.prototype.boundaryNodeRule=null,jsts.geomgraph.GeometryGraph.prototype.useBoundaryDeterminationRule=!0,jsts.geomgraph.GeometryGraph.prototype.argIndex=null,jsts.geomgraph.GeometryGraph.prototype.boundaryNodes=null,jsts.geomgraph.GeometryGraph.prototype.hasTooFewPoints=!1,jsts.geomgraph.GeometryGraph.prototype.invalidPoint=null,jsts.geomgraph.GeometryGraph.prototype.areaPtLocator=null,jsts.geomgraph.GeometryGraph.prototype.ptLocator=null,jsts.geomgraph.GeometryGraph.prototype.getGeometry=function(){return this.parentGeom},jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodes=function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodeRule=function(){return this.boundaryNodeRule},jsts.geomgraph.GeometryGraph.prototype.findEdge=function(e){return this.lineEdgeMap.get(e)},jsts.geomgraph.GeometryGraph.prototype.computeSplitEdges=function(e){for(var t=this.edges.iterator();t.hasNext();){var n=t.next();n.eiList.addSplitEdges(e)}},jsts.geomgraph.GeometryGraph.prototype.add=function(e){if(!e.isEmpty())if(e instanceof jsts.geom.MultiPolygon&&(this.useBoundaryDeterminationRule=!1),e instanceof jsts.geom.Polygon)this.addPolygon(e);else if(e instanceof jsts.geom.LineString)this.addLineString(e);else if(e instanceof jsts.geom.Point)this.addPoint(e);else if(e instanceof jsts.geom.MultiPoint)this.addCollection(e);else if(e instanceof jsts.geom.MultiLineString)this.addCollection(e);else if(e instanceof jsts.geom.MultiPolygon)this.addCollection(e);else{if(!(e instanceof jsts.geom.GeometryCollection))throw new jsts.error.IllegalArgumentError("Geometry type not supported.");this.addCollection(e)}},jsts.geomgraph.GeometryGraph.prototype.addCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}},jsts.geomgraph.GeometryGraph.prototype.addEdge=function(t){this.insertEdge(t);var n=t.getCoordinates();this.insertPoint(this.argIndex,n[0],e.BOUNDARY),this.insertPoint(this.argIndex,n[n.length-1],e.BOUNDARY)},jsts.geomgraph.GeometryGraph.prototype.addPoint=function(t){var n=t.getCoordinate();this.insertPoint(this.argIndex,n,e.INTERIOR)},jsts.geomgraph.GeometryGraph.prototype.addLineString=function(t){var o=jsts.geom.CoordinateArrays.removeRepeatedPoints(t.getCoordinates());if(o.length<2)return this.hasTooFewPoints=!0,void(this.invalidPoint=o[0]);var i=new jsts.geomgraph.Edge(o,new jsts.geomgraph.Label(this.argIndex,e.INTERIOR));this.lineEdgeMap.put(t,i),this.insertEdge(i),n.isTrue(o.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,o[0]),this.insertBoundaryPoint(this.argIndex,o[o.length-1])},jsts.geomgraph.GeometryGraph.prototype.addPolygonRing=function(t,n,o){if(!t.isEmpty()){var i=jsts.geom.CoordinateArrays.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this.hasTooFewPoints=!0,void(this.invalidPoint=i[0]);var r=n,s=o;jsts.algorithm.CGAlgorithms.isCCW(i)&&(r=o,s=n);var a=new jsts.geomgraph.Edge(i,new jsts.geomgraph.Label(this.argIndex,e.BOUNDARY,r,s));this.lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this.argIndex,i[0],e.BOUNDARY)}},jsts.geomgraph.GeometryGraph.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),e.EXTERIOR,e.INTERIOR);for(var n=0;n<t.getNumInteriorRing();n++){var o=t.getInteriorRingN(n);this.addPolygonRing(o,e.INTERIOR,e.EXTERIOR)}},jsts.geomgraph.GeometryGraph.prototype.computeEdgeIntersections=function(e,t,n){var o=new jsts.geomgraph.index.SegmentIntersector(t,n,(!0));o.setBoundaryNodes(this.getBoundaryNodes(),e.getBoundaryNodes());var i=this.createEdgeSetIntersector();return i.computeIntersections(this.edges,e.edges,o),o},jsts.geomgraph.GeometryGraph.prototype.computeSelfNodes=function(e,t){var n=new jsts.geomgraph.index.SegmentIntersector(e,(!0),(!1)),o=this.createEdgeSetIntersector();return!t&&(this.parentGeom instanceof jsts.geom.LinearRing||this.parentGeom instanceof jsts.geom.Polygon||this.parentGeom instanceof jsts.geom.MultiPolygon)?o.computeIntersections(this.edges,n,!1):o.computeIntersections(this.edges,n,!0),this.addSelfIntersectionNodes(this.argIndex),n},jsts.geomgraph.GeometryGraph.prototype.insertPoint=function(e,t,n){var o=this.nodes.addNode(t),i=o.getLabel();null==i?o.label=new jsts.geomgraph.Label(e,n):i.setLocation(e,n)},jsts.geomgraph.GeometryGraph.prototype.insertBoundaryPoint=function(n,o){var i=this.nodes.addNode(o),r=i.getLabel(),s=1,a=e.NONE;null!==r&&(a=r.getLocation(n,t.ON)),a===e.BOUNDARY&&s++;var l=jsts.geomgraph.GeometryGraph.determineBoundary(this.boundaryNodeRule,s);r.setLocation(n,l)},jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNodes=function(e){for(var t=this.edges.iterator();t.hasNext();)for(var n=t.next(),o=n.getLabel().getLocation(e),i=n.eiList.iterator();i.hasNext();){var r=i.next();this.addSelfIntersectionNode(e,r.coord,o)}},jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNode=function(t,n,o){this.isBoundaryNode(t,n)||(o===e.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,n):this.insertPoint(t,n,o))},jsts.geomgraph.GeometryGraph.prototype.getInvalidPoint=function(){return this.invalidPoint}}(),jsts.operation.buffer.OffsetSegmentString=function(){this.ptList=[]},jsts.operation.buffer.OffsetSegmentString.prototype.ptList=null,jsts.operation.buffer.OffsetSegmentString.prototype.precisionModel=null,jsts.operation.buffer.OffsetSegmentString.prototype.minimimVertexDistance=0,jsts.operation.buffer.OffsetSegmentString.prototype.setPrecisionModel=function(e){this.precisionModel=e},jsts.operation.buffer.OffsetSegmentString.prototype.setMinimumVertexDistance=function(e){this.minimimVertexDistance=e},jsts.operation.buffer.OffsetSegmentString.prototype.addPt=function(e){var t=new jsts.geom.Coordinate(e);this.precisionModel.makePrecise(t),this.isRedundant(t)||this.ptList.push(t)},jsts.operation.buffer.OffsetSegmentString.prototype.addPts=function(e,t){if(t)for(var n=0;n<e.length;n++)this.addPt(e[n]);else for(var n=e.length-1;n>=0;n--)this.addPt(e[n])},jsts.operation.buffer.OffsetSegmentString.prototype.isRedundant=function(e){if(this.ptList.length<1)return!1;var t=this.ptList[this.ptList.length-1],n=e.distance(t);return n<this.minimimVertexDistance},jsts.operation.buffer.OffsetSegmentString.prototype.closeRing=function(){if(!(this.ptList.length<1)){var e=new jsts.geom.Coordinate(this.ptList[0]),t=this.ptList[this.ptList.length-1],n=null;this.ptList.length>=2&&(n=this.ptList[this.ptList.length-2]),e.equals(t)||this.ptList.push(e)}},jsts.operation.buffer.OffsetSegmentString.prototype.reverse=function(){},jsts.operation.buffer.OffsetSegmentString.prototype.getCoordinates=function(){return this.ptList},jsts.operation.linemerge.LineMergeEdge=function(e){jsts.planargraph.Edge.call(this),this.line=e},jsts.operation.linemerge.LineMergeEdge.prototype=new jsts.planargraph.Edge,jsts.operation.linemerge.LineMergeEdge.constructor=jsts.operation.linemerge.LineMergeEdge,jsts.operation.linemerge.LineMergeEdge.prototype.getLine=function(){return this.line},jsts.algorithm.distance.PointPairDistance=function(){this.pt=[new jsts.geom.Coordinate,new jsts.geom.Coordinate]},jsts.algorithm.distance.PointPairDistance.prototype.pt=null,jsts.algorithm.distance.PointPairDistance.prototype.distance=NaN,jsts.algorithm.distance.PointPairDistance.prototype.isNull=!0,jsts.algorithm.distance.PointPairDistance.prototype.initialize=function(e,t,n){return void 0===e?void(this.isNull=!0):(this.pt[0].setCoordinate(e),this.pt[1].setCoordinate(t),this.distance=void 0!==n?n:e.distance(t),void(this.isNull=!1))},jsts.algorithm.distance.PointPairDistance.prototype.getDistance=function(){return this.distance},jsts.algorithm.distance.PointPairDistance.prototype.getCoordinates=function(){return this.pt},jsts.algorithm.distance.PointPairDistance.prototype.getCoordinate=function(e){return this.pt[e]},jsts.algorithm.distance.PointPairDistance.prototype.setMaximum=function(e){return 2===arguments.length?void this.setMaximum2.apply(this,arguments):void this.setMaximum(e.pt[0],e.pt[1])},jsts.algorithm.distance.PointPairDistance.prototype.setMaximum2=function(e,t){if(this.isNull)return void this.initialize(e,t);var n=e.distance(t);n>this.distance&&this.initialize(e,t,n)},jsts.algorithm.distance.PointPairDistance.prototype.setMinimum=function(e){return 2===arguments.length?void this.setMinimum2.apply(this,arguments):void this.setMinimum(e.pt[0],e.pt[1])},jsts.algorithm.distance.PointPairDistance.prototype.setMinimum2=function(e,t){if(this.isNull)return void this.initialize(e,t);var n=e.distance(t);n<this.distance&&this.initialize(e,t,n)},function(){var e=jsts.algorithm.distance.PointPairDistance,t=jsts.algorithm.distance.DistanceToPoint,n=function(n){this.maxPtDist=new e,this.minPtDist=new e,this.euclideanDist=new t,this.geom=n};n.prototype=new jsts.geom.CoordinateFilter,n.prototype.maxPtDist=new e,n.prototype.minPtDist=new e,n.prototype.euclideanDist=new t,n.prototype.geom,n.prototype.filter=function(e){this.minPtDist.initialize(),t.computeDistance(this.geom,e,this.minPtDist),this.maxPtDist.setMaximum(this.minPtDist)},n.prototype.getMaxPointDistance=function(){return this.maxPtDist};var o=function(t,n){this.maxPtDist=new e,this.minPtDist=new e,this.geom=t,this.numSubSegs=Math.round(1/n)};o.prototype=new jsts.geom.CoordinateSequenceFilter,o.prototype.maxPtDist=new e,o.prototype.minPtDist=new e,o.prototype.geom,o.prototype.numSubSegs=0,o.prototype.filter=function(e,n){if(0!=n)for(var o=e[n-1],i=e[n],r=(i.x-o.x)/this.numSubSegs,s=(i.y-o.y)/this.numSubSegs,a=0;a<this.numSubSegs;a++){var l=o.x+a*r,c=o.y+a*s,u=new jsts.geom.Coordinate(l,c);this.minPtDist.initialize(),t.computeDistance(this.geom,u,this.minPtDist),this.maxPtDist.setMaximum(this.minPtDist)}},o.prototype.isGeometryChanged=function(){return!1},o.prototype.isDone=function(){return!1},o.prototype.getMaxPointDistance=function(){return this.maxPtDist},jsts.algorithm.distance.DiscreteHausdorffDistance=function(e,t){this.g0=e,this.g1=t,this.ptDist=new jsts.algorithm.distance.PointPairDistance},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.g0=null,jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.g1=null,jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.ptDist=null,jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.densifyFrac=0,jsts.algorithm.distance.DiscreteHausdorffDistance.distance=function(e,t,n){var o=new jsts.algorithm.distance.DiscreteHausdorffDistance(e,t);return void 0!==n&&o.setDensifyFraction(n),o.distance()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.setDensifyFraction=function(e){if(e>1||e<=0)throw new jsts.error.IllegalArgumentError("Fraction is not in range (0.0 - 1.0]");this.densifyFrac=e},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.distance=function(){return this.compute(this.g0,this.g1),ptDist.getDistance()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.orientedDistance=function(){return this.computeOrientedDistance(this.g0,this.g1,this.ptDist),this.ptDist.getDistance()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.getCoordinates=function(){return ptDist.getCoordinates()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this.ptDist),this.computeOrientedDistance(t,e,this.ptDist);
},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.computeOrientedDistance=function(e,t,i){var r=new n(t);if(e.apply(r),i.setMaximum(r.getMaxPointDistance()),this.densifyFrac>0){var s=new o(t,this.densifyFrac);e.apply(s),i.setMaximum(s.getMaxPointDistance())}}}(),jsts.algorithm.MinimumBoundingCircle=function(e){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0,this.input=e},jsts.algorithm.MinimumBoundingCircle.prototype.getCircle=function(){if(this.compute(),null===this.centre)return this.input.getFactory().createPolygon(null,null);var e=this.input.getFactory().createPoint(this.centre);return 0===this.radius?e:e.buffer(this.radius)},jsts.algorithm.MinimumBoundingCircle.prototype.getExtremalPoints=function(){return this.compute(),this.extremalPts},jsts.algorithm.MinimumBoundingCircle.prototype.getCentre=function(){return this.compute(),this.centre},jsts.algorithm.MinimumBoundingCircle.prototype.getRadius=function(){return this.compute(),this.radius},jsts.algorithm.MinimumBoundingCircle.prototype.computeCentre=function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new jsts.geom.Coordinate((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=jsts.geom.Triangle.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},jsts.algorithm.MinimumBoundingCircle.prototype.compute=function(){null===this.extremalPts&&(this.computeCirclePoints(),this.computeCentre(),null!==this.centre&&(this.radius=this.centre.distance(this.extremalPts[0])))},jsts.algorithm.MinimumBoundingCircle.prototype.computeCirclePoints=function(){if(this.input.isEmpty())return void(this.extremalPts=[]);var e;if(1===this.input.getNumPoints())return e=this.input.getCoordinates(),void(this.extremalPts=[new jsts.geom.Coordinate(e[0])]);var t=this.input.convexHull(),n=t.getCoordinates();if(e=n,n[0].equals2D(n[n.length-1])&&(e=[],jsts.geom.CoordinateArrays.copyDeep(n,0,e,0,n.length-1)),e.length<=2)return void(this.extremalPts=jsts.geom.CoordinateArrays.copyDeep(e));for(var o=jsts.algorithm.MinimumBoundingCircle.lowestPoint(e),i=jsts.algorithm.MinimumBoundingCircle.pointWitMinAngleWithX(e,o),r=0;r<e.length;r++){var s=jsts.algorithm.MinimumBoundingCircle.pointWithMinAngleWithSegment(e,o,i);if(jsts.algorithm.Angle.isObtuse(o,s,i))return void(this.extremalPts=[new jsts.geom.Coordinate(o),new jsts.geom.Coordinate(i)]);if(jsts.algorithm.Angle.isObtuse(s,o,i))o=s;else{if(!jsts.algorithm.Angle.isObtuse(s,i,o))return void(this.extremalPts=[new jsts.geom.Coordinate(o),new jsts.geom.Coordinate(i),new jsts.geom.Coordinate(s)]);i=s}}throw new Error("Logic failure in Minimum Bounding Circle algorithm!")},jsts.algorithm.MinimumBoundingCircle.lowestPoint=function(e){for(var t=e[0],n=1;n<e.length;n++)e[n].y<t.y&&(t=e[n]);return t},jsts.algorithm.MinimumBoundingCircle.pointWitMinAngleWithX=function(e,t){for(var n=Number.MAX_VALUE,o=null,i=0;i<e.length;i++){var r=e[i];if(r!==t){var s=r.x-t.x,a=r.y-t.y;a<0&&(a=-a);var l=Math.sqrt(s*s+a*a),c=a/l;c<n&&(n=c,o=r)}}return o},jsts.algorithm.MinimumBoundingCircle.pointWithMinAngleWithSegment=function(e,t,n){for(var o=Number.MAX_VALUE,i=null,r=0;r<e.length;r++){var s=e[r];if(s!==t&&s!==n){var a=jsts.algorithm.Angle.angleBetween(t,s,n);a<o&&(o=a,i=s)}}return i},jsts.noding.ScaledNoder=function(e,t,n,o){this.offsetX=n?n:0,this.offsetY=o?o:0,this.noder=e,this.scaleFactor=t,this.isScaled=!this.isIntegerPrecision()},jsts.noding.ScaledNoder.prototype=new jsts.noding.Noder,jsts.noding.ScaledNoder.constructor=jsts.noding.ScaledNoder,jsts.noding.ScaledNoder.prototype.noder=null,jsts.noding.ScaledNoder.prototype.scaleFactor=void 0,jsts.noding.ScaledNoder.prototype.offsetX=void 0,jsts.noding.ScaledNoder.prototype.offsetY=void 0,jsts.noding.ScaledNoder.prototype.isScaled=!1,jsts.noding.ScaledNoder.prototype.isIntegerPrecision=function(){return 1===this.scaleFactor},jsts.noding.ScaledNoder.prototype.getNodedSubstrings=function(){var e=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(e),e},jsts.noding.ScaledNoder.prototype.computeNodes=function(e){var t=e;this.isScaled&&(t=this.scale(e)),this.noder.computeNodes(t)},jsts.noding.ScaledNoder.prototype.scale=function(e){if(e instanceof Array)return this.scale2(e);for(var t=new javascript.util.ArrayList,n=e.iterator();n.hasNext();){var o=n.next();t.add(new jsts.noding.NodedSegmentString(this.scale(o.getCoordinates()),o.getData()))}return t},jsts.noding.ScaledNoder.prototype.scale2=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=new jsts.geom.Coordinate(Math.round((e[n].x-this.offsetX)*this.scaleFactor),Math.round((e[n].y-this.offsetY)*this.scaleFactor));var o=jsts.geom.CoordinateArrays.removeRepeatedPoints(t);return o},jsts.noding.ScaledNoder.prototype.rescale=function(e){if(e instanceof Array)return void this.rescale2(e);for(var t=e.iterator();t.hasNext();){var n=t.next();this.rescale(n.getCoordinates())}},jsts.noding.ScaledNoder.prototype.rescale2=function(e){for(var t=0;t<e.length;t++)e[t].x=e[t].x/this.scaleFactor+this.offsetX,e[t].y=e[t].y/this.scaleFactor+this.offsetY},function(){javascript.util.ArrayList;jsts.geomgraph.index.SegmentIntersector=function(e,t,n){this.li=e,this.includeProper=t,this.recordIsolated=n},jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments=function(e,t){return 1===Math.abs(e-t)},jsts.geomgraph.index.SegmentIntersector.prototype._hasIntersection=!1,jsts.geomgraph.index.SegmentIntersector.prototype.hasProper=!1,jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInterior=!1,jsts.geomgraph.index.SegmentIntersector.prototype.properIntersectionPoint=null,jsts.geomgraph.index.SegmentIntersector.prototype.li=null,jsts.geomgraph.index.SegmentIntersector.prototype.includeProper=null,jsts.geomgraph.index.SegmentIntersector.prototype.recordIsolated=null,jsts.geomgraph.index.SegmentIntersector.prototype.isSelfIntersection=null,jsts.geomgraph.index.SegmentIntersector.prototype.numIntersections=0,jsts.geomgraph.index.SegmentIntersector.prototype.numTests=0,jsts.geomgraph.index.SegmentIntersector.prototype.bdyNodes=null,jsts.geomgraph.index.SegmentIntersector.prototype.setBoundaryNodes=function(e,t){this.bdyNodes=[],this.bdyNodes[0]=e,this.bdyNodes[1]=t},jsts.geomgraph.index.SegmentIntersector.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint},jsts.geomgraph.index.SegmentIntersector.prototype.hasIntersection=function(){return this._hasIntersection},jsts.geomgraph.index.SegmentIntersector.prototype.hasProperIntersection=function(){return this.hasProper},jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior},jsts.geomgraph.index.SegmentIntersector.prototype.isTrivialIntersection=function(e,t,n,o){if(e===n&&1===this.li.getIntersectionNum()){if(jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments(t,o))return!0;if(e.isClosed()){var i=e.getNumPoints()-1;if(0===t&&o===i||0===o&&t===i)return!0}}return!1},jsts.geomgraph.index.SegmentIntersector.prototype.addIntersections=function(e,t,n,o){if(e!==n||t!==o){this.numTests++;var i=e.getCoordinates()[t],r=e.getCoordinates()[t+1],s=n.getCoordinates()[o],a=n.getCoordinates()[o+1];this.li.computeIntersection(i,r,s,a),this.li.hasIntersection()&&(this.recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(e,t,n,o)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(e.addIntersections(this.li,t,0),n.addIntersections(this.li,o,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).clone(),this.hasProper=!0,this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))}},jsts.geomgraph.index.SegmentIntersector.prototype.isBoundaryPoint=function(e,t){if(null===t)return!1;if(t instanceof Array)return!!this.isBoundaryPoint(e,t[0])||!!this.isBoundaryPoint(e,t[1]);for(var n=t.iterator();n.hasNext();){var o=n.next(),i=o.getCoordinate();if(e.isIntersection(i))return!0}return!1}}(),!function(e,t,n,o){e.site=e.fn.site=function(i){var r,s,a=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1),p=e.isPlainObject(i)?e.extend(!0,{},e.site.settings,i):e.extend({},e.site.settings),g=p.namespace,h=p.error,m="module-"+g,f=e(n),y=f,v=this,b=y.data(m);return r={initialize:function(){r.instantiate()},instantiate:function(){r.verbose("Storing instance of site",r),b=r,y.data(m,r)},normalize:function(){r.fix.console(),r.fix.requestAnimationFrame()},fix:{console:function(){r.debug("Normalizing window.console"),console!==o&&console.log!==o||(r.verbose("Console not available, normalizing events"),r.disable.console()),"undefined"!=typeof console.group&&"undefined"!=typeof console.groupEnd&&"undefined"!=typeof console.groupCollapsed||(r.verbose("Console group not available, normalizing events"),t.console.group=function(){},t.console.groupEnd=function(){},t.console.groupCollapsed=function(){}),"undefined"==typeof console.markTimeline&&(r.verbose("Mark timeline not available, normalizing events"),t.console.markTimeline=function(){})},consoleClear:function(){r.debug("Disabling programmatic console clearing"),t.console.clear=function(){}},requestAnimationFrame:function(){r.debug("Normalizing requestAnimationFrame"),t.requestAnimationFrame===o&&(r.debug("RequestAnimationFrame not available, normalizing event"),t.requestAnimationFrame=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)})}},moduleExists:function(t){return e.fn[t]!==o&&e.fn[t].settings!==o},enabled:{modules:function(t){var n=[];return t=t||p.modules,e.each(t,function(e,t){r.moduleExists(t)&&n.push(t)}),n}},disabled:{modules:function(t){var n=[];return t=t||p.modules,e.each(t,function(e,t){r.moduleExists(t)||n.push(t)}),n}},change:{setting:function(t,n,i,s){i="string"==typeof i?"all"===i?p.modules:[i]:i||p.modules,s=s===o||s,e.each(i,function(o,i){var a,l=!r.moduleExists(i)||e.fn[i].settings.namespace||!1;r.moduleExists(i)&&(r.verbose("Changing default setting",t,n,i),e.fn[i].settings[t]=n,s&&l&&(a=e(":data(module-"+l+")"),a.length>0&&(r.verbose("Modifying existing settings",a),a[i]("setting",t,n))))})},settings:function(t,n,i){n="string"==typeof n?[n]:n||p.modules,i=i===o||i,e.each(n,function(n,o){var s;r.moduleExists(o)&&(r.verbose("Changing default setting",t,o),e.extend(!0,e.fn[o].settings,t),i&&g&&(s=e(":data(module-"+g+")"),s.length>0&&(r.verbose("Modifying existing settings",s),s[o]("setting",t))))})}},enable:{console:function(){r.console(!0)},debug:function(e,t){e=e||p.modules,r.debug("Enabling debug for modules",e),r.change.setting("debug",!0,e,t)},verbose:function(e,t){e=e||p.modules,r.debug("Enabling verbose debug for modules",e),r.change.setting("verbose",!0,e,t)}},disable:{console:function(){r.console(!1)},debug:function(e,t){e=e||p.modules,r.debug("Disabling debug for modules",e),r.change.setting("debug",!1,e,t)},verbose:function(e,t){e=e||p.modules,r.debug("Disabling verbose debug for modules",e),r.change.setting("verbose",!1,e,t)}},console:function(e){if(e){if(b.cache.console===o)return void r.error(h.console);r.debug("Restoring console function"),t.console=b.cache.console}else r.debug("Disabling console function"),b.cache.console=t.console,t.console={clear:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},markTimeline:function(){},warn:function(){}}},destroy:function(){r.verbose("Destroying previous site for",y),y.removeData(m)},cache:{},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(n===o)return p[t];p[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,r,t);else{if(n===o)return r[t];r[t]=n}},debug:function(){p.debug&&(p.performance?r.performance.log(arguments):(r.debug=Function.prototype.bind.call(console.info,console,p.name+":"),r.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?r.performance.log(arguments):(r.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),r.verbose.apply(console,arguments)))},error:function(){r.error=Function.prototype.bind.call(console.error,console,p.name+":"),r.error.apply(console,arguments)},performance:{log:function(e){var t,n,o;p.performance&&(t=(new Date).getTime(),o=a||t,n=t-o,a=t,l.push({Element:v,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(r.performance.timer),r.performance.timer=setTimeout(r.performance.display,500)},display:function(){var t=p.name+":",n=0;a=!1,clearTimeout(r.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",(console.group!==o||console.table!==o)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,i){var a,l,c,u=b;return n=n||d,i=v||i,"string"==typeof t&&u!==o&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,i){var s=n!=a?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(u[s])&&n!=a)u=u[s];else{if(u[s]!==o)return l=u[s],!1;if(!e.isPlainObject(u[i])||n==a)return u[i]!==o?(l=u[i],!1):(r.error(h.method,t),!1);u=u[i]}})),e.isFunction(l)?c=l.apply(i,n):l!==o&&(c=l),e.isArray(s)?s.push(c):s!==o?s=[s,c]:c!==o&&(s=c),l}},u?(b===o&&r.initialize(),r.invoke(c)):(b!==o&&r.destroy(),r.initialize()),s!==o?s:this},e.site.settings={name:"Site",namespace:"site",error:{console:"Console cannot be restored, most likely it was overwritten outside of module",method:"The method you called is not defined."},debug:!1,verbose:!1,performance:!0,modules:["accordion","api","checkbox","dimmer","dropdown","embed","form","modal","nag","popup","rating","shape","sidebar","state","sticky","tab","transition","visit","visibility"],siteNamespace:"site",namespaceStub:{cache:{},config:{},sections:{},section:{},utilities:{}}},e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,o){return!!e.data(t,o[3])}})}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.form=function(t){var i,r=e(this),s=r.selector||"",a=(new Date).getTime(),l=[],c=arguments[0],u=arguments[1],d="string"==typeof c,p=[].slice.call(arguments,1);return r.each(function(){var g,h,m,f,y,v,b,j,x,E,S,C,I,L,w,P,T,N,R=e(this),O=this,A=[],D=!1;N={initialize:function(){N.get.settings(),d?(T===o&&N.instantiate(),N.invoke(c)):(T!==o&&T.invoke("destroy"),N.verbose("Initializing form validation",R,j),N.bindEvents(),N.set.defaults(),N.instantiate())},instantiate:function(){N.verbose("Storing instance of module",N),T=N,R.data(w,N)},destroy:function(){N.verbose("Destroying previous module",T),N.removeEvents(),R.removeData(w)},refresh:function(){N.verbose("Refreshing selector cache"),g=R.find(S.field),h=R.find(S.group),m=R.find(S.message),f=R.find(S.prompt),y=R.find(S.submit),v=R.find(S.clear),b=R.find(S.reset)},submit:function(){N.verbose("Submitting form",R),R.submit()},attachEvents:function(t,n){n=n||"submit",e(t).on("click"+P,function(e){N[n](),e.preventDefault()})},bindEvents:function(){N.verbose("Attaching form events"),R.on("submit"+P,N.validate.form).on("blur"+P,S.field,N.event.field.blur).on("click"+P,S.submit,N.submit).on("click"+P,S.reset,N.reset).on("click"+P,S.clear,N.clear),j.keyboardShortcuts&&R.on("keydown"+P,S.field,N.event.field.keydown),g.each(function(){var t=e(this),n=t.prop("type"),o=N.get.changeEvent(n,t);e(this).on(o+P,N.event.field.change)})},clear:function(){g.each(function(){var t=e(this),n=t.parent(),o=t.closest(h),i=o.find(S.prompt),r=t.data(E.defaultValue)||"",s=n.is(S.uiCheckbox),a=n.is(S.uiDropdown),l=o.hasClass(C.error);l&&(N.verbose("Resetting error on field",o),o.removeClass(C.error),i.remove()),a?(N.verbose("Resetting dropdown value",n,r),n.dropdown("clear")):s?t.prop("checked",!1):(N.verbose("Resetting field value",t,r),t.val(""))})},reset:function(){g.each(function(){var t=e(this),n=t.parent(),i=t.closest(h),r=i.find(S.prompt),s=t.data(E.defaultValue),a=n.is(S.uiCheckbox),l=n.is(S.uiDropdown),c=i.hasClass(C.error);s!==o&&(c&&(N.verbose("Resetting error on field",i),i.removeClass(C.error),r.remove()),l?(N.verbose("Resetting dropdown value",n,s),n.dropdown("restore defaults")):a?(N.verbose("Resetting checkbox value",n,s),t.prop("checked",s)):(N.verbose("Resetting field value",t,s),t.val(s)))})},is:{bracketedRule:function(e){return e.type&&e.type.match(j.regExp.bracket)},empty:function(e){return!e||0===e.length||(e.is('input[type="checkbox"]')?!e.is(":checked"):N.is.blank(e))},blank:function(t){return""===e.trim(t.val())},valid:function(){var t=!0;return N.verbose("Checking if form is valid"),e.each(x,function(e,n){N.validate.field(n,e)||(t=!1)}),t}},removeEvents:function(){R.off(P),g.off(P),y.off(P),g.off(P)},event:{field:{keydown:function(t){var n=e(this),o=t.which,i=n.is(S.input),r=n.is(S.checkbox),s=n.closest(S.uiDropdown).length>0,a={enter:13,escape:27};o==a.escape&&(N.verbose("Escape key pressed blurring field"),n.blur()),t.ctrlKey||o!=a.enter||!i||s||r||(D||(n.one("keyup"+P,N.event.field.keyup),N.submit(),N.debug("Enter pressed on input submitting form")),D=!0)},keyup:function(){D=!1},blur:function(t){var n=e(this),o=n.closest(h),i=N.get.validation(n);o.hasClass(C.error)?(N.debug("Revalidating field",n,i),i&&N.validate.field(i)):"blur"!=j.on&&"change"!=j.on||i&&N.validate.field(i)},change:function(t){var n=e(this),o=n.closest(h),i=N.get.validation(n);("change"==j.on||o.hasClass(C.error)&&j.revalidate)&&(clearTimeout(N.timer),N.timer=setTimeout(function(){N.debug("Revalidating field",n,N.get.validation(n)),N.validate.field(i)},j.delay))}}},get:{ancillaryValue:function(e){return!(!e.type||!e.value&&!N.is.bracketedRule(e))&&(e.value!==o?e.value:e.type.match(j.regExp.bracket)[1]+"")},ruleName:function(e){return N.is.bracketedRule(e)?e.type.replace(e.type.match(j.regExp.bracket)[0],""):e.type},changeEvent:function(e,t){return"checkbox"==e||"radio"==e||"hidden"==e||t.is("select")?"change":N.get.inputEvent()},inputEvent:function(){return n.createElement("input").oninput!==o?"input":n.createElement("input").onpropertychange!==o?"propertychange":"keyup"},prompt:function(e,t){var n,o,i,r=N.get.ruleName(e),s=N.get.ancillaryValue(e),a=e.prompt||j.prompt[r]||j.text.unspecifiedRule,l=a.search("{value}")!==-1,c=a.search("{name}")!==-1;return(c||l)&&(o=N.get.field(t.identifier)),l&&(a=a.replace("{value}",o.val())),c&&(n=o.closest(S.group).find("label").eq(0),i=1==n.length?n.text():o.prop("placeholder")||j.text.unspecifiedField,a=a.replace("{name}",i)),a=a.replace("{identifier}",t.identifier),a=a.replace("{ruleValue}",s),e.prompt||N.verbose("Using default validation prompt for type",a,r),a},settings:function(){if(e.isPlainObject(t)){var n,i=Object.keys(t),r=i.length>0&&t[i[0]].identifier!==o&&t[i[0]].rules!==o;r?(j=e.extend(!0,{},e.fn.form.settings,u),x=e.extend({},e.fn.form.settings.defaults,t),N.error(j.error.oldSyntax,O),N.verbose("Extending settings from legacy parameters",x,j)):(t.fields&&(n=Object.keys(t.fields),("string"==typeof t.fields[n[0]]||e.isArray(t.fields[n[0]]))&&e.each(t.fields,function(n,o){"string"==typeof o&&(o=[o]),t.fields[n]={rules:[]},e.each(o,function(e,o){t.fields[n].rules.push({type:o})})})),j=e.extend(!0,{},e.fn.form.settings,t),x=e.extend({},e.fn.form.settings.defaults,j.fields),N.verbose("Extending settings",x,j))}else j=e.fn.form.settings,x=e.fn.form.settings.defaults,N.verbose("Using default form validation",x,j);L=j.namespace,E=j.metadata,S=j.selector,C=j.className,I=j.error,w="module-"+L,P="."+L,T=R.data(w),N.refresh()},field:function(t){return N.verbose("Finding field with identifier",t),g.filter("#"+t).length>0?g.filter("#"+t):g.filter('[name="'+t+'"]').length>0?g.filter('[name="'+t+'"]'):g.filter('[name="'+t+'[]"]').length>0?g.filter('[name="'+t+'[]"]'):g.filter("[data-"+E.validate+'="'+t+'"]').length>0?g.filter("[data-"+E.validate+'="'+t+'"]'):e("<input/>")},fields:function(t){var n=e();return e.each(t,function(e,t){n=n.add(N.get.field(t))}),n},validation:function(t){var n,o;return!!x&&(e.each(x,function(e,i){o=i.identifier||e,N.get.field(o)[0]==t[0]&&(i.identifier=o,n=i)}),n||!1)},value:function(e){var t,n=[];return n.push(e),t=N.get.values.call(O,n),t[e]},values:function(t){var n=e.isArray(t)?N.get.fields(t):g,o={};return n.each(function(t,n){var i=e(n),r=(i.prop("type"),i.prop("name")),s=i.val(),a=i.is(S.checkbox),l=i.is(S.radio),c=r.indexOf("[]")!==-1,u=!!a&&i.is(":checked");r&&(c?(r=r.replace("[]",""),o[r]||(o[r]=[]),a?u?o[r].push(s||!0):o[r].push(!1):o[r].push(s)):l?u&&(o[r]=s):a?u?o[r]=s||!0:o[r]=!1:o[r]=s)}),o}},has:{field:function(e){return N.verbose("Checking for existence of a field with identifier",e),"string"!=typeof e&&N.error(I.identifier,e),g.filter("#"+e).length>0||g.filter('[name="'+e+'"]').length>0||g.filter("[data-"+E.validate+'="'+e+'"]').length>0}},add:{prompt:function(t,n){var i=N.get.field(t),r=i.closest(h),s=r.children(S.prompt),a=0!==s.length;n="string"==typeof n?[n]:n,N.verbose("Adding field error state",t),r.addClass(C.error),j.inline&&(a||(s=j.templates.prompt(n),s.appendTo(r)),s.html(n[0]),a?N.verbose("Inline errors are disabled, no inline error added",t):j.transition&&e.fn.transition!==o&&R.transition("is supported")?(N.verbose("Displaying error with css transition",j.transition),s.transition(j.transition+" in",j.duration)):(N.verbose("Displaying error with fallback javascript animation"),s.fadeIn(j.duration)))},errors:function(e){N.debug("Adding form error messages",e),N.set.error(),m.html(j.templates.error(e))}},remove:{prompt:function(t){var n=N.get.field(t),i=n.closest(h),r=i.children(S.prompt);i.removeClass(C.error),j.inline&&r.is(":visible")&&(N.verbose("Removing prompt for field",t),j.transition&&e.fn.transition!==o&&R.transition("is supported")?r.transition(j.transition+" out",j.duration,function(){r.remove()}):r.fadeOut(j.duration,function(){r.remove()}))}},set:{success:function(){R.removeClass(C.error).addClass(C.success)},defaults:function(){g.each(function(){var t=e(this),n=t.filter(S.checkbox).length>0,o=n?t.is(":checked"):t.val();t.data(E.defaultValue,o)})},error:function(){R.removeClass(C.success).addClass(C.error)},value:function(e,t){var n={};return n[e]=t,N.set.values.call(O,n)},values:function(t){e.isEmptyObject(t)||e.each(t,function(t,n){var o,i=N.get.field(t),r=i.parent(),s=e.isArray(n),a=r.is(S.uiCheckbox),l=r.is(S.uiDropdown),c=i.is(S.radio)&&a,u=i.length>0;u&&(s&&a?(N.verbose("Selecting multiple",n,i),r.checkbox("uncheck"),e.each(n,function(e,t){o=i.filter('[value="'+t+'"]'),r=o.parent(),o.length>0&&r.checkbox("check")})):c?(N.verbose("Selecting radio value",n,i),i.filter('[value="'+n+'"]').parent(S.uiCheckbox).checkbox("check")):a?(N.verbose("Setting checkbox value",n,r),n===!0?r.checkbox("check"):r.checkbox("uncheck")):l?(N.verbose("Setting dropdown value",n,r),r.dropdown("set selected",n)):(N.verbose("Setting field value",n,i),i.val(n)))})}},validate:{form:function(e,t){var n=N.get.values();if(D)return!1;if(A=[],N.is.valid()){if(N.debug("Form has no validation errors, submitting"),N.set.success(),t!==!0)return j.onSuccess.call(O,e,n)}else if(N.debug("Form has errors"),N.set.error(),j.inline||N.add.errors(A),R.data("moduleApi")!==o&&e.stopImmediatePropagation(),t!==!0)return j.onFailure.call(O,A,n)},field:function(t,n){var i=t.identifier||n,r=N.get.field(i),s=!!t.depends&&N.get.field(t.depends),a=!0,l=[];return t.identifier||(N.debug("Using field name as identifier",i),t.identifier=i),r.prop("disabled")?(N.debug("Field is disabled. Skipping",i),a=!0):t.optional&&N.is.blank(r)?(N.debug("Field is optional and blank. Skipping",i),a=!0):t.depends&&N.is.empty(s)?(N.debug("Field depends on another value that is not present or empty. Skipping",s),a=!0):t.rules!==o&&e.each(t.rules,function(e,n){N.has.field(i)&&!N.validate.rule(t,n)&&(N.debug("Field is invalid",i,n.type),l.push(N.get.prompt(n,t)),a=!1)}),a?(N.remove.prompt(i,l),j.onValid.call(r),!0):(A=A.concat(l),N.add.prompt(i,l),j.onInvalid.call(r,l),!1)},rule:function(t,n){var i=N.get.field(t.identifier),r=(n.type,i.val()),s=N.get.ancillaryValue(n),a=N.get.ruleName(n),l=j.rules[a];return e.isFunction(l)?(r=r===o||""===r||null===r?"":e.trim(r+""),l.call(i,r,s)):void N.error(I.noRule,a)}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,j,t);else{if(n===o)return j[t];j[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,N,t);else{if(n===o)return N[t];N[t]=n}},debug:function(){!j.silent&&j.debug&&(j.performance?N.performance.log(arguments):(N.debug=Function.prototype.bind.call(console.info,console,j.name+":"),N.debug.apply(console,arguments)))},verbose:function(){!j.silent&&j.verbose&&j.debug&&(j.performance?N.performance.log(arguments):(N.verbose=Function.prototype.bind.call(console.info,console,j.name+":"),N.verbose.apply(console,arguments)))},error:function(){j.silent||(N.error=Function.prototype.bind.call(console.error,console,j.name+":"),N.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;j.performance&&(t=(new Date).getTime(),o=a||t,n=t-o,a=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:O,"Execution Time":n})),clearTimeout(N.performance.timer),N.performance.timer=setTimeout(N.performance.display,500)},display:function(){var t=j.name+":",n=0;a=!1,clearTimeout(N.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),r.length>1&&(t+=" ("+r.length+")"),(console.group!==o||console.table!==o)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var s,a,l,c=T;return n=n||p,r=O||r,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o&&(a=c[i],!1);c=c[i]}})),e.isFunction(a)?l=a.apply(r,n):a!==o&&(l=a),e.isArray(i)?i.push(l):i!==o?i=[i,l]:l!==o&&(i=l),a}},N.initialize()}),i!==o?i:this},e.fn.form.settings={name:"Form",namespace:"form",debug:!1,verbose:!1,performance:!0,fields:!1,keyboardShortcuts:!0,on:"submit",inline:!1,delay:200,revalidate:!0,transition:"scale",duration:200,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{defaultValue:"default",validate:"validate"},regExp:{bracket:/\[(.*)\]/i,decimal:/^\d*(\.)\d+/,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,flags:/^\/(.*)\/(.*)?/,integer:/^\-?\d+$/,number:/^\-?\d*(\.\d+)?$/,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/i},text:{unspecifiedRule:"Please enter a valid value",unspecifiedField:"This field"},prompt:{empty:"{name} must have a value",checked:"{name} must be checked",email:"{name} must be a valid e-mail",url:"{name} must be a valid url",regExp:"{name} is not formatted correctly",integer:"{name} must be an integer",decimal:"{name} must be a decimal number",number:"{name} must be set to a number",is:'{name} must be "{ruleValue}"',isExactly:'{name} must be exactly "{ruleValue}"',not:'{name} cannot be set to "{ruleValue}"',notExactly:'{name} cannot be set to exactly "{ruleValue}"',contain:'{name} cannot contain "{ruleValue}"',containExactly:'{name} cannot contain exactly "{ruleValue}"',doesntContain:'{name} must contain  "{ruleValue}"',doesntContainExactly:'{name} must contain exactly "{ruleValue}"',minLength:"{name} must be at least {ruleValue} characters",length:"{name} must be at least {ruleValue} characters",exactLength:"{name} must be exactly {ruleValue} characters",maxLength:"{name} cannot be longer than {ruleValue} characters",match:"{name} must match {ruleValue} field",different:"{name} must have a different value than {ruleValue} field",creditCard:"{name} must be a valid credit card number",minCount:"{name} must have at least {ruleValue} choices",exactCount:"{name} must have exactly {ruleValue} choices",maxCount:"{name} must have {ruleValue} or less choices"},selector:{checkbox:'input[type="checkbox"], input[type="radio"]',clear:".clear",field:"input, textarea, select",group:".field",input:"input",message:".error.message",prompt:".prompt.label",radio:'input[type="radio"]',reset:'.reset:not([type="reset"])',submit:'.submit:not([type="submit"])',uiCheckbox:".ui.checkbox",uiDropdown:".ui.dropdown"},className:{error:"error",label:"ui prompt label",pressed:"down",success:"success"},error:{identifier:"You must specify a string identifier for each field",method:"The method you called is not defined.",noRule:"There is no rule matching the one you specified",oldSyntax:"Starting in 2.0 forms now only take a single settings object. Validation settings converted to new syntax automatically."},templates:{error:function(t){var n='<ul class="list">';return e.each(t,function(e,t){n+="<li>"+t+"</li>"}),n+="</ul>",e(n)},prompt:function(t){return e("<div/>").addClass("ui basic red pointing prompt label").html(t[0])}},rules:{empty:function(t){return!(t===o||""===t||e.isArray(t)&&0===t.length)},checked:function(){return e(this).filter(":checked").length>0},email:function(t){return e.fn.form.settings.regExp.email.test(t)},url:function(t){return e.fn.form.settings.regExp.url.test(t)},regExp:function(t,n){if(n instanceof RegExp)return t.match(n);var o,i=n.match(e.fn.form.settings.regExp.flags);return i&&(n=i.length>=2?i[1]:n,o=i.length>=3?i[2]:""),t.match(new RegExp(n,o))},integer:function(t,n){var i,r,s,a=e.fn.form.settings.regExp.integer;return n&&["",".."].indexOf(n)===-1&&(n.indexOf("..")==-1?a.test(n)&&(i=r=n-0):(s=n.split("..",2),a.test(s[0])&&(i=s[0]-0),a.test(s[1])&&(r=s[1]-0))),a.test(t)&&(i===o||t>=i)&&(r===o||t<=r)},decimal:function(t){return e.fn.form.settings.regExp.decimal.test(t)},number:function(t){return e.fn.form.settings.regExp.number.test(t)},is:function(e,t){return t="string"==typeof t?t.toLowerCase():t,e="string"==typeof e?e.toLowerCase():e,e==t},isExactly:function(e,t){return e==t},not:function(e,t){return e="string"==typeof e?e.toLowerCase():e,t="string"==typeof t?t.toLowerCase():t,e!=t},notExactly:function(e,t){return e!=t},contains:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),t.search(new RegExp(n,"i"))!==-1},containsExactly:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),t.search(new RegExp(n))!==-1},doesntContain:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),t.search(new RegExp(n,"i"))===-1},doesntContainExactly:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),t.search(new RegExp(n))===-1},minLength:function(e,t){return e!==o&&e.length>=t},length:function(e,t){return e!==o&&e.length>=t},exactLength:function(e,t){return e!==o&&e.length==t},maxLength:function(e,t){return e!==o&&e.length<=t},match:function(t,n){var i;return e(this),e('[data-validate="'+n+'"]').length>0?i=e('[data-validate="'+n+'"]').val():e("#"+n).length>0?i=e("#"+n).val():e('[name="'+n+'"]').length>0?i=e('[name="'+n+'"]').val():e('[name="'+n+'[]"]').length>0&&(i=e('[name="'+n+'[]"]')),i!==o&&t.toString()==i.toString()},different:function(t,n){var i;return e(this),e('[data-validate="'+n+'"]').length>0?i=e('[data-validate="'+n+'"]').val():e("#"+n).length>0?i=e("#"+n).val():e('[name="'+n+'"]').length>0?i=e('[name="'+n+'"]').val():e('[name="'+n+'[]"]').length>0&&(i=e('[name="'+n+'[]"]')),i!==o&&t.toString()!==i.toString()},creditCard:function(t,n){var o,i,r={visa:{pattern:/^4/,length:[16]},amex:{pattern:/^3[47]/,length:[15]},
mastercard:{pattern:/^5[1-5]/,length:[16]},discover:{pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,length:[16]},unionPay:{pattern:/^(62|88)/,length:[16,17,18,19]},jcb:{pattern:/^35(2[89]|[3-8][0-9])/,length:[16]},maestro:{pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,length:[12,13,14,15,16,17,18,19]},dinersClub:{pattern:/^(30[0-5]|^36)/,length:[14]},laser:{pattern:/^(6304|670[69]|6771)/,length:[16,17,18,19]},visaElectron:{pattern:/^(4026|417500|4508|4844|491(3|7))/,length:[16]}},s={},a=!1,l="string"==typeof n&&n.split(",");if("string"==typeof t&&0!==t.length){if(l&&(e.each(l,function(n,o){i=r[o],i&&(s={length:e.inArray(t.length,i.length)!==-1,pattern:t.search(i.pattern)!==-1},s.length&&s.pattern&&(a=!0))}),!a))return!1;if(o={number:e.inArray(t.length,r.unionPay.length)!==-1,pattern:t.search(r.unionPay.pattern)!==-1},o.number&&o.pattern)return!0;for(var c=t.length,u=0,d=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],p=0;c--;)p+=d[u][parseInt(t.charAt(c),10)],u^=1;return p%10===0&&p>0}},minCount:function(e,t){return 0==t||(1==t?""!==e:e.split(",").length>=t)},exactCount:function(e,t){return 0==t?""===e:1==t?""!==e&&e.search(",")===-1:e.split(",").length==t},maxCount:function(e,t){return 0!=t&&(1==t?e.search(",")===-1:e.split(",").length<=t)}}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.accordion=function(n){var i,r=e(this),s=(new Date).getTime(),a=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},r.each(function(){var d,p,g=e.isPlainObject(n)?e.extend(!0,{},e.fn.accordion.settings,n):e.extend({},e.fn.accordion.settings),h=g.className,m=g.namespace,f=g.selector,y=g.error,v="."+m,b="module-"+m,j=r.selector||"",x=e(this),E=x.find(f.title),S=x.find(f.content),C=this,I=x.data(b);p={initialize:function(){p.debug("Initializing",x),p.bind.events(),g.observeChanges&&p.observeChanges(),p.instantiate()},instantiate:function(){I=p,x.data(b,p)},destroy:function(){p.debug("Destroying previous instance",x),x.off(v).removeData(b)},refresh:function(){E=x.find(f.title),S=x.find(f.content)},observeChanges:function(){"MutationObserver"in t&&(d=new MutationObserver(function(e){p.debug("DOM tree modified, updating selector cache"),p.refresh()}),d.observe(C,{childList:!0,subtree:!0}),p.debug("Setting up mutation observer",d))},bind:{events:function(){p.debug("Binding delegated events"),x.on(g.on+v,f.trigger,p.event.click)}},event:{click:function(){p.toggle.call(this)}},toggle:function(t){var n=t!==o?"number"==typeof t?E.eq(t):e(t).closest(f.title):e(this).closest(f.title),i=n.next(S),r=i.hasClass(h.animating),s=i.hasClass(h.active),a=s&&!r,l=!s&&r;p.debug("Toggling visibility of content",n),a||l?g.collapsible?p.close.call(n):p.debug("Cannot close accordion content collapsing is disabled"):p.open.call(n)},open:function(t){var n=t!==o?"number"==typeof t?E.eq(t):e(t).closest(f.title):e(this).closest(f.title),i=n.next(S),r=i.hasClass(h.animating),s=i.hasClass(h.active),a=s||r;return a?void p.debug("Accordion already open, skipping",i):(p.debug("Opening accordion content",n),g.onOpening.call(i),g.exclusive&&p.closeOthers.call(n),n.addClass(h.active),i.stop(!0,!0).addClass(h.animating),g.animateChildren&&(e.fn.transition!==o&&x.transition("is supported")?i.children().transition({animation:"fade in",queue:!1,useFailSafe:!0,debug:g.debug,verbose:g.verbose,duration:g.duration}):i.children().stop(!0,!0).animate({opacity:1},g.duration,p.resetOpacity)),void i.slideDown(g.duration,g.easing,function(){i.removeClass(h.animating).addClass(h.active),p.reset.display.call(this),g.onOpen.call(this),g.onChange.call(this)}))},close:function(t){var n=t!==o?"number"==typeof t?E.eq(t):e(t).closest(f.title):e(this).closest(f.title),i=n.next(S),r=i.hasClass(h.animating),s=i.hasClass(h.active),a=!s&&r,l=s&&r;!s&&!a||l||(p.debug("Closing accordion content",i),g.onClosing.call(i),n.removeClass(h.active),i.stop(!0,!0).addClass(h.animating),g.animateChildren&&(e.fn.transition!==o&&x.transition("is supported")?i.children().transition({animation:"fade out",queue:!1,useFailSafe:!0,debug:g.debug,verbose:g.verbose,duration:g.duration}):i.children().stop(!0,!0).animate({opacity:0},g.duration,p.resetOpacity)),i.slideUp(g.duration,g.easing,function(){i.removeClass(h.animating).removeClass(h.active),p.reset.display.call(this),g.onClose.call(this),g.onChange.call(this)}))},closeOthers:function(t){var n,i,r,s=t!==o?E.eq(t):e(this).closest(f.title),a=s.parents(f.content).prev(f.title),l=s.closest(f.accordion),c=f.title+"."+h.active+":visible",u=f.content+"."+h.active+":visible";g.closeNested?(n=l.find(c).not(a),r=n.next(S)):(n=l.find(c).not(a),i=l.find(u).find(c).not(a),n=n.not(i),r=n.next(S)),n.length>0&&(p.debug("Exclusive enabled, closing other content",n),n.removeClass(h.active),r.removeClass(h.animating).stop(!0,!0),g.animateChildren&&(e.fn.transition!==o&&x.transition("is supported")?r.children().transition({animation:"fade out",useFailSafe:!0,debug:g.debug,verbose:g.verbose,duration:g.duration}):r.children().stop(!0,!0).animate({opacity:0},g.duration,p.resetOpacity)),r.slideUp(g.duration,g.easing,function(){e(this).removeClass(h.active),p.reset.display.call(this)}))},reset:{display:function(){p.verbose("Removing inline display from element",this),e(this).css("display",""),""===e(this).attr("style")&&e(this).attr("style","").removeAttr("style")},opacity:function(){p.verbose("Removing inline opacity from element",this),e(this).css("opacity",""),""===e(this).attr("style")&&e(this).attr("style","").removeAttr("style")}},setting:function(t,n){if(p.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,g,t);else{if(n===o)return g[t];e.isPlainObject(g[t])?e.extend(!0,g[t],n):g[t]=n}},internal:function(t,n){return p.debug("Changing internal",t,n),n===o?p[t]:void(e.isPlainObject(t)?e.extend(!0,p,t):p[t]=n)},debug:function(){!g.silent&&g.debug&&(g.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,g.name+":"),p.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),p.verbose.apply(console,arguments)))},error:function(){g.silent||(p.error=Function.prototype.bind.call(console.error,console,g.name+":"),p.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;g.performance&&(t=(new Date).getTime(),o=s||t,n=t-o,s=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:C,"Execution Time":n})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,500)},display:function(){var t=g.name+":",n=0;s=!1,clearTimeout(p.performance.timer),e.each(a,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",j&&(t+=" '"+j+"'"),(console.group!==o||console.table!==o)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,n,r){var s,a,l,c=I;return n=n||u,r=C||r,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o?(a=c[i],!1):(p.error(y.method,t),!1);c=c[i]}})),e.isFunction(a)?l=a.apply(r,n):a!==o&&(l=a),e.isArray(i)?i.push(l):i!==o?i=[i,l]:l!==o&&(i=l),a}},c?(I===o&&p.initialize(),p.invoke(l)):(I!==o&&I.invoke("destroy"),p.initialize())}),i!==o?i:this},e.fn.accordion.settings={name:"Accordion",namespace:"accordion",silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",observeChanges:!0,exclusive:!0,collapsible:!0,closeNested:!1,animateChildren:!0,duration:350,easing:"easeOutQuad",onOpening:function(){},onOpen:function(){},onClosing:function(){},onClose:function(){},onChange:function(){},error:{method:"The method you called is not defined"},className:{active:"active",animating:"animating"},selector:{accordion:".accordion",title:".title",trigger:".title",content:".content"}},e.extend(e.easing,{easeOutQuad:function(e,t,n,o,i){return-o*(t/=i)*(t-2)+n}})}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.checkbox=function(i){var r,s=e(this),a=s.selector||"",l=(new Date).getTime(),c=[],u=arguments[0],d="string"==typeof u,p=[].slice.call(arguments,1);return s.each(function(){var s,g,h=e.extend(!0,{},e.fn.checkbox.settings,i),m=h.className,f=h.namespace,y=h.selector,v=h.error,b="."+f,j="module-"+f,x=e(this),E=e(this).children(y.label),S=e(this).children(y.input),C=S[0],I=!1,L=!1,w=x.data(j),P=this;g={initialize:function(){g.verbose("Initializing checkbox",h),g.create.label(),g.bind.events(),g.set.tabbable(),g.hide.input(),g.observeChanges(),g.instantiate(),g.setup()},instantiate:function(){g.verbose("Storing instance of module",g),w=g,x.data(j,g)},destroy:function(){g.verbose("Destroying module"),g.unbind.events(),g.show.input(),x.removeData(j)},fix:{reference:function(){x.is(y.input)&&(g.debug("Behavior called on <input> adjusting invoked element"),x=x.closest(y.checkbox),g.refresh())}},setup:function(){g.set.initialLoad(),g.is.indeterminate()?(g.debug("Initial value is indeterminate"),g.indeterminate()):g.is.checked()?(g.debug("Initial value is checked"),g.check()):(g.debug("Initial value is unchecked"),g.uncheck()),g.remove.initialLoad()},refresh:function(){E=x.children(y.label),S=x.children(y.input),C=S[0]},hide:{input:function(){g.verbose("Modifying <input> z-index to be unselectable"),S.addClass(m.hidden)}},show:{input:function(){g.verbose("Modifying <input> z-index to be selectable"),S.removeClass(m.hidden)}},observeChanges:function(){"MutationObserver"in t&&(s=new MutationObserver(function(e){g.debug("DOM tree modified, updating selector cache"),g.refresh()}),s.observe(P,{childList:!0,subtree:!0}),g.debug("Setting up mutation observer",s))},attachEvents:function(t,n){var o=e(t);n=e.isFunction(g[n])?g[n]:g.toggle,o.length>0?(g.debug("Attaching checkbox events to element",t,n),o.on("click"+b,n)):g.error(v.notFound)},event:{click:function(t){var n=e(t.target);return n.is(y.input)?void g.verbose("Using default check action on initialized checkbox"):n.is(y.link)?void g.debug("Clicking link inside checkbox, skipping toggle"):(g.toggle(),S.focus(),void t.preventDefault())},keydown:function(e){var t=e.which,n={enter:13,space:32,escape:27};t==n.escape?(g.verbose("Escape key pressed blurring field"),S.blur(),L=!0):e.ctrlKey||t!=n.space&&t!=n.enter?L=!1:(g.verbose("Enter/space key pressed, toggling checkbox"),g.toggle(),L=!0)},keyup:function(e){L&&e.preventDefault()}},check:function(){g.should.allowCheck()&&(g.debug("Checking checkbox",S),g.set.checked(),g.should.ignoreCallbacks()||(h.onChecked.call(C),h.onChange.call(C)))},uncheck:function(){g.should.allowUncheck()&&(g.debug("Unchecking checkbox"),g.set.unchecked(),g.should.ignoreCallbacks()||(h.onUnchecked.call(C),h.onChange.call(C)))},indeterminate:function(){return g.should.allowIndeterminate()?void g.debug("Checkbox is already indeterminate"):(g.debug("Making checkbox indeterminate"),g.set.indeterminate(),void(g.should.ignoreCallbacks()||(h.onIndeterminate.call(C),h.onChange.call(C))))},determinate:function(){return g.should.allowDeterminate()?void g.debug("Checkbox is already determinate"):(g.debug("Making checkbox determinate"),g.set.determinate(),void(g.should.ignoreCallbacks()||(h.onDeterminate.call(C),h.onChange.call(C))))},enable:function(){return g.is.enabled()?void g.debug("Checkbox is already enabled"):(g.debug("Enabling checkbox"),g.set.enabled(),h.onEnable.call(C),void h.onEnabled.call(C))},disable:function(){return g.is.disabled()?void g.debug("Checkbox is already disabled"):(g.debug("Disabling checkbox"),g.set.disabled(),h.onDisable.call(C),void h.onDisabled.call(C))},get:{radios:function(){var t=g.get.name();return e('input[name="'+t+'"]').closest(y.checkbox)},otherRadios:function(){return g.get.radios().not(x)},name:function(){return S.attr("name")}},is:{initialLoad:function(){return I},radio:function(){return S.hasClass(m.radio)||"radio"==S.attr("type")},indeterminate:function(){return S.prop("indeterminate")!==o&&S.prop("indeterminate")},checked:function(){return S.prop("checked")!==o&&S.prop("checked")},disabled:function(){return S.prop("disabled")!==o&&S.prop("disabled")},enabled:function(){return!g.is.disabled()},determinate:function(){return!g.is.indeterminate()},unchecked:function(){return!g.is.checked()}},should:{allowCheck:function(){return g.is.determinate()&&g.is.checked()&&!g.should.forceCallbacks()?(g.debug("Should not allow check, checkbox is already checked"),!1):h.beforeChecked.apply(C)!==!1||(g.debug("Should not allow check, beforeChecked cancelled"),!1)},allowUncheck:function(){return g.is.determinate()&&g.is.unchecked()&&!g.should.forceCallbacks()?(g.debug("Should not allow uncheck, checkbox is already unchecked"),!1):h.beforeUnchecked.apply(C)!==!1||(g.debug("Should not allow uncheck, beforeUnchecked cancelled"),!1)},allowIndeterminate:function(){return g.is.indeterminate()&&!g.should.forceCallbacks()?(g.debug("Should not allow indeterminate, checkbox is already indeterminate"),!1):h.beforeIndeterminate.apply(C)!==!1||(g.debug("Should not allow indeterminate, beforeIndeterminate cancelled"),!1)},allowDeterminate:function(){return g.is.determinate()&&!g.should.forceCallbacks()?(g.debug("Should not allow determinate, checkbox is already determinate"),!1):h.beforeDeterminate.apply(C)!==!1||(g.debug("Should not allow determinate, beforeDeterminate cancelled"),!1)},forceCallbacks:function(){return g.is.initialLoad()&&h.fireOnInit},ignoreCallbacks:function(){return I&&!h.fireOnInit}},can:{change:function(){return!(x.hasClass(m.disabled)||x.hasClass(m.readOnly)||S.prop("disabled")||S.prop("readonly"))},uncheck:function(){return"boolean"==typeof h.uncheckable?h.uncheckable:!g.is.radio()}},set:{initialLoad:function(){I=!0},checked:function(){return g.verbose("Setting class to checked"),x.removeClass(m.indeterminate).addClass(m.checked),g.is.radio()&&g.uncheckOthers(),!g.is.indeterminate()&&g.is.checked()?void g.debug("Input is already checked, skipping input property change"):(g.verbose("Setting state to checked",C),S.prop("indeterminate",!1).prop("checked",!0),void g.trigger.change())},unchecked:function(){return g.verbose("Removing checked class"),x.removeClass(m.indeterminate).removeClass(m.checked),!g.is.indeterminate()&&g.is.unchecked()?void g.debug("Input is already unchecked"):(g.debug("Setting state to unchecked"),S.prop("indeterminate",!1).prop("checked",!1),void g.trigger.change())},indeterminate:function(){return g.verbose("Setting class to indeterminate"),x.addClass(m.indeterminate),g.is.indeterminate()?void g.debug("Input is already indeterminate, skipping input property change"):(g.debug("Setting state to indeterminate"),S.prop("indeterminate",!0),void g.trigger.change())},determinate:function(){return g.verbose("Removing indeterminate class"),x.removeClass(m.indeterminate),g.is.determinate()?void g.debug("Input is already determinate, skipping input property change"):(g.debug("Setting state to determinate"),void S.prop("indeterminate",!1))},disabled:function(){return g.verbose("Setting class to disabled"),x.addClass(m.disabled),g.is.disabled()?void g.debug("Input is already disabled, skipping input property change"):(g.debug("Setting state to disabled"),S.prop("disabled","disabled"),void g.trigger.change())},enabled:function(){return g.verbose("Removing disabled class"),x.removeClass(m.disabled),g.is.enabled()?void g.debug("Input is already enabled, skipping input property change"):(g.debug("Setting state to enabled"),S.prop("disabled",!1),void g.trigger.change())},tabbable:function(){g.verbose("Adding tabindex to checkbox"),S.attr("tabindex")===o&&S.attr("tabindex",0)}},remove:{initialLoad:function(){I=!1}},trigger:{change:function(){var e=n.createEvent("HTMLEvents"),t=S[0];t&&(g.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},create:{label:function(){S.prevAll(y.label).length>0?(S.prev(y.label).detach().insertAfter(S),g.debug("Moving existing label",E)):g.has.label()||(E=e("<label>").insertAfter(S),g.debug("Creating label",E))}},has:{label:function(){return E.length>0}},bind:{events:function(){g.verbose("Attaching checkbox events"),x.on("click"+b,g.event.click).on("keydown"+b,y.input,g.event.keydown).on("keyup"+b,y.input,g.event.keyup)}},unbind:{events:function(){g.debug("Removing events"),x.off(b)}},uncheckOthers:function(){var e=g.get.otherRadios();g.debug("Unchecking other radios",e),e.removeClass(m.checked)},toggle:function(){return g.can.change()?void(g.is.indeterminate()||g.is.unchecked()?(g.debug("Currently unchecked"),g.check()):g.is.checked()&&g.can.uncheck()&&(g.debug("Currently checked"),g.uncheck())):void(g.is.radio()||g.debug("Checkbox is read-only or disabled, ignoring toggle"))},setting:function(t,n){if(g.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,h,t);else{if(n===o)return h[t];e.isPlainObject(h[t])?e.extend(!0,h[t],n):h[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(n===o)return g[t];g[t]=n}},debug:function(){!h.silent&&h.debug&&(h.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,h.name+":"),g.debug.apply(console,arguments)))},verbose:function(){!h.silent&&h.verbose&&h.debug&&(h.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),g.verbose.apply(console,arguments)))},error:function(){h.silent||(g.error=Function.prototype.bind.call(console.error,console,h.name+":"),g.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;h.performance&&(t=(new Date).getTime(),o=l||t,n=t-o,l=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:P,"Execution Time":n})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,500)},display:function(){var t=h.name+":",n=0;l=!1,clearTimeout(g.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(console.group!==o||console.table!==o)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,i){var s,a,l,c=w;return n=n||p,i=P||i,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o?(a=c[i],!1):(g.error(v.method,t),!1);c=c[i]}})),e.isFunction(a)?l=a.apply(i,n):a!==o&&(l=a),e.isArray(r)?r.push(l):r!==o?r=[r,l]:l!==o&&(r=l),a}},d?(w===o&&g.initialize(),g.invoke(u)):(w!==o&&w.invoke("destroy"),g.initialize())}),r!==o?r:this},e.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",silent:!1,debug:!1,verbose:!0,performance:!0,uncheckable:"auto",fireOnInit:!1,onChange:function(){},beforeChecked:function(){},beforeUnchecked:function(){},beforeDeterminate:function(){},beforeIndeterminate:function(){},onChecked:function(){},onUnchecked:function(){},onDeterminate:function(){},onIndeterminate:function(){},onEnable:function(){},onDisable:function(){},onEnabled:function(){},onDisabled:function(){},className:{checked:"checked",indeterminate:"indeterminate",disabled:"disabled",hidden:"hidden",radio:"radio",readOnly:"read-only"},error:{method:"The method you called is not defined"},selector:{checkbox:".ui.checkbox",label:"label, .box",input:'input[type="checkbox"], input[type="radio"]',link:"a[href]"}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.dimmer=function(t){var i,r=e(this),s=(new Date).getTime(),a=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return r.each(function(){var d,p,g,h=e.isPlainObject(t)?e.extend(!0,{},e.fn.dimmer.settings,t):e.extend({},e.fn.dimmer.settings),m=h.selector,f=h.namespace,y=h.className,v=h.error,b="."+f,j="module-"+f,x=r.selector||"",E="ontouchstart"in n.documentElement?"touchstart":"click",S=e(this),C=this,I=S.data(j);g={preinitialize:function(){g.is.dimmer()?(p=S.parent(),d=S):(p=S,d=g.has.dimmer()?h.dimmerName?p.find(m.dimmer).filter("."+h.dimmerName):p.find(m.dimmer):g.create(),g.set.variation())},initialize:function(){g.debug("Initializing dimmer",h),g.bind.events(),g.set.dimmable(),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),I=g,S.data(j,I)},destroy:function(){g.verbose("Destroying previous module",d),g.unbind.events(),g.remove.variation(),p.off(b)},bind:{events:function(){"hover"==h.on?p.on("mouseenter"+b,g.show).on("mouseleave"+b,g.hide):"click"==h.on&&p.on(E+b,g.toggle),g.is.page()&&(g.debug("Setting as a page dimmer",p),g.set.pageDimmer()),g.is.closable()&&(g.verbose("Adding dimmer close event",d),p.on(E+b,m.dimmer,g.event.click))}},unbind:{events:function(){S.removeData(j),p.off(b)}},event:{click:function(t){g.verbose("Determining if event occured on dimmer",t),(0===d.find(t.target).length||e(t.target).is(m.content))&&(g.hide(),t.stopImmediatePropagation())}},addContent:function(t){var n=e(t);g.debug("Add content to dimmer",n),n.parent()[0]!==d[0]&&n.detach().appendTo(d)},create:function(){var t=e(h.template.dimmer());return h.dimmerName&&(g.debug("Creating named dimmer",h.dimmerName),t.addClass(h.dimmerName)),t.appendTo(p),t},show:function(t){t=e.isFunction(t)?t:function(){},g.debug("Showing dimmer",d,h),g.is.dimmed()&&!g.is.animating()||!g.is.enabled()?g.debug("Dimmer is already shown or disabled"):(g.animate.show(t),h.onShow.call(C),h.onChange.call(C))},hide:function(t){t=e.isFunction(t)?t:function(){},g.is.dimmed()||g.is.animating()?(g.debug("Hiding dimmer",d),g.animate.hide(t),h.onHide.call(C),h.onChange.call(C)):g.debug("Dimmer is not visible")},toggle:function(){g.verbose("Toggling dimmer visibility",d),g.is.dimmed()?g.hide():g.show()},animate:{show:function(t){t=e.isFunction(t)?t:function(){},h.useCSS&&e.fn.transition!==o&&d.transition("is supported")?("auto"!==h.opacity&&g.set.opacity(),d.transition({animation:h.transition+" in",queue:!1,duration:g.get.duration(),useFailSafe:!0,onStart:function(){g.set.dimmed()},onComplete:function(){g.set.active(),t()}})):(g.verbose("Showing dimmer animation with javascript"),g.set.dimmed(),"auto"==h.opacity&&(h.opacity=.8),d.stop().css({opacity:0,width:"100%",height:"100%"}).fadeTo(g.get.duration(),h.opacity,function(){d.removeAttr("style"),g.set.active(),t()}))},hide:function(t){t=e.isFunction(t)?t:function(){},h.useCSS&&e.fn.transition!==o&&d.transition("is supported")?(g.verbose("Hiding dimmer with css"),d.transition({animation:h.transition+" out",queue:!1,duration:g.get.duration(),useFailSafe:!0,onStart:function(){g.remove.dimmed()},onComplete:function(){g.remove.active(),t()}})):(g.verbose("Hiding dimmer with javascript"),g.remove.dimmed(),d.stop().fadeOut(g.get.duration(),function(){g.remove.active(),d.removeAttr("style"),t()}))}},get:{dimmer:function(){return d},duration:function(){return"object"==typeof h.duration?g.is.active()?h.duration.hide:h.duration.show:h.duration}},has:{dimmer:function(){return h.dimmerName?S.find(m.dimmer).filter("."+h.dimmerName).length>0:S.find(m.dimmer).length>0}},is:{active:function(){return d.hasClass(y.active)},animating:function(){return d.is(":animated")||d.hasClass(y.animating)},closable:function(){return"auto"==h.closable?"hover"!=h.on:h.closable},dimmer:function(){return S.hasClass(y.dimmer)},dimmable:function(){return S.hasClass(y.dimmable)},dimmed:function(){return p.hasClass(y.dimmed)},disabled:function(){return p.hasClass(y.disabled)},enabled:function(){return!g.is.disabled()},page:function(){return p.is("body")},pageDimmer:function(){return d.hasClass(y.pageDimmer)}},can:{show:function(){return!d.hasClass(y.disabled)}},set:{opacity:function(e){var t=d.css("background-color"),n=t.split(","),o=n&&3==n.length,i=n&&4==n.length;e=0===h.opacity?0:h.opacity||e,o||i?(n[3]=e+")",t=n.join(",")):t="rgba(0, 0, 0, "+e+")",g.debug("Setting opacity to",e),d.css("background-color",t)},active:function(){d.addClass(y.active)},dimmable:function(){p.addClass(y.dimmable)},dimmed:function(){p.addClass(y.dimmed)},pageDimmer:function(){d.addClass(y.pageDimmer)},disabled:function(){d.addClass(y.disabled)},variation:function(e){e=e||h.variation,e&&d.addClass(e)}},remove:{active:function(){d.removeClass(y.active)},dimmed:function(){p.removeClass(y.dimmed)},disabled:function(){d.removeClass(y.disabled)},variation:function(e){e=e||h.variation,e&&d.removeClass(e)}},setting:function(t,n){if(g.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,h,t);else{if(n===o)return h[t];e.isPlainObject(h[t])?e.extend(!0,h[t],n):h[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(n===o)return g[t];g[t]=n}},debug:function(){!h.silent&&h.debug&&(h.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,h.name+":"),g.debug.apply(console,arguments)))},verbose:function(){!h.silent&&h.verbose&&h.debug&&(h.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),g.verbose.apply(console,arguments)))},error:function(){h.silent||(g.error=Function.prototype.bind.call(console.error,console,h.name+":"),g.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;h.performance&&(t=(new Date).getTime(),o=s||t,n=t-o,s=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:C,"Execution Time":n})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,500)},display:function(){var t=h.name+":",n=0;s=!1,clearTimeout(g.performance.timer),e.each(a,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",x&&(t+=" '"+x+"'"),r.length>1&&(t+=" ("+r.length+")"),(console.group!==o||console.table!==o)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,n,r){var s,a,l,c=I;return n=n||u,r=C||r,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o?(a=c[i],!1):(g.error(v.method,t),!1);c=c[i]}})),e.isFunction(a)?l=a.apply(r,n):a!==o&&(l=a),e.isArray(i)?i.push(l):i!==o?i=[i,l]:l!==o&&(i=l),a}},g.preinitialize(),c?(I===o&&g.initialize(),g.invoke(l)):(I!==o&&I.invoke("destroy"),g.initialize())}),i!==o?i:this},e.fn.dimmer.settings={name:"Dimmer",namespace:"dimmer",silent:!1,debug:!1,verbose:!1,performance:!0,dimmerName:!1,variation:!1,closable:"auto",useCSS:!0,transition:"fade",on:!1,opacity:"auto",duration:{show:500,hide:500},onChange:function(){},onShow:function(){},onHide:function(){},error:{method:"The method you called is not defined."},className:{active:"active",animating:"animating",dimmable:"dimmable",dimmed:"dimmed",dimmer:"dimmer",disabled:"disabled",hide:"hide",pageDimmer:"page",show:"show"},selector:{dimmer:"> .ui.dimmer",content:".ui.dimmer > .content, .ui.dimmer > .content > .center"},template:{dimmer:function(){return e("<div />").attr("class","ui dimmer")}}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.dropdown=function(i){var r,s=e(this),a=e(n),l=s.selector||"",c="ontouchstart"in n.documentElement,u=(new Date).getTime(),d=[],p=arguments[0],g="string"==typeof p,h=[].slice.call(arguments,1);return s.each(function(m){var f,y,v,b,j,x,E,S,C=e.isPlainObject(i)?e.extend(!0,{},e.fn.dropdown.settings,i):e.extend({},e.fn.dropdown.settings),I=C.className,L=C.message,w=C.fields,P=C.keys,T=C.metadata,N=C.namespace,R=C.regExp,O=C.selector,A=C.error,D=C.templates,M="."+N,F="module-"+N,_=e(this),G=e(C.context),k=_.find(O.text),B=_.find(O.search),q=_.find(O.sizer),V=_.find(O.input),z=_.find(O.icon),H=_.prev().find(O.text).length>0?_.prev().find(O.text):_.prev(),U=_.children(O.menu),W=U.find(O.item),X=!1,Q=!1,Y=!1,K=this,$=_.data(F);S={initialize:function(){S.debug("Initializing dropdown",C),S.is.alreadySetup()?S.setup.reference():(S.setup.layout(),S.refreshData(),S.save.defaults(),S.restore.selected(),S.create.id(),S.bind.events(),S.observeChanges(),S.instantiate())},instantiate:function(){S.verbose("Storing instance of dropdown",S),$=S,_.data(F,S)},destroy:function(){S.verbose("Destroying previous dropdown",_),S.remove.tabbable(),_.off(M).removeData(F),U.off(M),a.off(b),S.disconnect.menuObserver(),S.disconnect.selectObserver()},observeChanges:function(){"MutationObserver"in t&&(x=new MutationObserver(S.event.select.mutation),E=new MutationObserver(S.event.menu.mutation),S.debug("Setting up mutation observer",x,E),S.observe.select(),S.observe.menu())},disconnect:{menuObserver:function(){E&&E.disconnect()},selectObserver:function(){x&&x.disconnect()}},observe:{select:function(){S.has.input()&&x.observe(V[0],{childList:!0,subtree:!0})},menu:function(){S.has.menu()&&E.observe(U[0],{childList:!0,subtree:!0})}},create:{id:function(){j=(Math.random().toString(16)+"000000000").substr(2,8),b="."+j,S.verbose("Creating unique id for element",j)},userChoice:function(t){var n,i,r;return!!(t=t||S.get.userValues())&&(t=e.isArray(t)?t:[t],e.each(t,function(t,s){S.get.item(s)===!1&&(r=C.templates.addition(S.add.variables(L.addResult,s)),i=e("<div />").html(r).attr("data-"+T.value,s).attr("data-"+T.text,s).addClass(I.addition).addClass(I.item),C.hideAdditions&&i.addClass(I.hidden),n=n===o?i:n.add(i),S.verbose("Creating user choices for value",s,i))}),n)},userLabels:function(t){var n=S.get.userValues();n&&(S.debug("Adding user labels",n),e.each(n,function(e,t){S.verbose("Adding custom user value"),S.add.label(t,t)}))},menu:function(){U=e("<div />").addClass(I.menu).appendTo(_)},sizer:function(){q=e("<span />").addClass(I.sizer).insertAfter(B)}},search:function(e){e=e!==o?e:S.get.query(),S.verbose("Searching for query",e),S.has.minCharacters(e)?S.filter(e):S.hide()},select:{firstUnfiltered:function(){S.verbose("Selecting first non-filtered element"),S.remove.selectedItem(),W.not(O.unselectable).not(O.addition+O.hidden).eq(0).addClass(I.selected)},nextAvailable:function(e){e=e.eq(0);var t=e.nextAll(O.item).not(O.unselectable).eq(0),n=e.prevAll(O.item).not(O.unselectable).eq(0),o=t.length>0;o?(S.verbose("Moving selection to",t),t.addClass(I.selected)):(S.verbose("Moving selection to",n),n.addClass(I.selected))}},setup:{api:function(){var e={debug:C.debug,urlData:{value:S.get.value(),query:S.get.query()},on:!1};S.verbose("First request, initializing API"),_.api(e)},layout:function(){_.is("select")&&(S.setup.select(),S.setup.returnedObject()),S.has.menu()||S.create.menu(),S.is.search()&&!S.has.search()&&(S.verbose("Adding search input"),B=e("<input />").addClass(I.search).prop("autocomplete","off").insertBefore(k)),S.is.multiple()&&S.is.searchSelection()&&!S.has.sizer()&&S.create.sizer(),C.allowTab&&S.set.tabbable()},select:function(){var t=S.get.selectValues();S.debug("Dropdown initialized on a select",t),_.is("select")&&(V=_),V.parent(O.dropdown).length>0?(S.debug("UI dropdown already exists. Creating dropdown menu only"),_=V.closest(O.dropdown),S.has.menu()||S.create.menu(),U=_.children(O.menu),S.setup.menu(t)):(S.debug("Creating entire dropdown from select"),
_=e("<div />").attr("class",V.attr("class")).addClass(I.selection).addClass(I.dropdown).html(D.dropdown(t)).insertBefore(V),V.hasClass(I.multiple)&&V.prop("multiple")===!1&&(S.error(A.missingMultiple),V.prop("multiple",!0)),V.is("[multiple]")&&S.set.multiple(),V.prop("disabled")&&(S.debug("Disabling dropdown"),_.addClass(I.disabled)),V.removeAttr("class").detach().prependTo(_)),S.refresh()},menu:function(e){U.html(D.menu(e,w)),W=U.find(O.item)},reference:function(){S.debug("Dropdown behavior was called on select, replacing with closest dropdown"),_=_.parent(O.dropdown),S.refresh(),S.setup.returnedObject(),g&&($=S,S.invoke(p))},returnedObject:function(){var e=s.slice(0,m),t=s.slice(m+1);s=e.add(_).add(t)}},refresh:function(){S.refreshSelectors(),S.refreshData()},refreshItems:function(){W=U.find(O.item)},refreshSelectors:function(){S.verbose("Refreshing selector cache"),k=_.find(O.text),B=_.find(O.search),V=_.find(O.input),z=_.find(O.icon),H=_.prev().find(O.text).length>0?_.prev().find(O.text):_.prev(),U=_.children(O.menu),W=U.find(O.item)},refreshData:function(){S.verbose("Refreshing cached metadata"),W.removeData(T.text).removeData(T.value)},clearData:function(){S.verbose("Clearing metadata"),W.removeData(T.text).removeData(T.value),_.removeData(T.defaultText).removeData(T.defaultValue).removeData(T.placeholderText)},toggle:function(){S.verbose("Toggling menu visibility"),S.is.active()?S.hide():S.show()},show:function(t){if(t=e.isFunction(t)?t:function(){},S.can.show()&&!S.is.active()){if(S.debug("Showing dropdown"),!S.has.message()||S.has.maxSelections()||S.has.allResultsFiltered()||S.remove.message(),S.is.allFiltered())return!0;C.onShow.call(K)!==!1&&S.animate.show(function(){S.can.click()&&S.bind.intent(),S.has.menuSearch()&&S.focusSearch(),S.set.visible(),t.call(K)})}},hide:function(t){t=e.isFunction(t)?t:function(){},S.is.active()&&(S.debug("Hiding dropdown"),C.onHide.call(K)!==!1&&S.animate.hide(function(){S.remove.visible(),t.call(K)}))},hideOthers:function(){S.verbose("Finding other dropdowns to hide"),s.not(_).has(O.menu+"."+I.visible).dropdown("hide")},hideMenu:function(){S.verbose("Hiding menu  instantaneously"),S.remove.active(),S.remove.visible(),U.transition("hide")},hideSubMenus:function(){var e=U.children(O.item).find(O.menu);S.verbose("Hiding sub menus",e),e.transition("hide")},bind:{events:function(){c&&S.bind.touchEvents(),S.bind.keyboardEvents(),S.bind.inputEvents(),S.bind.mouseEvents()},touchEvents:function(){S.debug("Touch device detected binding additional touch events"),S.is.searchSelection()||S.is.single()&&_.on("touchstart"+M,S.event.test.toggle),U.on("touchstart"+M,O.item,S.event.item.mouseenter)},keyboardEvents:function(){S.verbose("Binding keyboard events"),_.on("keydown"+M,S.event.keydown),S.has.search()&&_.on(S.get.inputEvent()+M,O.search,S.event.input),S.is.multiple()&&a.on("keydown"+b,S.event.document.keydown)},inputEvents:function(){S.verbose("Binding input change events"),_.on("change"+M,O.input,S.event.change)},mouseEvents:function(){S.verbose("Binding mouse events"),S.is.multiple()&&_.on("click"+M,O.label,S.event.label.click).on("click"+M,O.remove,S.event.remove.click),S.is.searchSelection()?(_.on("mousedown"+M,S.event.mousedown).on("mouseup"+M,S.event.mouseup).on("mousedown"+M,O.menu,S.event.menu.mousedown).on("mouseup"+M,O.menu,S.event.menu.mouseup).on("click"+M,O.icon,S.event.icon.click).on("focus"+M,O.search,S.event.search.focus).on("click"+M,O.search,S.event.search.focus).on("blur"+M,O.search,S.event.search.blur).on("click"+M,O.text,S.event.text.focus),S.is.multiple()&&_.on("click"+M,S.event.click)):("click"==C.on?_.on("click"+M,O.icon,S.event.icon.click).on("click"+M,S.event.test.toggle):"hover"==C.on?_.on("mouseenter"+M,S.delay.show).on("mouseleave"+M,S.delay.hide):_.on(C.on+M,S.toggle),_.on("mousedown"+M,S.event.mousedown).on("mouseup"+M,S.event.mouseup).on("focus"+M,S.event.focus).on("blur"+M,S.event.blur)),U.on("mouseenter"+M,O.item,S.event.item.mouseenter).on("mouseleave"+M,O.item,S.event.item.mouseleave).on("click"+M,O.item,S.event.item.click)},intent:function(){S.verbose("Binding hide intent event to document"),c&&a.on("touchstart"+b,S.event.test.touch).on("touchmove"+b,S.event.test.touch),a.on("click"+b,S.event.test.hide)}},unbind:{intent:function(){S.verbose("Removing hide intent event from document"),c&&a.off("touchstart"+b).off("touchmove"+b),a.off("click"+b)}},filter:function(e){var t=e!==o?e:S.get.query(),n=function(){S.is.multiple()&&S.filterActive(),S.select.firstUnfiltered(),S.has.allResultsFiltered()?C.onNoResults.call(K,t)?C.allowAdditions?C.hideAdditions&&(S.verbose("User addition with no menu, setting empty style"),S.set.empty(),S.hideMenu()):(S.verbose("All items filtered, showing message",t),S.add.message(L.noResults)):(S.verbose("All items filtered, hiding dropdown",t),S.hideMenu()):(S.remove.empty(),S.remove.message()),C.allowAdditions&&S.add.userSuggestion(e),S.is.searchSelection()&&S.can.show()&&S.is.focusedOnSearch()&&S.show()};C.useLabels&&S.has.maxSelections()||(C.apiSettings?S.can.useAPI()?S.queryRemote(t,function(){n()}):S.error(A.noAPI):(S.filterItems(t),n()))},queryRemote:function(t,n){var o={errorDuration:!1,cache:"local",throttle:C.throttle,urlData:{query:t},onError:function(){S.add.message(L.serverError),n()},onFailure:function(){S.add.message(L.serverError),n()},onSuccess:function(e){S.remove.message(),S.setup.menu({values:e[w.remoteValues]}),n()}};_.api("get request")||S.setup.api(),o=e.extend(!0,{},o,C.apiSettings),_.api("setting",o).api("query")},filterItems:function(t){var n=t!==o?t:S.get.query(),i=null,r=S.escape.regExp(n),s=new RegExp("^"+r,"igm");S.has.query()&&(i=[],S.verbose("Searching for matching values",n),W.each(function(){var t,o,r=e(this);if("both"==C.match||"text"==C.match){if(t=String(S.get.choiceText(r,!1)),t.search(s)!==-1)return i.push(this),!0;if("exact"===C.fullTextSearch&&S.exactSearch(n,t))return i.push(this),!0;if(C.fullTextSearch===!0&&S.fuzzySearch(n,t))return i.push(this),!0}if("both"==C.match||"value"==C.match){if(o=String(S.get.choiceValue(r,t)),o.search(s)!==-1)return i.push(this),!0;if(C.fullTextSearch&&S.fuzzySearch(n,o))return i.push(this),!0}})),S.debug("Showing only matched items",n),S.remove.filteredItem(),i&&W.not(i).addClass(I.filtered)},fuzzySearch:function(e,t){var n=t.length,o=e.length;if(e=e.toLowerCase(),t=t.toLowerCase(),o>n)return!1;if(o===n)return e===t;e:for(var i=0,r=0;i<o;i++){for(var s=e.charCodeAt(i);r<n;)if(t.charCodeAt(r++)===s)continue e;return!1}return!0},exactSearch:function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),t.indexOf(e)>-1},filterActive:function(){C.useLabels&&W.filter("."+I.active).addClass(I.filtered)},focusSearch:function(e){S.has.search()&&!S.is.focusedOnSearch()&&(e?(_.off("focus"+M,O.search),B.focus(),_.on("focus"+M,O.search,S.event.search.focus)):B.focus())},forceSelection:function(){var e=W.not(I.filtered).filter("."+I.selected).eq(0),t=W.not(I.filtered).filter("."+I.active).eq(0),n=e.length>0?e:t,o=n.length>0;return o?(S.debug("Forcing partial selection to selected item",n),void S.event.item.click.call(n,{},!0)):void(C.allowAdditions?(S.set.selected(S.get.query()),S.remove.searchTerm()):S.remove.searchTerm())},event:{change:function(){Y||(S.debug("Input changed, updating selection"),S.set.selected())},focus:function(){C.showOnFocus&&!X&&S.is.hidden()&&!y&&S.show()},blur:function(e){y=n.activeElement===this,X||y||(S.remove.activeLabel(),S.hide())},mousedown:function(){S.is.searchSelection()?v=!0:X=!0},mouseup:function(){S.is.searchSelection()?v=!1:X=!1},click:function(t){var n=e(t.target);n.is(_)&&(S.is.focusedOnSearch()?S.show():S.focusSearch())},search:{focus:function(){X=!0,S.is.multiple()&&S.remove.activeLabel(),C.showOnFocus&&S.search()},blur:function(e){y=n.activeElement===this,v||Q||y||(C.forceSelection&&S.forceSelection(),S.hide()),v=!1}},icon:{click:function(e){S.toggle()}},text:{focus:function(e){X=!0,S.focusSearch()}},input:function(e){(S.is.multiple()||S.is.searchSelection())&&S.set.filtered(),clearTimeout(S.timer),S.timer=setTimeout(S.search,C.delay.search)},label:{click:function(t){var n=e(this),o=_.find(O.label),i=o.filter("."+I.active),r=n.nextAll("."+I.active),s=n.prevAll("."+I.active),a=r.length>0?n.nextUntil(r).add(i).add(n):n.prevUntil(s).add(i).add(n);t.shiftKey?(i.removeClass(I.active),a.addClass(I.active)):t.ctrlKey?n.toggleClass(I.active):(i.removeClass(I.active),n.addClass(I.active)),C.onLabelSelect.apply(this,o.filter("."+I.active))}},remove:{click:function(){var t=e(this).parent();t.hasClass(I.active)?S.remove.activeLabels():S.remove.activeLabels(t)}},test:{toggle:function(e){var t=S.is.multiple()?S.show:S.toggle;S.is.bubbledLabelClick(e)||S.is.bubbledIconClick(e)||S.determine.eventOnElement(e,t)&&e.preventDefault()},touch:function(e){S.determine.eventOnElement(e,function(){"touchstart"==e.type?S.timer=setTimeout(function(){S.hide()},C.delay.touch):"touchmove"==e.type&&clearTimeout(S.timer)}),e.stopPropagation()},hide:function(e){S.determine.eventInModule(e,S.hide)}},select:{mutation:function(e){S.debug("<select> modified, recreating menu"),S.setup.select()}},menu:{mutation:function(t){var n=t[0],o=e(!!n.addedNodes&&n.addedNodes[0]),i=e(!!n.removedNodes&&n.removedNodes[0]),r=o.add(i),s=r.is(O.addition)||r.closest(O.addition).length>0,a=r.is(O.message)||r.closest(O.message).length>0;s||a?(S.debug("Updating item selector cache"),S.refreshItems()):(S.debug("Menu modified, updating selector cache"),S.refresh())},mousedown:function(){Q=!0},mouseup:function(){Q=!1}},item:{mouseenter:function(t){var n=e(t.target),o=e(this),i=o.children(O.menu),r=o.siblings(O.item).children(O.menu),s=i.length>0,a=i.find(n).length>0;!a&&s&&(clearTimeout(S.itemTimer),S.itemTimer=setTimeout(function(){S.verbose("Showing sub-menu",i),e.each(r,function(){S.animate.hide(!1,e(this))}),S.animate.show(!1,i)},C.delay.show),t.preventDefault())},mouseleave:function(t){var n=e(this).children(O.menu);n.length>0&&(clearTimeout(S.itemTimer),S.itemTimer=setTimeout(function(){S.verbose("Hiding sub-menu",n),S.animate.hide(!1,n)},C.delay.hide))},click:function(t,n){var o=e(this),i=e(t?t.target:""),r=o.find(O.menu),s=S.get.choiceText(o),a=S.get.choiceValue(o,s),l=r.length>0,c=r.find(i).length>0;c||l&&!C.allowCategorySelection||(S.is.searchSelection()&&(C.allowAdditions&&S.remove.userAddition(),S.remove.searchTerm(),S.is.focusedOnSearch()||1==n||S.focusSearch(!0)),C.useLabels||(S.remove.filteredItem(),S.set.scrollPosition(o)),S.determine.selectAction.call(this,s,a))}},document:{keydown:function(e){var t=e.which,n=S.is.inObject(t,P);if(n){var o=_.find(O.label),i=o.filter("."+I.active),r=(i.data(T.value),o.index(i)),s=o.length,a=i.length>0,l=i.length>1,c=0===r,u=r+1==s,d=S.is.searchSelection(),p=S.is.focusedOnSearch(),g=S.is.focused(),h=p&&0===S.get.caretPosition();if(d&&!a&&!p)return;t==P.leftArrow?!g&&!h||a?a&&(e.shiftKey?S.verbose("Adding previous label to selection"):(S.verbose("Selecting previous label"),o.removeClass(I.active)),c&&!l?i.addClass(I.active):i.prev(O.siblingLabel).addClass(I.active).end(),e.preventDefault()):(S.verbose("Selecting previous label"),o.last().addClass(I.active)):t==P.rightArrow?(g&&!a&&o.first().addClass(I.active),a&&(e.shiftKey?S.verbose("Adding next label to selection"):(S.verbose("Selecting next label"),o.removeClass(I.active)),u?d?p?o.removeClass(I.active):S.focusSearch():l?i.next(O.siblingLabel).addClass(I.active):i.addClass(I.active):i.next(O.siblingLabel).addClass(I.active),e.preventDefault())):t==P.deleteKey||t==P.backspace?a?(S.verbose("Removing active labels"),u&&d&&!p&&S.focusSearch(),i.last().next(O.siblingLabel).addClass(I.active),S.remove.activeLabels(i),e.preventDefault()):h&&!a&&t==P.backspace&&(S.verbose("Removing last label on input backspace"),i=o.last().addClass(I.active),S.remove.activeLabels(i)):i.removeClass(I.active)}}},keydown:function(e){var t=e.which,n=S.is.inObject(t,P);if(n){var o,i,r=W.not(O.unselectable).filter("."+I.selected).eq(0),s=U.children("."+I.active).eq(0),a=r.length>0?r:s,l=a.length>0?a.siblings(":not(."+I.filtered+")").addBack():U.children(":not(."+I.filtered+")"),c=a.children(O.menu),u=a.closest(O.menu),d=u.hasClass(I.visible)||u.hasClass(I.animating)||u.parent(O.menu).length>0,p=c.length>0,g=a.length>0,h=a.not(O.unselectable).length>0,m=t==P.delimiter&&C.allowAdditions&&S.is.multiple(),f=C.allowAdditions&&C.hideAdditions&&(t==P.enter||m)&&h;if(f&&(S.verbose("Selecting item from keyboard shortcut",a),S.event.item.click.call(a,e),S.is.searchSelection()&&S.remove.searchTerm()),S.is.visible()){if((t==P.enter||m)&&(t==P.enter&&g&&p&&!C.allowCategorySelection?(S.verbose("Pressed enter on unselectable category, opening sub menu"),t=P.rightArrow):h&&(S.verbose("Selecting item from keyboard shortcut",a),S.event.item.click.call(a,e),S.is.searchSelection()&&S.remove.searchTerm()),e.preventDefault()),g&&(t==P.leftArrow&&(i=u[0]!==U[0],i&&(S.verbose("Left key pressed, closing sub-menu"),S.animate.hide(!1,u),a.removeClass(I.selected),u.closest(O.item).addClass(I.selected),e.preventDefault())),t==P.rightArrow&&p&&(S.verbose("Right key pressed, opening sub-menu"),S.animate.show(!1,c),a.removeClass(I.selected),c.find(O.item).eq(0).addClass(I.selected),e.preventDefault())),t==P.upArrow){if(o=g&&d?a.prevAll(O.item+":not("+O.unselectable+")").eq(0):W.eq(0),l.index(o)<0)return S.verbose("Up key pressed but reached top of current menu"),void e.preventDefault();S.verbose("Up key pressed, changing active item"),a.removeClass(I.selected),o.addClass(I.selected),S.set.scrollPosition(o),C.selectOnKeydown&&S.is.single()&&S.set.selectedItem(o),e.preventDefault()}if(t==P.downArrow){if(o=g&&d?o=a.nextAll(O.item+":not("+O.unselectable+")").eq(0):W.eq(0),0===o.length)return S.verbose("Down key pressed but reached bottom of current menu"),void e.preventDefault();S.verbose("Down key pressed, changing active item"),W.removeClass(I.selected),o.addClass(I.selected),S.set.scrollPosition(o),C.selectOnKeydown&&S.is.single()&&S.set.selectedItem(o),e.preventDefault()}t==P.pageUp&&(S.scrollPage("up"),e.preventDefault()),t==P.pageDown&&(S.scrollPage("down"),e.preventDefault()),t==P.escape&&(S.verbose("Escape key pressed, closing dropdown"),S.hide())}else m&&e.preventDefault(),t!=P.downArrow||S.is.visible()||(S.verbose("Down key pressed, showing dropdown"),S.select.firstUnfiltered(),S.show(),e.preventDefault())}else S.has.search()||S.set.selectedLetter(String.fromCharCode(t))}},trigger:{change:function(){var e=n.createEvent("HTMLEvents"),t=V[0];t&&(S.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},determine:{selectAction:function(t,n){S.verbose("Determining action",C.action),e.isFunction(S.action[C.action])?(S.verbose("Triggering preset action",C.action,t,n),S.action[C.action].call(K,t,n,this)):e.isFunction(C.action)?(S.verbose("Triggering user action",C.action,t,n),C.action.call(K,t,n,this)):S.error(A.action,C.action)},eventInModule:function(t,o){var i=e(t.target),r=i.closest(n.documentElement).length>0,s=i.closest(_).length>0;return o=e.isFunction(o)?o:function(){},r&&!s?(S.verbose("Triggering event",o),o(),!0):(S.verbose("Event occurred in dropdown, canceling callback"),!1)},eventOnElement:function(t,o){var i=e(t.target),r=i.closest(O.siblingLabel),s=n.body.contains(t.target),a=0===_.find(r).length,l=0===i.closest(U).length;return o=e.isFunction(o)?o:function(){},s&&a&&l?(S.verbose("Triggering event",o),o(),!0):(S.verbose("Event occurred in dropdown menu, canceling callback"),!1)}},action:{nothing:function(){},activate:function(t,n,i){if(n=n!==o?n:t,S.can.activate(e(i))){if(S.set.selected(n,e(i)),S.is.multiple()&&!S.is.allFiltered())return;S.hideAndClear()}},select:function(t,n,i){if(n=n!==o?n:t,S.can.activate(e(i))){if(S.set.value(n,e(i)),S.is.multiple()&&!S.is.allFiltered())return;S.hideAndClear()}},combo:function(t,n,i){n=n!==o?n:t,S.set.selected(n,e(i)),S.hideAndClear()},hide:function(e,t,n){S.set.value(t,e),S.hideAndClear()}},get:{id:function(){return j},defaultText:function(){return _.data(T.defaultText)},defaultValue:function(){return _.data(T.defaultValue)},placeholderText:function(){return _.data(T.placeholderText)||""},text:function(){return k.text()},query:function(){return e.trim(B.val())},searchWidth:function(e){return e=e!==o?e:B.val(),q.text(e),Math.ceil(q.width()+1)},selectionCount:function(){var t,n=S.get.values();return t=S.is.multiple()?e.isArray(n)?n.length:0:""!==S.get.value()?1:0},transition:function(e){return"auto"==C.transition?S.is.upward(e)?"slide up":"slide down":C.transition},userValues:function(){var t=S.get.values();return!!t&&(t=e.isArray(t)?t:[t],e.grep(t,function(e){return S.get.item(e)===!1}))},uniqueArray:function(t){return e.grep(t,function(n,o){return e.inArray(n,t)===o})},caretPosition:function(){var e,t,o=B.get(0);return"selectionStart"in o?o.selectionStart:n.selection?(o.focus(),e=n.selection.createRange(),t=e.text.length,e.moveStart("character",-o.value.length),e.text.length-t):void 0},value:function(){var t=V.length>0?V.val():_.data(T.value),n=e.isArray(t)&&1===t.length&&""===t[0];return t===o||n?"":t},values:function(){var e=S.get.value();return""===e?"":!S.has.selectInput()&&S.is.multiple()?"string"==typeof e?e.split(C.delimiter):"":e},remoteValues:function(){var t=S.get.values(),n=!1;return t&&("string"==typeof t&&(t=[t]),e.each(t,function(e,t){var o=S.read.remoteData(t);S.verbose("Restoring value from session data",o,t),o&&(n||(n={}),n[t]=o)})),n},choiceText:function(t,n){if(n=n!==o?n:C.preserveHTML,t)return t.find(O.menu).length>0&&(S.verbose("Retrieving text of element with sub-menu"),t=t.clone(),t.find(O.menu).remove(),t.find(O.menuIcon).remove()),t.data(T.text)!==o?t.data(T.text):n?e.trim(t.html()):e.trim(t.text())},choiceValue:function(t,n){return n=n||S.get.choiceText(t),!!t&&(t.data(T.value)!==o?String(t.data(T.value)):"string"==typeof n?e.trim(n.toLowerCase()):String(n))},inputEvent:function(){var e=B[0];return!!e&&(e.oninput!==o?"input":e.onpropertychange!==o?"propertychange":"keyup")},selectValues:function(){var t={};return t.values=[],_.find("option").each(function(){var n=e(this),i=n.html(),r=n.attr("disabled"),s=n.attr("value")!==o?n.attr("value"):i;"auto"===C.placeholder&&""===s?t.placeholder=i:t.values.push({name:i,value:s,disabled:r})}),C.placeholder&&"auto"!==C.placeholder&&(S.debug("Setting placeholder value to",C.placeholder),t.placeholder=C.placeholder),C.sortSelect?(t.values.sort(function(e,t){return e.name>t.name?1:-1}),S.debug("Retrieved and sorted values from select",t)):S.debug("Retrieved values from select",t),t},activeItem:function(){return W.filter("."+I.active)},selectedItem:function(){var e=W.not(O.unselectable).filter("."+I.selected);return e.length>0?e:W.eq(0)},itemWithAdditions:function(e){var t=S.get.item(e),n=S.create.userChoice(e),o=n&&n.length>0;return o&&(t=t.length>0?t.add(n):n),t},item:function(t,n){var i,r,s=!1;return t=t!==o?t:S.get.values()!==o?S.get.values():S.get.text(),i=r?t.length>0:t!==o&&null!==t,r=S.is.multiple()&&e.isArray(t),n=""===t||0===t||n||!1,i&&W.each(function(){var i=e(this),a=S.get.choiceText(i),l=S.get.choiceValue(i,a);if(null!==l&&l!==o)if(r)e.inArray(String(l),t)===-1&&e.inArray(a,t)===-1||(s=s?s.add(i):i);else if(n){if(S.verbose("Ambiguous dropdown value using strict type check",i,t),l===t||a===t)return s=i,!0}else if(String(l)==String(t)||a==t)return S.verbose("Found select item by value",l,t),s=i,!0}),s}},check:{maxSelections:function(e){return!C.maxSelections||(e=e!==o?e:S.get.selectionCount(),e>=C.maxSelections?(S.debug("Maximum selection count reached"),C.useLabels&&(W.addClass(I.filtered),S.add.message(L.maxSelections)),!0):(S.verbose("No longer at maximum selection count"),S.remove.message(),S.remove.filteredItem(),S.is.searchSelection()&&S.filterItems(),!1))}},restore:{defaults:function(){S.clear(),S.restore.defaultText(),S.restore.defaultValue()},defaultText:function(){var e=S.get.defaultText(),t=S.get.placeholderText;e===t?(S.debug("Restoring default placeholder text",e),S.set.placeholderText(e)):(S.debug("Restoring default text",e),S.set.text(e))},placeholderText:function(){S.set.placeholderText()},defaultValue:function(){var e=S.get.defaultValue();e!==o&&(S.debug("Restoring default value",e),""!==e?(S.set.value(e),S.set.selected()):(S.remove.activeItem(),S.remove.selectedItem()))},labels:function(){C.allowAdditions&&(C.useLabels||(S.error(A.labels),C.useLabels=!0),S.debug("Restoring selected values"),S.create.userLabels()),S.check.maxSelections()},selected:function(){S.restore.values(),S.is.multiple()?(S.debug("Restoring previously selected values and labels"),S.restore.labels()):S.debug("Restoring previously selected values")},values:function(){S.set.initialLoad(),C.apiSettings&&C.saveRemoteData&&S.get.remoteValues()?S.restore.remoteValues():S.set.selected(),S.remove.initialLoad()},remoteValues:function(){var t=S.get.remoteValues();S.debug("Recreating selected from session data",t),t&&(S.is.single()?e.each(t,function(e,t){S.set.text(t)}):e.each(t,function(e,t){S.add.label(e,t)}))}},read:{remoteData:function(e){var n;return t.Storage===o?void S.error(A.noStorage):(n=sessionStorage.getItem(e),n!==o&&n)}},save:{defaults:function(){S.save.defaultText(),S.save.placeholderText(),S.save.defaultValue()},defaultValue:function(){var e=S.get.value();S.verbose("Saving default value as",e),_.data(T.defaultValue,e)},defaultText:function(){var e=S.get.text();S.verbose("Saving default text as",e),_.data(T.defaultText,e)},placeholderText:function(){var e;C.placeholder!==!1&&k.hasClass(I.placeholder)&&(e=S.get.text(),S.verbose("Saving placeholder text as",e),_.data(T.placeholderText,e))},remoteData:function(e,n){return t.Storage===o?void S.error(A.noStorage):(S.verbose("Saving remote data to session storage",n,e),void sessionStorage.setItem(n,e))}},clear:function(){S.is.multiple()&&C.useLabels?S.remove.labels():(S.remove.activeItem(),S.remove.selectedItem()),S.set.placeholderText(),S.clearValue()},clearValue:function(){S.set.value("")},scrollPage:function(e,t){var n,o,i,r=t||S.get.selectedItem(),s=r.closest(O.menu),a=s.outerHeight(),l=s.scrollTop(),c=W.eq(0).outerHeight(),u=Math.floor(a/c),d=(s.prop("scrollHeight"),"up"==e?l-c*u:l+c*u),p=W.not(O.unselectable);i="up"==e?p.index(r)-u:p.index(r)+u,n="up"==e?i>=0:i<p.length,o=n?p.eq(i):"up"==e?p.first():p.last(),o.length>0&&(S.debug("Scrolling page",e,o),r.removeClass(I.selected),o.addClass(I.selected),C.selectOnKeydown&&S.is.single()&&S.set.selectedItem(o),s.scrollTop(d))},set:{filtered:function(){var e=S.is.multiple(),t=S.is.searchSelection(),n=e&&t,o=t?S.get.query():"",i="string"==typeof o&&o.length>0,r=S.get.searchWidth(),s=""!==o;e&&i&&(S.verbose("Adjusting input width",r,C.glyphWidth),B.css("width",r)),i||n&&s?(S.verbose("Hiding placeholder text"),k.addClass(I.filtered)):(!e||n&&!s)&&(S.verbose("Showing placeholder text"),k.removeClass(I.filtered))},empty:function(){_.addClass(I.empty)},loading:function(){_.addClass(I.loading)},placeholderText:function(e){e=e||S.get.placeholderText(),S.debug("Setting placeholder text",e),S.set.text(e),k.addClass(I.placeholder)},tabbable:function(){S.has.search()?(S.debug("Added tabindex to searchable dropdown"),B.val("").attr("tabindex",0),U.attr("tabindex",-1)):(S.debug("Added tabindex to dropdown"),_.attr("tabindex")===o&&(_.attr("tabindex",0),U.attr("tabindex",-1)))},initialLoad:function(){S.verbose("Setting initial load"),f=!0},activeItem:function(e){C.allowAdditions&&e.filter(O.addition).length>0?e.addClass(I.filtered):e.addClass(I.active)},partialSearch:function(e){var t=S.get.query().length;B.val(e.substr(0,t))},scrollPosition:function(e,t){var n,i,r,s,a,l,c,u,d,p=5;e=e||S.get.selectedItem(),n=e.closest(O.menu),i=e&&e.length>0,t=t!==o&&t,e&&n.length>0&&i&&(s=e.position().top,n.addClass(I.loading),l=n.scrollTop(),a=n.offset().top,s=e.offset().top,r=l-a+s,t||(c=n.height(),d=l+c<r+p,u=r-p<l),S.debug("Scrolling to active item",r),(t||u||d)&&n.scrollTop(r),n.removeClass(I.loading))},text:function(e){"select"!==C.action&&("combo"==C.action?(S.debug("Changing combo button text",e,H),C.preserveHTML?H.html(e):H.text(e)):(e!==S.get.placeholderText()&&k.removeClass(I.placeholder),S.debug("Changing text",e,k),k.removeClass(I.filtered),C.preserveHTML?k.html(e):k.text(e)))},selectedItem:function(e){var t=S.get.choiceValue(e),n=S.get.choiceText(e,!1);S.debug("Setting user selection to item",e),S.remove.activeItem(),S.set.partialSearch(n),S.set.activeItem(e),S.set.selected(t,e),S.set.text(n)},selectedLetter:function(t){var n,o=W.filter("."+I.selected),i=o.length>0&&S.has.firstLetter(o,t),r=!1;i&&(n=o.nextAll(W).eq(0),S.has.firstLetter(n,t)&&(r=n)),r||W.each(function(){if(S.has.firstLetter(e(this),t))return r=e(this),!1}),r&&(S.verbose("Scrolling to next value with letter",t),S.set.scrollPosition(r),o.removeClass(I.selected),r.addClass(I.selected),C.selectOnKeydown&&S.is.single()&&S.set.selectedItem(r))},direction:function(e){"auto"==C.direction?S.is.onScreen(e)?S.remove.upward(e):S.set.upward(e):"upward"==C.direction&&S.set.upward(e)},upward:function(e){var t=e||_;t.addClass(I.upward)},value:function(e,t,n){var i=S.escape.value(e),r=V.length>0,s=(!S.has.value(e),S.get.values()),a=e!==o?String(e):e;if(r){if(!C.allowReselection&&a==s&&(S.verbose("Skipping value update already same value",e,s),!S.is.initialLoad()))return;S.is.single()&&S.has.selectInput()&&S.can.extendSelect()&&(S.debug("Adding user option",e),S.add.optionValue(e)),S.debug("Updating input value",i,s),Y=!0,V.val(i),C.fireOnInit===!1&&S.is.initialLoad()?S.debug("Input native change event ignored on initial load"):S.trigger.change(),Y=!1}else S.verbose("Storing value in metadata",i,V),i!==s&&_.data(T.value,a);C.fireOnInit===!1&&S.is.initialLoad()?S.verbose("No callback on initial load",C.onChange):C.onChange.call(K,e,t,n)},active:function(){_.addClass(I.active)},multiple:function(){_.addClass(I.multiple)},visible:function(){_.addClass(I.visible)},exactly:function(e,t){S.debug("Setting selected to exact values"),S.clear(),S.set.selected(e,t)},selected:function(t,n){var o=S.is.multiple();n=C.allowAdditions?n||S.get.itemWithAdditions(t):n||S.get.item(t),n&&(S.debug("Setting selected menu item to",n),S.is.multiple()&&S.remove.searchWidth(),S.is.single()?(S.remove.activeItem(),S.remove.selectedItem()):C.useLabels&&S.remove.selectedItem(),n.each(function(){var t=e(this),i=S.get.choiceText(t),r=S.get.choiceValue(t,i),s=t.hasClass(I.filtered),a=t.hasClass(I.active),l=t.hasClass(I.addition),c=o&&1==n.length;o?!a||l?(C.apiSettings&&C.saveRemoteData&&S.save.remoteData(i,r),C.useLabels?(S.add.value(r,i,t),S.add.label(r,i,c),S.set.activeItem(t),S.filterActive(),S.select.nextAvailable(n)):(S.add.value(r,i,t),S.set.text(S.add.variables(L.count)),S.set.activeItem(t))):s||(S.debug("Selected active value, removing label"),S.remove.selected(r)):(C.apiSettings&&C.saveRemoteData&&S.save.remoteData(i,r),S.set.text(i),S.set.value(r,i,t),t.addClass(I.active).addClass(I.selected))}))}},add:{label:function(t,n,o){var i,r=S.is.searchSelection()?B:k,s=S.escape.value(t);return i=e("<a />").addClass(I.label).attr("data-value",s).html(D.label(s,n)),i=C.onLabelCreate.call(i,s,n),S.has.label(t)?void S.debug("Label already exists, skipping",s):(C.label.variation&&i.addClass(C.label.variation),void(o===!0?(S.debug("Animating in label",i),i.addClass(I.hidden).insertBefore(r).transition(C.label.transition,C.label.duration)):(S.debug("Adding selection label",i),i.insertBefore(r))))},message:function(t){var n=U.children(O.message),o=C.templates.message(S.add.variables(t));n.length>0?n.html(o):n=e("<div/>").html(o).addClass(I.message).appendTo(U)},optionValue:function(t){var n=S.escape.value(t),o=V.find('option[value="'+n+'"]'),i=o.length>0;i||(S.disconnect.selectObserver(),S.is.single()&&(S.verbose("Removing previous user addition"),V.find("option."+I.addition).remove()),e("<option/>").prop("value",n).addClass(I.addition).html(t).appendTo(V),S.verbose("Adding user addition as an <option>",t),S.observe.select())},userSuggestion:function(e){var t,n=U.children(O.addition),o=S.get.item(e),i=o&&o.not(O.addition).length,r=n.length>0;if(!C.useLabels||!S.has.maxSelections()){if(""===e||i)return void n.remove();r?(n.data(T.value,e).data(T.text,e).attr("data-"+T.value,e).attr("data-"+T.text,e).removeClass(I.filtered),C.hideAdditions||(t=C.templates.addition(S.add.variables(L.addResult,e)),n.html(t)),S.verbose("Replacing user suggestion with new value",n)):(n=S.create.userChoice(e),n.prependTo(U),S.verbose("Adding item choice to menu corresponding with user choice addition",n)),C.hideAdditions&&!S.is.allFiltered()||n.addClass(I.selected).siblings().removeClass(I.selected),S.refreshItems()}},variables:function(e,t){var n,o,i=e.search("{count}")!==-1,r=e.search("{maxCount}")!==-1,s=e.search("{term}")!==-1;return S.verbose("Adding templated variables to message",e),i&&(n=S.get.selectionCount(),e=e.replace("{count}",n)),r&&(n=S.get.selectionCount(),e=e.replace("{maxCount}",C.maxSelections)),s&&(o=t||S.get.query(),e=e.replace("{term}",o)),e},value:function(t,n,o){var i,r=S.get.values();return""===t?void S.debug("Cannot select blank values from multiselect"):(e.isArray(r)?(i=r.concat([t]),i=S.get.uniqueArray(i)):i=[t],S.has.selectInput()?S.can.extendSelect()&&(S.debug("Adding value to select",t,i,V),S.add.optionValue(t)):(i=i.join(C.delimiter),S.debug("Setting hidden input to delimited value",i,V)),C.fireOnInit===!1&&S.is.initialLoad()?S.verbose("Skipping onadd callback on initial load",C.onAdd):C.onAdd.call(K,t,n,o),S.set.value(i,t,n,o),void S.check.maxSelections())}},remove:{active:function(){_.removeClass(I.active)},activeLabel:function(){_.find(O.label).removeClass(I.active)},empty:function(){_.removeClass(I.empty)},loading:function(){_.removeClass(I.loading)},initialLoad:function(){f=!1},upward:function(e){var t=e||_;t.removeClass(I.upward)},visible:function(){_.removeClass(I.visible)},activeItem:function(){W.removeClass(I.active)},filteredItem:function(){C.useLabels&&S.has.maxSelections()||(C.useLabels&&S.is.multiple()?W.not("."+I.active).removeClass(I.filtered):W.removeClass(I.filtered),S.remove.empty())},optionValue:function(e){var t=S.escape.value(e),n=V.find('option[value="'+t+'"]'),o=n.length>0;o&&n.hasClass(I.addition)&&(x&&(x.disconnect(),S.verbose("Temporarily disconnecting mutation observer")),n.remove(),S.verbose("Removing user addition as an <option>",t),x&&x.observe(V[0],{childList:!0,subtree:!0}))},message:function(){U.children(O.message).remove()},searchWidth:function(){B.css("width","")},searchTerm:function(){S.verbose("Cleared search term"),B.val(""),S.set.filtered()},userAddition:function(){W.filter(O.addition).remove()},selected:function(t,n){return!!(n=C.allowAdditions?n||S.get.itemWithAdditions(t):n||S.get.item(t))&&void n.each(function(){var t=e(this),n=S.get.choiceText(t),o=S.get.choiceValue(t,n);S.is.multiple()?C.useLabels?(S.remove.value(o,n,t),S.remove.label(o)):(S.remove.value(o,n,t),0===S.get.selectionCount()?S.set.placeholderText():S.set.text(S.add.variables(L.count))):S.remove.value(o,n,t),t.removeClass(I.filtered).removeClass(I.active),C.useLabels&&t.removeClass(I.selected)})},selectedItem:function(){W.removeClass(I.selected)},value:function(e,t,n){var o,i=S.get.values();S.has.selectInput()?(S.verbose("Input is <select> removing selected option",e),o=S.remove.arrayValue(e,i),S.remove.optionValue(e)):(S.verbose("Removing from delimited values",e),o=S.remove.arrayValue(e,i),o=o.join(C.delimiter)),C.fireOnInit===!1&&S.is.initialLoad()?S.verbose("No callback on initial load",C.onRemove):C.onRemove.call(K,e,t,n),S.set.value(o,t,n),S.check.maxSelections()},arrayValue:function(t,n){return e.isArray(n)||(n=[n]),n=e.grep(n,function(e){return t!=e}),S.verbose("Removed value from delimited string",t,n),n},label:function(e,t){var n=_.find(O.label),o=n.filter('[data-value="'+e+'"]');S.verbose("Removing label",o),o.remove()},activeLabels:function(e){e=e||_.find(O.label).filter("."+I.active),S.verbose("Removing active label selections",e),S.remove.labels(e)},labels:function(t){
t=t||_.find(O.label),S.verbose("Removing labels",t),t.each(function(){var t=e(this),n=t.data(T.value),i=n!==o?String(n):n,r=S.is.userValue(i);return C.onLabelRemove.call(t,n)===!1?void S.debug("Label remove callback cancelled removal"):(S.remove.message(),void(r?(S.remove.value(i),S.remove.label(i)):S.remove.selected(i)))})},tabbable:function(){S.has.search()?(S.debug("Searchable dropdown initialized"),B.removeAttr("tabindex"),U.removeAttr("tabindex")):(S.debug("Simple selection dropdown initialized"),_.removeAttr("tabindex"),U.removeAttr("tabindex"))}},has:{menuSearch:function(){return S.has.search()&&B.closest(U).length>0},search:function(){return B.length>0},sizer:function(){return q.length>0},selectInput:function(){return V.is("select")},minCharacters:function(e){return!C.minCharacters||(e=e!==o?String(e):String(S.get.query()),e.length>=C.minCharacters)},firstLetter:function(e,t){var n,o;return!(!e||0===e.length||"string"!=typeof t)&&(n=S.get.choiceText(e,!1),t=t.toLowerCase(),o=String(n).charAt(0).toLowerCase(),t==o)},input:function(){return V.length>0},items:function(){return W.length>0},menu:function(){return U.length>0},message:function(){return 0!==U.children(O.message).length},label:function(e){var t=S.escape.value(e),n=_.find(O.label);return n.filter('[data-value="'+t+'"]').length>0},maxSelections:function(){return C.maxSelections&&S.get.selectionCount()>=C.maxSelections},allResultsFiltered:function(){var e=W.not(O.addition);return e.filter(O.unselectable).length===e.length},userSuggestion:function(){return U.children(O.addition).length>0},query:function(){return""!==S.get.query()},value:function(t){var n=S.get.values(),o=e.isArray(n)?n&&e.inArray(t,n)!==-1:n==t;return!!o}},is:{active:function(){return _.hasClass(I.active)},bubbledLabelClick:function(t){return e(t.target).is("select, input")&&_.closest("label").length>0},bubbledIconClick:function(t){return e(t.target).closest(z).length>0},alreadySetup:function(){return _.is("select")&&_.parent(O.dropdown).length>0&&0===_.prev().length},animating:function(e){return e?e.transition&&e.transition("is animating"):U.transition&&U.transition("is animating")},disabled:function(){return _.hasClass(I.disabled)},focused:function(){return n.activeElement===_[0]},focusedOnSearch:function(){return n.activeElement===B[0]},allFiltered:function(){return(S.is.multiple()||S.has.search())&&!(0==C.hideAdditions&&S.has.userSuggestion())&&!S.has.message()&&S.has.allResultsFiltered()},hidden:function(e){return!S.is.visible(e)},initialLoad:function(){return f},onScreen:function(e){var t,n=e||U,o=!0,i={};return n.addClass(I.loading),t={context:{scrollTop:G.scrollTop(),height:G.outerHeight()},menu:{offset:n.offset(),height:n.outerHeight()}},i={above:t.context.scrollTop<=t.menu.offset.top-t.menu.height,below:t.context.scrollTop+t.context.height>=t.menu.offset.top+t.menu.height},i.below?(S.verbose("Dropdown can fit in context downward",i),o=!0):i.below||i.above?(S.verbose("Dropdown cannot fit below, opening upward",i),o=!1):(S.verbose("Dropdown cannot fit in either direction, favoring downward",i),o=!0),n.removeClass(I.loading),o},inObject:function(t,n){var o=!1;return e.each(n,function(e,n){if(n==t)return o=!0,!0}),o},multiple:function(){return _.hasClass(I.multiple)},single:function(){return!S.is.multiple()},selectMutation:function(t){var n=!1;return e.each(t,function(t,o){if(o.target&&e(o.target).is("select"))return n=!0,!0}),n},search:function(){return _.hasClass(I.search)},searchSelection:function(){return S.has.search()&&1===B.parent(O.dropdown).length},selection:function(){return _.hasClass(I.selection)},userValue:function(t){return e.inArray(t,S.get.userValues())!==-1},upward:function(e){var t=e||_;return t.hasClass(I.upward)},visible:function(e){return e?e.hasClass(I.visible):U.hasClass(I.visible)}},can:{activate:function(e){return!!C.useLabels||!S.has.maxSelections()||!(!S.has.maxSelections()||!e.hasClass(I.active))},click:function(){return c||"click"==C.on},extendSelect:function(){return C.allowAdditions||C.apiSettings},show:function(){return!S.is.disabled()&&(S.has.items()||S.has.message())},useAPI:function(){return e.fn.api!==o}},animate:{show:function(t,n){var i,r=n||U,s=n?function(){}:function(){S.hideSubMenus(),S.hideOthers(),S.set.active()};t=e.isFunction(t)?t:function(){},S.verbose("Doing menu show animation",r),S.set.direction(n),i=S.get.transition(n),S.is.selection()&&S.set.scrollPosition(S.get.selectedItem(),!0),(S.is.hidden(r)||S.is.animating(r))&&("none"==i?(s(),r.transition("show"),t.call(K)):e.fn.transition!==o&&_.transition("is supported")?r.transition({animation:i+" in",debug:C.debug,verbose:C.verbose,duration:C.duration,queue:!0,onStart:s,onComplete:function(){t.call(K)}}):S.error(A.noTransition,i))},hide:function(t,n){var i=n||U,r=(n?.9*C.duration:C.duration,n?function(){}:function(){S.can.click()&&S.unbind.intent(),S.remove.active()}),s=S.get.transition(n);t=e.isFunction(t)?t:function(){},(S.is.visible(i)||S.is.animating(i))&&(S.verbose("Doing menu hide animation",i),"none"==s?(r(),i.transition("hide"),t.call(K)):e.fn.transition!==o&&_.transition("is supported")?i.transition({animation:s+" out",duration:C.duration,debug:C.debug,verbose:C.verbose,queue:!0,onStart:r,onComplete:function(){"auto"==C.direction&&S.remove.upward(n),t.call(K)}}):S.error(A.transition))}},hideAndClear:function(){S.remove.searchTerm(),S.has.maxSelections()||(S.has.search()?S.hide(function(){S.remove.filteredItem()}):S.hide())},delay:{show:function(){S.verbose("Delaying show event to ensure user intent"),clearTimeout(S.timer),S.timer=setTimeout(S.show,C.delay.show)},hide:function(){S.verbose("Delaying hide event to ensure user intent"),clearTimeout(S.timer),S.timer=setTimeout(S.hide,C.delay.hide)}},escape:{value:function(t){var n=e.isArray(t),o="string"==typeof t,i=!o&&!n,r=o&&t.search(R.quote)!==-1,s=[];return S.has.selectInput()&&!i&&r?(S.debug("Encoding quote values for use in select",t),n?(e.each(t,function(e,t){s.push(t.replace(R.quote,"&quot;"))}),s):t.replace(R.quote,"&quot;")):t},regExp:function(e){return e=String(e),e.replace(R.escape,"\\$&")}},setting:function(t,n){if(S.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,C,t);else{if(n===o)return C[t];e.isPlainObject(C[t])?e.extend(!0,C[t],n):C[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,S,t);else{if(n===o)return S[t];S[t]=n}},debug:function(){!C.silent&&C.debug&&(C.performance?S.performance.log(arguments):(S.debug=Function.prototype.bind.call(console.info,console,C.name+":"),S.debug.apply(console,arguments)))},verbose:function(){!C.silent&&C.verbose&&C.debug&&(C.performance?S.performance.log(arguments):(S.verbose=Function.prototype.bind.call(console.info,console,C.name+":"),S.verbose.apply(console,arguments)))},error:function(){C.silent||(S.error=Function.prototype.bind.call(console.error,console,C.name+":"),S.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;C.performance&&(t=(new Date).getTime(),o=u||t,n=t-o,u=t,d.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:K,"Execution Time":n})),clearTimeout(S.performance.timer),S.performance.timer=setTimeout(S.performance.display,500)},display:function(){var t=C.name+":",n=0;u=!1,clearTimeout(S.performance.timer),e.each(d,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",l&&(t+=" '"+l+"'"),(console.group!==o||console.table!==o)&&d.length>0&&(console.groupCollapsed(t),console.table?console.table(d):e.each(d,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),d=[]}},invoke:function(t,n,i){var s,a,l,c=$;return n=n||h,i=K||i,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o?(a=c[i],!1):(S.error(A.method,t),!1);c=c[i]}})),e.isFunction(a)?l=a.apply(i,n):a!==o&&(l=a),e.isArray(r)?r.push(l):r!==o?r=[r,l]:l!==o&&(r=l),a}},g?($===o&&S.initialize(),S.invoke(p)):($!==o&&$.invoke("destroy"),S.initialize())}),r!==o?r:s},e.fn.dropdown.settings={silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",action:"activate",apiSettings:!1,selectOnKeydown:!0,minCharacters:0,saveRemoteData:!0,throttle:200,context:t,direction:"auto",keepOnScreen:!0,match:"both",fullTextSearch:!1,placeholder:"auto",preserveHTML:!0,sortSelect:!1,forceSelection:!0,allowAdditions:!1,hideAdditions:!0,maxSelections:!1,useLabels:!0,delimiter:",",showOnFocus:!0,allowReselection:!1,allowTab:!0,allowCategorySelection:!1,fireOnInit:!1,transition:"auto",duration:200,glyphWidth:1.037,label:{transition:"scale",duration:200,variation:!1},delay:{hide:300,show:200,search:20,touch:50},onChange:function(e,t,n){},onAdd:function(e,t,n){},onRemove:function(e,t,n){},onLabelSelect:function(e){},onLabelCreate:function(t,n){return e(this)},onLabelRemove:function(e){return!0},onNoResults:function(e){return!0},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",noStorage:"Saving remote data requires session storage",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>"},regExp:{escape:/[-[\]{}()*+?.,\\^$|#\s]/g,quote:/"/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{remoteValues:"results",values:"values",disabled:"disabled",name:"name",value:"value",text:"text"},keys:{backspace:8,delimiter:188,deleteKey:46,enter:13,escape:27,pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},selector:{addition:".addition",dropdown:".ui.dropdown",hidden:".hidden",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input, .menu input.search",sizer:"> input.sizer",text:"> .text:not(.icon)",unselectable:".disabled, .filtered"},className:{active:"active",addition:"addition",animating:"animating",disabled:"disabled",empty:"empty",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",sizer:"sizer",search:"search",selected:"selected",selection:"selection",upward:"upward",visible:"visible"}},e.fn.dropdown.settings.templates={dropdown:function(t){var n=t.placeholder||!1,o=(t.values||{},"");return o+='<i class="dropdown icon"></i>',o+=t.placeholder?'<div class="default text">'+n+"</div>":'<div class="text"></div>',o+='<div class="menu">',e.each(t.values,function(e,t){o+=t.disabled?'<div class="disabled item" data-value="'+t.value+'">'+t.name+"</div>":'<div class="item" data-value="'+t.value+'">'+t.name+"</div>"}),o+="</div>"},menu:function(t,n){var o=t[n.values]||{},i="";return e.each(o,function(e,t){var o=t[n.text]?'data-text="'+t[n.text]+'"':"",r=t[n.disabled]?"disabled ":"";i+='<div class="'+r+'item" data-value="'+t[n.value]+'"'+o+">",i+=t[n.name],i+="</div>"}),i},label:function(e,t){return t+'<i class="delete icon"></i>'},message:function(e){return e},addition:function(e){return e}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.embed=function(n){var i,r=e(this),s=r.selector||"",a=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return r.each(function(){var p,g=e.isPlainObject(n)?e.extend(!0,{},e.fn.embed.settings,n):e.extend({},e.fn.embed.settings),h=g.selector,m=g.className,f=g.sources,y=g.error,v=g.metadata,b=g.namespace,j=g.templates,x="."+b,E="module-"+b,S=(e(t),e(this)),C=S.find(h.placeholder),I=S.find(h.icon),L=S.find(h.embed),w=this,P=S.data(E);p={initialize:function(){p.debug("Initializing embed"),p.determine.autoplay(),p.create(),p.bind.events(),p.instantiate()},instantiate:function(){p.verbose("Storing instance of module",p),P=p,S.data(E,p)},destroy:function(){p.verbose("Destroying previous instance of embed"),p.reset(),S.removeData(E).off(x)},refresh:function(){p.verbose("Refreshing selector cache"),C=S.find(h.placeholder),I=S.find(h.icon),L=S.find(h.embed)},bind:{events:function(){p.has.placeholder()&&(p.debug("Adding placeholder events"),S.on("click"+x,h.placeholder,p.createAndShow).on("click"+x,h.icon,p.createAndShow))}},create:function(){var e=p.get.placeholder();e?p.createPlaceholder():p.createAndShow()},createPlaceholder:function(e){var t=p.get.icon(),n=p.get.url();p.generate.embed(n),e=e||p.get.placeholder(),S.html(j.placeholder(e,t)),p.debug("Creating placeholder for embed",e,t)},createEmbed:function(t){p.refresh(),t=t||p.get.url(),L=e("<div/>").addClass(m.embed).html(p.generate.embed(t)).appendTo(S),g.onCreate.call(w,t),p.debug("Creating embed object",L)},changeEmbed:function(e){L.html(p.generate.embed(e))},createAndShow:function(){p.createEmbed(),p.show()},change:function(e,t,n){p.debug("Changing video to ",e,t,n),S.data(v.source,e).data(v.id,t),n?S.data(v.url,n):S.removeData(v.url),p.has.embed()?p.changeEmbed():p.create()},reset:function(){p.debug("Clearing embed and showing placeholder"),p.remove.active(),p.remove.embed(),p.showPlaceholder(),g.onReset.call(w)},show:function(){p.debug("Showing embed"),p.set.active(),g.onDisplay.call(w)},hide:function(){p.debug("Hiding embed"),p.showPlaceholder()},showPlaceholder:function(){p.debug("Showing placeholder image"),p.remove.active(),g.onPlaceholderDisplay.call(w)},get:{id:function(){return g.id||S.data(v.id)},placeholder:function(){return g.placeholder||S.data(v.placeholder)},icon:function(){return g.icon?g.icon:S.data(v.icon)!==o?S.data(v.icon):p.determine.icon()},source:function(e){return g.source?g.source:S.data(v.source)!==o?S.data(v.source):p.determine.source()},type:function(){var e=p.get.source();return f[e]!==o&&f[e].type},url:function(){return g.url?g.url:S.data(v.url)!==o?S.data(v.url):p.determine.url()}},determine:{autoplay:function(){p.should.autoplay()&&(g.autoplay=!0)},source:function(t){var n=!1;return t=t||p.get.url(),t&&e.each(f,function(e,o){if(t.search(o.domain)!==-1)return n=e,!1}),n},icon:function(){var e=p.get.source();return f[e]!==o&&f[e].icon},url:function(){var e,t=g.id||S.data(v.id),n=g.source||S.data(v.source);return e=f[n]!==o&&f[n].url.replace("{id}",t),e&&S.data(v.url,e),e}},set:{active:function(){S.addClass(m.active)}},remove:{active:function(){S.removeClass(m.active)},embed:function(){L.empty()}},encode:{parameters:function(e){var t,n=[];for(t in e)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&amp;")}},generate:{embed:function(e){p.debug("Generating embed html");var t,n,o=p.get.source();return e=p.get.url(e),e?(n=p.generate.parameters(o),t=j.iframe(e,n)):p.error(y.noURL,S),t},parameters:function(t,n){var i=f[t]&&f[t].parameters!==o?f[t].parameters(g):{};return n=n||g.parameters,n&&(i=e.extend({},i,n)),i=g.onEmbed(i),p.encode.parameters(i)}},has:{embed:function(){return L.length>0},placeholder:function(){return g.placeholder||S.data(v.placeholder)}},should:{autoplay:function(){return"auto"===g.autoplay?g.placeholder||S.data(v.placeholder)!==o:g.autoplay}},is:{video:function(){return"video"==p.get.type()}},setting:function(t,n){if(p.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,g,t);else{if(n===o)return g[t];e.isPlainObject(g[t])?e.extend(!0,g[t],n):g[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(n===o)return p[t];p[t]=n}},debug:function(){!g.silent&&g.debug&&(g.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,g.name+":"),p.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),p.verbose.apply(console,arguments)))},error:function(){g.silent||(p.error=Function.prototype.bind.call(console.error,console,g.name+":"),p.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;g.performance&&(t=(new Date).getTime(),o=a||t,n=t-o,a=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:w,"Execution Time":n})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,500)},display:function(){var t=g.name+":",n=0;a=!1,clearTimeout(p.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),r.length>1&&(t+=" ("+r.length+")"),(console.group!==o||console.table!==o)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var s,a,l,c=P;return n=n||d,r=w||r,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o?(a=c[i],!1):(p.error(y.method,t),!1);c=c[i]}})),e.isFunction(a)?l=a.apply(r,n):a!==o&&(l=a),e.isArray(i)?i.push(l):i!==o?i=[i,l]:l!==o&&(i=l),a}},u?(P===o&&p.initialize(),p.invoke(c)):(P!==o&&P.invoke("destroy"),p.initialize())}),i!==o?i:this},e.fn.embed.settings={name:"Embed",namespace:"embed",silent:!1,debug:!1,verbose:!1,performance:!0,icon:!1,source:!1,url:!1,id:!1,autoplay:"auto",color:"#444444",hd:!0,brandedUI:!1,parameters:!1,onDisplay:function(){},onPlaceholderDisplay:function(){},onReset:function(){},onCreate:function(e){},onEmbed:function(e){return e},metadata:{id:"id",icon:"icon",placeholder:"placeholder",source:"source",url:"url"},error:{noURL:"No URL specified",method:"The method you called is not defined"},className:{active:"active",embed:"embed"},selector:{embed:".embed",placeholder:".placeholder",icon:".icon"},sources:{youtube:{name:"youtube",type:"video",icon:"video play",domain:"youtube.com",url:"//www.youtube.com/embed/{id}",parameters:function(e){return{autohide:!e.brandedUI,autoplay:e.autoplay,color:e.color||o,hq:e.hd,jsapi:e.api,modestbranding:!e.brandedUI}}},vimeo:{name:"vimeo",type:"video",icon:"video play",domain:"vimeo.com",url:"//player.vimeo.com/video/{id}",parameters:function(e){return{api:e.api,autoplay:e.autoplay,byline:e.brandedUI,color:e.color||o,portrait:e.brandedUI,title:e.brandedUI}}}},templates:{iframe:function(e,t){var n=e;return t&&(n+="?"+t),'<iframe src="'+n+'" width="100%" height="100%" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},placeholder:function(e,t){var n="";return t&&(n+='<i class="'+t+' icon"></i>'),e&&(n+='<img class="placeholder" src="'+e+'">'),n}},api:!1,onPause:function(){},onPlay:function(){},onStop:function(){}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.modal=function(i){var r,s=e(this),a=e(t),l=e(n),c=e("body"),u=s.selector||"",d=(new Date).getTime(),p=[],g=arguments[0],h="string"==typeof g,m=[].slice.call(arguments,1),f=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return s.each(function(){var s,y,v,b,j,x,E,S,C,I=e.isPlainObject(i)?e.extend(!0,{},e.fn.modal.settings,i):e.extend({},e.fn.modal.settings),L=I.selector,w=I.className,P=I.namespace,T=I.error,N="."+P,R="module-"+P,O=e(this),A=e(I.context),D=O.find(L.close),M=this,F=O.data(R);C={initialize:function(){C.verbose("Initializing dimmer",A),C.create.id(),C.create.dimmer(),C.refreshModals(),C.bind.events(),I.observeChanges&&C.observeChanges(),C.instantiate()},instantiate:function(){C.verbose("Storing instance of modal"),F=C,O.data(R,F)},create:{dimmer:function(){var t={debug:I.debug,dimmerName:"modals",duration:{show:I.duration,hide:I.duration}},n=e.extend(!0,t,I.dimmerSettings);return I.inverted&&(n.variation=n.variation!==o?n.variation+" inverted":"inverted"),e.fn.dimmer===o?void C.error(T.dimmer):(C.debug("Creating dimmer with settings",n),b=A.dimmer(n),I.detachable?(C.verbose("Modal is detachable, moving content into dimmer"),b.dimmer("add content",O)):C.set.undetached(),I.blurring&&b.addClass(w.blurring),void(j=b.dimmer("get dimmer")))},id:function(){E=(Math.random().toString(16)+"000000000").substr(2,8),x="."+E,C.verbose("Creating unique id for element",E)}},destroy:function(){C.verbose("Destroying previous modal"),O.removeData(R).off(N),a.off(x),j.off(x),D.off(N),A.dimmer("destroy")},observeChanges:function(){"MutationObserver"in t&&(S=new MutationObserver(function(e){C.debug("DOM tree modified, refreshing"),C.refresh()}),S.observe(M,{childList:!0,subtree:!0}),C.debug("Setting up mutation observer",S))},refresh:function(){C.remove.scrolling(),C.cacheSizes(),C.set.screenHeight(),C.set.type(),C.set.position()},refreshModals:function(){y=O.siblings(L.modal),s=y.add(O)},attachEvents:function(t,n){var o=e(t);n=e.isFunction(C[n])?C[n]:C.toggle,o.length>0?(C.debug("Attaching modal events to element",t,n),o.off(N).on("click"+N,n)):C.error(T.notFound,t)},bind:{events:function(){C.verbose("Attaching events"),O.on("click"+N,L.close,C.event.close).on("click"+N,L.approve,C.event.approve).on("click"+N,L.deny,C.event.deny),a.on("resize"+x,C.event.resize)}},get:{id:function(){return(Math.random().toString(16)+"000000000").substr(2,8)}},event:{approve:function(){return I.onApprove.call(M,e(this))===!1?void C.verbose("Approve callback returned false cancelling hide"):void C.hide()},deny:function(){return I.onDeny.call(M,e(this))===!1?void C.verbose("Deny callback returned false cancelling hide"):void C.hide()},close:function(){C.hide()},click:function(t){var o=e(t.target),i=o.closest(L.modal).length>0,r=e.contains(n.documentElement,t.target);!i&&r&&(C.debug("Dimmer clicked, hiding all modals"),C.is.active()&&(C.remove.clickaway(),I.allowMultiple?C.hide():C.hideAll()))},debounce:function(e,t){clearTimeout(C.timer),C.timer=setTimeout(e,t)},keyboard:function(e){var t=e.which,n=27;t==n&&(I.closable?(C.debug("Escape key pressed hiding modal"),C.hide()):C.debug("Escape key pressed, but closable is set to false"),e.preventDefault())},resize:function(){b.dimmer("is active")&&f(C.refresh)}},toggle:function(){C.is.active()||C.is.animating()?C.hide():C.show()},show:function(t){t=e.isFunction(t)?t:function(){},C.refreshModals(),C.showModal(t)},hide:function(t){t=e.isFunction(t)?t:function(){},C.refreshModals(),C.hideModal(t)},showModal:function(t){t=e.isFunction(t)?t:function(){},C.is.animating()||!C.is.active()?(C.showDimmer(),C.cacheSizes(),C.set.position(),C.set.screenHeight(),C.set.type(),C.set.clickaway(),!I.allowMultiple&&C.others.active()?C.hideOthers(C.showModal):(I.onShow.call(M),I.transition&&e.fn.transition!==o&&O.transition("is supported")?(C.debug("Showing modal with css animations"),O.transition({debug:I.debug,animation:I.transition+" in",queue:I.queue,duration:I.duration,useFailSafe:!0,onComplete:function(){I.onVisible.apply(M),I.keyboardShortcuts&&C.add.keyboardShortcuts(),C.save.focus(),C.set.active(),I.autofocus&&C.set.autofocus(),t()}})):C.error(T.noTransition))):C.debug("Modal is already visible")},hideModal:function(t,n){return t=e.isFunction(t)?t:function(){},C.debug("Hiding modal"),I.onHide.call(M,e(this))===!1?void C.verbose("Hide callback returned false cancelling hide"):void((C.is.animating()||C.is.active())&&(I.transition&&e.fn.transition!==o&&O.transition("is supported")?(C.remove.active(),O.transition({debug:I.debug,animation:I.transition+" out",queue:I.queue,duration:I.duration,useFailSafe:!0,onStart:function(){C.others.active()||n||C.hideDimmer(),I.keyboardShortcuts&&C.remove.keyboardShortcuts()},onComplete:function(){I.onHidden.call(M),C.restore.focus(),t()}})):C.error(T.noTransition)))},showDimmer:function(){b.dimmer("is animating")||!b.dimmer("is active")?(C.debug("Showing dimmer"),b.dimmer("show")):C.debug("Dimmer already visible")},hideDimmer:function(){return b.dimmer("is animating")||b.dimmer("is active")?void b.dimmer("hide",function(){C.remove.clickaway(),C.remove.screenHeight()}):void C.debug("Dimmer is not visible cannot hide")},hideAll:function(t){var n=s.filter("."+w.active+", ."+w.animating);t=e.isFunction(t)?t:function(){},n.length>0&&(C.debug("Hiding all visible modals"),C.hideDimmer(),n.modal("hide modal",t))},hideOthers:function(t){var n=y.filter("."+w.active+", ."+w.animating);t=e.isFunction(t)?t:function(){},n.length>0&&(C.debug("Hiding other modals",y),n.modal("hide modal",t,!0))},others:{active:function(){return y.filter("."+w.active).length>0},animating:function(){return y.filter("."+w.animating).length>0}},add:{keyboardShortcuts:function(){C.verbose("Adding keyboard shortcuts"),l.on("keyup"+N,C.event.keyboard)}},save:{focus:function(){v=e(n.activeElement).blur()}},restore:{focus:function(){v&&v.length>0&&v.focus()}},remove:{active:function(){O.removeClass(w.active)},clickaway:function(){I.closable&&j.off("click"+x)},bodyStyle:function(){""===c.attr("style")&&(C.verbose("Removing style attribute"),c.removeAttr("style"))},screenHeight:function(){C.debug("Removing page height"),c.css("height","")},keyboardShortcuts:function(){C.verbose("Removing keyboard shortcuts"),l.off("keyup"+N)},scrolling:function(){b.removeClass(w.scrolling),O.removeClass(w.scrolling)}},cacheSizes:function(){var i=O.outerHeight();C.cache!==o&&0===i||(C.cache={pageHeight:e(n).outerHeight(),height:i+I.offset,contextHeight:"body"==I.context?e(t).height():b.height()}),C.debug("Caching modal and container sizes",C.cache)},can:{fit:function(){return C.cache.height+2*I.padding<C.cache.contextHeight}},is:{active:function(){return O.hasClass(w.active)},animating:function(){return O.transition("is supported")?O.transition("is animating"):O.is(":visible")},scrolling:function(){return b.hasClass(w.scrolling)},modernBrowser:function(){return!(t.ActiveXObject||"ActiveXObject"in t)}},set:{autofocus:function(){var e=O.find("[tabindex], :input").filter(":visible"),t=e.filter("[autofocus]"),n=t.length>0?t.first():e.first();n.length>0&&n.focus()},clickaway:function(){I.closable&&j.on("click"+x,C.event.click)},screenHeight:function(){C.can.fit()?c.css("height",""):(C.debug("Modal is taller than page content, resizing page height"),c.css("height",C.cache.height+2*I.padding))},active:function(){O.addClass(w.active)},scrolling:function(){b.addClass(w.scrolling),O.addClass(w.scrolling)},type:function(){C.can.fit()?(C.verbose("Modal fits on screen"),C.others.active()||C.others.animating()||C.remove.scrolling()):(C.verbose("Modal cannot fit on screen setting to scrolling"),C.set.scrolling())},position:function(){C.verbose("Centering modal on page",C.cache),C.can.fit()?O.css({top:"",marginTop:-(C.cache.height/2)}):O.css({marginTop:"",top:l.scrollTop()})},undetached:function(){b.addClass(w.undetached)}},setting:function(t,n){if(C.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,I,t);else{if(n===o)return I[t];e.isPlainObject(I[t])?e.extend(!0,I[t],n):I[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,C,t);else{if(n===o)return C[t];C[t]=n}},debug:function(){!I.silent&&I.debug&&(I.performance?C.performance.log(arguments):(C.debug=Function.prototype.bind.call(console.info,console,I.name+":"),C.debug.apply(console,arguments)))},verbose:function(){!I.silent&&I.verbose&&I.debug&&(I.performance?C.performance.log(arguments):(C.verbose=Function.prototype.bind.call(console.info,console,I.name+":"),C.verbose.apply(console,arguments)))},error:function(){I.silent||(C.error=Function.prototype.bind.call(console.error,console,I.name+":"),C.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;I.performance&&(t=(new Date).getTime(),o=d||t,n=t-o,d=t,p.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:M,"Execution Time":n})),clearTimeout(C.performance.timer),C.performance.timer=setTimeout(C.performance.display,500)},display:function(){var t=I.name+":",n=0;d=!1,clearTimeout(C.performance.timer),e.each(p,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",u&&(t+=" '"+u+"'"),(console.group!==o||console.table!==o)&&p.length>0&&(console.groupCollapsed(t),console.table?console.table(p):e.each(p,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),p=[]}},invoke:function(t,n,i){var s,a,l,c=F;return n=n||m,i=M||i,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o&&(a=c[i],!1);c=c[i]}})),e.isFunction(a)?l=a.apply(i,n):a!==o&&(l=a),e.isArray(r)?r.push(l):r!==o?r=[r,l]:l!==o&&(r=l),a}},h?(F===o&&C.initialize(),C.invoke(g)):(F!==o&&F.invoke("destroy"),C.initialize())}),r!==o?r:this},e.fn.modal.settings={name:"Modal",namespace:"modal",silent:!1,debug:!1,verbose:!1,performance:!0,observeChanges:!1,allowMultiple:!1,detachable:!0,closable:!0,autofocus:!0,inverted:!1,blurring:!1,dimmerSettings:{closable:!1,useCSS:!0},keyboardShortcuts:!0,context:"body",queue:!1,duration:500,offset:0,transition:"scale",padding:50,onShow:function(){},onVisible:function(){},onHide:function(){return!0},onHidden:function(){},onApprove:function(){return!0},onDeny:function(){return!0},selector:{close:"> .close",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined.",notFound:"The element you specified could not be found"},className:{active:"active",animating:"animating",blurring:"blurring",scrolling:"scrolling",undetached:"undetached"}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.nag=function(n){var i,r=e(this),s=r.selector||"",a=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return r.each(function(){var r,p=e.isPlainObject(n)?e.extend(!0,{},e.fn.nag.settings,n):e.extend({},e.fn.nag.settings),g=(p.className,p.selector),h=p.error,m=p.namespace,f="."+m,y=m+"-module",v=e(this),b=(v.find(g.close),e(p.context?p.context:"body")),j=this,x=v.data(y);t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},r={initialize:function(){r.verbose("Initializing element"),v.on("click"+f,g.close,r.dismiss).data(y,r),p.detachable&&v.parent()[0]!==b[0]&&v.detach().prependTo(b),p.displayTime>0&&setTimeout(r.hide,p.displayTime),r.show()},destroy:function(){r.verbose("Destroying instance"),v.removeData(y).off(f)},show:function(){r.should.show()&&!v.is(":visible")&&(r.debug("Showing nag",p.animation.show),"fade"==p.animation.show?v.fadeIn(p.duration,p.easing):v.slideDown(p.duration,p.easing))},hide:function(){r.debug("Showing nag",p.animation.hide),"fade"==p.animation.show?v.fadeIn(p.duration,p.easing):v.slideUp(p.duration,p.easing)},onHide:function(){r.debug("Removing nag",p.animation.hide),v.remove(),p.onHide&&p.onHide();
},dismiss:function(e){p.storageMethod&&r.storage.set(p.key,p.value),r.hide(),e.stopImmediatePropagation(),e.preventDefault()},should:{show:function(){return p.persist?(r.debug("Persistent nag is set, can show nag"),!0):r.storage.get(p.key)!=p.value.toString()?(r.debug("Stored value is not set, can show nag",r.storage.get(p.key)),!0):(r.debug("Stored value is set, cannot show nag",r.storage.get(p.key)),!1)}},get:{storageOptions:function(){var e={};return p.expires&&(e.expires=p.expires),p.domain&&(e.domain=p.domain),p.path&&(e.path=p.path),e}},clear:function(){r.storage.remove(p.key)},storage:{set:function(n,i){var s=r.get.storageOptions();if("localstorage"==p.storageMethod&&t.localStorage!==o)t.localStorage.setItem(n,i),r.debug("Value stored using local storage",n,i);else if("sessionstorage"==p.storageMethod&&t.sessionStorage!==o)t.sessionStorage.setItem(n,i),r.debug("Value stored using session storage",n,i);else{if(e.cookie===o)return void r.error(h.noCookieStorage);e.cookie(n,i,s),r.debug("Value stored using cookie",n,i,s)}},get:function(n,i){var s;return"localstorage"==p.storageMethod&&t.localStorage!==o?s=t.localStorage.getItem(n):"sessionstorage"==p.storageMethod&&t.sessionStorage!==o?s=t.sessionStorage.getItem(n):e.cookie!==o?s=e.cookie(n):r.error(h.noCookieStorage),"undefined"!=s&&"null"!=s&&s!==o&&null!==s||(s=o),s},remove:function(n){var i=r.get.storageOptions();"localstorage"==p.storageMethod&&t.localStorage!==o?t.localStorage.removeItem(n):"sessionstorage"==p.storageMethod&&t.sessionStorage!==o?t.sessionStorage.removeItem(n):e.cookie!==o?e.removeCookie(n,i):r.error(h.noStorage)}},setting:function(t,n){if(r.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,p,t);else{if(n===o)return p[t];e.isPlainObject(p[t])?e.extend(!0,p[t],n):p[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,r,t);else{if(n===o)return r[t];r[t]=n}},debug:function(){!p.silent&&p.debug&&(p.performance?r.performance.log(arguments):(r.debug=Function.prototype.bind.call(console.info,console,p.name+":"),r.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?r.performance.log(arguments):(r.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),r.verbose.apply(console,arguments)))},error:function(){p.silent||(r.error=Function.prototype.bind.call(console.error,console,p.name+":"),r.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;p.performance&&(t=(new Date).getTime(),o=a||t,n=t-o,a=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:j,"Execution Time":n})),clearTimeout(r.performance.timer),r.performance.timer=setTimeout(r.performance.display,500)},display:function(){var t=p.name+":",n=0;a=!1,clearTimeout(r.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),(console.group!==o||console.table!==o)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,s){var a,l,c,u=x;return n=n||d,s=j||s,"string"==typeof t&&u!==o&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,i){var s=n!=a?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(u[s])&&n!=a)u=u[s];else{if(u[s]!==o)return l=u[s],!1;if(!e.isPlainObject(u[i])||n==a)return u[i]!==o?(l=u[i],!1):(r.error(h.method,t),!1);u=u[i]}})),e.isFunction(l)?c=l.apply(s,n):l!==o&&(c=l),e.isArray(i)?i.push(c):i!==o?i=[i,c]:c!==o&&(i=c),l}},u?(x===o&&r.initialize(),r.invoke(c)):(x!==o&&x.invoke("destroy"),r.initialize())}),i!==o?i:this},e.fn.nag.settings={name:"Nag",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"Nag",persist:!1,displayTime:0,animation:{show:"slide",hide:"slide"},context:!1,detachable:!1,expires:30,domain:!1,path:"/",storageMethod:"cookie",key:"nag",value:"dismiss",error:{noCookieStorage:"$.cookie is not included. A storage solution is required.",noStorage:"Neither $.cookie or store is defined. A storage solution is required for storing state",method:"The method you called is not defined."},className:{bottom:"bottom",fixed:"fixed"},selector:{close:".close.icon"},speed:500,easing:"easeOutQuad",onHide:function(){}},e.extend(e.easing,{easeOutQuad:function(e,t,n,o,i){return-o*(t/=i)*(t-2)+n}})}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.popup=function(i){var r,s=e(this),a=e(n),l=e(t),c=e("body"),u=s.selector||"",d=!0,p=(new Date).getTime(),g=[],h=arguments[0],m="string"==typeof h,f=[].slice.call(arguments,1);return s.each(function(){var s,y,v,b,j,x,E=e.isPlainObject(i)?e.extend(!0,{},e.fn.popup.settings,i):e.extend({},e.fn.popup.settings),S=E.selector,C=E.className,I=E.error,L=E.metadata,w=E.namespace,P="."+E.namespace,T="module-"+w,N=e(this),R=e(E.context),O=e(E.scrollContext),A=e(E.boundary),D=E.target?e(E.target):N,M=0,F=!1,_=!1,G=this,k=N.data(T);x={initialize:function(){x.debug("Initializing",N),x.createID(),x.bind.events(),!x.exists()&&E.preserve&&x.create(),E.observeChanges&&x.observeChanges(),x.instantiate()},instantiate:function(){x.verbose("Storing instance",x),k=x,N.data(T,k)},observeChanges:function(){"MutationObserver"in t&&(v=new MutationObserver(x.event.documentChanged),v.observe(n,{childList:!0,subtree:!0}),x.debug("Setting up mutation observer",v))},refresh:function(){E.popup?s=e(E.popup).eq(0):E.inline&&(s=D.nextAll(S.popup).eq(0),E.popup=s),E.popup?(s.addClass(C.loading),y=x.get.offsetParent(),s.removeClass(C.loading),E.movePopup&&x.has.popup()&&x.get.offsetParent(s)[0]!==y[0]&&(x.debug("Moving popup to the same offset parent as activating element"),s.detach().appendTo(y))):y=E.inline?x.get.offsetParent(D):x.has.popup()?x.get.offsetParent(s):c,y.is("html")&&y[0]!==c[0]&&(x.debug("Setting page as offset parent"),y=c),x.get.variation()&&x.set.variation()},reposition:function(){x.refresh(),x.set.position()},destroy:function(){x.debug("Destroying previous module"),v&&v.disconnect(),s&&!E.preserve&&x.removePopup(),clearTimeout(x.hideTimer),clearTimeout(x.showTimer),x.unbind.close(),x.unbind.events(),N.removeData(T)},event:{start:function(t){var n=e.isPlainObject(E.delay)?E.delay.show:E.delay;clearTimeout(x.hideTimer),_||(x.showTimer=setTimeout(x.show,n))},end:function(){var t=e.isPlainObject(E.delay)?E.delay.hide:E.delay;clearTimeout(x.showTimer),x.hideTimer=setTimeout(x.hide,t)},touchstart:function(e){_=!0,x.show()},resize:function(){x.is.visible()&&x.set.position()},documentChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==G||e(t).find(G).length>0)&&(x.debug("Element removed from DOM, tearing down events"),x.destroy())})})},hideGracefully:function(t){var o=e(t.target),i=e.contains(n.documentElement,t.target),r=o.closest(S.popup).length>0;t&&!r&&i?(x.debug("Click occurred outside popup hiding popup"),x.hide()):x.debug("Click was inside popup, keeping popup open")}},create:function(){var t=x.get.html(),n=x.get.title(),o=x.get.content();t||o||n?(x.debug("Creating pop-up html"),t||(t=E.templates.popup({title:n,content:o})),s=e("<div/>").addClass(C.popup).data(L.activator,N).html(t),E.inline?(x.verbose("Inserting popup element inline",s),s.insertAfter(N)):(x.verbose("Appending popup element to body",s),s.appendTo(R)),x.refresh(),x.set.variation(),E.hoverable&&x.bind.popup(),E.onCreate.call(s,G)):0!==D.next(S.popup).length?(x.verbose("Pre-existing popup found"),E.inline=!0,E.popup=D.next(S.popup).data(L.activator,N),x.refresh(),E.hoverable&&x.bind.popup()):E.popup?(e(E.popup).data(L.activator,N),x.verbose("Used popup specified in settings"),x.refresh(),E.hoverable&&x.bind.popup()):x.debug("No content specified skipping display",G)},createID:function(){j=(Math.random().toString(16)+"000000000").substr(2,8),b="."+j,x.verbose("Creating unique id for element",j)},toggle:function(){x.debug("Toggling pop-up"),x.is.hidden()?(x.debug("Popup is hidden, showing pop-up"),x.unbind.close(),x.show()):(x.debug("Popup is visible, hiding pop-up"),x.hide())},show:function(e){if(e=e||function(){},x.debug("Showing pop-up",E.transition),x.is.hidden()&&(!x.is.active()||!x.is.dropdown())){if(x.exists()||x.create(),E.onShow.call(s,G)===!1)return void x.debug("onShow callback returned false, cancelling popup animation");E.preserve||E.popup||x.refresh(),s&&x.set.position()&&(x.save.conditions(),E.exclusive&&x.hideAll(),x.animate.show(e))}},hide:function(e){if(e=e||function(){},x.is.visible()||x.is.animating()){if(E.onHide.call(s,G)===!1)return void x.debug("onHide callback returned false, cancelling popup animation");x.remove.visible(),x.unbind.close(),x.restore.conditions(),x.animate.hide(e)}},hideAll:function(){e(S.popup).filter("."+C.visible).each(function(){e(this).data(L.activator).popup("hide")})},exists:function(){return!!s&&(E.inline||E.popup?x.has.popup():s.closest(R).length>=1)},removePopup:function(){x.has.popup()&&!E.popup&&(x.debug("Removing popup",s),s.remove(),s=o,E.onRemove.call(s,G))},save:{conditions:function(){x.cache={title:N.attr("title")},x.cache.title&&N.removeAttr("title"),x.verbose("Saving original attributes",x.cache.title)}},restore:{conditions:function(){return x.cache&&x.cache.title&&(N.attr("title",x.cache.title),x.verbose("Restoring original attributes",x.cache.title)),!0}},supports:{svg:function(){return typeof SVGGraphicsElement===o}},animate:{show:function(t){t=e.isFunction(t)?t:function(){},E.transition&&e.fn.transition!==o&&N.transition("is supported")?(x.set.visible(),s.transition({animation:E.transition+" in",queue:!1,debug:E.debug,verbose:E.verbose,duration:E.duration,onComplete:function(){x.bind.close(),t.call(s,G),E.onVisible.call(s,G)}})):x.error(I.noTransition)},hide:function(t){return t=e.isFunction(t)?t:function(){},x.debug("Hiding pop-up"),E.onHide.call(s,G)===!1?void x.debug("onHide callback returned false, cancelling popup animation"):void(E.transition&&e.fn.transition!==o&&N.transition("is supported")?s.transition({animation:E.transition+" out",queue:!1,duration:E.duration,debug:E.debug,verbose:E.verbose,onComplete:function(){x.reset(),t.call(s,G),E.onHidden.call(s,G)}}):x.error(I.noTransition))}},change:{content:function(e){s.html(e)}},get:{html:function(){return N.removeData(L.html),N.data(L.html)||E.html},title:function(){return N.removeData(L.title),N.data(L.title)||E.title},content:function(){return N.removeData(L.content),N.data(L.content)||N.attr("title")||E.content},variation:function(){return N.removeData(L.variation),N.data(L.variation)||E.variation},popup:function(){return s},popupOffset:function(){return s.offset()},calculations:function(){var e,n=D[0],o=A[0]==t,i=E.inline||E.popup&&E.movePopup?D.position():D.offset(),r=o?{top:0,left:0}:A.offset(),a={},c=o?{top:l.scrollTop(),left:l.scrollLeft()}:{top:0,left:0};return a={target:{element:D[0],width:D.outerWidth(),height:D.outerHeight(),top:i.top,left:i.left,margin:{}},popup:{width:s.outerWidth(),height:s.outerHeight()},parent:{width:y.outerWidth(),height:y.outerHeight()},screen:{top:r.top,left:r.left,scroll:{top:c.top,left:c.left},width:A.width(),height:A.height()}},E.setFluidWidth&&x.is.fluid()&&(a.container={width:s.parent().outerWidth()},a.popup.width=a.container.width),a.target.margin.top=E.inline?parseInt(t.getComputedStyle(n).getPropertyValue("margin-top"),10):0,a.target.margin.left=E.inline?x.is.rtl()?parseInt(t.getComputedStyle(n).getPropertyValue("margin-right"),10):parseInt(t.getComputedStyle(n).getPropertyValue("margin-left"),10):0,e=a.screen,a.boundary={top:e.top+e.scroll.top,bottom:e.top+e.scroll.top+e.height,left:e.left+e.scroll.left,right:e.left+e.scroll.left+e.width},a},id:function(){return j},startEvent:function(){return"hover"==E.on?"mouseenter":"focus"==E.on&&"focus"},scrollEvent:function(){return"scroll"},endEvent:function(){return"hover"==E.on?"mouseleave":"focus"==E.on&&"blur"},distanceFromBoundary:function(e,t){var n,o,i={};return t=t||x.get.calculations(),n=t.popup,o=t.boundary,e&&(i={top:e.top-o.top,left:e.left-o.left,right:o.right-(e.left+n.width),bottom:o.bottom-(e.top+n.height)},x.verbose("Distance from boundaries determined",e,i)),i},offsetParent:function(t){var n=t!==o?t[0]:N[0],i=n.parentNode,r=e(i);if(i)for(var s="none"===r.css("transform"),a="static"===r.css("position"),l=r.is("html");i&&!l&&a&&s;)i=i.parentNode,r=e(i),s="none"===r.css("transform"),a="static"===r.css("position"),l=r.is("html");return r&&r.length>0?r:e()},positions:function(){return{"top left":!1,"top center":!1,"top right":!1,"bottom left":!1,"bottom center":!1,"bottom right":!1,"left center":!1,"right center":!1}},nextPosition:function(e){var t=e.split(" "),n=t[0],o=t[1],i={top:"bottom",bottom:"top",left:"right",right:"left"},r={left:"center",center:"right",right:"left"},s={"top left":"top center","top center":"top right","top right":"right center","right center":"bottom right","bottom right":"bottom center","bottom center":"bottom left","bottom left":"left center","left center":"top left"},a="top"==n||"bottom"==n,l=!1,c=!1,u=!1;return F||(x.verbose("All available positions available"),F=x.get.positions()),x.debug("Recording last position tried",e),F[e]=!0,"opposite"===E.prefer&&(u=[i[n],o],u=u.join(" "),l=F[u]===!0,x.debug("Trying opposite strategy",u)),"adjacent"===E.prefer&&a&&(u=[n,r[o]],u=u.join(" "),c=F[u]===!0,x.debug("Trying adjacent strategy",u)),(c||l)&&(x.debug("Using backup position",u),u=s[e]),u}},set:{position:function(e,t){if(0===D.length||0===s.length)return void x.error(I.notFound);var n,i,r,a,l,c,u,d;if(t=t||x.get.calculations(),e=e||N.data(L.position)||E.position,n=N.data(L.offset)||E.offset,i=E.distanceAway,r=t.target,a=t.popup,l=t.parent,0===r.width&&0===r.height&&!x.is.svg(r.element))return x.debug("Popup target is hidden, no action taken"),!1;switch(E.inline&&(x.debug("Adding margin to calculation",r.margin),"left center"==e||"right center"==e?(n+=r.margin.top,i+=-r.margin.left):"top left"==e||"top center"==e||"top right"==e?(n+=r.margin.left,i-=r.margin.top):(n+=r.margin.left,i+=r.margin.top)),x.debug("Determining popup position from calculations",e,t),x.is.rtl()&&(e=e.replace(/left|right/g,function(e){return"left"==e?"right":"left"}),x.debug("RTL: Popup position updated",e)),M==E.maxSearchDepth&&"string"==typeof E.lastResort&&(e=E.lastResort),e){case"top left":c={top:"auto",bottom:l.height-r.top+i,left:r.left+n,right:"auto"};break;case"top center":c={bottom:l.height-r.top+i,left:r.left+r.width/2-a.width/2+n,top:"auto",right:"auto"};break;case"top right":c={bottom:l.height-r.top+i,right:l.width-r.left-r.width-n,top:"auto",left:"auto"};break;case"left center":c={top:r.top+r.height/2-a.height/2+n,right:l.width-r.left+i,left:"auto",bottom:"auto"};break;case"right center":c={top:r.top+r.height/2-a.height/2+n,left:r.left+r.width+i,bottom:"auto",right:"auto"};break;case"bottom left":c={top:r.top+r.height+i,left:r.left+n,bottom:"auto",right:"auto"};break;case"bottom center":c={top:r.top+r.height+i,left:r.left+r.width/2-a.width/2+n,bottom:"auto",right:"auto"};break;case"bottom right":c={top:r.top+r.height+i,right:l.width-r.left-r.width-n,left:"auto",bottom:"auto"}}if(c===o&&x.error(I.invalidPosition,e),x.debug("Calculated popup positioning values",c),s.css(c).removeClass(C.position).addClass(e).addClass(C.loading),u=x.get.popupOffset(),d=x.get.distanceFromBoundary(u,t),x.is.offstage(d,e)){if(x.debug("Position is outside viewport",e),M<E.maxSearchDepth)return M++,e=x.get.nextPosition(e),x.debug("Trying new position",e),!!s&&x.set.position(e,t);if(!E.lastResort)return x.debug("Popup could not find a position to display",s),x.error(I.cannotPlace,G),x.remove.attempts(),x.remove.loading(),x.reset(),E.onUnplaceable.call(s,G),!1;x.debug("No position found, showing with last position")}return x.debug("Position is on stage",e),x.remove.attempts(),x.remove.loading(),E.setFluidWidth&&x.is.fluid()&&x.set.fluidWidth(t),!0},fluidWidth:function(e){e=e||x.get.calculations(),x.debug("Automatically setting element width to parent width",e.parent.width),s.css("width",e.container.width)},variation:function(e){e=e||x.get.variation(),e&&x.has.popup()&&(x.verbose("Adding variation to popup",e),s.addClass(e))},visible:function(){N.addClass(C.visible)}},remove:{loading:function(){s.removeClass(C.loading)},variation:function(e){e=e||x.get.variation(),e&&(x.verbose("Removing variation",e),s.removeClass(e))},visible:function(){N.removeClass(C.visible)},attempts:function(){x.verbose("Resetting all searched positions"),M=0,F=!1}},bind:{events:function(){x.debug("Binding popup events to module"),"click"==E.on&&N.on("click"+P,x.toggle),"hover"==E.on&&d&&N.on("touchstart"+P,x.event.touchstart),x.get.startEvent()&&N.on(x.get.startEvent()+P,x.event.start).on(x.get.endEvent()+P,x.event.end),E.target&&x.debug("Target set to element",D),l.on("resize"+b,x.event.resize)},popup:function(){x.verbose("Allowing hover events on popup to prevent closing"),s&&x.has.popup()&&s.on("mouseenter"+P,x.event.start).on("mouseleave"+P,x.event.end)},close:function(){(E.hideOnScroll===!0||"auto"==E.hideOnScroll&&"click"!=E.on)&&O.one(x.get.scrollEvent()+b,x.event.hideGracefully),"hover"==E.on&&_&&(x.verbose("Binding popup close event to document"),a.on("touchstart"+b,function(e){x.verbose("Touched away from popup"),x.event.hideGracefully.call(G,e)})),"click"==E.on&&E.closable&&(x.verbose("Binding popup close event to document"),a.on("click"+b,function(e){x.verbose("Clicked away from popup"),x.event.hideGracefully.call(G,e)}))}},unbind:{events:function(){l.off(b),N.off(P)},close:function(){a.off(b),O.off(b)}},has:{popup:function(){return s&&s.length>0}},is:{offstage:function(t,n){var o=[];return e.each(t,function(e,t){t<-E.jitter&&(x.debug("Position exceeds allowable distance from edge",e,t,n),o.push(e))}),o.length>0},svg:function(e){return x.supports.svg()&&e instanceof SVGGraphicsElement},active:function(){return N.hasClass(C.active)},animating:function(){return s!==o&&s.hasClass(C.animating)},fluid:function(){return s!==o&&s.hasClass(C.fluid)},visible:function(){return s!==o&&s.hasClass(C.visible)},dropdown:function(){return N.hasClass(C.dropdown)},hidden:function(){return!x.is.visible()},rtl:function(){return"rtl"==N.css("direction")}},reset:function(){x.remove.visible(),E.preserve?e.fn.transition!==o&&s.transition("remove transition"):x.removePopup()},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,E,t);else{if(n===o)return E[t];E[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,x,t);else{if(n===o)return x[t];x[t]=n}},debug:function(){!E.silent&&E.debug&&(E.performance?x.performance.log(arguments):(x.debug=Function.prototype.bind.call(console.info,console,E.name+":"),x.debug.apply(console,arguments)))},verbose:function(){!E.silent&&E.verbose&&E.debug&&(E.performance?x.performance.log(arguments):(x.verbose=Function.prototype.bind.call(console.info,console,E.name+":"),x.verbose.apply(console,arguments)))},error:function(){E.silent||(x.error=Function.prototype.bind.call(console.error,console,E.name+":"),x.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;E.performance&&(t=(new Date).getTime(),o=p||t,n=t-o,p=t,g.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:G,"Execution Time":n})),clearTimeout(x.performance.timer),x.performance.timer=setTimeout(x.performance.display,500)},display:function(){var t=E.name+":",n=0;p=!1,clearTimeout(x.performance.timer),e.each(g,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",u&&(t+=" '"+u+"'"),(console.group!==o||console.table!==o)&&g.length>0&&(console.groupCollapsed(t),console.table?console.table(g):e.each(g,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),g=[]}},invoke:function(t,n,i){var s,a,l,c=k;return n=n||f,i=G||i,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o&&(a=c[i],!1);c=c[i]}})),e.isFunction(a)?l=a.apply(i,n):a!==o&&(l=a),e.isArray(r)?r.push(l):r!==o?r=[r,l]:l!==o&&(r=l),a}},m?(k===o&&x.initialize(),x.invoke(h)):(k!==o&&k.invoke("destroy"),x.initialize())}),r!==o?r:this},e.fn.popup.settings={name:"Popup",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"popup",observeChanges:!0,onCreate:function(){},onRemove:function(){},onShow:function(){},onVisible:function(){},onHide:function(){},onUnplaceable:function(){},onHidden:function(){},on:"hover",boundary:t,addTouchEvents:!0,position:"top left",variation:"",movePopup:!0,target:!1,popup:!1,inline:!1,preserve:!1,hoverable:!1,content:!1,html:!1,title:!1,closable:!0,hideOnScroll:"auto",exclusive:!1,context:"body",scrollContext:t,prefer:"opposite",lastResort:!1,delay:{show:50,hide:70},setFluidWidth:!0,duration:200,transition:"scale",distanceAway:0,jitter:2,offset:0,maxSearchDepth:15,error:{invalidPosition:"The position you specified is not a valid position",cannotPlace:"Popup does not fit within the boundaries of the viewport",method:"The method you called is not defined.",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>",notFound:"The target or popup you specified does not exist on the page"},metadata:{activator:"activator",content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{active:"active",animating:"animating",dropdown:"dropdown",fluid:"fluid",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible"},selector:{popup:".ui.popup"},templates:{escape:function(e){var t=/[&<>"'`]/g,n=/[&<>"'`]/,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=function(e){return o[e]};return n.test(e)?e.replace(t,i):e},popup:function(t){var n="",i=e.fn.popup.settings.templates.escape;return typeof t!==o&&(typeof t.title!==o&&t.title&&(t.title=i(t.title),n+='<div class="header">'+t.title+"</div>"),typeof t.content!==o&&t.content&&(t.content=i(t.content),n+='<div class="content">'+t.content+"</div>")),n}}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),"undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.progress=function(t){var i,r=e(this),s=r.selector||"",a=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return r.each(function(){var r,p,g=e.isPlainObject(t)?e.extend(!0,{},e.fn.progress.settings,t):e.extend({},e.fn.progress.settings),h=g.className,m=g.metadata,f=g.namespace,y=g.selector,v=g.error,b="."+f,j="module-"+f,x=e(this),E=e(this).find(y.bar),S=e(this).find(y.progress),C=e(this).find(y.label),I=this,L=x.data(j),w=!1;p={initialize:function(){p.debug("Initializing progress bar",g),p.set.duration(),p.set.transitionEvent(),p.read.metadata(),p.read.settings(),p.instantiate()},instantiate:function(){p.verbose("Storing instance of progress",p),L=p,x.data(j,p)},destroy:function(){p.verbose("Destroying previous progress for",x),clearInterval(L.interval),p.remove.state(),x.removeData(j),L=o},reset:function(){p.remove.nextValue(),p.update.progress(0)},complete:function(){(p.percent===o||p.percent<100)&&(p.remove.progressPoll(),p.set.percent(100))},read:{metadata:function(){var e={percent:x.data(m.percent),total:x.data(m.total),value:x.data(m.value)};e.percent&&(p.debug("Current percent value set from metadata",e.percent),p.set.percent(e.percent)),e.total&&(p.debug("Total value set from metadata",e.total),p.set.total(e.total)),e.value&&(p.debug("Current value set from metadata",e.value),p.set.value(e.value),p.set.progress(e.value))},settings:function(){g.total!==!1&&(p.debug("Current total set in settings",g.total),p.set.total(g.total)),g.value!==!1&&(p.debug("Current value set in settings",g.value),p.set.value(g.value),p.set.progress(p.value)),g.percent!==!1&&(p.debug("Current percent set in settings",g.percent),p.set.percent(g.percent))}},bind:{transitionEnd:function(e){var t=p.get.transitionEnd();E.one(t+b,function(t){clearTimeout(p.failSafeTimer),e.call(this,t)}),p.failSafeTimer=setTimeout(function(){E.triggerHandler(t)},g.duration+g.failSafeDelay),p.verbose("Adding fail safe timer",p.timer)}},increment:function(e){var t,n,o;p.has.total()?(n=p.get.value(),e=e||1,o=n+e):(n=p.get.percent(),e=e||p.get.randomValue(),o=n+e,t=100,p.debug("Incrementing percentage by",n,o)),o=p.get.normalizedValue(o),p.set.progress(o)},decrement:function(e){var t,n,o=p.get.total();o?(t=p.get.value(),e=e||1,n=t-e,p.debug("Decrementing value by",e,t)):(t=p.get.percent(),e=e||p.get.randomValue(),n=t-e,p.debug("Decrementing percentage by",e,t)),n=p.get.normalizedValue(n),p.set.progress(n)},has:{progressPoll:function(){return p.progressPoll},total:function(){return p.get.total()!==!1}},get:{text:function(e){var t=p.value||0,n=p.total||0,o=w?p.get.displayPercent():p.percent||0,i=p.total>0?n-t:100-o;return e=e||"",e=e.replace("{value}",t).replace("{total}",n).replace("{left}",i).replace("{percent}",o),p.verbose("Adding variables to progress bar text",e),e},normalizedValue:function(e){if(e<0)return p.debug("Value cannot decrement below 0"),0;if(p.has.total()){if(e>p.total)return p.debug("Value cannot increment above total",p.total),p.total}else if(e>100)return p.debug("Value cannot increment above 100 percent"),100;return e},updateInterval:function(){return"auto"==g.updateInterval?g.duration:g.updateInterval},randomValue:function(){return p.debug("Generating random increment percentage"),Math.floor(Math.random()*g.random.max+g.random.min)},numericValue:function(e){return"string"==typeof e?""!==e.replace(/[^\d.]/g,"")&&+e.replace(/[^\d.]/g,""):e},transitionEnd:function(){var e,t=n.createElement("element"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(t.style[e]!==o)return i[e]},displayPercent:function(){var e=E.width(),t=x.width(),n=parseInt(E.css("min-width"),10),o=e>n?e/t*100:p.percent;return g.precision>0?Math.round(o*(10*g.precision))/(10*g.precision):Math.round(o)},percent:function(){return p.percent||0},value:function(){return p.nextValue||p.value||0},total:function(){return p.total||!1}},create:{progressPoll:function(){p.progressPoll=setTimeout(function(){p.update.toNextValue(),p.remove.progressPoll()},p.get.updateInterval())}},is:{complete:function(){return p.is.success()||p.is.warning()||p.is.error()},success:function(){return x.hasClass(h.success)},warning:function(){return x.hasClass(h.warning)},error:function(){return x.hasClass(h.error)},active:function(){return x.hasClass(h.active)},visible:function(){return x.is(":visible")}},remove:{progressPoll:function(){p.verbose("Removing progress poll timer"),p.progressPoll&&(clearTimeout(p.progressPoll),delete p.progressPoll)},nextValue:function(){p.verbose("Removing progress value stored for next update"),delete p.nextValue},state:function(){p.verbose("Removing stored state"),delete p.total,delete p.percent,delete p.value},active:function(){p.verbose("Removing active state"),x.removeClass(h.active)},success:function(){p.verbose("Removing success state"),x.removeClass(h.success)},warning:function(){p.verbose("Removing warning state"),x.removeClass(h.warning)},error:function(){p.verbose("Removing error state"),x.removeClass(h.error)}},set:{barWidth:function(e){e>100?p.error(v.tooHigh,e):e<0?p.error(v.tooLow,e):(E.css("width",e+"%"),x.attr("data-percent",parseInt(e,10)))},duration:function(e){e=e||g.duration,e="number"==typeof e?e+"ms":e,p.verbose("Setting progress bar transition duration",e),E.css({"transition-duration":e})},percent:function(e){e="string"==typeof e?+e.replace("%",""):e,e=g.precision>0?Math.round(e*(10*g.precision))/(10*g.precision):Math.round(e),p.percent=e,p.has.total()||(p.value=g.precision>0?Math.round(e/100*p.total*(10*g.precision))/(10*g.precision):Math.round(e/100*p.total*10)/10,g.limitValues&&(p.value=p.value>100?100:p.value<0?0:p.value)),p.set.barWidth(e),p.set.labelInterval(),p.set.labels(),g.onChange.call(I,e,p.value,p.total)},labelInterval:function(){var t=function(){p.verbose("Bar finished animating, removing continuous label updates"),clearInterval(p.interval),w=!1,p.set.labels()};clearInterval(p.interval),p.bind.transitionEnd(t),w=!0,p.interval=setInterval(function(){var t=e.contains(n.documentElement,I);t||(clearInterval(p.interval),w=!1),p.set.labels()},g.framerate)},labels:function(){p.verbose("Setting both bar progress and outer label text"),p.set.barLabel(),p.set.state()},label:function(e){e=e||"",e&&(e=p.get.text(e),p.verbose("Setting label to text",e),C.text(e))},state:function(e){e=e!==o?e:p.percent,100===e?g.autoSuccess&&!(p.is.warning()||p.is.error()||p.is.success())?(p.set.success(),p.debug("Automatically triggering success at 100%")):(p.verbose("Reached 100% removing active state"),p.remove.active(),p.remove.progressPoll()):e>0?(p.verbose("Adjusting active progress bar label",e),p.set.active()):(p.remove.active(),p.set.label(g.text.active))},barLabel:function(e){e!==o?S.text(p.get.text(e)):"ratio"==g.label&&p.total?(p.verbose("Adding ratio to bar label"),S.text(p.get.text(g.text.ratio))):"percent"==g.label&&(p.verbose("Adding percentage to bar label"),S.text(p.get.text(g.text.percent)))},active:function(e){e=e||g.text.active,p.debug("Setting active state"),g.showActivity&&!p.is.active()&&x.addClass(h.active),p.remove.warning(),p.remove.error(),p.remove.success(),e=g.onLabelUpdate("active",e,p.value,p.total),e&&p.set.label(e),p.bind.transitionEnd(function(){g.onActive.call(I,p.value,p.total)})},success:function(e){e=e||g.text.success||g.text.active,p.debug("Setting success state"),x.addClass(h.success),p.remove.active(),p.remove.warning(),p.remove.error(),p.complete(),g.text.success?(e=g.onLabelUpdate("success",e,p.value,p.total),p.set.label(e)):(e=g.onLabelUpdate("active",e,p.value,p.total),p.set.label(e)),p.bind.transitionEnd(function(){g.onSuccess.call(I,p.total)})},warning:function(e){e=e||g.text.warning,p.debug("Setting warning state"),x.addClass(h.warning),p.remove.active(),p.remove.success(),p.remove.error(),p.complete(),e=g.onLabelUpdate("warning",e,p.value,p.total),e&&p.set.label(e),p.bind.transitionEnd(function(){g.onWarning.call(I,p.value,p.total)})},error:function(e){e=e||g.text.error,p.debug("Setting error state"),x.addClass(h.error),p.remove.active(),p.remove.success(),p.remove.warning(),p.complete(),e=g.onLabelUpdate("error",e,p.value,p.total),e&&p.set.label(e),p.bind.transitionEnd(function(){g.onError.call(I,p.value,p.total)})},transitionEvent:function(){r=p.get.transitionEnd()},total:function(e){p.total=e},value:function(e){p.value=e},progress:function(e){p.has.progressPoll()?(p.debug("Updated within interval, setting next update to use new value",e),p.set.nextValue(e)):(p.debug("First update in progress update interval, immediately updating",e),p.update.progress(e),p.create.progressPoll())},nextValue:function(e){p.nextValue=e}},update:{toNextValue:function(){var e=p.nextValue;e&&(p.debug("Update interval complete using last updated value",e),p.update.progress(e),p.remove.nextValue())},progress:function(e){var t;e=p.get.numericValue(e),e===!1&&p.error(v.nonNumeric,e),e=p.get.normalizedValue(e),p.has.total()?(p.set.value(e),t=e/p.total*100,p.debug("Calculating percent complete from total",t),p.set.percent(t)):(t=e,p.debug("Setting value to exact percentage value",t),p.set.percent(t))}},setting:function(t,n){if(p.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,g,t);else{if(n===o)return g[t];e.isPlainObject(g[t])?e.extend(!0,g[t],n):g[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(n===o)return p[t];p[t]=n}},debug:function(){!g.silent&&g.debug&&(g.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,g.name+":"),
p.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),p.verbose.apply(console,arguments)))},error:function(){g.silent||(p.error=Function.prototype.bind.call(console.error,console,g.name+":"),p.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;g.performance&&(t=(new Date).getTime(),o=a||t,n=t-o,a=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:I,"Execution Time":n})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,500)},display:function(){var t=g.name+":",n=0;a=!1,clearTimeout(p.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),(console.group!==o||console.table!==o)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var s,a,l,c=L;return n=n||d,r=I||r,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o?(a=c[i],!1):(p.error(v.method,t),!1);c=c[i]}})),e.isFunction(a)?l=a.apply(r,n):a!==o&&(l=a),e.isArray(i)?i.push(l):i!==o?i=[i,l]:l!==o&&(i=l),a}},u?(L===o&&p.initialize(),p.invoke(c)):(L!==o&&L.invoke("destroy"),p.initialize())}),i!==o?i:this},e.fn.progress.settings={name:"Progress",namespace:"progress",silent:!1,debug:!1,verbose:!1,performance:!0,random:{min:2,max:5},duration:300,updateInterval:"auto",autoSuccess:!0,showActivity:!0,limitValues:!0,label:"percent",precision:0,framerate:1e3/30,percent:!1,total:!1,value:!1,failSafeDelay:100,onLabelUpdate:function(e,t,n,o){return t},onChange:function(e,t,n){},onSuccess:function(e){},onActive:function(e,t){},onError:function(e,t){},onWarning:function(e,t){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%"},regExp:{variable:/\{\$*[A-z0-9]+\}/g},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:!1,error:!1,success:!1,warning:!1,percent:"{percent}%",ratio:"{value} of {total}"},className:{active:"active",error:"error",success:"success",warning:"warning"}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.rating=function(t){var n,i=e(this),r=i.selector||"",s=(new Date).getTime(),a=[],l=arguments[0],c="string"==typeof l,u=[].slice.call(arguments,1);return i.each(function(){var d,p,g=e.isPlainObject(t)?e.extend(!0,{},e.fn.rating.settings,t):e.extend({},e.fn.rating.settings),h=g.namespace,m=g.className,f=g.metadata,y=g.selector,v=(g.error,"."+h),b="module-"+h,j=this,x=e(this).data(b),E=e(this),S=E.find(y.icon);p={initialize:function(){p.verbose("Initializing rating module",g),0===S.length&&p.setup.layout(),g.interactive?p.enable():p.disable(),p.set.initialLoad(),p.set.rating(p.get.initialRating()),p.remove.initialLoad(),p.instantiate()},instantiate:function(){p.verbose("Instantiating module",g),x=p,E.data(b,p)},destroy:function(){p.verbose("Destroying previous instance",x),p.remove.events(),E.removeData(b)},refresh:function(){S=E.find(y.icon)},setup:{layout:function(){var t=p.get.maxRating(),n=e.fn.rating.settings.templates.icon(t);p.debug("Generating icon html dynamically"),E.html(n),p.refresh()}},event:{mouseenter:function(){var t=e(this);t.nextAll().removeClass(m.selected),E.addClass(m.selected),t.addClass(m.selected).prevAll().addClass(m.selected)},mouseleave:function(){E.removeClass(m.selected),S.removeClass(m.selected)},click:function(){var t=e(this),n=p.get.rating(),o=S.index(t)+1,i="auto"==g.clearable?1===S.length:g.clearable;i&&n==o?p.clearRating():p.set.rating(o)}},clearRating:function(){p.debug("Clearing current rating"),p.set.rating(0)},bind:{events:function(){p.verbose("Binding events"),E.on("mouseenter"+v,y.icon,p.event.mouseenter).on("mouseleave"+v,y.icon,p.event.mouseleave).on("click"+v,y.icon,p.event.click)}},remove:{events:function(){p.verbose("Removing events"),E.off(v)},initialLoad:function(){d=!1}},enable:function(){p.debug("Setting rating to interactive mode"),p.bind.events(),E.removeClass(m.disabled)},disable:function(){p.debug("Setting rating to read-only mode"),p.remove.events(),E.addClass(m.disabled)},is:{initialLoad:function(){return d}},get:{initialRating:function(){return E.data(f.rating)!==o?(E.removeData(f.rating),E.data(f.rating)):g.initialRating},maxRating:function(){return E.data(f.maxRating)!==o?(E.removeData(f.maxRating),E.data(f.maxRating)):g.maxRating},rating:function(){var e=S.filter("."+m.active).length;return p.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var t=e-1>=0?e-1:0,n=S.eq(t);E.removeClass(m.selected),S.removeClass(m.selected).removeClass(m.active),e>0&&(p.verbose("Setting current rating to",e),n.prevAll().addBack().addClass(m.active)),p.is.initialLoad()||g.onRate.call(j,e)},initialLoad:function(){d=!0}},setting:function(t,n){if(p.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,g,t);else{if(n===o)return g[t];e.isPlainObject(g[t])?e.extend(!0,g[t],n):g[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(n===o)return p[t];p[t]=n}},debug:function(){!g.silent&&g.debug&&(g.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,g.name+":"),p.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),p.verbose.apply(console,arguments)))},error:function(){g.silent||(p.error=Function.prototype.bind.call(console.error,console,g.name+":"),p.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;g.performance&&(t=(new Date).getTime(),o=s||t,n=t-o,s=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:j,"Execution Time":n})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,500)},display:function(){var t=g.name+":",n=0;s=!1,clearTimeout(p.performance.timer),e.each(a,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),i.length>1&&(t+=" ("+i.length+")"),(console.group!==o||console.table!==o)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,i,r){var s,a,l,c=x;return i=i||u,r=j||r,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o&&(a=c[i],!1);c=c[i]}})),e.isFunction(a)?l=a.apply(r,i):a!==o&&(l=a),e.isArray(n)?n.push(l):n!==o?n=[n,l]:l!==o&&(n=l),a}},c?(x===o&&p.initialize(),p.invoke(l)):(x!==o&&x.invoke("destroy"),p.initialize())}),n!==o?n:this},e.fn.rating.settings={name:"Rating",namespace:"rating",slent:!1,debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",fireOnInit:!1,onRate:function(e){},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},metadata:{rating:"rating",maxRating:"maxRating"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},selector:{icon:".icon"},templates:{icon:function(e){for(var t=1,n="";t<=e;)n+='<i class="icon"></i>',t++;return n}}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.search=function(i){var r,s=e(this),a=s.selector||"",l=(new Date).getTime(),c=[],u=arguments[0],d="string"==typeof u,p=[].slice.call(arguments,1);return e(this).each(function(){var g,h=e.isPlainObject(i)?e.extend(!0,{},e.fn.search.settings,i):e.extend({},e.fn.search.settings),m=h.className,f=h.metadata,y=h.regExp,v=h.fields,b=h.selector,j=h.error,x=h.namespace,E="."+x,S=x+"-module",C=e(this),I=C.find(b.prompt),L=C.find(b.searchButton),w=C.find(b.results),P=C.find(b.result),T=C.find(b.category),N=this,R=C.data(S),O=!1;g={initialize:function(){g.verbose("Initializing module"),g.determine.searchFields(),g.bind.events(),g.set.type(),g.create.results(),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),R=g,C.data(S,g)},destroy:function(){g.verbose("Destroying instance"),C.off(E).removeData(S)},refresh:function(){g.debug("Refreshing selector cache"),I=C.find(b.prompt),L=C.find(b.searchButton),T=C.find(b.category),w=C.find(b.results),P=C.find(b.result)},refreshResults:function(){w=C.find(b.results),P=C.find(b.result)},bind:{events:function(){g.verbose("Binding events to search"),h.automatic&&(C.on(g.get.inputEvent()+E,b.prompt,g.event.input),I.attr("autocomplete","off")),C.on("focus"+E,b.prompt,g.event.focus).on("blur"+E,b.prompt,g.event.blur).on("keydown"+E,b.prompt,g.handleKeyboard).on("click"+E,b.searchButton,g.query).on("mousedown"+E,b.results,g.event.result.mousedown).on("mouseup"+E,b.results,g.event.result.mouseup).on("click"+E,b.result,g.event.result.click)}},determine:{searchFields:function(){i&&i.searchFields!==o&&(h.searchFields=i.searchFields)}},event:{input:function(){clearTimeout(g.timer),g.timer=setTimeout(g.query,h.searchDelay)},focus:function(){g.set.focus(),g.has.minimumCharacters()&&(g.query(),g.can.show()&&g.showResults())},blur:function(e){var t=n.activeElement===this,o=function(){g.cancel.query(),g.remove.focus(),g.timer=setTimeout(g.hideResults,h.hideDelay)};t||(g.resultsClicked?(g.debug("Determining if user action caused search to close"),C.one("click.close"+E,b.results,function(e){return g.is.inMessage(e)||O?void I.focus():(O=!1,void(g.is.animating()||g.is.hidden()||o()))})):(g.debug("Input blurred without user action, closing results"),o()))},result:{mousedown:function(){g.resultsClicked=!0},mouseup:function(){g.resultsClicked=!1},click:function(n){g.debug("Search result selected");var o=e(this),i=o.find(b.title).eq(0),r=o.is("a[href]")?o:o.find("a[href]").eq(0),s=r.attr("href")||!1,a=r.attr("target")||!1,l=(i.html(),i.length>0&&i.text()),c=g.get.results(),u=o.data(f.result)||g.get.result(l,c);return e.isFunction(h.onSelect)&&h.onSelect.call(N,u,c)===!1?(g.debug("Custom onSelect callback cancelled default select action"),void(O=!0)):(g.hideResults(),l&&g.set.value(l),void(s&&(g.verbose("Opening search link found in result",r),"_blank"==a||n.ctrlKey?t.open(s):t.location.href=s)))}}},handleKeyboard:function(e){var t,n=C.find(b.result),o=C.find(b.category),i=n.filter("."+m.active),r=n.index(i),s=n.length,a=i.length>0,l=e.which,c={backspace:8,enter:13,escape:27,upArrow:38,downArrow:40};if(l==c.escape&&(g.verbose("Escape key pressed, blurring search field"),g.trigger.blur()),g.is.visible())if(l==c.enter){if(g.verbose("Enter key pressed, selecting active result"),n.filter("."+m.active).length>0)return g.event.result.click.call(n.filter("."+m.active),e),e.preventDefault(),!1}else l==c.upArrow&&a?(g.verbose("Up key pressed, changing active result"),t=r-1<0?r:r-1,o.removeClass(m.active),n.removeClass(m.active).eq(t).addClass(m.active).closest(o).addClass(m.active),e.preventDefault()):l==c.downArrow&&(g.verbose("Down key pressed, changing active result"),t=r+1>=s?r:r+1,o.removeClass(m.active),n.removeClass(m.active).eq(t).addClass(m.active).closest(o).addClass(m.active),e.preventDefault());else l==c.enter&&(g.verbose("Enter key pressed, executing query"),g.query(),g.set.buttonPressed(),I.one("keyup",g.remove.buttonFocus))},setup:{api:function(t){var n={debug:h.debug,on:!1,cache:!0,action:"search",urlData:{query:t},onSuccess:function(e){g.parse.response.call(N,e,t)},onAbort:function(e){},onFailure:function(){g.displayMessage(j.serverError)},onError:g.error};e.extend(!0,n,h.apiSettings),g.verbose("Setting up API request",n),C.api(n)}},can:{useAPI:function(){return e.fn.api!==o},show:function(){return g.is.focused()&&!g.is.visible()&&!g.is.empty()},transition:function(){return h.transition&&e.fn.transition!==o&&C.transition("is supported")}},is:{animating:function(){return w.hasClass(m.animating)},hidden:function(){return w.hasClass(m.hidden)},inMessage:function(t){if(t.target){var o=e(t.target),i=e.contains(n.documentElement,t.target);return i&&o.closest(b.message).length>0}},empty:function(){return""===w.html()},visible:function(){return w.filter(":visible").length>0},focused:function(){return I.filter(":focus").length>0}},trigger:{blur:function(){var e=n.createEvent("HTMLEvents"),t=I[0];t&&(g.verbose("Triggering native blur event"),e.initEvent("blur",!1,!1),t.dispatchEvent(e))}},get:{inputEvent:function(){var e=I[0],t=e!==o&&e.oninput!==o?"input":e!==o&&e.onpropertychange!==o?"propertychange":"keyup";return t},value:function(){return I.val()},results:function(){var e=C.data(f.results);return e},result:function(t,n){var i=["title","id"],r=!1;return t=t!==o?t:g.get.value(),n=n!==o?n:g.get.results(),"category"===h.type?(g.debug("Finding result that matches",t),e.each(n,function(n,o){if(e.isArray(o.results)&&(r=g.search.object(t,o.results,i)[0]))return!1})):(g.debug("Finding result in results object",t),r=g.search.object(t,n,i)[0]),r||!1}},select:{firstResult:function(){g.verbose("Selecting first result"),P.first().addClass(m.active)}},set:{focus:function(){C.addClass(m.focus)},loading:function(){C.addClass(m.loading)},value:function(e){g.verbose("Setting search input value",e),I.val(e)},type:function(e){e=e||h.type,"category"==h.type&&C.addClass(h.type)},buttonPressed:function(){L.addClass(m.pressed)}},remove:{loading:function(){C.removeClass(m.loading)},focus:function(){C.removeClass(m.focus)},buttonPressed:function(){L.removeClass(m.pressed)}},query:function(){var t=g.get.value(),n=g.read.cache(t);g.has.minimumCharacters()?(n?(g.debug("Reading result from cache",t),g.save.results(n.results),g.addResults(n.html),g.inject.id(n.results)):(g.debug("Querying for",t),e.isPlainObject(h.source)||e.isArray(h.source)?g.search.local(t):g.can.useAPI()?g.search.remote(t):g.error(j.source)),h.onSearchQuery.call(N,t)):g.hideResults()},search:{local:function(e){var t,n=g.search.object(e,h.content);g.set.loading(),g.save.results(n),g.debug("Returned local search results",n),t=g.generateResults({results:n}),g.remove.loading(),g.addResults(t),g.inject.id(n),g.write.cache(e,{html:t,results:n})},remote:function(e){C.api("is loading")&&C.api("abort"),g.setup.api(e),C.api("query")},object:function(t,n,i){var r=[],s=[],a=t.toString().replace(y.escape,"\\$&"),l=new RegExp(y.beginsWith+a,"i"),c=function(t,n){var o=e.inArray(n,r)==-1,i=e.inArray(n,s)==-1;o&&i&&t.push(n)};return n=n||h.source,i=i!==o?i:h.searchFields,e.isArray(i)||(i=[i]),n===o||n===!1?(g.error(j.source),[]):(e.each(i,function(o,i){e.each(n,function(e,n){var o="string"==typeof n[i];o&&(n[i].search(l)!==-1?c(r,n):h.searchFullText&&g.fuzzySearch(t,n[i])&&c(s,n))})}),e.merge(r,s))}},fuzzySearch:function(e,t){var n=t.length,o=e.length;if("string"!=typeof e)return!1;if(e=e.toLowerCase(),t=t.toLowerCase(),o>n)return!1;if(o===n)return e===t;e:for(var i=0,r=0;i<o;i++){for(var s=e.charCodeAt(i);r<n;)if(t.charCodeAt(r++)===s)continue e;return!1}return!0},parse:{response:function(e,t){var n=g.generateResults(e);g.verbose("Parsing server response",e),e!==o&&t!==o&&e[v.results]!==o&&(g.addResults(n),g.inject.id(e[v.results]),g.write.cache(t,{html:n,results:e[v.results]}),g.save.results(e[v.results]))}},cancel:{query:function(){g.can.useAPI()&&C.api("abort")}},has:{minimumCharacters:function(){var e=g.get.value(),t=e.length;return t>=h.minCharacters}},clear:{cache:function(e){var t=C.data(f.cache);e?e&&t&&t[e]&&(g.debug("Removing value from cache",e),delete t[e],C.data(f.cache,t)):(g.debug("Clearing cache",e),C.removeData(f.cache))}},read:{cache:function(e){var t=C.data(f.cache);return!!h.cache&&(g.verbose("Checking cache for generated html for query",e),"object"==typeof t&&t[e]!==o&&t[e])}},create:{id:function(e,t){var n,i,r=e+1;return t!==o?(n=String.fromCharCode(97+t),i=n+r,g.verbose("Creating category result id",i)):(i=r,g.verbose("Creating result id",i)),i},results:function(){0===w.length&&(w=e("<div />").addClass(m.results).appendTo(C))}},inject:{result:function(e,t,n){g.verbose("Injecting result into results");var i=n!==o?w.children().eq(n).children(b.result).eq(t):w.children(b.result).eq(t);g.verbose("Injecting results metadata",i),i.data(f.result,e)},id:function(t){g.debug("Injecting unique ids into results");var n=0,i=0;return"category"===h.type?e.each(t,function(t,r){i=0,e.each(r.results,function(e,t){var s=r.results[e];s.id===o&&(s.id=g.create.id(i,n)),g.inject.result(s,i,n),i++}),n++}):e.each(t,function(e,n){var r=t[e];r.id===o&&(r.id=g.create.id(i)),g.inject.result(r,i),i++}),t}},save:{results:function(e){g.verbose("Saving current search results to metadata",e),C.data(f.results,e)}},write:{cache:function(e,t){var n=C.data(f.cache)!==o?C.data(f.cache):{};h.cache&&(g.verbose("Writing generated html to cache",e,t),n[e]=t,C.data(f.cache,n))}},addResults:function(t){return e.isFunction(h.onResultsAdd)&&h.onResultsAdd.call(w,t)===!1?(g.debug("onResultsAdd callback cancelled default action"),!1):void(t?(w.html(t),g.refreshResults(),h.selectFirstResult&&g.select.firstResult(),g.showResults()):g.hideResults())},showResults:function(){g.is.visible()||(g.can.transition()?(g.debug("Showing results with css animations"),w.transition({animation:h.transition+" in",debug:h.debug,verbose:h.verbose,duration:h.duration,queue:!0})):(g.debug("Showing results with javascript"),w.stop().fadeIn(h.duration,h.easing)),h.onResultsOpen.call(w))},hideResults:function(){g.is.visible()&&(g.can.transition()?(g.debug("Hiding results with css animations"),w.transition({animation:h.transition+" out",debug:h.debug,verbose:h.verbose,duration:h.duration,queue:!0})):(g.debug("Hiding results with javascript"),w.stop().fadeOut(h.duration,h.easing)),h.onResultsClose.call(w))},generateResults:function(t){g.debug("Generating html from response",t);var n=h.templates[h.type],o=e.isPlainObject(t[v.results])&&!e.isEmptyObject(t[v.results]),i=e.isArray(t[v.results])&&t[v.results].length>0,r="";return o||i?(h.maxResults>0&&(o?"standard"==h.type&&g.error(j.maxResults):t[v.results]=t[v.results].slice(0,h.maxResults)),e.isFunction(n)?r=n(t,v):g.error(j.noTemplate,!1)):h.showNoResults&&(r=g.displayMessage(j.noResults,"empty")),h.onResults.call(N,t),r},displayMessage:function(e,t){return t=t||"standard",g.debug("Displaying message",e,t),g.addResults(h.templates.message(e,t)),h.templates.message(e,t)},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(n===o)return h[t];h[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(n===o)return g[t];g[t]=n}},debug:function(){!h.silent&&h.debug&&(h.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,h.name+":"),g.debug.apply(console,arguments)))},verbose:function(){!h.silent&&h.verbose&&h.debug&&(h.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),g.verbose.apply(console,arguments)))},error:function(){h.silent||(g.error=Function.prototype.bind.call(console.error,console,h.name+":"),g.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;h.performance&&(t=(new Date).getTime(),o=l||t,n=t-o,l=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:N,"Execution Time":n})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,500)},display:function(){var t=h.name+":",n=0;l=!1,clearTimeout(g.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),s.length>1&&(t+=" ("+s.length+")"),(console.group!==o||console.table!==o)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,i){var s,a,l,c=R;return n=n||p,i=N||i,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o&&(a=c[i],!1);c=c[i]}})),e.isFunction(a)?l=a.apply(i,n):a!==o&&(l=a),e.isArray(r)?r.push(l):r!==o?r=[r,l]:l!==o&&(r=l),a}},d?(R===o&&g.initialize(),g.invoke(u)):(R!==o&&R.invoke("destroy"),g.initialize())}),r!==o?r:this},e.fn.search.settings={name:"Search",namespace:"search",silent:!1,debug:!1,verbose:!1,performance:!0,type:"standard",minCharacters:1,selectFirstResult:!1,apiSettings:!1,source:!1,searchFields:["title","description"],displayField:"",searchFullText:!0,automatic:!0,hideDelay:0,searchDelay:200,maxResults:7,cache:!0,showNoResults:!0,transition:"scale",duration:200,easing:"easeOutExpo",onSelect:!1,onResultsAdd:!1,onSearchQuery:function(e){},onResults:function(e){},onResultsOpen:function(){},onResultsClose:function(){},className:{animating:"animating",active:"active",empty:"empty",focus:"focus",hidden:"hidden",loading:"loading",results:"results",pressed:"down"},error:{source:"Cannot search. No source used, and Semantic API module was not included",noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noEndpoint:"No search endpoint was specified",noTemplate:"A valid template name was not specified.",serverError:"There was an issue querying the server.",maxResults:"Results must be an array to use maxResults setting",method:"The method you called is not defined."},metadata:{cache:"cache",results:"results",result:"result"},regExp:{escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,beginsWith:"(?:s|^)"},fields:{categories:"results",categoryName:"name",categoryResults:"results",description:"description",image:"image",price:"price",results:"results",title:"title",url:"url",action:"action",actionText:"text",actionURL:"url"},selector:{prompt:".prompt",searchButton:".search.button",results:".results",message:".results > .message",category:".category",result:".result",title:".title, .name"},templates:{escape:function(e){var t=/[&<>"'`]/g,n=/[&<>"'`]/,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=function(e){return o[e]};return n.test(e)?e.replace(t,i):e},message:function(e,t){var n="";return e!==o&&t!==o&&(n+='<div class="message '+t+'">',n+="empty"==t?'<div class="header">No Results</div class="header"><div class="description">'+e+'</div class="description">':' <div class="description">'+e+"</div>",n+="</div>"),n},category:function(t,n){var i="";return e.fn.search.settings.templates.escape,t[n.categoryResults]!==o&&(e.each(t[n.categoryResults],function(t,r){r[n.results]!==o&&r.results.length>0&&(i+='<div class="category">',r[n.categoryName]!==o&&(i+='<div class="name">'+r[n.categoryName]+"</div>"),e.each(r.results,function(e,t){i+=t[n.url]?'<a class="result" href="'+t[n.url]+'">':'<a class="result">',t[n.image]!==o&&(i+='<div class="image"> <img src="'+t[n.image]+'"></div>'),i+='<div class="content">',t[n.price]!==o&&(i+='<div class="price">'+t[n.price]+"</div>"),t[n.title]!==o&&(i+='<div class="title">'+t[n.title]+"</div>"),t[n.description]!==o&&(i+='<div class="description">'+t[n.description]+"</div>"),i+="</div>",i+="</a>"}),i+="</div>")}),t[n.action]&&(i+='<a href="'+t[n.action][n.actionURL]+'" class="action">'+t[n.action][n.actionText]+"</a>"),i)},standard:function(t,n){var i="";return t[n.results]!==o&&(e.each(t[n.results],function(e,t){i+=t[n.url]?'<a class="result" href="'+t[n.url]+'">':'<a class="result">',t[n.image]!==o&&(i+='<div class="image"> <img src="'+t[n.image]+'"></div>'),i+='<div class="content">',t[n.price]!==o&&(i+='<div class="price">'+t[n.price]+"</div>"),t[n.title]!==o&&(i+='<div class="title">'+t[n.title]+"</div>"),t[n.description]!==o&&(i+='<div class="description">'+t[n.description]+"</div>"),i+="</div>",i+="</a>"}),t[n.action]&&(i+='<a href="'+t[n.action][n.actionURL]+'" class="action">'+t[n.action][n.actionText]+"</a>"),i)}}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.shape=function(i){var r,s=e(this),a=(e("body"),(new Date).getTime()),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1),p=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return s.each(function(){var t,g,h,m=s.selector||"",f=e.isPlainObject(i)?e.extend(!0,{},e.fn.shape.settings,i):e.extend({},e.fn.shape.settings),y=f.namespace,v=f.selector,b=f.error,j=f.className,x="."+y,E="module-"+y,S=e(this),C=S.find(v.sides),I=S.find(v.side),L=!1,w=this,P=S.data(E);h={initialize:function(){h.verbose("Initializing module for",w),h.set.defaultSide(),h.instantiate()},instantiate:function(){h.verbose("Storing instance of module",h),P=h,S.data(E,P)},destroy:function(){h.verbose("Destroying previous module for",w),S.removeData(E).off(x)},refresh:function(){h.verbose("Refreshing selector cache for",w),S=e(w),C=e(this).find(v.shape),I=e(this).find(v.side)},repaint:function(){h.verbose("Forcing repaint event");var e=C[0]||n.createElement("div");e.offsetWidth},animate:function(e,n){h.verbose("Animating box with properties",e),n=n||function(e){h.verbose("Executing animation callback"),e!==o&&e.stopPropagation(),h.reset(),h.set.active()},f.beforeChange.call(g[0]),h.get.transitionEvent()?(h.verbose("Starting CSS animation"),S.addClass(j.animating),C.css(e).one(h.get.transitionEvent(),n),h.set.duration(f.duration),p(function(){S.addClass(j.animating),t.addClass(j.hidden)})):n()},queue:function(e){h.debug("Queueing animation of",e),C.one(h.get.transitionEvent(),function(){h.debug("Executing queued animation"),setTimeout(function(){S.shape(e)},0)})},reset:function(){h.verbose("Animating states reset"),S.removeClass(j.animating).attr("style","").removeAttr("style"),C.attr("style","").removeAttr("style"),I.attr("style","").removeAttr("style").removeClass(j.hidden),g.removeClass(j.animating).attr("style","").removeAttr("style")},is:{complete:function(){return I.filter("."+j.active)[0]==g[0]},animating:function(){return S.hasClass(j.animating)}},set:{defaultSide:function(){t=S.find("."+f.className.active),g=t.next(v.side).length>0?t.next(v.side):S.find(v.side).first(),L=!1,h.verbose("Active side set to",t),h.verbose("Next side set to",g)},duration:function(e){e=e||f.duration,e="number"==typeof e?e+"ms":e,h.verbose("Setting animation duration",e),(f.duration||0===f.duration)&&C.add(I).css({"-webkit-transition-duration":e,"-moz-transition-duration":e,"-ms-transition-duration":e,"-o-transition-duration":e,"transition-duration":e})},currentStageSize:function(){var e=S.find("."+f.className.active),t=e.outerWidth(!0),n=e.outerHeight(!0);S.css({width:t,height:n})},stageSize:function(){var e=S.clone().addClass(j.loading),t=e.find("."+f.className.active),n=L?e.find(v.side).eq(L):t.next(v.side).length>0?t.next(v.side):e.find(v.side).first(),o="next"==f.width?n.outerWidth(!0):"initial"==f.width?S.width():f.width,i="next"==f.height?n.outerHeight(!0):"initial"==f.height?S.height():f.height;t.removeClass(j.active),n.addClass(j.active),e.insertAfter(S),e.remove(),"auto"!=f.width&&(S.css("width",o+f.jitter),h.verbose("Specifying width during animation",o)),"auto"!=f.height&&(S.css("height",i+f.jitter),h.verbose("Specifying height during animation",i))},nextSide:function(e){L=e,g=I.filter(e),L=I.index(g),0===g.length&&(h.set.defaultSide(),h.error(b.side)),h.verbose("Next side manually set to",g)},active:function(){h.verbose("Setting new side to active",g),I.removeClass(j.active),g.addClass(j.active),f.onChange.call(g[0]),h.set.defaultSide()}},flip:{up:function(){if(h.is.complete()&&!h.is.animating()&&!f.allowRepeats)return void h.debug("Side already visible",g);if(h.is.animating())h.queue("flip up");else{h.debug("Flipping up",g);var e=h.get.transform.up();h.set.stageSize(),h.stage.above(),h.animate(e)}},down:function(){if(h.is.complete()&&!h.is.animating()&&!f.allowRepeats)return void h.debug("Side already visible",g);if(h.is.animating())h.queue("flip down");else{h.debug("Flipping down",g);var e=h.get.transform.down();h.set.stageSize(),h.stage.below(),h.animate(e)}},left:function(){if(h.is.complete()&&!h.is.animating()&&!f.allowRepeats)return void h.debug("Side already visible",g);if(h.is.animating())h.queue("flip left");else{h.debug("Flipping left",g);var e=h.get.transform.left();h.set.stageSize(),h.stage.left(),h.animate(e)}},right:function(){if(h.is.complete()&&!h.is.animating()&&!f.allowRepeats)return void h.debug("Side already visible",g);if(h.is.animating())h.queue("flip right");else{h.debug("Flipping right",g);var e=h.get.transform.right();h.set.stageSize(),h.stage.right(),h.animate(e)}},over:function(){return!h.is.complete()||h.is.animating()||f.allowRepeats?void(h.is.animating()?h.queue("flip over"):(h.debug("Flipping over",g),h.set.stageSize(),h.stage.behind(),h.animate(h.get.transform.over()))):void h.debug("Side already visible",g)},back:function(){return!h.is.complete()||h.is.animating()||f.allowRepeats?void(h.is.animating()?h.queue("flip back"):(h.debug("Flipping back",g),h.set.stageSize(),h.stage.behind(),h.animate(h.get.transform.back()))):void h.debug("Side already visible",g)}},get:{transform:{up:function(){var e={y:-((t.outerHeight(!0)-g.outerHeight(!0))/2),z:-(t.outerHeight(!0)/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(-90deg)"}},down:function(){var e={y:-((t.outerHeight(!0)-g.outerHeight(!0))/2),z:-(t.outerHeight(!0)/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(90deg)"}},left:function(){var e={x:-((t.outerWidth(!0)-g.outerWidth(!0))/2),z:-(t.outerWidth(!0)/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(90deg)"}},right:function(){var e={x:-((t.outerWidth(!0)-g.outerWidth(!0))/2),z:-(t.outerWidth(!0)/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(-90deg)"}},over:function(){var e={x:-((t.outerWidth(!0)-g.outerWidth(!0))/2)};return{transform:"translateX("+e.x+"px) rotateY(180deg)"}},back:function(){var e={x:-((t.outerWidth(!0)-g.outerWidth(!0))/2)};return{transform:"translateX("+e.x+"px) rotateY(-180deg)"}}},transitionEvent:function(){var e,t=n.createElement("element"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(t.style[e]!==o)return i[e]},nextSide:function(){return t.next(v.side).length>0?t.next(v.side):S.find(v.side).first()}},stage:{above:function(){var e={origin:(t.outerHeight(!0)-g.outerHeight(!0))/2,depth:{active:g.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};h.verbose("Setting the initial animation position as above",g,e),C.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),g.addClass(j.animating).css({top:e.origin+"px",transform:"rotateX(90deg) translateZ("+e.depth.next+"px)"})},below:function(){var e={origin:(t.outerHeight(!0)-g.outerHeight(!0))/2,depth:{active:g.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};h.verbose("Setting the initial animation position as below",g,e),C.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),g.addClass(j.animating).css({top:e.origin+"px",transform:"rotateX(-90deg) translateZ("+e.depth.next+"px)"
})},left:function(){var e={active:t.outerWidth(!0),next:g.outerWidth(!0)},n={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};h.verbose("Setting the initial animation position as left",g,n),C.css({transform:"translateZ(-"+n.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+n.depth.active+"px)"}),g.addClass(j.animating).css({left:n.origin+"px",transform:"rotateY(-90deg) translateZ("+n.depth.next+"px)"})},right:function(){var e={active:t.outerWidth(!0),next:g.outerWidth(!0)},n={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};h.verbose("Setting the initial animation position as left",g,n),C.css({transform:"translateZ(-"+n.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+n.depth.active+"px)"}),g.addClass(j.animating).css({left:n.origin+"px",transform:"rotateY(90deg) translateZ("+n.depth.next+"px)"})},behind:function(){var e={active:t.outerWidth(!0),next:g.outerWidth(!0)},n={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};h.verbose("Setting the initial animation position as behind",g,n),t.css({transform:"rotateY(0deg)"}),g.addClass(j.animating).css({left:n.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(t,n){if(h.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,f,t);else{if(n===o)return f[t];e.isPlainObject(f[t])?e.extend(!0,f[t],n):f[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(n===o)return h[t];h[t]=n}},debug:function(){!f.silent&&f.debug&&(f.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,f.name+":"),h.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),h.verbose.apply(console,arguments)))},error:function(){f.silent||(h.error=Function.prototype.bind.call(console.error,console,f.name+":"),h.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;f.performance&&(t=(new Date).getTime(),o=a||t,n=t-o,a=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:w,"Execution Time":n})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,500)},display:function(){var t=f.name+":",n=0;a=!1,clearTimeout(h.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",m&&(t+=" '"+m+"'"),s.length>1&&(t+=" ("+s.length+")"),(console.group!==o||console.table!==o)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,i){var s,a,l,c=P;return n=n||d,i=w||i,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o&&(a=c[i],!1);c=c[i]}})),e.isFunction(a)?l=a.apply(i,n):a!==o&&(l=a),e.isArray(r)?r.push(l):r!==o?r=[r,l]:l!==o&&(r=l),a}},u?(P===o&&h.initialize(),h.invoke(c)):(P!==o&&P.invoke("destroy"),h.initialize())}),r!==o?r:this},e.fn.shape.settings={name:"Shape",silent:!1,debug:!1,verbose:!1,jitter:0,performance:!0,namespace:"shape",width:"initial",height:"initial",beforeChange:function(){},onChange:function(){},allowRepeats:!1,duration:!1,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.sidebar=function(i){var r,s=e(this),a=e(t),l=e(n),c=e("html"),u=e("head"),d=s.selector||"",p=(new Date).getTime(),g=[],h=arguments[0],m="string"==typeof h,f=[].slice.call(arguments,1),y=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return s.each(function(){var s,v,b,j,x,E,S=e.isPlainObject(i)?e.extend(!0,{},e.fn.sidebar.settings,i):e.extend({},e.fn.sidebar.settings),C=S.selector,I=S.className,L=S.namespace,w=S.regExp,P=S.error,T="."+L,N="module-"+L,R=e(this),O=e(S.context),A=R.children(C.sidebar),D=O.children(C.fixed),M=O.children(C.pusher),F=this,_=R.data(N);E={initialize:function(){E.debug("Initializing sidebar",i),E.create.id(),x=E.get.transitionEvent(),E.is.ios()&&E.set.ios(),S.delaySetup?y(E.setup.layout):E.setup.layout(),y(function(){E.setup.cache()}),E.instantiate()},instantiate:function(){E.verbose("Storing instance of module",E),_=E,R.data(N,E)},create:{id:function(){b=(Math.random().toString(16)+"000000000").substr(2,8),v="."+b,E.verbose("Creating unique id for element",b)}},destroy:function(){E.verbose("Destroying previous module for",R),R.off(T).removeData(N),E.is.ios()&&E.remove.ios(),O.off(v),a.off(v),l.off(v)},event:{clickaway:function(e){var t=M.find(e.target).length>0||M.is(e.target),n=O.is(e.target);t&&(E.verbose("User clicked on dimmed page"),E.hide()),n&&(E.verbose("User clicked on dimmable context (scaled out page)"),E.hide())},touch:function(e){},containScroll:function(e){F.scrollTop<=0&&(F.scrollTop=1),F.scrollTop+F.offsetHeight>=F.scrollHeight&&(F.scrollTop=F.scrollHeight-F.offsetHeight-1)},scroll:function(t){0===e(t.target).closest(C.sidebar).length&&t.preventDefault()}},bind:{clickaway:function(){E.verbose("Adding clickaway events to context",O),S.closable&&O.on("click"+v,E.event.clickaway).on("touchend"+v,E.event.clickaway)},scrollLock:function(){S.scrollLock&&(E.debug("Disabling page scroll"),a.on("DOMMouseScroll"+v,E.event.scroll)),E.verbose("Adding events to contain sidebar scroll"),l.on("touchmove"+v,E.event.touch),R.on("scroll"+T,E.event.containScroll)}},unbind:{clickaway:function(){E.verbose("Removing clickaway events from context",O),O.off(v)},scrollLock:function(){E.verbose("Removing scroll lock from page"),l.off(v),a.off(v),R.off("scroll"+T)}},add:{inlineCSS:function(){var t,n=E.cache.width||R.outerWidth(),o=E.cache.height||R.outerHeight(),i=E.is.rtl(),r=E.get.direction(),a={left:n,right:-n,top:o,bottom:-o};i&&(E.verbose("RTL detected, flipping widths"),a.left=-n,a.right=n),t="<style>","left"===r||"right"===r?(E.debug("Adding CSS rules for animation distance",n),t+=" .ui.visible."+r+".sidebar ~ .fixed, .ui.visible."+r+".sidebar ~ .pusher {   -webkit-transform: translate3d("+a[r]+"px, 0, 0);           transform: translate3d("+a[r]+"px, 0, 0); }"):"top"!==r&&"bottom"!=r||(t+=" .ui.visible."+r+".sidebar ~ .fixed, .ui.visible."+r+".sidebar ~ .pusher {   -webkit-transform: translate3d(0, "+a[r]+"px, 0);           transform: translate3d(0, "+a[r]+"px, 0); }"),E.is.ie()&&("left"===r||"right"===r?(E.debug("Adding CSS rules for animation distance",n),t+=" body.pushable > .ui.visible."+r+".sidebar ~ .pusher:after {   -webkit-transform: translate3d("+a[r]+"px, 0, 0);           transform: translate3d("+a[r]+"px, 0, 0); }"):"top"!==r&&"bottom"!=r||(t+=" body.pushable > .ui.visible."+r+".sidebar ~ .pusher:after {   -webkit-transform: translate3d(0, "+a[r]+"px, 0);           transform: translate3d(0, "+a[r]+"px, 0); }"),t+=" body.pushable > .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .pusher:after, body.pushable > .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .pusher:after {   -webkit-transform: translate3d(0px, 0, 0);           transform: translate3d(0px, 0, 0); }"),t+="</style>",s=e(t).appendTo(u),E.debug("Adding sizing css to head",s)}},refresh:function(){E.verbose("Refreshing selector cache"),O=e(S.context),A=O.children(C.sidebar),M=O.children(C.pusher),D=O.children(C.fixed),E.clear.cache()},refreshSidebars:function(){E.verbose("Refreshing other sidebars"),A=O.children(C.sidebar)},repaint:function(){E.verbose("Forcing repaint event"),F.style.display="none",F.offsetHeight,F.scrollTop=F.scrollTop,F.style.display=""},setup:{cache:function(){E.cache={width:R.outerWidth(),height:R.outerHeight(),rtl:"rtl"==R.css("direction")}},layout:function(){0===O.children(C.pusher).length&&(E.debug("Adding wrapper element for sidebar"),E.error(P.pusher),M=e('<div class="pusher" />'),O.children().not(C.omitted).not(A).wrapAll(M),E.refresh()),0!==R.nextAll(C.pusher).length&&R.nextAll(C.pusher)[0]===M[0]||(E.debug("Moved sidebar to correct parent element"),E.error(P.movedSidebar,F),R.detach().prependTo(O),E.refresh()),E.clear.cache(),E.set.pushable(),E.set.direction()}},attachEvents:function(t,n){var o=e(t);n=e.isFunction(E[n])?E[n]:E.toggle,o.length>0?(E.debug("Attaching sidebar events to element",t,n),o.on("click"+T,n)):E.error(P.notFound,t)},show:function(t){if(t=e.isFunction(t)?t:function(){},E.is.hidden()){if(E.refreshSidebars(),S.overlay&&(E.error(P.overlay),S.transition="overlay"),E.refresh(),E.othersActive())if(E.debug("Other sidebars currently visible"),S.exclusive){if("overlay"!=S.transition)return void E.hideOthers(E.show);E.hideOthers()}else S.transition="overlay";E.pushPage(function(){t.call(F),S.onShow.call(F)}),S.onChange.call(F),S.onVisible.call(F)}else E.debug("Sidebar is already visible")},hide:function(t){t=e.isFunction(t)?t:function(){},(E.is.visible()||E.is.animating())&&(E.debug("Hiding sidebar",t),E.refreshSidebars(),E.pullPage(function(){t.call(F),S.onHidden.call(F)}),S.onChange.call(F),S.onHide.call(F))},othersAnimating:function(){return A.not(R).filter("."+I.animating).length>0},othersVisible:function(){return A.not(R).filter("."+I.visible).length>0},othersActive:function(){return E.othersVisible()||E.othersAnimating()},hideOthers:function(e){var t=A.not(R).filter("."+I.visible),n=t.length,o=0;e=e||function(){},t.sidebar("hide",function(){o++,o==n&&e()})},toggle:function(){E.verbose("Determining toggled direction"),E.is.hidden()?E.show():E.hide()},pushPage:function(t){var n,o,i,r=E.get.transition(),s="overlay"===r||E.othersActive()?R:M;t=e.isFunction(t)?t:function(){},"scale down"==S.transition&&E.scrollToTop(),E.set.transition(r),E.repaint(),n=function(){E.bind.clickaway(),E.add.inlineCSS(),E.set.animating(),E.set.visible()},o=function(){E.set.dimmed()},i=function(e){e.target==s[0]&&(s.off(x+v,i),E.remove.animating(),E.bind.scrollLock(),t.call(F))},s.off(x+v),s.on(x+v,i),y(n),S.dimPage&&!E.othersVisible()&&y(o)},pullPage:function(t){var n,o,i=E.get.transition(),r="overlay"==i||E.othersActive()?R:M;t=e.isFunction(t)?t:function(){},E.verbose("Removing context push state",E.get.direction()),E.unbind.clickaway(),E.unbind.scrollLock(),n=function(){E.set.transition(i),E.set.animating(),E.remove.visible(),S.dimPage&&!E.othersVisible()&&M.removeClass(I.dimmed)},o=function(e){e.target==r[0]&&(r.off(x+v,o),E.remove.animating(),E.remove.transition(),E.remove.inlineCSS(),("scale down"==i||S.returnScroll&&E.is.mobile())&&E.scrollBack(),t.call(F))},r.off(x+v),r.on(x+v,o),y(n)},scrollToTop:function(){E.verbose("Scrolling to top of page to avoid animation issues"),j=e(t).scrollTop(),R.scrollTop(0),t.scrollTo(0,0)},scrollBack:function(){E.verbose("Scrolling back to original page position"),t.scrollTo(0,j)},clear:{cache:function(){E.verbose("Clearing cached dimensions"),E.cache={}}},set:{ios:function(){c.addClass(I.ios)},pushed:function(){O.addClass(I.pushed)},pushable:function(){O.addClass(I.pushable)},dimmed:function(){M.addClass(I.dimmed)},active:function(){R.addClass(I.active)},animating:function(){R.addClass(I.animating)},transition:function(e){e=e||E.get.transition(),R.addClass(e)},direction:function(e){e=e||E.get.direction(),R.addClass(I[e])},visible:function(){R.addClass(I.visible)},overlay:function(){R.addClass(I.overlay)}},remove:{inlineCSS:function(){E.debug("Removing inline css styles",s),s&&s.length>0&&s.remove()},ios:function(){c.removeClass(I.ios)},pushed:function(){O.removeClass(I.pushed)},pushable:function(){O.removeClass(I.pushable)},active:function(){R.removeClass(I.active)},animating:function(){R.removeClass(I.animating)},transition:function(e){e=e||E.get.transition(),R.removeClass(e)},direction:function(e){e=e||E.get.direction(),R.removeClass(I[e])},visible:function(){R.removeClass(I.visible)},overlay:function(){R.removeClass(I.overlay)}},get:{direction:function(){return R.hasClass(I.top)?I.top:R.hasClass(I.right)?I.right:R.hasClass(I.bottom)?I.bottom:I.left},transition:function(){var e,t=E.get.direction();return e=E.is.mobile()?"auto"==S.mobileTransition?S.defaultTransition.mobile[t]:S.mobileTransition:"auto"==S.transition?S.defaultTransition.computer[t]:S.transition,E.verbose("Determined transition",e),e},transitionEvent:function(){var e,t=n.createElement("element"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(t.style[e]!==o)return i[e]}},is:{ie:function(){var e=!t.ActiveXObject&&"ActiveXObject"in t,n="ActiveXObject"in t;return e||n},ios:function(){var e=navigator.userAgent,t=e.match(w.ios),n=e.match(w.mobileChrome);return!(!t||n||(E.verbose("Browser was found to be iOS",e),0))},mobile:function(){var e=navigator.userAgent,t=e.match(w.mobile);return t?(E.verbose("Browser was found to be mobile",e),!0):(E.verbose("Browser is not mobile, using regular transition",e),!1)},hidden:function(){return!E.is.visible()},visible:function(){return R.hasClass(I.visible)},open:function(){return E.is.visible()},closed:function(){return E.is.hidden()},vertical:function(){return R.hasClass(I.top)},animating:function(){return O.hasClass(I.animating)},rtl:function(){return E.cache.rtl===o&&(E.cache.rtl="rtl"==R.css("direction")),E.cache.rtl}},setting:function(t,n){if(E.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,S,t);else{if(n===o)return S[t];e.isPlainObject(S[t])?e.extend(!0,S[t],n):S[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,E,t);else{if(n===o)return E[t];E[t]=n}},debug:function(){!S.silent&&S.debug&&(S.performance?E.performance.log(arguments):(E.debug=Function.prototype.bind.call(console.info,console,S.name+":"),E.debug.apply(console,arguments)))},verbose:function(){!S.silent&&S.verbose&&S.debug&&(S.performance?E.performance.log(arguments):(E.verbose=Function.prototype.bind.call(console.info,console,S.name+":"),E.verbose.apply(console,arguments)))},error:function(){S.silent||(E.error=Function.prototype.bind.call(console.error,console,S.name+":"),E.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;S.performance&&(t=(new Date).getTime(),o=p||t,n=t-o,p=t,g.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:F,"Execution Time":n})),clearTimeout(E.performance.timer),E.performance.timer=setTimeout(E.performance.display,500)},display:function(){var t=S.name+":",n=0;p=!1,clearTimeout(E.performance.timer),e.each(g,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",d&&(t+=" '"+d+"'"),(console.group!==o||console.table!==o)&&g.length>0&&(console.groupCollapsed(t),console.table?console.table(g):e.each(g,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),g=[]}},invoke:function(t,n,i){var s,a,l,c=_;return n=n||f,i=F||i,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o?(a=c[i],!1):(E.error(P.method,t),!1);c=c[i]}})),e.isFunction(a)?l=a.apply(i,n):a!==o&&(l=a),e.isArray(r)?r.push(l):r!==o?r=[r,l]:l!==o&&(r=l),a}},m?(_===o&&E.initialize(),E.invoke(h)):(_!==o&&E.invoke("destroy"),E.initialize())}),r!==o?r:this},e.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",silent:!1,debug:!1,verbose:!1,performance:!0,transition:"auto",mobileTransition:"auto",defaultTransition:{computer:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"},mobile:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"}},context:"body",exclusive:!1,closable:!0,dimPage:!0,scrollLock:!1,returnScroll:!1,delaySetup:!1,duration:500,onChange:function(){},onShow:function(){},onHide:function(){},onHidden:function(){},onVisible:function(){},className:{active:"active",animating:"animating",dimmed:"dimmed",ios:"ios",pushable:"pushable",pushed:"pushed",right:"right",top:"top",left:"left",bottom:"bottom",visible:"visible"},selector:{fixed:".fixed",omitted:"script, link, style, .ui.modal, .ui.dimmer, .ui.nag, .ui.fixed",pusher:".pusher",sidebar:".ui.sidebar"},regExp:{ios:/(iPad|iPhone|iPod)/g,mobileChrome:/(CriOS)/g,mobile:/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/g},error:{method:"The method you called is not defined.",pusher:"Had to add pusher element. For optimal performance make sure body content is inside a pusher element",movedSidebar:"Had to move sidebar. For optimal performance make sure sidebar and pusher are direct children of your body tag",overlay:"The overlay setting is no longer supported, use animation: overlay",notFound:"There were no elements that matched the specified selector"}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.sticky=function(i){var r,s=e(this),a=s.selector||"",l=(new Date).getTime(),c=[],u=arguments[0],d="string"==typeof u,p=[].slice.call(arguments,1);return s.each(function(){var s,g,h,m,f,y=e.isPlainObject(i)?e.extend(!0,{},e.fn.sticky.settings,i):e.extend({},e.fn.sticky.settings),v=y.className,b=y.namespace,j=y.error,x="."+b,E="module-"+b,S=e(this),C=e(t),I=e(y.scrollContext),L=(S.selector||"",S.data(E)),w=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},P=this;f={initialize:function(){f.determineContainer(),f.determineContext(),f.verbose("Initializing sticky",y,s),f.save.positions(),f.checkErrors(),f.bind.events(),y.observeChanges&&f.observeChanges(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),L=f,S.data(E,f)},destroy:function(){f.verbose("Destroying previous instance"),f.reset(),h&&h.disconnect(),m&&m.disconnect(),C.off("load"+x,f.event.load).off("resize"+x,f.event.resize),I.off("scrollchange"+x,f.event.scrollchange),S.removeData(E)},observeChanges:function(){"MutationObserver"in t&&(h=new MutationObserver(f.event.documentChanged),m=new MutationObserver(f.event.changed),h.observe(n,{childList:!0,subtree:!0}),m.observe(P,{childList:!0,subtree:!0}),m.observe(g[0],{childList:!0,subtree:!0}),f.debug("Setting up mutation observer",m))},determineContainer:function(){s=y.container?e(y.container):S.offsetParent()},determineContext:function(){if(g=y.context?e(y.context):s,0===g.length)return void f.error(j.invalidContext,y.context,S)},checkErrors:function(){if(f.is.hidden()&&f.error(j.visible,S),f.cache.element.height>f.cache.context.height)return f.reset(),void f.error(j.elementSize,S)},bind:{events:function(){C.on("load"+x,f.event.load).on("resize"+x,f.event.resize),I.off("scroll"+x).on("scroll"+x,f.event.scroll).on("scrollchange"+x,f.event.scrollchange)}},event:{changed:function(e){clearTimeout(f.timer),f.timer=setTimeout(function(){f.verbose("DOM tree modified, updating sticky menu",e),f.refresh()},100)},documentChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==P||e(t).find(P).length>0)&&(f.debug("Element removed from DOM, tearing down events"),f.destroy())})})},load:function(){f.verbose("Page contents finished loading"),w(f.refresh)},resize:function(){f.verbose("Window resized"),w(f.refresh)},scroll:function(){w(function(){I.triggerHandler("scrollchange"+x,I.scrollTop())})},scrollchange:function(e,t){f.stick(t),y.onScroll.call(P)}},refresh:function(e){f.reset(),y.context||f.determineContext(),e&&f.determineContainer(),f.save.positions(),f.stick(),y.onReposition.call(P)},supports:{sticky:function(){var t=e("<div/>");return t[0],t.addClass(v.supported),t.css("position").match("sticky")}},save:{lastScroll:function(e){f.lastScroll=e},elementScroll:function(e){f.elementScroll=e},positions:function(){var e={height:I.height()},t={margin:{top:parseInt(S.css("margin-top"),10),bottom:parseInt(S.css("margin-bottom"),10)},offset:S.offset(),width:S.outerWidth(),height:S.outerHeight()},n={offset:g.offset(),height:g.outerHeight()};({height:s.outerHeight()}),f.is.standardScroll()||(f.debug("Non-standard scroll. Removing scroll offset from element offset"),e.top=I.scrollTop(),e.left=I.scrollLeft(),t.offset.top+=e.top,n.offset.top+=e.top,t.offset.left+=e.left,n.offset.left+=e.left),f.cache={fits:t.height<e.height,scrollContext:{height:e.height},element:{margin:t.margin,top:t.offset.top-t.margin.top,left:t.offset.left,width:t.width,height:t.height,bottom:t.offset.top+t.height},context:{top:n.offset.top,height:n.height,bottom:n.offset.top+n.height}},f.set.containerSize(),f.set.size(),f.stick(),f.debug("Caching element positions",f.cache)}},get:{direction:function(e){var t="down";return e=e||I.scrollTop(),f.lastScroll!==o&&(f.lastScroll<e?t="down":f.lastScroll>e&&(t="up")),t},scrollChange:function(e){return e=e||I.scrollTop(),f.lastScroll?e-f.lastScroll:0},currentElementScroll:function(){return f.elementScroll?f.elementScroll:f.is.top()?Math.abs(parseInt(S.css("top"),10))||0:Math.abs(parseInt(S.css("bottom"),10))||0},elementScroll:function(e){e=e||I.scrollTop();var t=f.cache.element,n=f.cache.scrollContext,o=f.get.scrollChange(e),i=t.height-n.height+y.offset,r=f.get.currentElementScroll(),s=r+o;return r=f.cache.fits||s<0?0:s>i?i:s}},remove:{lastScroll:function(){delete f.lastScroll},elementScroll:function(e){delete f.elementScroll},offset:function(){S.css("margin-top","")}},set:{offset:function(){f.verbose("Setting offset on element",y.offset),S.css("margin-top",y.offset)},containerSize:function(){var e=s.get(0).tagName;"HTML"===e||"body"==e?f.determineContainer():Math.abs(s.outerHeight()-f.cache.context.height)>y.jitter&&(f.debug("Context has padding, specifying exact height for container",f.cache.context.height),s.css({height:f.cache.context.height}))},minimumSize:function(){var e=f.cache.element;s.css("min-height",e.height)},scroll:function(e){f.debug("Setting scroll on element",e),f.elementScroll!=e&&(f.is.top()&&S.css("bottom","").css("top",-e),f.is.bottom()&&S.css("top","").css("bottom",e))},size:function(){0!==f.cache.element.height&&0!==f.cache.element.width&&(P.style.setProperty("width",f.cache.element.width+"px","important"),P.style.setProperty("height",f.cache.element.height+"px","important"))}},is:{standardScroll:function(){return I[0]==t},top:function(){return S.hasClass(v.top)},bottom:function(){return S.hasClass(v.bottom)},initialPosition:function(){return!f.is.fixed()&&!f.is.bound()},hidden:function(){return!S.is(":visible")},bound:function(){return S.hasClass(v.bound)},fixed:function(){return S.hasClass(v.fixed)}},stick:function(e){var t=e||I.scrollTop(),n=f.cache,o=n.fits,i=n.element,r=n.scrollContext,s=n.context,a=f.is.bottom()&&y.pushing?y.bottomOffset:y.offset,e={top:t+a,bottom:t+a+r.height},l=(f.get.direction(e.top),o?0:f.get.elementScroll(e.top)),c=!o,u=0!==i.height;u&&(f.is.initialPosition()?e.top>=s.bottom?(f.debug("Initial element position is bottom of container"),f.bindBottom()):e.top>i.top&&(i.height+e.top-l>=s.bottom?(f.debug("Initial element position is bottom of container"),f.bindBottom()):(f.debug("Initial element position is fixed"),f.fixTop())):f.is.fixed()?f.is.top()?e.top<=i.top?(f.debug("Fixed element reached top of container"),f.setInitialPosition()):i.height+e.top-l>=s.bottom?(f.debug("Fixed element reached bottom of container"),f.bindBottom()):c&&(f.set.scroll(l),f.save.lastScroll(e.top),f.save.elementScroll(l)):f.is.bottom()&&(e.bottom-i.height<=i.top?(f.debug("Bottom fixed rail has reached top of container"),f.setInitialPosition()):e.bottom>=s.bottom?(f.debug("Bottom fixed rail has reached bottom of container"),f.bindBottom()):c&&(f.set.scroll(l),f.save.lastScroll(e.top),f.save.elementScroll(l))):f.is.bottom()&&(e.top<=i.top?(f.debug("Jumped from bottom fixed to top fixed, most likely used home/end button"),f.setInitialPosition()):y.pushing?f.is.bound()&&e.bottom<=s.bottom&&(f.debug("Fixing bottom attached element to bottom of browser."),f.fixBottom()):f.is.bound()&&e.top<=s.bottom-i.height&&(f.debug("Fixing bottom attached element to top of browser."),f.fixTop())))},bindTop:function(){f.debug("Binding element to top of parent container"),f.remove.offset(),S.css({left:"",top:"",marginBottom:""}).removeClass(v.fixed).removeClass(v.bottom).addClass(v.bound).addClass(v.top),y.onTop.call(P),y.onUnstick.call(P)},bindBottom:function(){f.debug("Binding element to bottom of parent container"),f.remove.offset(),S.css({left:"",top:""}).removeClass(v.fixed).removeClass(v.top).addClass(v.bound).addClass(v.bottom),y.onBottom.call(P),y.onUnstick.call(P)},setInitialPosition:function(){f.debug("Returning to initial position"),f.unfix(),f.unbind()},fixTop:function(){f.debug("Fixing element to top of page"),f.set.minimumSize(),f.set.offset(),S.css({left:f.cache.element.left,bottom:"",marginBottom:""}).removeClass(v.bound).removeClass(v.bottom).addClass(v.fixed).addClass(v.top),y.onStick.call(P)},fixBottom:function(){f.debug("Sticking element to bottom of page"),f.set.minimumSize(),f.set.offset(),S.css({left:f.cache.element.left,bottom:"",marginBottom:""}).removeClass(v.bound).removeClass(v.top).addClass(v.fixed).addClass(v.bottom),y.onStick.call(P)},unbind:function(){f.is.bound()&&(f.debug("Removing container bound position on element"),f.remove.offset(),S.removeClass(v.bound).removeClass(v.top).removeClass(v.bottom))},unfix:function(){f.is.fixed()&&(f.debug("Removing fixed position on element"),f.remove.offset(),S.removeClass(v.fixed).removeClass(v.top).removeClass(v.bottom),y.onUnstick.call(P))},reset:function(){f.debug("Resetting elements position"),f.unbind(),f.unfix(),f.resetCSS(),f.remove.offset(),f.remove.lastScroll()},resetCSS:function(){S.css({width:"",height:""}),s.css({height:""})},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,y,t);else{if(n===o)return y[t];y[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(n===o)return f[t];f[t]=n}},debug:function(){!y.silent&&y.debug&&(y.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,y.name+":"),f.debug.apply(console,arguments)))},verbose:function(){!y.silent&&y.verbose&&y.debug&&(y.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,y.name+":"),f.verbose.apply(console,arguments)))},error:function(){y.silent||(f.error=Function.prototype.bind.call(console.error,console,y.name+":"),f.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;y.performance&&(t=(new Date).getTime(),o=l||t,n=t-o,l=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:P,"Execution Time":n})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,0)},display:function(){var t=y.name+":",n=0;l=!1,clearTimeout(f.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(console.group!==o||console.table!==o)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,i){var s,a,l,c=L;return n=n||p,i=P||i,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o&&(a=c[i],!1);c=c[i]}})),e.isFunction(a)?l=a.apply(i,n):a!==o&&(l=a),e.isArray(r)?r.push(l):r!==o?r=[r,l]:l!==o&&(r=l),a}},d?(L===o&&f.initialize(),f.invoke(u)):(L!==o&&L.invoke("destroy"),f.initialize())}),r!==o?r:this},e.fn.sticky.settings={name:"Sticky",namespace:"sticky",silent:!1,debug:!1,verbose:!0,performance:!0,pushing:!1,context:!1,container:!1,scrollContext:t,offset:0,bottomOffset:0,jitter:5,observeChanges:!1,onReposition:function(){},onScroll:function(){},onStick:function(){},onUnstick:function(){},onTop:function(){},onBottom:function(){},error:{container:"Sticky element must be inside a relative container",visible:"Element is hidden, you must call refresh after element becomes visible. Use silent setting to surpress this warning in production.",method:"The method you called is not defined.",invalidContext:"Context specified does not exist",elementSize:"Sticky element is larger than its container, cannot create sticky."},className:{bound:"bound",fixed:"fixed",supported:"native",top:"top",bottom:"bottom"}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.tab=function(i){var r,s=e(e.isFunction(this)?t:this),a=s.selector||"",l=(new Date).getTime(),c=[],u=arguments[0],d="string"==typeof u,p=[].slice.call(arguments,1),g=!1;return s.each(function(){var h,m,f,y,v,b,j=e.isPlainObject(i)?e.extend(!0,{},e.fn.tab.settings,i):e.extend({},e.fn.tab.settings),x=j.className,E=j.metadata,S=j.selector,C=j.error,I="."+j.namespace,L="module-"+j.namespace,w=e(this),P={},T=!0,N=0,R=this,O=w.data(L);v={initialize:function(){v.debug("Initializing tab menu item",w),v.fix.callbacks(),v.determineTabs(),v.debug("Determining tabs",j.context,m),j.auto&&v.set.auto(),v.bind.events(),j.history&&!g&&(v.initializeHistory(),g=!0),v.instantiate()},instantiate:function(){v.verbose("Storing instance of module",v),O=v,w.data(L,v)},destroy:function(){v.debug("Destroying tabs",w),w.removeData(L).off(I)},bind:{events:function(){e.isWindow(R)||(v.debug("Attaching tab activation events to element",w),w.on("click"+I,v.event.click))}},determineTabs:function(){var t;"parent"===j.context?(w.closest(S.ui).length>0?(t=w.closest(S.ui),v.verbose("Using closest UI element as parent",t)):t=w,h=t.parent(),v.verbose("Determined parent element for creating context",h)):j.context?(h=e(j.context),v.verbose("Using selector for tab context",j.context,h)):h=e("body"),j.childrenOnly?(m=h.children(S.tabs),v.debug("Searching tab context children for tabs",h,m)):(m=h.find(S.tabs),v.debug("Searching tab context for tabs",h,m))},fix:{callbacks:function(){e.isPlainObject(i)&&(i.onTabLoad||i.onTabInit)&&(i.onTabLoad&&(i.onLoad=i.onTabLoad,delete i.onTabLoad,v.error(C.legacyLoad,i.onLoad)),i.onTabInit&&(i.onFirstLoad=i.onTabInit,delete i.onTabInit,v.error(C.legacyInit,i.onFirstLoad)),j=e.extend(!0,{},e.fn.tab.settings,i))}},initializeHistory:function(){if(v.debug("Initializing page state"),e.address===o)return v.error(C.state),!1;if("state"==j.historyType){if(v.debug("Using HTML5 to manage state"),j.path===!1)return v.error(C.path),!1;e.address.history(!0).state(j.path)}e.address.bind("change",v.event.history.change)},event:{click:function(t){var n=e(this).data(E.tab);n!==o?(j.history?(v.verbose("Updating page state",t),e.address.value(n)):(v.verbose("Changing tab",t),v.changeTab(n)),t.preventDefault()):v.debug("No tab specified")},history:{change:function(t){var n=t.pathNames.join("/")||v.get.initialPath(),i=j.templates.determineTitle(n)||!1;v.performance.display(),v.debug("History change event",n,t),b=t,n!==o&&v.changeTab(n),i&&e.address.title(i)}}},refresh:function(){f&&(v.debug("Refreshing tab",f),v.changeTab(f))},cache:{read:function(e){return e!==o&&P[e]},add:function(e,t){e=e||f,v.debug("Adding cached content for",e),P[e]=t},remove:function(e){e=e||f,v.debug("Removing cached content for",e),delete P[e]}},set:{auto:function(){var t="string"==typeof j.path?j.path.replace(/\/$/,"")+"/{$tab}":"/{$tab}";v.verbose("Setting up automatic tab retrieval from server",t),
e.isPlainObject(j.apiSettings)?j.apiSettings.url=t:j.apiSettings={url:t}},loading:function(e){var t=v.get.tabElement(e),n=t.hasClass(x.loading);n||(v.verbose("Setting loading state for",t),t.addClass(x.loading).siblings(m).removeClass(x.active+" "+x.loading),t.length>0&&j.onRequest.call(t[0],e))},state:function(t){e.address.value(t)}},changeTab:function(n){var o=t.history&&t.history.pushState,i=o&&j.ignoreFirstLoad&&T,r=j.auto||e.isPlainObject(j.apiSettings),s=r&&!i?v.utilities.pathToArray(n):v.get.defaultPathArray(n);n=v.utilities.arrayToPath(s),e.each(s,function(t,o){var a,l,c,u,d=s.slice(0,t+1),p=v.utilities.arrayToPath(d),g=v.is.tab(p),m=t+1==s.length,S=v.get.tabElement(p);if(v.verbose("Looking for tab",o),g){if(v.verbose("Tab was found",o),f=p,y=v.utilities.filterArray(s,d),m?u=!0:(l=s.slice(0,t+2),c=v.utilities.arrayToPath(l),u=!v.is.tab(c),u&&v.verbose("Tab parameters found",l)),u&&r)return i?(v.debug("Ignoring remote content on first tab load",p),T=!1,v.cache.add(n,S.html()),v.activate.all(p),j.onFirstLoad.call(S[0],p,y,b),j.onLoad.call(S[0],p,y,b)):(v.activate.navigation(p),v.fetch.content(p,n)),!1;v.debug("Opened local tab",p),v.activate.all(p),v.cache.read(p)||(v.cache.add(p,!0),v.debug("First time tab loaded calling tab init"),j.onFirstLoad.call(S[0],p,y,b)),j.onLoad.call(S[0],p,y,b)}else{if(n.search("/")!=-1||""===n)return v.error(C.missingTab,w,h,p),!1;if(a=e("#"+n+', a[name="'+n+'"]'),p=a.closest("[data-tab]").data(E.tab),S=v.get.tabElement(p),a&&a.length>0&&p)return v.debug("Anchor link used, opening parent tab",S,a),S.hasClass(x.active)||setTimeout(function(){v.scrollTo(a)},0),v.activate.all(p),v.cache.read(p)||(v.cache.add(p,!0),v.debug("First time tab loaded calling tab init"),j.onFirstLoad.call(S[0],p,y,b)),j.onLoad.call(S[0],p,y,b),!1}})},scrollTo:function(t){var o=!!(t&&t.length>0)&&t.offset().top;o!==!1&&(v.debug("Forcing scroll to an in-page link in a hidden tab",o,t),e(n).scrollTop(o))},update:{content:function(t,n,i){var r=v.get.tabElement(t),s=r[0];i=i!==o?i:j.evaluateScripts,"string"==typeof j.cacheType&&"dom"==j.cacheType.toLowerCase()&&"string"!=typeof n?r.empty().append(e(n).clone(!0)):i?(v.debug("Updating HTML and evaluating inline scripts",t,n),r.html(n)):(v.debug("Updating HTML",t,n),s.innerHTML=n)}},fetch:{content:function(t,n){var i,r,s=v.get.tabElement(t),a={dataType:"html",encodeParameters:!1,on:"now",cache:j.alwaysRefresh,headers:{"X-Remote":!0},onSuccess:function(e){"response"==j.cacheType&&v.cache.add(n,e),v.update.content(t,e),t==f?(v.debug("Content loaded",t),v.activate.tab(t)):v.debug("Content loaded in background",t),j.onFirstLoad.call(s[0],t,y,b),j.onLoad.call(s[0],t,y,b),"string"==typeof j.cacheType&&"dom"==j.cacheType.toLowerCase()&&s.children().length>0?setTimeout(function(){var e=s.children().clone(!0);e=e.not("script"),v.cache.add(n,e)},0):v.cache.add(n,s.html())},urlData:{tab:n}},l=s.api("get request")||!1,c=l&&"pending"===l.state();n=n||t,r=v.cache.read(n),j.cache&&r?(v.activate.tab(t),v.debug("Adding cached content",n),"once"==j.evaluateScripts?v.update.content(t,r,!1):v.update.content(t,r),j.onLoad.call(s[0],t,y,b)):c?(v.set.loading(t),v.debug("Content is already loading",n)):e.api!==o?(i=e.extend(!0,{},j.apiSettings,a),v.debug("Retrieving remote content",n,i),v.set.loading(t),s.api(i)):v.error(C.api)}},activate:{all:function(e){v.activate.tab(e),v.activate.navigation(e)},tab:function(e){var t=v.get.tabElement(e),n="siblings"==j.deactivate?t.siblings(m):m.not(t),o=t.hasClass(x.active);v.verbose("Showing tab content for",t),o||(t.addClass(x.active),n.removeClass(x.active+" "+x.loading),t.length>0&&j.onVisible.call(t[0],e))},navigation:function(e){var t=v.get.navElement(e),n="siblings"==j.deactivate?t.siblings(s):s.not(t),o=t.hasClass(x.active);v.verbose("Activating tab navigation for",t,e),o||(t.addClass(x.active),n.removeClass(x.active+" "+x.loading))}},deactivate:{all:function(){v.deactivate.navigation(),v.deactivate.tabs()},navigation:function(){s.removeClass(x.active)},tabs:function(){m.removeClass(x.active+" "+x.loading)}},is:{tab:function(e){return e!==o&&v.get.tabElement(e).length>0}},get:{initialPath:function(){return s.eq(0).data(E.tab)||m.eq(0).data(E.tab)},path:function(){return e.address.value()},defaultPathArray:function(e){return v.utilities.pathToArray(v.get.defaultPath(e))},defaultPath:function(e){var t=s.filter("[data-"+E.tab+'^="'+e+'/"]').eq(0),n=t.data(E.tab)||!1;if(n){if(v.debug("Found default tab",n),N<j.maxDepth)return N++,v.get.defaultPath(n);v.error(C.recursion)}else v.debug("No default tabs found for",e,m);return N=0,e},navElement:function(e){return e=e||f,s.filter("[data-"+E.tab+'="'+e+'"]')},tabElement:function(e){var t,n,o,i;return e=e||f,o=v.utilities.pathToArray(e),i=v.utilities.last(o),t=m.filter("[data-"+E.tab+'="'+e+'"]'),n=m.filter("[data-"+E.tab+'="'+i+'"]'),t.length>0?t:n},tab:function(){return f}},utilities:{filterArray:function(t,n){return e.grep(t,function(t){return e.inArray(t,n)==-1})},last:function(t){return!!e.isArray(t)&&t[t.length-1]},pathToArray:function(e){return e===o&&(e=f),"string"==typeof e?e.split("/"):[e]},arrayToPath:function(t){return!!e.isArray(t)&&t.join("/")}},setting:function(t,n){if(v.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,j,t);else{if(n===o)return j[t];e.isPlainObject(j[t])?e.extend(!0,j[t],n):j[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,v,t);else{if(n===o)return v[t];v[t]=n}},debug:function(){!j.silent&&j.debug&&(j.performance?v.performance.log(arguments):(v.debug=Function.prototype.bind.call(console.info,console,j.name+":"),v.debug.apply(console,arguments)))},verbose:function(){!j.silent&&j.verbose&&j.debug&&(j.performance?v.performance.log(arguments):(v.verbose=Function.prototype.bind.call(console.info,console,j.name+":"),v.verbose.apply(console,arguments)))},error:function(){j.silent||(v.error=Function.prototype.bind.call(console.error,console,j.name+":"),v.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;j.performance&&(t=(new Date).getTime(),o=l||t,n=t-o,l=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:R,"Execution Time":n})),clearTimeout(v.performance.timer),v.performance.timer=setTimeout(v.performance.display,500)},display:function(){var t=j.name+":",n=0;l=!1,clearTimeout(v.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(console.group!==o||console.table!==o)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,i){var s,a,l,c=O;return n=n||p,i=R||i,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o?(a=c[i],!1):(v.error(C.method,t),!1);c=c[i]}})),e.isFunction(a)?l=a.apply(i,n):a!==o&&(l=a),e.isArray(r)?r.push(l):r!==o?r=[r,l]:l!==o&&(r=l),a}},d?(O===o&&v.initialize(),v.invoke(u)):(O!==o&&O.invoke("destroy"),v.initialize())}),r!==o?r:this},e.tab=function(){e(t).tab.apply(this,arguments)},e.fn.tab.settings={name:"Tab",namespace:"tab",silent:!1,debug:!1,verbose:!1,performance:!0,auto:!1,history:!1,historyType:"hash",path:!1,context:!1,childrenOnly:!1,maxDepth:25,deactivate:"siblings",alwaysRefresh:!1,cache:!0,cacheType:"response",ignoreFirstLoad:!1,apiSettings:!1,evaluateScripts:"once",onFirstLoad:function(e,t,n){},onLoad:function(e,t,n){},onVisible:function(e,t,n){},onRequest:function(e,t,n){},templates:{determineTitle:function(e){}},error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Activated tab cannot be found. Tabs are case-sensitive.",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",legacyInit:"onTabInit has been renamed to onFirstLoad in 2.0, please adjust your code.",legacyLoad:"onTabLoad has been renamed to onLoad in 2.0. Please adjust your code",state:"History requires Asual's Address library <https://github.com/asual/jquery-address>"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab",ui:".ui"}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.transition=function(){var i,r=e(this),s=r.selector||"",a=(new Date).getTime(),l=[],c=arguments,u=c[0],d=[].slice.call(arguments,1),p="string"==typeof u;return t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},r.each(function(t){var g,h,m,f,y,v,b,j,x,E=e(this),S=this;x={initialize:function(){g=x.get.settings.apply(S,c),f=g.className,m=g.error,y=g.metadata,j="."+g.namespace,b="module-"+g.namespace,h=E.data(b)||x,v=x.get.animationEndEvent(),p&&(p=x.invoke(u)),p===!1&&(x.verbose("Converted arguments into settings object",g),g.interval?x.delay(g.animate):x.animate(),x.instantiate())},instantiate:function(){x.verbose("Storing instance of module",x),h=x,E.data(b,h)},destroy:function(){x.verbose("Destroying previous module for",S),E.removeData(b)},refresh:function(){x.verbose("Refreshing display type on next animation"),delete x.displayType},forceRepaint:function(){x.verbose("Forcing element repaint");var e=E.parent(),t=E.next();0===t.length?E.detach().appendTo(e):E.detach().insertBefore(t)},repaint:function(){x.verbose("Repainting element"),S.offsetWidth},delay:function(e){var n,i,s=x.get.animationDirection();s||(s=x.can.transition()?x.get.direction():"static"),e=e!==o?e:g.interval,n="auto"==g.reverse&&s==f.outward,i=n||1==g.reverse?(r.length-t)*g.interval:t*g.interval,x.debug("Delaying animation by",i),setTimeout(x.animate,i)},animate:function(e){if(g=e||g,!x.is.supported())return x.error(m.support),!1;if(x.debug("Preparing animation",g.animation),x.is.animating()){if(g.queue)return!g.allowRepeats&&x.has.direction()&&x.is.occurring()&&x.queuing!==!0?x.debug("Animation is currently occurring, preventing queueing same animation",g.animation):x.queue(g.animation),!1;if(!g.allowRepeats&&x.is.occurring())return x.debug("Animation is already occurring, will not execute repeated animation",g.animation),!1;x.debug("New animation started, completing previous early",g.animation),h.complete()}x.can.animate()?x.set.animating(g.animation):x.error(m.noAnimation,g.animation,S)},reset:function(){x.debug("Resetting animation to beginning conditions"),x.remove.animationCallbacks(),x.restore.conditions(),x.remove.animating()},queue:function(e){x.debug("Queueing animation of",e),x.queuing=!0,E.one(v+".queue"+j,function(){x.queuing=!1,x.repaint(),x.animate.apply(this,g)})},complete:function(e){x.debug("Animation complete",g.animation),x.remove.completeCallback(),x.remove.failSafe(),x.is.looping()||(x.is.outward()?(x.verbose("Animation is outward, hiding element"),x.restore.conditions(),x.hide()):x.is.inward()?(x.verbose("Animation is outward, showing element"),x.restore.conditions(),x.show()):(x.verbose("Static animation completed"),x.restore.conditions(),g.onComplete.call(S)))},force:{visible:function(){var e=E.attr("style"),t=x.get.userStyle(),n=x.get.displayType(),i=t+"display: "+n+" !important;",r=E.css("display"),s=e===o||""===e;r!==n?(x.verbose("Overriding default display to show element",n),E.attr("style",i)):s&&E.removeAttr("style")},hidden:function(){var e=E.attr("style"),t=E.css("display"),n=e===o||""===e;"none"===t||x.is.hidden()?n&&E.removeAttr("style"):(x.verbose("Overriding default display to hide element"),E.css("display","none"))}},has:{direction:function(t){var n=!1;return t=t||g.animation,"string"==typeof t&&(t=t.split(" "),e.each(t,function(e,t){t!==f.inward&&t!==f.outward||(n=!0)})),n},inlineDisplay:function(){var t=E.attr("style")||"";return e.isArray(t.match(/display.*?;/,""))}},set:{animating:function(e){var t;x.remove.completeCallback(),e=e||g.animation,t=x.get.animationClass(e),x.save.animation(t),x.force.visible(),x.remove.hidden(),x.remove.direction(),x.start.animation(t)},duration:function(e,t){t=t||g.duration,t="number"==typeof t?t+"ms":t,(t||0===t)&&(x.verbose("Setting animation duration",t),E.css({"animation-duration":t}))},direction:function(e){e=e||x.get.direction(),e==f.inward?x.set.inward():x.set.outward()},looping:function(){x.debug("Transition set to loop"),E.addClass(f.looping)},hidden:function(){E.addClass(f.transition).addClass(f.hidden)},inward:function(){x.debug("Setting direction to inward"),E.removeClass(f.outward).addClass(f.inward)},outward:function(){x.debug("Setting direction to outward"),E.removeClass(f.inward).addClass(f.outward)},visible:function(){E.addClass(f.transition).addClass(f.visible)}},start:{animation:function(e){e=e||x.get.animationClass(),x.debug("Starting tween",e),E.addClass(e).one(v+".complete"+j,x.complete),g.useFailSafe&&x.add.failSafe(),x.set.duration(g.duration),g.onStart.call(S)}},save:{animation:function(e){x.cache||(x.cache={}),x.cache.animation=e},displayType:function(e){"none"!==e&&E.data(y.displayType,e)},transitionExists:function(t,n){e.fn.transition.exists[t]=n,x.verbose("Saving existence of transition",t,n)}},restore:{conditions:function(){var e=x.get.currentAnimation();e&&(E.removeClass(e),x.verbose("Removing animation class",x.cache)),x.remove.duration()}},add:{failSafe:function(){var e=x.get.duration();x.timer=setTimeout(function(){E.triggerHandler(v)},e+g.failSafeDelay),x.verbose("Adding fail safe timer",x.timer)}},remove:{animating:function(){E.removeClass(f.animating)},animationCallbacks:function(){x.remove.queueCallback(),x.remove.completeCallback()},queueCallback:function(){E.off(".queue"+j)},completeCallback:function(){E.off(".complete"+j)},display:function(){E.css("display","")},direction:function(){E.removeClass(f.inward).removeClass(f.outward)},duration:function(){E.css("animation-duration","")},failSafe:function(){x.verbose("Removing fail safe timer",x.timer),x.timer&&clearTimeout(x.timer)},hidden:function(){E.removeClass(f.hidden)},visible:function(){E.removeClass(f.visible)},looping:function(){x.debug("Transitions are no longer looping"),x.is.looping()&&(x.reset(),E.removeClass(f.looping))},transition:function(){E.removeClass(f.visible).removeClass(f.hidden)}},get:{settings:function(t,n,o){return"object"==typeof t?e.extend(!0,{},e.fn.transition.settings,t):"function"==typeof o?e.extend({},e.fn.transition.settings,{animation:t,onComplete:o,duration:n}):"string"==typeof n||"number"==typeof n?e.extend({},e.fn.transition.settings,{animation:t,duration:n}):"object"==typeof n?e.extend({},e.fn.transition.settings,n,{animation:t}):"function"==typeof n?e.extend({},e.fn.transition.settings,{animation:t,onComplete:n}):e.extend({},e.fn.transition.settings,{animation:t})},animationClass:function(e){var t=e||g.animation,n=x.can.transition()&&!x.has.direction()?x.get.direction()+" ":"";return f.animating+" "+f.transition+" "+n+t},currentAnimation:function(){return!(!x.cache||x.cache.animation===o)&&x.cache.animation},currentDirection:function(){return x.is.inward()?f.inward:f.outward},direction:function(){return x.is.hidden()||!x.is.visible()?f.inward:f.outward},animationDirection:function(t){var n;return t=t||g.animation,"string"==typeof t&&(t=t.split(" "),e.each(t,function(e,t){t===f.inward?n=f.inward:t===f.outward&&(n=f.outward)})),!!n&&n},duration:function(e){return e=e||g.duration,e===!1&&(e=E.css("animation-duration")||0),"string"==typeof e?e.indexOf("ms")>-1?parseFloat(e):1e3*parseFloat(e):e},displayType:function(e){return e=e===o||e,g.displayType?g.displayType:(e&&E.data(y.displayType)===o&&x.can.transition(!0),E.data(y.displayType))},userStyle:function(e){return e=e||E.attr("style")||"",e.replace(/display.*?;/,"")},transitionExists:function(t){return e.fn.transition.exists[t]},animationStartEvent:function(){var e,t=n.createElement("div"),i={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"mozAnimationStart",WebkitAnimation:"webkitAnimationStart"};for(e in i)if(t.style[e]!==o)return i[e];return!1},animationEndEvent:function(){var e,t=n.createElement("div"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(t.style[e]!==o)return i[e];return!1}},can:{transition:function(t){var n,i,r,s,a,l,c=g.animation,u=x.get.transitionExists(c),d=x.get.displayType(!1);if(u===o||t){if(x.verbose("Determining whether animation exists"),n=E.attr("class"),i=E.prop("tagName"),r=e("<"+i+" />").addClass(n).insertAfter(E),s=r.addClass(c).removeClass(f.inward).removeClass(f.outward).addClass(f.animating).addClass(f.transition).css("animationName"),a=r.addClass(f.inward).css("animationName"),d||(d=r.attr("class",n).removeAttr("style").removeClass(f.hidden).removeClass(f.visible).show().css("display"),x.verbose("Determining final display state",d),x.save.displayType(d)),r.remove(),s!=a)x.debug("Direction exists for animation",c),l=!0;else{if("none"==s||!s)return void x.debug("No animation defined in css",c);x.debug("Static animation found",c,d),l=!1}x.save.transitionExists(c,l)}return u!==o?u:l},animate:function(){return x.can.transition()!==o}},is:{animating:function(){return E.hasClass(f.animating)},inward:function(){return E.hasClass(f.inward)},outward:function(){return E.hasClass(f.outward)},looping:function(){return E.hasClass(f.looping)},occurring:function(e){return e=e||g.animation,e="."+e.replace(" ","."),E.filter(e).length>0},visible:function(){return E.is(":visible")},hidden:function(){return"hidden"===E.css("visibility")},supported:function(){return v!==!1}},hide:function(){x.verbose("Hiding element"),x.is.animating()&&x.reset(),S.blur(),x.remove.display(),x.remove.visible(),x.set.hidden(),x.force.hidden(),g.onHide.call(S),g.onComplete.call(S)},show:function(e){x.verbose("Showing element",e),x.remove.hidden(),x.set.visible(),x.force.visible(),g.onShow.call(S),g.onComplete.call(S)},toggle:function(){x.is.visible()?x.hide():x.show()},stop:function(){x.debug("Stopping current animation"),E.triggerHandler(v)},stopAll:function(){x.debug("Stopping all animation"),x.remove.queueCallback(),E.triggerHandler(v)},clear:{queue:function(){x.debug("Clearing animation queue"),x.remove.queueCallback()}},enable:function(){x.verbose("Starting animation"),E.removeClass(f.disabled)},disable:function(){x.debug("Stopping animation"),E.addClass(f.disabled)},setting:function(t,n){if(x.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,g,t);else{if(n===o)return g[t];e.isPlainObject(g[t])?e.extend(!0,g[t],n):g[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,x,t);else{if(n===o)return x[t];x[t]=n}},debug:function(){!g.silent&&g.debug&&(g.performance?x.performance.log(arguments):(x.debug=Function.prototype.bind.call(console.info,console,g.name+":"),x.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?x.performance.log(arguments):(x.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),x.verbose.apply(console,arguments)))},error:function(){g.silent||(x.error=Function.prototype.bind.call(console.error,console,g.name+":"),x.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;g.performance&&(t=(new Date).getTime(),o=a||t,n=t-o,a=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:S,"Execution Time":n})),clearTimeout(x.performance.timer),x.performance.timer=setTimeout(x.performance.display,500)},display:function(){var t=g.name+":",n=0;a=!1,clearTimeout(x.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),r.length>1&&(t+=" ("+r.length+")"),(console.group!==o||console.table!==o)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var s,a,l,c=h;return n=n||d,r=S||r,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o&&(a=c[i],!1);c=c[i]}})),e.isFunction(a)?l=a.apply(r,n):a!==o&&(l=a),e.isArray(i)?i.push(l):i!==o?i=[i,l]:l!==o&&(i=l),a!==o&&a}},x.initialize()}),i!==o?i:this},e.fn.transition.exists={},e.fn.transition.settings={name:"Transition",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"transition",interval:0,reverse:"auto",onStart:function(){},onComplete:function(){},onShow:function(){},onHide:function(){},useFailSafe:!0,failSafeDelay:100,allowRepeats:!1,displayType:!1,animation:"fade",duration:!1,queue:!0,metadata:{displayType:"display"},className:{animating:"animating",disabled:"disabled",hidden:"hidden",inward:"in",loading:"loading",looping:"looping",outward:"out",transition:"transition",visible:"visible"},error:{noAnimation:"Element is no longer attached to DOM. Unable to animate.  Use silent setting to surpress this warning in production.",repeated:"That animation is already occurring, cancelling repeated animation",method:"The method you called is not defined",support:"This browser does not support CSS animations"}}}(jQuery,window,document),function(e,t,n,o){"use strict";var t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();e.api=e.fn.api=function(n){var i,r=e(e.isFunction(this)?t:this),s=r.selector||"",a=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return r.each(function(){var r,p,g,h,m,f,y=e.isPlainObject(n)?e.extend(!0,{},e.fn.api.settings,n):e.extend({},e.fn.api.settings),v=y.namespace,b=y.metadata,j=y.selector,x=y.error,E=y.className,S="."+v,C="module-"+v,I=e(this),L=I.closest(j.form),w=y.stateContext?e(y.stateContext):I,P=this,T=w[0],N=I.data(C);f={initialize:function(){u||f.bind.events(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),N=f,I.data(C,N)},destroy:function(){f.verbose("Destroying previous module for",P),I.removeData(C).off(S)},bind:{events:function(){var e=f.get.event();e?(f.verbose("Attaching API events to element",e),I.on(e+S,f.event.trigger)):"now"==y.on&&(f.debug("Querying API endpoint immediately"),f.query())}},decode:{json:function(e){if(e!==o&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}},read:{cachedResponse:function(e){var n;return t.Storage===o?void f.error(x.noStorage):(n=sessionStorage.getItem(e),f.debug("Using cached response",e,n),n=f.decode.json(n))}},write:{cachedResponse:function(n,i){return i&&""===i?void f.debug("Response empty, not caching",i):t.Storage===o?void f.error(x.noStorage):(e.isPlainObject(i)&&(i=JSON.stringify(i)),sessionStorage.setItem(n,i),void f.verbose("Storing cached response for url",n,i))}},query:function(){if(f.is.disabled())return void f.debug("Element is disabled API request aborted");if(f.is.loading()){if(!y.interruptRequests)return void f.debug("Cancelling request, previous request is still pending");f.debug("Interrupting previous request"),f.abort()}return y.defaultData&&e.extend(!0,y.urlData,f.get.defaultData()),y.serializeForm&&(y.data=f.add.formData(y.data)),p=f.get.settings(),p===!1?(f.cancelled=!0,void f.error(x.beforeSend)):(f.cancelled=!1,g=f.get.templatedURL(),g||f.is.mocked()?(g=f.add.urlData(g),g||f.is.mocked()?(p.url=y.base+g,r=e.extend(!0,{},y,{type:y.method||y.type,data:h,url:y.base+g,beforeSend:y.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),f.debug("Querying URL",r.url),f.verbose("Using AJAX settings",r),"local"===y.cache&&f.read.cachedResponse(g)?(f.debug("Response returned from local cache"),f.request=f.create.request(),void f.request.resolveWith(T,[f.read.cachedResponse(g)])):void(y.throttle?y.throttleFirstRequest||f.timer?(f.debug("Throttling request",y.throttle),clearTimeout(f.timer),f.timer=setTimeout(function(){f.timer&&delete f.timer,f.debug("Sending throttled request",h,r.method),f.send.request()},y.throttle)):(f.debug("Sending request",h,r.method),f.send.request(),f.timer=setTimeout(function(){},y.throttle)):(f.debug("Sending request",h,r.method),f.send.request()))):void 0):void f.error(x.missingURL))},should:{removeError:function(){return y.hideError===!0||"auto"===y.hideError&&!f.is.form()}},is:{disabled:function(){return I.filter(j.disabled).length>0},expectingJSON:function(){return"json"===y.dataType||"jsonp"===y.dataType},form:function(){return I.is("form")||w.is("form")},mocked:function(){return y.mockResponse||y.mockResponseAsync||y.response||y.responseAsync},input:function(){return I.is("input")},loading:function(){return!!f.request&&"pending"==f.request.state()},abortedRequest:function(e){return e&&e.readyState!==o&&0===e.readyState?(f.verbose("XHR request determined to be aborted"),!0):(f.verbose("XHR request was not aborted"),!1)},validResponse:function(t){return f.is.expectingJSON()&&e.isFunction(y.successTest)?(f.debug("Checking JSON returned success",y.successTest,t),y.successTest(t)?(f.debug("Response passed success test",t),!0):(f.debug("Response failed success test",t),!1)):(f.verbose("Response is not JSON, skipping validation",y.successTest,t),!0)}},was:{cancelled:function(){return f.cancelled||!1},succesful:function(){return f.request&&"resolved"==f.request.state()},failure:function(){return f.request&&"rejected"==f.request.state()},complete:function(){return f.request&&("resolved"==f.request.state()||"rejected"==f.request.state())}},add:{urlData:function(t,n){var i,r;return t&&(i=t.match(y.regExp.required),r=t.match(y.regExp.optional),n=n||y.urlData,i&&(f.debug("Looking for required URL variables",i),e.each(i,function(i,r){var s=r.indexOf("$")!==-1?r.substr(2,r.length-3):r.substr(1,r.length-2),a=e.isPlainObject(n)&&n[s]!==o?n[s]:I.data(s)!==o?I.data(s):w.data(s)!==o?w.data(s):n[s];return a===o?(f.error(x.requiredParameter,s,t),t=!1,!1):(f.verbose("Found required variable",s,a),a=y.encodeParameters?f.get.urlEncodedValue(a):a,void(t=t.replace(r,a)))})),r&&(f.debug("Looking for optional URL variables",i),e.each(r,function(i,r){var s=r.indexOf("$")!==-1?r.substr(3,r.length-4):r.substr(2,r.length-3),a=e.isPlainObject(n)&&n[s]!==o?n[s]:I.data(s)!==o?I.data(s):w.data(s)!==o?w.data(s):n[s];a!==o?(f.verbose("Optional variable Found",s,a),t=t.replace(r,a)):(f.verbose("Optional variable not found",s),t=t.indexOf("/"+r)!==-1?t.replace("/"+r,""):t.replace(r,""))}))),t},formData:function(t){var n,i=e.fn.serializeObject!==o,r=i?L.serializeObject():L.serialize();return t=t||y.data,n=e.isPlainObject(t),n?i?(f.debug("Extending existing data with form data",t,r),t=e.extend(!0,{},t,r)):(f.error(x.missingSerialize),f.debug("Cant extend data. Replacing data with form data",t,r),t=r):(f.debug("Adding form data",r),t=r),t}},send:{request:function(){f.set.loading(),f.request=f.create.request(),f.is.mocked()?f.mockedXHR=f.create.mockedXHR():f.xhr=f.create.xhr(),y.onRequest.call(T,f.request,f.xhr)}},event:{trigger:function(e){f.query(),"submit"!=e.type&&"click"!=e.type||e.preventDefault()},xhr:{always:function(){},done:function(t,n,o){var i=this,r=(new Date).getTime()-m,s=y.loadingDuration-r,a=!!e.isFunction(y.onResponse)&&(f.is.expectingJSON()?y.onResponse.call(i,e.extend(!0,{},t)):y.onResponse.call(i,t));s=s>0?s:0,a&&(f.debug("Modified API response in onResponse callback",y.onResponse,a,t),t=a),s>0&&f.debug("Response completed early delaying state change by",s),setTimeout(function(){f.is.validResponse(t)?f.request.resolveWith(i,[t,o]):f.request.rejectWith(i,[o,"invalid"])},s)},fail:function(e,t,n){var o=this,i=(new Date).getTime()-m,r=y.loadingDuration-i;r=r>0?r:0,r>0&&f.debug("Response completed early delaying state change by",r),setTimeout(function(){f.is.abortedRequest(e)?f.request.rejectWith(o,[e,"aborted",n]):f.request.rejectWith(o,[e,"error",t,n])},r)}},request:{done:function(e,t){f.debug("Successful API Response",e),"local"===y.cache&&g&&(f.write.cachedResponse(g,e),f.debug("Saving server response locally",f.cache)),y.onSuccess.call(T,e,I,t)},complete:function(e,t){var n,o;f.was.succesful()?(o=e,n=t):(n=e,o=f.get.responseFromXHR(n)),f.remove.loading(),y.onComplete.call(T,o,I,n)},fail:function(e,t,n){var i=f.get.responseFromXHR(e),s=f.get.errorFromRequest(i,t,n);return"aborted"==t?(f.debug("XHR Aborted (Most likely caused by page navigation or CORS Policy)",t,n),y.onAbort.call(T,t,I,e),!0):("invalid"==t?f.debug("JSON did not pass success test. A server-side error has most likely occurred",i):"error"==t&&e!==o&&(f.debug("XHR produced a server error",t,n),200!=e.status&&n!==o&&""!==n&&f.error(x.statusMessage+n,r.url),y.onError.call(T,s,I,e)),y.errorDuration&&"aborted"!==t&&(f.debug("Adding error state"),f.set.error(),f.should.removeError()&&setTimeout(f.remove.error,y.errorDuration)),f.debug("API Request failed",s,e),void y.onFailure.call(T,i,I,e))}}},create:{request:function(){return e.Deferred().always(f.event.request.complete).done(f.event.request.done).fail(f.event.request.fail)},mockedXHR:function(){var t,n,o,i=!1,r=!1,s=!1,a=y.mockResponse||y.response,l=y.mockResponseAsync||y.responseAsync;return o=e.Deferred().always(f.event.xhr.complete).done(f.event.xhr.done).fail(f.event.xhr.fail),a?(e.isFunction(a)?(f.debug("Using specified synchronous callback",a),n=a.call(T,p)):(f.debug("Using settings specified response",a),n=a),o.resolveWith(T,[n,i,{responseText:n}])):e.isFunction(l)&&(t=function(e){f.debug("Async callback returned response",e),e?o.resolveWith(T,[e,i,{responseText:e}]):o.rejectWith(T,[{responseText:e},r,s])},f.debug("Using specified async response callback",l),l.call(T,p,t)),o},xhr:function(){var t;return t=e.ajax(r).always(f.event.xhr.always).done(f.event.xhr.done).fail(f.event.xhr.fail),f.verbose("Created server request",t,r),t}},set:{error:function(){f.verbose("Adding error state to element",w),w.addClass(E.error)},loading:function(){f.verbose("Adding loading state to element",w),w.addClass(E.loading),m=(new Date).getTime()}},remove:{error:function(){f.verbose("Removing error state from element",w),w.removeClass(E.error)},loading:function(){f.verbose("Removing loading state from element",w),w.removeClass(E.loading)}},get:{responseFromXHR:function(t){return!!e.isPlainObject(t)&&(f.is.expectingJSON()?f.decode.json(t.responseText):t.responseText)},errorFromRequest:function(t,n,i){return e.isPlainObject(t)&&t.error!==o?t.error:y.error[n]!==o?y.error[n]:i},request:function(){return f.request||!1},xhr:function(){return f.xhr||!1},settings:function(){var t;return t=y.beforeSend.call(T,y),t&&(t.success!==o&&(f.debug("Legacy success callback detected",t),f.error(x.legacyParameters,t.success),t.onSuccess=t.success),t.failure!==o&&(f.debug("Legacy failure callback detected",t),f.error(x.legacyParameters,t.failure),t.onFailure=t.failure),t.complete!==o&&(f.debug("Legacy complete callback detected",t),f.error(x.legacyParameters,t.complete),t.onComplete=t.complete)),t===o&&f.error(x.noReturnedValue),t===!1?t:t!==o?e.extend(!0,{},t):e.extend(!0,{},y)},urlEncodedValue:function(e){var n=t.decodeURIComponent(e),o=t.encodeURIComponent(e),i=n!==e;return i?(f.debug("URL value is already encoded, avoiding double encoding",e),e):(f.verbose("Encoding value using encodeURIComponent",e,o),o)},defaultData:function(){var t={};return e.isWindow(P)||(f.is.input()?t.value=I.val():f.is.form()||(t.text=I.text())),t},event:function(){return e.isWindow(P)||"now"==y.on?(f.debug("API called without element, no events attached"),!1):"auto"==y.on?I.is("input")?P.oninput!==o?"input":P.onpropertychange!==o?"propertychange":"keyup":I.is("form")?"submit":"click":y.on},templatedURL:function(e){if(e=e||I.data(b.action)||y.action||!1,g=I.data(b.url)||y.url||!1)return f.debug("Using specified url",g),
g;if(e){if(f.debug("Looking up url for action",e,y.api),y.api[e]===o&&!f.is.mocked())return void f.error(x.missingAction,y.action,y.api);g=y.api[e]}else f.is.form()&&(g=I.attr("action")||w.attr("action")||!1,f.debug("No url or action specified, defaulting to form action",g));return g}},abort:function(){var e=f.get.xhr();e&&"resolved"!==e.state()&&(f.debug("Cancelling API request"),e.abort())},reset:function(){f.remove.error(),f.remove.loading()},setting:function(t,n){if(f.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,y,t);else{if(n===o)return y[t];e.isPlainObject(y[t])?e.extend(!0,y[t],n):y[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(n===o)return f[t];f[t]=n}},debug:function(){!y.silent&&y.debug&&(y.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,y.name+":"),f.debug.apply(console,arguments)))},verbose:function(){!y.silent&&y.verbose&&y.debug&&(y.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,y.name+":"),f.verbose.apply(console,arguments)))},error:function(){y.silent||(f.error=Function.prototype.bind.call(console.error,console,y.name+":"),f.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;y.performance&&(t=(new Date).getTime(),o=a||t,n=t-o,a=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){var t=y.name+":",n=0;a=!1,clearTimeout(f.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),(console.group!==o||console.table!==o)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,r){var s,a,l,c=N;return n=n||d,r=P||r,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o?(a=c[i],!1):(f.error(x.method,t),!1);c=c[i]}})),e.isFunction(a)?l=a.apply(r,n):a!==o&&(l=a),e.isArray(i)?i.push(l):i!==o?i=[i,l]:l!==o&&(i=l),a}},u?(N===o&&f.initialize(),f.invoke(c)):(N!==o&&N.invoke("destroy"),f.initialize())}),i!==o?i:this},e.api.settings={name:"API",namespace:"api",debug:!1,verbose:!1,performance:!0,api:{},cache:!0,interruptRequests:!0,on:"auto",stateContext:!1,loadingDuration:0,hideError:"auto",errorDuration:2e3,encodeParameters:!0,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,throttleFirstRequest:!0,method:"get",data:{},dataType:"json",mockResponse:!1,mockResponseAsync:!1,response:!1,responseAsync:!1,beforeSend:function(e){return e},beforeXHR:function(e){},onRequest:function(e,t){},onResponse:!1,onSuccess:function(e,t){},onComplete:function(e,t){},onFailure:function(e,t){},onError:function(e,t){},onAbort:function(e,t){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingSerialize:"jquery-serialize-object is required to add form data to an existing data object",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",noStorage:"Caching responses locally requires session storage",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/\{\$*[A-z0-9]+\}/g,optional:/\{\/\$*[A-z0-9]+\}/g},className:{loading:"loading",error:"error"},selector:{disabled:".disabled",form:"form"},metadata:{action:"action",url:"url"}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.state=function(t){var i,r=e(this),s=r.selector||"",a=("ontouchstart"in n.documentElement,(new Date).getTime()),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return r.each(function(){var n,p=e.isPlainObject(t)?e.extend(!0,{},e.fn.state.settings,t):e.extend({},e.fn.state.settings),g=p.error,h=p.metadata,m=p.className,f=p.namespace,y=p.states,v=p.text,b="."+f,j=f+"-module",x=e(this),E=this,S=x.data(j);n={initialize:function(){n.verbose("Initializing module"),p.automatic&&n.add.defaults(),p.context&&""!==s?e(p.context).on(s,"mouseenter"+b,n.change.text).on(s,"mouseleave"+b,n.reset.text).on(s,"click"+b,n.toggle.state):x.on("mouseenter"+b,n.change.text).on("mouseleave"+b,n.reset.text).on("click"+b,n.toggle.state),n.instantiate()},instantiate:function(){n.verbose("Storing instance of module",n),S=n,x.data(j,n)},destroy:function(){n.verbose("Destroying previous module",S),x.off(b).removeData(j)},refresh:function(){n.verbose("Refreshing selector cache"),x=e(E)},add:{defaults:function(){var i=t&&e.isPlainObject(t.states)?t.states:{};e.each(p.defaults,function(t,r){n.is[t]!==o&&n.is[t]()&&(n.verbose("Adding default states",t,E),e.extend(p.states,r,i))})}},is:{active:function(){return x.hasClass(m.active)},loading:function(){return x.hasClass(m.loading)},inactive:function(){return!x.hasClass(m.active)},state:function(e){return m[e]!==o&&x.hasClass(m[e])},enabled:function(){return!x.is(p.filter.active)},disabled:function(){return x.is(p.filter.active)},textEnabled:function(){return!x.is(p.filter.text)},button:function(){return x.is(".button:not(a, .submit)")},input:function(){return x.is("input")},progress:function(){return x.is(".ui.progress")}},allow:function(e){n.debug("Now allowing state",e),y[e]=!0},disallow:function(e){n.debug("No longer allowing",e),y[e]=!1},allows:function(e){return y[e]||!1},enable:function(){x.removeClass(m.disabled)},disable:function(){x.addClass(m.disabled)},setState:function(e){n.allows(e)&&x.addClass(m[e])},removeState:function(e){n.allows(e)&&x.removeClass(m[e])},toggle:{state:function(){var t,i;if(n.allows("active")&&n.is.enabled()){if(n.refresh(),e.fn.api!==o)if(t=x.api("get request"),i=x.api("was cancelled"))n.debug("API Request cancelled by beforesend"),p.activateTest=function(){return!1},p.deactivateTest=function(){return!1};else if(t)return void n.listenTo(t);n.change.state()}}},listenTo:function(t){n.debug("API request detected, waiting for state signal",t),t&&(v.loading&&n.update.text(v.loading),e.when(t).then(function(){"resolved"==t.state()?(n.debug("API request succeeded"),p.activateTest=function(){return!0},p.deactivateTest=function(){return!0}):(n.debug("API request failed"),p.activateTest=function(){return!1},p.deactivateTest=function(){return!1}),n.change.state()}))},change:{state:function(){n.debug("Determining state change direction"),n.is.inactive()?n.activate():n.deactivate(),p.sync&&n.sync(),p.onChange.call(E)},text:function(){n.is.textEnabled()&&(n.is.disabled()?(n.verbose("Changing text to disabled text",v.hover),n.update.text(v.disabled)):n.is.active()?v.hover?(n.verbose("Changing text to hover text",v.hover),n.update.text(v.hover)):v.deactivate&&(n.verbose("Changing text to deactivating text",v.deactivate),n.update.text(v.deactivate)):v.hover?(n.verbose("Changing text to hover text",v.hover),n.update.text(v.hover)):v.activate&&(n.verbose("Changing text to activating text",v.activate),n.update.text(v.activate)))}},activate:function(){p.activateTest.call(E)&&(n.debug("Setting state to active"),x.addClass(m.active),n.update.text(v.active),p.onActivate.call(E))},deactivate:function(){p.deactivateTest.call(E)&&(n.debug("Setting state to inactive"),x.removeClass(m.active),n.update.text(v.inactive),p.onDeactivate.call(E))},sync:function(){n.verbose("Syncing other buttons to current state"),n.is.active()?r.not(x).state("activate"):r.not(x).state("deactivate")},get:{text:function(){return p.selector.text?x.find(p.selector.text).text():x.html()},textFor:function(e){return v[e]||!1}},flash:{text:function(e,t,o){var i=n.get.text();n.debug("Flashing text message",e,t),e=e||p.text.flash,t=t||p.flashDuration,o=o||function(){},n.update.text(e),setTimeout(function(){n.update.text(i),o.call(E)},t)}},reset:{text:function(){var e=v.active||x.data(h.storedText),t=v.inactive||x.data(h.storedText);n.is.textEnabled()&&(n.is.active()&&e?(n.verbose("Resetting active text",e),n.update.text(e)):t&&(n.verbose("Resetting inactive text",e),n.update.text(t)))}},update:{text:function(e){var t=n.get.text();e&&e!==t?(n.debug("Updating text",e),p.selector.text?x.data(h.storedText,e).find(p.selector.text).text(e):x.data(h.storedText,e).html(e)):n.debug("Text is already set, ignoring update",e)}},setting:function(t,i){if(n.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,p,t);else{if(i===o)return p[t];e.isPlainObject(p[t])?e.extend(!0,p[t],i):p[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,n,t);else{if(i===o)return n[t];n[t]=i}},debug:function(){!p.silent&&p.debug&&(p.performance?n.performance.log(arguments):(n.debug=Function.prototype.bind.call(console.info,console,p.name+":"),n.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?n.performance.log(arguments):(n.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),n.verbose.apply(console,arguments)))},error:function(){p.silent||(n.error=Function.prototype.bind.call(console.error,console,p.name+":"),n.error.apply(console,arguments))},performance:{log:function(e){var t,o,i;p.performance&&(t=(new Date).getTime(),i=a||t,o=t-i,a=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:E,"Execution Time":o})),clearTimeout(n.performance.timer),n.performance.timer=setTimeout(n.performance.display,500)},display:function(){var t=p.name+":",i=0;a=!1,clearTimeout(n.performance.timer),e.each(l,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",s&&(t+=" '"+s+"'"),(console.group!==o||console.table!==o)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,r,s){var a,l,c,u=S;return r=r||d,s=E||s,"string"==typeof t&&u!==o&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(i,r){var s=i!=a?r+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(u[s])&&i!=a)u=u[s];else{if(u[s]!==o)return l=u[s],!1;if(!e.isPlainObject(u[r])||i==a)return u[r]!==o?(l=u[r],!1):(n.error(g.method,t),!1);u=u[r]}})),e.isFunction(l)?c=l.apply(s,r):l!==o&&(c=l),e.isArray(i)?i.push(c):i!==o?i=[i,c]:c!==o&&(i=c),l}},u?(S===o&&n.initialize(),n.invoke(c)):(S!==o&&S.invoke("destroy"),n.initialize())}),i!==o?i:this},e.fn.state.settings={name:"State",debug:!1,verbose:!1,namespace:"state",performance:!0,onActivate:function(){},onDeactivate:function(){},onChange:function(){},activateTest:function(){return!0},deactivateTest:function(){return!0},automatic:!0,sync:!1,flashDuration:1e3,filter:{text:".loading, .disabled",active:".disabled"},context:!1,error:{beforeSend:"The before send function has cancelled state change",method:"The method you called is not defined."},metadata:{promise:"promise",storedText:"stored-text"},className:{active:"active",disabled:"disabled",error:"error",loading:"loading",success:"success",warning:"warning"},selector:{text:!1},defaults:{input:{disabled:!0,loading:!0,active:!0},button:{disabled:!0,loading:!0,active:!0},progress:{active:!0,success:!0,warning:!0,error:!0}},states:{active:!0,disabled:!0,error:!0,loading:!0,success:!0,warning:!0},text:{disabled:!1,flash:!1,hover:!1,active:!1,inactive:!1,activate:!1,deactivate:!1}}}(jQuery,window,document),function(e,t,n,o){"use strict";t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.visibility=function(i){var r,s=e(this),a=s.selector||"",l=(new Date).getTime(),c=[],u=arguments[0],d="string"==typeof u,p=[].slice.call(arguments,1),g=s.length,h=0;return s.each(function(){var s,m,f,y,v=e.isPlainObject(i)?e.extend(!0,{},e.fn.visibility.settings,i):e.extend({},e.fn.visibility.settings),b=v.className,j=v.namespace,x=v.error,E=v.metadata,S="."+j,C="module-"+j,I=e(t),L=e(this),w=e(v.context),P=(L.selector||"",L.data(C)),T=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},N=this,R=!1;y={initialize:function(){y.debug("Initializing",v),y.setup.cache(),y.should.trackChanges()&&("image"==v.type&&y.setup.image(),"fixed"==v.type&&y.setup.fixed(),v.observeChanges&&y.observeChanges(),y.bind.events()),y.save.position(),y.is.visible()||y.error(x.visible,L),v.initialCheck&&y.checkVisibility(),y.instantiate()},instantiate:function(){y.debug("Storing instance",y),L.data(C,y),P=y},destroy:function(){y.verbose("Destroying previous module"),f&&f.disconnect(),m&&m.disconnect(),I.off("load"+S,y.event.load).off("resize"+S,y.event.resize),w.off("scroll"+S,y.event.scroll).off("scrollchange"+S,y.event.scrollchange),"fixed"==v.type&&(y.resetFixed(),y.remove.placeholder()),L.off(S).removeData(C)},observeChanges:function(){"MutationObserver"in t&&(m=new MutationObserver(y.event.contextChanged),f=new MutationObserver(y.event.changed),m.observe(n,{childList:!0,subtree:!0}),f.observe(N,{childList:!0,subtree:!0}),y.debug("Setting up mutation observer",f))},bind:{events:function(){y.verbose("Binding visibility events to scroll and resize"),v.refreshOnLoad&&I.on("load"+S,y.event.load),I.on("resize"+S,y.event.resize),w.off("scroll"+S).on("scroll"+S,y.event.scroll).on("scrollchange"+S,y.event.scrollchange)}},event:{changed:function(e){y.verbose("DOM tree modified, updating visibility calculations"),y.timer=setTimeout(function(){y.verbose("DOM tree modified, updating sticky menu"),y.refresh()},100)},contextChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==N||e(t).find(N).length>0)&&(y.debug("Element removed from DOM, tearing down events"),y.destroy())})})},resize:function(){y.debug("Window resized"),v.refreshOnResize&&T(y.refresh)},load:function(){y.debug("Page finished loading"),T(y.refresh)},scroll:function(){v.throttle?(clearTimeout(y.timer),y.timer=setTimeout(function(){w.triggerHandler("scrollchange"+S,[w.scrollTop()])},v.throttle)):T(function(){w.triggerHandler("scrollchange"+S,[w.scrollTop()])})},scrollchange:function(e,t){y.checkVisibility(t)}},precache:function(t,o){t instanceof Array||(t=[t]);for(var i=t.length,r=0,s=[],a=n.createElement("img"),l=function(){r++,r>=t.length&&e.isFunction(o)&&o()};i--;)a=n.createElement("img"),a.onload=l,a.onerror=l,a.src=t[i],s.push(a)},enableCallbacks:function(){y.debug("Allowing callbacks to occur"),R=!1},disableCallbacks:function(){y.debug("Disabling all callbacks temporarily"),R=!0},should:{trackChanges:function(){return d?(y.debug("One time query, no need to bind events"),!1):(y.debug("Callbacks being attached"),!0)}},setup:{cache:function(){y.cache={occurred:{},screen:{},element:{}}},image:function(){var e=L.data(E.src);e&&(y.verbose("Lazy loading image",e),v.once=!0,v.observeChanges=!1,v.onOnScreen=function(){y.debug("Image on screen",N),y.precache(e,function(){y.set.image(e,function(){h++,h==g&&v.onAllLoaded.call(this),v.onLoad.call(this)})})})},fixed:function(){y.debug("Setting up fixed"),v.once=!1,v.observeChanges=!1,v.initialCheck=!0,v.refreshOnLoad=!0,i.transition||(v.transition=!1),y.create.placeholder(),y.debug("Added placeholder",s),v.onTopPassed=function(){y.debug("Element passed, adding fixed position",L),y.show.placeholder(),y.set.fixed(),v.transition&&e.fn.transition!==o&&L.transition(v.transition,v.duration)},v.onTopPassedReverse=function(){y.debug("Element returned to position, removing fixed",L),y.hide.placeholder(),y.remove.fixed()}}},create:{placeholder:function(){y.verbose("Creating fixed position placeholder"),s=L.clone(!1).css("display","none").addClass(b.placeholder).insertAfter(L)}},show:{placeholder:function(){y.verbose("Showing placeholder"),s.css("display","block").css("visibility","hidden")}},hide:{placeholder:function(){y.verbose("Hiding placeholder"),s.css("display","none").css("visibility","")}},set:{fixed:function(){y.verbose("Setting element to fixed position"),L.addClass(b.fixed).css({position:"fixed",top:v.offset+"px",left:"auto",zIndex:v.zIndex}),v.onFixed.call(N)},image:function(t,n){L.attr("src",t),v.transition?e.fn.transition!==o?L.transition(v.transition,v.duration,n):L.fadeIn(v.duration,n):L.show()}},is:{onScreen:function(){var e=y.get.elementCalculations();return e.onScreen},offScreen:function(){var e=y.get.elementCalculations();return e.offScreen},visible:function(){return!(!y.cache||!y.cache.element||0===y.cache.element.width&&0===y.cache.element.offset.top)}},refresh:function(){y.debug("Refreshing constants (width/height)"),"fixed"==v.type&&y.resetFixed(),y.reset(),y.save.position(),v.checkOnRefresh&&y.checkVisibility(),v.onRefresh.call(N)},resetFixed:function(){y.remove.fixed(),y.remove.occurred()},reset:function(){y.verbose("Resetting all cached values"),e.isPlainObject(y.cache)&&(y.cache.screen={},y.cache.element={})},checkVisibility:function(e){y.verbose("Checking visibility of element",y.cache.element),!R&&y.is.visible()&&(y.save.scroll(e),y.save.calculations(),y.passed(),y.passingReverse(),y.topVisibleReverse(),y.bottomVisibleReverse(),y.topPassedReverse(),y.bottomPassedReverse(),y.onScreen(),y.offScreen(),y.passing(),y.topVisible(),y.bottomVisible(),y.topPassed(),y.bottomPassed(),v.onUpdate&&v.onUpdate.call(N,y.get.elementCalculations()))},passed:function(t,n){var i=y.get.elementCalculations();if(t&&n)v.onPassed[t]=n;else{if(t!==o)return y.get.pixelsPassed(t)>i.pixelsPassed;i.passing&&e.each(v.onPassed,function(e,t){i.bottomVisible||i.pixelsPassed>y.get.pixelsPassed(e)?y.execute(t,e):v.once||y.remove.occurred(t)})}},onScreen:function(e){var t=y.get.elementCalculations(),n=e||v.onOnScreen,i="onScreen";if(e&&(y.debug("Adding callback for onScreen",e),v.onOnScreen=e),t.onScreen?y.execute(n,i):v.once||y.remove.occurred(i),e!==o)return t.onOnScreen},offScreen:function(e){var t=y.get.elementCalculations(),n=e||v.onOffScreen,i="offScreen";if(e&&(y.debug("Adding callback for offScreen",e),v.onOffScreen=e),t.offScreen?y.execute(n,i):v.once||y.remove.occurred(i),e!==o)return t.onOffScreen},passing:function(e){var t=y.get.elementCalculations(),n=e||v.onPassing,i="passing";if(e&&(y.debug("Adding callback for passing",e),v.onPassing=e),t.passing?y.execute(n,i):v.once||y.remove.occurred(i),e!==o)return t.passing},topVisible:function(e){var t=y.get.elementCalculations(),n=e||v.onTopVisible,i="topVisible";if(e&&(y.debug("Adding callback for top visible",e),v.onTopVisible=e),t.topVisible?y.execute(n,i):v.once||y.remove.occurred(i),e===o)return t.topVisible},bottomVisible:function(e){var t=y.get.elementCalculations(),n=e||v.onBottomVisible,i="bottomVisible";if(e&&(y.debug("Adding callback for bottom visible",e),v.onBottomVisible=e),t.bottomVisible?y.execute(n,i):v.once||y.remove.occurred(i),e===o)return t.bottomVisible},topPassed:function(e){var t=y.get.elementCalculations(),n=e||v.onTopPassed,i="topPassed";if(e&&(y.debug("Adding callback for top passed",e),v.onTopPassed=e),t.topPassed?y.execute(n,i):v.once||y.remove.occurred(i),e===o)return t.topPassed},bottomPassed:function(e){var t=y.get.elementCalculations(),n=e||v.onBottomPassed,i="bottomPassed";if(e&&(y.debug("Adding callback for bottom passed",e),v.onBottomPassed=e),t.bottomPassed?y.execute(n,i):v.once||y.remove.occurred(i),e===o)return t.bottomPassed},passingReverse:function(e){var t=y.get.elementCalculations(),n=e||v.onPassingReverse,i="passingReverse";if(e&&(y.debug("Adding callback for passing reverse",e),v.onPassingReverse=e),t.passing?v.once||y.remove.occurred(i):y.get.occurred("passing")&&y.execute(n,i),e!==o)return!t.passing},topVisibleReverse:function(e){var t=y.get.elementCalculations(),n=e||v.onTopVisibleReverse,i="topVisibleReverse";if(e&&(y.debug("Adding callback for top visible reverse",e),v.onTopVisibleReverse=e),t.topVisible?v.once||y.remove.occurred(i):y.get.occurred("topVisible")&&y.execute(n,i),e===o)return!t.topVisible},bottomVisibleReverse:function(e){var t=y.get.elementCalculations(),n=e||v.onBottomVisibleReverse,i="bottomVisibleReverse";if(e&&(y.debug("Adding callback for bottom visible reverse",e),v.onBottomVisibleReverse=e),t.bottomVisible?v.once||y.remove.occurred(i):y.get.occurred("bottomVisible")&&y.execute(n,i),e===o)return!t.bottomVisible},topPassedReverse:function(e){var t=y.get.elementCalculations(),n=e||v.onTopPassedReverse,i="topPassedReverse";if(e&&(y.debug("Adding callback for top passed reverse",e),v.onTopPassedReverse=e),t.topPassed?v.once||y.remove.occurred(i):y.get.occurred("topPassed")&&y.execute(n,i),e===o)return!t.onTopPassed},bottomPassedReverse:function(e){var t=y.get.elementCalculations(),n=e||v.onBottomPassedReverse,i="bottomPassedReverse";if(e&&(y.debug("Adding callback for bottom passed reverse",e),v.onBottomPassedReverse=e),t.bottomPassed?v.once||y.remove.occurred(i):y.get.occurred("bottomPassed")&&y.execute(n,i),e===o)return!t.bottomPassed},execute:function(e,t){var n=y.get.elementCalculations(),o=y.get.screenCalculations();e=e||!1,e&&(v.continuous?(y.debug("Callback being called continuously",t,n),e.call(N,n,o)):y.get.occurred(t)||(y.debug("Conditions met",t,n),e.call(N,n,o))),y.save.occurred(t)},remove:{fixed:function(){y.debug("Removing fixed position"),L.removeClass(b.fixed).css({position:"",top:"",left:"",zIndex:""}),v.onUnfixed.call(N)},placeholder:function(){y.debug("Removing placeholder content"),s&&s.remove()},occurred:function(e){if(e){var t=y.cache.occurred;t[e]!==o&&t[e]===!0&&(y.debug("Callback can now be called again",e),y.cache.occurred[e]=!1)}else y.cache.occurred={}}},save:{calculations:function(){y.verbose("Saving all calculations necessary to determine positioning"),y.save.direction(),y.save.screenCalculations(),y.save.elementCalculations()},occurred:function(e){e&&(y.cache.occurred[e]!==o&&y.cache.occurred[e]===!0||(y.verbose("Saving callback occurred",e),y.cache.occurred[e]=!0))},scroll:function(e){e=e+v.offset||w.scrollTop()+v.offset,y.cache.scroll=e},direction:function(){var e,t=y.get.scroll(),n=y.get.lastScroll();return e=t>n&&n?"down":t<n&&n?"up":"static",y.cache.direction=e,y.cache.direction},elementPosition:function(){var e=y.cache.element,t=y.get.screenSize();return y.verbose("Saving element position"),e.fits=e.height<t.height,e.offset=L.offset(),e.width=L.outerWidth(),e.height=L.outerHeight(),y.cache.element=e,e},elementCalculations:function(){var e=y.get.screenCalculations(),t=y.get.elementPosition();return v.includeMargin?(t.margin={},t.margin.top=parseInt(L.css("margin-top"),10),t.margin.bottom=parseInt(L.css("margin-bottom"),10),t.top=t.offset.top-t.margin.top,t.bottom=t.offset.top+t.height+t.margin.bottom):(t.top=t.offset.top,t.bottom=t.offset.top+t.height),t.topVisible=e.bottom>=t.top,t.topPassed=e.top>=t.top,t.bottomVisible=e.bottom>=t.bottom,t.bottomPassed=e.top>=t.bottom,t.pixelsPassed=0,t.percentagePassed=0,t.onScreen=t.topVisible&&!t.bottomPassed,t.passing=t.topPassed&&!t.bottomPassed,t.offScreen=!t.onScreen,t.passing&&(t.pixelsPassed=e.top-t.top,t.percentagePassed=(e.top-t.top)/t.height),y.cache.element=t,y.verbose("Updated element calculations",t),t},screenCalculations:function(){var e=y.get.scroll();return y.save.direction(),y.cache.screen.top=e,y.cache.screen.bottom=e+y.cache.screen.height,y.cache.screen},screenSize:function(){y.verbose("Saving window position"),y.cache.screen={height:w.height()}},position:function(){y.save.screenSize(),y.save.elementPosition()}},get:{pixelsPassed:function(e){var t=y.get.elementCalculations();return e.search("%")>-1?t.height*(parseInt(e,10)/100):parseInt(e,10)},occurred:function(e){return y.cache.occurred!==o&&(y.cache.occurred[e]||!1)},direction:function(){return y.cache.direction===o&&y.save.direction(),y.cache.direction},elementPosition:function(){return y.cache.element===o&&y.save.elementPosition(),y.cache.element},elementCalculations:function(){return y.cache.element===o&&y.save.elementCalculations(),y.cache.element},screenCalculations:function(){return y.cache.screen===o&&y.save.screenCalculations(),y.cache.screen},screenSize:function(){return y.cache.screen===o&&y.save.screenSize(),y.cache.screen},scroll:function(){return y.cache.scroll===o&&y.save.scroll(),y.cache.scroll},lastScroll:function(){return y.cache.screen===o?(y.debug("First scroll event, no last scroll could be found"),!1):y.cache.screen.top}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,v,t);else{if(n===o)return v[t];v[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,y,t);else{if(n===o)return y[t];y[t]=n}},debug:function(){!v.silent&&v.debug&&(v.performance?y.performance.log(arguments):(y.debug=Function.prototype.bind.call(console.info,console,v.name+":"),y.debug.apply(console,arguments)))},verbose:function(){!v.silent&&v.verbose&&v.debug&&(v.performance?y.performance.log(arguments):(y.verbose=Function.prototype.bind.call(console.info,console,v.name+":"),y.verbose.apply(console,arguments)))},error:function(){v.silent||(y.error=Function.prototype.bind.call(console.error,console,v.name+":"),y.error.apply(console,arguments))},performance:{log:function(e){var t,n,o;v.performance&&(t=(new Date).getTime(),o=l||t,n=t-o,l=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:N,"Execution Time":n})),clearTimeout(y.performance.timer),y.performance.timer=setTimeout(y.performance.display,500)},display:function(){var t=v.name+":",n=0;l=!1,clearTimeout(y.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),(console.group!==o||console.table!==o)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,i){var s,a,l,c=P;return n=n||p,i=N||i,"string"==typeof t&&c!==o&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,i){var r=n!=s?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[r])&&n!=s)c=c[r];else{if(c[r]!==o)return a=c[r],!1;if(!e.isPlainObject(c[i])||n==s)return c[i]!==o?(a=c[i],!1):(y.error(x.method,t),!1);c=c[i]}})),e.isFunction(a)?l=a.apply(i,n):a!==o&&(l=a),e.isArray(r)?r.push(l):r!==o?r=[r,l]:l!==o&&(r=l),a}},d?(P===o&&y.initialize(),P.save.scroll(),P.save.calculations(),y.invoke(u)):(P!==o&&P.invoke("destroy"),y.initialize())}),r!==o?r:this},e.fn.visibility.settings={name:"Visibility",namespace:"visibility",debug:!1,verbose:!1,performance:!0,observeChanges:!0,initialCheck:!0,refreshOnLoad:!0,refreshOnResize:!0,checkOnRefresh:!0,once:!0,continuous:!1,offset:0,includeMargin:!1,context:t,throttle:!1,type:!1,zIndex:"10",transition:"fade in",duration:1e3,onPassed:{},onOnScreen:!1,onOffScreen:!1,onPassing:!1,onTopVisible:!1,onBottomVisible:!1,onTopPassed:!1,onBottomPassed:!1,onPassingReverse:!1,onTopVisibleReverse:!1,onBottomVisibleReverse:!1,onTopPassedReverse:!1,onBottomPassedReverse:!1,onLoad:function(){},onAllLoaded:function(){},onFixed:function(){},onUnfixed:function(){},onUpdate:!1,onRefresh:function(){},metadata:{src:"src"},className:{fixed:"fixed",placeholder:"placeholder"},error:{method:"The method you called is not defined.",visible:"Element is hidden, you must call refresh after element becomes visible"}}}(jQuery,window,document);var iS3Project=window.iS3Project;iS3.Project=function(e){this._map=e.map||null,this._layertree=e.layertree||null,this._toolbar=e.toolbar||null,this._message=e.message||null,this._layerDefs={};var t=e.config||null;this._config=new iS3.Config({config:t}),iS3Project=this},iS3.Project.prototype.getMap=function(){return this._map},iS3.Project.prototype.setMap=function(e){if(!(e instanceof ol.Map))throw new Error("map must be an instance of ol.Map");this._map=e},iS3.Project.prototype.getLayertree=function(){return this._layertree},iS3.Project.prototype.setLayertree=function(e){if(!(e instanceof iS3.layertree.Layertree))throw new Error("layertree must be an instance of iS3.layertree");this._layertree=e},iS3.Project.prototype.getToolbar=function(){return this._toolbar},iS3.Project.prototype.setToolbar=function(e){if(!(e instanceof iS3.toolbar.Toolbar))throw new Error("toolbar must be an instance of iS3.toolbar");this._toolbar=e},iS3.Project.prototype.getMessage=function(){return this._message},iS3.Project.prototype.setMessage=function(e){this._message=e},iS3.Project.prototype.getLayerDefs=function(){return this._layerDefs},iS3.Project.prototype.getConfig=function(){return this._config},iS3.domTool=function(){},iS3.domTool.removeContent=function(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e},iS3.domTool.stopPropagationOnEvent=function(e,t){return e.addEventListener(t,function(e){e.stopPropagation()}),e},iS3.domTool.createOption=function(e,t){var n=document.createElement("option");return n.textContent=e,n.value=t?t:e,n},iS3.domTool.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},iS3.domTool.activeTabByComponentName=function(e,t){var n=e.root.contentItems;for(var o in n){var i=n[o].getItemsByType("stack");for(var r in i){var s=i[r].header.tabs;for(var a in s)s[a].contentItem.componentName===t&&i[r].header.setActiveContentItem(s[a].contentItem)}}},iS3.geoRequest=function(){},iS3.geoRequest.queryFeatureFromTile=function(e,t,n){var o=iS3Project.getMap(),i=o.getView().getResolution(),r=o.getView().getProjection(),s=t.getSource().getGetFeatureInfoUrl(e,i,r.getCode(),{INFO_FORMAT:"application/json"}),a=new ol.format.GeoJSON,l=new XMLHttpRequest;l.open("GET",s),l.send(),l.onreadystatechange=function(){if(4===l.readyState&&200===l.status){var e=a.readFeatures(l.responseText,{featureProjection:r});e.length>0&&n(e[0])}}},iS3.geoRequest.bboxFeaturesFromTile=function(e,t,n){var o=iS3Project.getMap(),i=o.getView().getProjection(),r=e.server+"/wfs?service=WFS&version=1.1.0&request=GetFeature&typename="+e.name+"&outputFormat=application/json&srsname="+i.getCode()+"&bbox="+t.join(",")+","+i.getCode(),s=new ol.format.GeoJSON,a=new XMLHttpRequest;a.open("GET",r),a.send(),a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var e=s.readFeatures(a.responseText,{featureProjection:i});n(e)}}},iS3.geoRequest.bboxGeoJsonFromTile=function(e,t,n){var o=iS3Project.getMap(),i=o.getView().getProjection(),r=e.server+"/wfs?service=WFS&version=1.1.0&request=GetFeature&typename="+e.name+"&outputFormat=application/json&srsname="+i.getCode()+"&bbox="+t.join(",")+","+i.getCode(),s=(new ol.format.GeoJSON,new XMLHttpRequest);s.open("GET",r),s.send(),s.onreadystatechange=function(){4===s.readyState&&200===s.status&&n(s.responseText)}},iS3.geoRequest.polygonFeaturesFromTile=function(e,t){var n=$.Deferred,o=n();return iS3.geoRequest.getWFSInfo(e).done(function(n){var i=iS3Project.getMap().getView().getProjection().getCode(),r=(new ol.format.WFS).writeGetFeature({featureNS:n.featureNS,featurePrefix:e.featurePrefix,featureTypes:[n.featureType],srsName:i,outputFormat:"application/json",filter:new ol.format.filter.Intersects("wkb_geometry",t,i)}),s=new XMLSerializer,a=s.serializeToString(r);$.ajax({url:e.server+"/wfs?service=wfs",type:"POST",headers:{"Content-Type":"text/xml"},data:a}).done(function(e){var t=(new ol.format.GeoJSON).readFeatures(e,{featureProjection:i});o.resolve(t)})}),o.promise()},iS3.geoRequest.transactWFS=function(e,t,n){iS3.geoRequest.getWFSInfo(e).done(function(o){console.log(o);var i,r=new ol.format.WFS,s={featureType:o.featureType,featureNS:o.featureNS,gmlOptions:{srsName:iS3Project.getMap().getView().getProjection().getCode()
}};switch(n){case"insert":i=r.writeTransaction(t,null,null,s);break;case"update":i=r.writeTransaction(null,t,null,s);break;case"delete":i=r.writeTransaction(null,null,t,s)}var a=new XMLSerializer,l=a.serializeToString(i),c=iS3Project.getConfig().proxy,u=$.Deferred,d=u();return $.post(c+"/proxy/geoserver/transact-wfs",l).done(function(t){var n=iS3Project.getLayertree().getLayerById(e.id);if(n instanceof ol.layer.Tile){var o=n.getSource(),i=o.getParams();i.t=(new Date).getMilliseconds(),o.updateParams(i)}d.resolve()}),d.promise()})},iS3.geoRequest.getWFSInfo=function(e){var t={},n=e.name.split(/:/);t.featureType=n[1];var o=e.server+"/wfs?REQUEST=GetCapabilities&SERVICE=wfs",i=$.Deferred,r=i();return $.ajax({url:o,type:"GET",dataType:"text"}).done(function(o){var i=new RegExp("xmlns:"+n[0]+'=".+?"'),s=o.match(i);t.featureNS=s[0].split(/"/)[1],e.featureType=t.featureType,e.featureNS=t.featureNS,r.resolve(t)}),r.promise()},iS3.geoRequest.getLayerHeader=function(e,t){if(!e.headers&&e.headers.length>0)t(e.headers);else{var n=e.server+"/wfs?SERVICE=WFS&REQUEST=GetFeature&TYPENAME="+e.name+"&VERSION=1.1.0&outputFormat=application%2Fjson&maxFeatures=1",o=new ol.format.GeoJSON,i=new XMLHttpRequest;i.open("GET",n),i.send(),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var n=o.readFeatures(i.responseText);if(1===n.length){var r=n[0].getProperties();for(var s in r)iS3.domTool.isNumber(r[s])?e.headers.push({name:s,type:"number"}):e.headers.push({name:s,type:"string"});t(e.headers)}}}}},iS3.geoRequest.geojsonToShp=function(e,t){var n={json:e,outputName:t+".zip"},o=document.createElement("form");o.setAttribute("method","post"),o.setAttribute("action","http://ogre.adc4gis.com/convertJson");for(var i in n)if(n.hasOwnProperty(i)){var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",i),r.setAttribute("value",n[i]),o.appendChild(r)}o.submit()},iS3.geoRequest.shapeToGeojson=function(e,t,n){var o=new FormData;o.append("upload",e),o.append("targetSrs",t.targetSrs.getCode()),$.ajax({url:"https://ogre.adc4gis.com/convert",data:o,type:"POST",processData:!1,contentType:!1,success:function(e){n(e)},error:function(e){console.log("Error: "+e)}})},iS3.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,o){for(var i=new Array(arguments.length-2),r=2;r<arguments.length;r++)i[r-2]=arguments[r];return t.prototype[n].apply(e,i)}},Mousetrap.bind("f2",function(){$(".ol-dragpan :button").click()}),Mousetrap.bind("ctrl+q",function(){$(".iS3-gisquality :button").click()}),Mousetrap.bind("1",function(){$("#gischeck-mark-isolated").click()}),Mousetrap.bind("2",function(){$("#gischeck-mark-repeated").click()}),Mousetrap.bind("3",function(){$("#gischeck-mark-link").click()}),Mousetrap.bind("4",function(){$("#gischeck-mark-reset").click()}),iS3.style=function(){},iS3.style.componentToHex=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},iS3.style.rgbToHex=function(e,t,n){return"#"+iS3.style.componentToHex(e)+iS3.style.componentToHex(t)+iS3.style.componentToHex(n)},iS3.style.hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null};var defaultStyle;iS3.style.getDefault=function(){if(defaultStyle)return defaultStyle;var e=new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),t=new ol.style.Stroke({color:"#3399CC",width:1}),n=new ol.style.Fill({color:"rgba(0,0,0,1.0)"}),o=new ol.style.Stroke({color:"rgba(0,0,0,1.0)",width:.1});return defaultStyle=new ol.style.Style({image:new ol.style.Circle({fill:n,stroke:o,radius:2}),fill:e,stroke:t})};var defaultSelectedStyle;iS3.style.getDefaultSelected=function(){if(defaultSelectedStyle)return defaultSelectedStyle;var e=new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),t=new ol.style.Stroke({color:"#3399CC",width:2}),n=new ol.style.Fill({color:"#1E90FF"}),o=new ol.style.Stroke({color:"rgba(255,255,255,0.4)",width:.1});return defaultSelectedStyle=new ol.style.Style({image:new ol.style.Circle({fill:n,stroke:o,radius:5}),fill:e,stroke:t})};var transparentStyle;iS3.style.getTransparent=function(){return transparentStyle?transparentStyle:transparentStyle=new ol.style.Style},iS3.style.getHighlight=function(e){var t=new ol.style.Fill({color:e}),n=iS3.style.hexToRgb(e),o=new ol.style.Stroke({color:"rgba("+n.r+","+n.g+","+n.b+",0.2)",width:10}),i=new ol.style.Stroke({color:e,width:2});return new ol.style.Style({image:new ol.style.Circle({fill:t,stroke:o,radius:3}),fill:t,stroke:i})},iS3.style.getHighlightSelected=function(e){var t=new ol.style.Fill({color:e}),n=iS3.style.hexToRgb("#FF0000"),o=new ol.style.Stroke({color:"rgba("+n.r+","+n.g+","+n.b+",0.2)",width:10}),i=new ol.style.Stroke({color:"#FF0000",width:2});return new ol.style.Style({image:new ol.style.Circle({fill:t,stroke:o,radius:3}),fill:t,stroke:i})},iS3.style.getFill=function(e){return new ol.style.Fill({color:e})},iS3.style.getStroke=function(e,t){return new ol.style.Stroke({color:e,width:t})},iS3.style.getCircle=function(e,t,n){return new ol.style.Circle({fill:e,stroke:t,radius:n})},iS3.style.getSquare=function(e,t,n){return new ol.style.RegularShape({fill:e,stroke:t,points:4,radius:n,rotation:0,angle:Math.PI/4})},iS3.style.getTriangle=function(e,t,n){return new ol.style.RegularShape({fill:e,stroke:t,points:3,radius:n,rotation:0,angle:0})},iS3.style.getStar=function(e,t,n){return new ol.style.RegularShape({fill:e,stroke:t,points:5,radius:n,radius2:n/2,angle:0})},iS3.style.getHexagon=function(e,t,n){return new ol.style.RegularShape({fill:e,stroke:t,points:6,radius:n,rotation:0,angle:0})},iS3.style.getX=function(e,t,n){return new ol.style.RegularShape({fill:e,stroke:t,points:4,radius:n,radius2:n/5,angle:Math.PI/4})},iS3.style.setTransparent=function(e,t){var n=iS3.style.hexToRgb(e);return"rgba("+n.r+","+n.g+","+n.b+","+t+")"},iS3.topology=function(){},iS3.topology.geometryFactory=new jsts.geom.GeometryFactory,iS3.topology.ParserConstructor=jsts.io.olParser,iS3.topology.parser=new iS3.topology.ParserConstructor,iS3.topology.polyIntersectsPoly=function(e,t){var n=iS3.topology.parser.read(e),o=iS3.topology.parser.read(t);return n.intersects(o)},iS3.topology.trueDist2MapDist=function(e){var t=new ol.geom.LineString([[0,0],[0,e]]);return t.transform(ol.proj.get("EPSG:3857"),window.iS3Project.getMap().getView().getProjection()),t.getLength()},iS3.ProjectDef=function(e){},iS3.ProjectDef.prototype.init=function(){this.addLayers(),this.zoomToLayer()},iS3.ProjectDef.prototype.addLayers=function(){},iS3.ProjectDef.prototype.zoomToLayer=function(){},iS3.ProjectDef.SHML12=function(e){iS3.ProjectDef.call(this,e)},iS3.inherits(iS3.ProjectDef.SHML12,iS3.ProjectDef),iS3.ProjectDef.prototype.init=function(){this.addLayers(),this.zoomToLayer()},iS3.ProjectDef.prototype.addLayers=function(){var e=iS3Project.getConfig().server,t=iS3Project.getMap(),n=new ol.layer.Tile({source:new ol.source.TileWMS({url:e+"/wms",params:{LAYERS:"iS3:des_sta",FORMAT:"image/png",VERSION:"1.1.0"},wrapX:!1})});n.set("id",e+":iS3:des_sta"),t.addLayer(n);var o=new ol.layer.Tile({source:new ol.source.TileWMS({url:e+"/wms",params:{LAYERS:"iS3:des_bhl",FORMAT:"image/png",VERSION:"1.1.0"},wrapX:!1})});o.set("id",e+":iS3:des_bhl"),t.addLayer(o);var i=new ol.layer.Tile({source:new ol.source.TileWMS({url:e+"/wms",params:{LAYERS:"iS3:des_tun",FORMAT:"image/png",VERSION:"1.1.0"},wrapX:!1})});i.set("id",e+":iS3:des_tun"),t.addLayer(i);var r=new ol.layer.Tile({source:new ol.source.TileWMS({url:e+"/wms",params:{LAYERS:"iS3:des_rin",FORMAT:"image/png",VERSION:"1.1.0"},wrapX:!1})});r.set("id",e+":iS3:des_rin"),t.addLayer(r)},iS3.ProjectDef.prototype.zoomToLayer=function(){var e=iS3Project.getMap(),t=[13522906,3664742,13524657,3665575.75];e.getView().fit(t,e.getSize())},iS3.Config=function(e){var t=e.config||null;if(t)switch(this.server=t.server,this.proxy=t.proxy,t.lang){case"CN":this.lang=new iS3.LangCN;break;case"EN":this.lang=new iS3.LangEN}},iS3.LayerDef=function(e){this.id=e.id||null,this.server=e.server||null,this.featurePrefix=e.featurePrefix||null,this.name=e.name||null,this.projection=e.projection||null,this.extent=e.extent||null,this.layertype=e.layertype||null,this.featureType=e.featureType||null,this.featureNS=e.featureNS||null,this.headers=e.headers||[]},iS3.LayerDef.layerType={BASE_MAP:"basemap",PANOPOINT:"panopoint",PANOTIMEB:"panotimeb",UNKNOWN:"unknown"},iS3.ToolGroup=function(e){if(!e.hasOwnProperty("id"))throw new Error("Please provide id of a tool group.");this._id=e.id,this._tools=[],this.name=e.name||"unnamed"},iS3.ToolGroup.prototype.add=function(e){if(!e.hasOwnProperty("id"))throw new Error("The added tool should has an id attribute.");if(this.getTools().hasOwnProperty(e.id))throw new Error("The id of added tool is existed.");this.getTools().push(e)},iS3.ToolGroup.prototype.getId=function(){return this._id},iS3.ToolGroup.prototype.getTools=function(){return this._tools},iS3.ToolGroupCollection=function(e){this._groups=[]},iS3.ToolGroupCollection.prototype.add=function(e){if(!e.getId())throw new Error("The added group should has an id attribute.");if(this._groups.hasOwnProperty(e.getId()))throw new Error("The id of added group is existed.");this._groups.push(e)},iS3.ToolGroupCollection.prototype.getAllTools=function(){var e=[];return this._groups.forEach(function(t){t.getTools().forEach(function(t){e.push(t)})}),e},iS3.layertree=function(e){},iS3.layertree.Layertree=function(e){"use strict";if(!(this instanceof iS3.layertree.Layertree))throw new Error("layerTree must be constructed with the new keyword.");if("object"!=typeof e||!e.parentObj||!e.target)throw new Error("Invalid parameter(s) provided.");if(!(e.parentObj.getMap()instanceof ol.Map))throw new Error("Please provide a valid OpenLayers 3 map object.");var t=document.getElementById(e.target);if(null===t||1!==t.nodeType)throw console.log(t),new Error("Please provide a valid element id.");if(!e.parentObj.getMessage())throw new Error("message output must be initialed first");var n=document.getElementById(e.target),o=document.createElement("div");o.className="layertree-buttons",n.appendChild(o);var i=document.createElement("div");i.className="layercontainer",n.appendChild(i),this.parentObj=e.parentObj,this.buttons=e.buttons,this.map=e.parentObj.getMap(),this.message=e.parentObj.getMessage(),this.container=n,this.buttonContainer=o,this.layerContainer=i,this.selectedLayer=null,this.init()},iS3.layertree.Layertree.prototype.init=function(){var e=this,t=this.buttons;t.forEach(function(t){e.addButton(t)}),this.selectEventEmitter=new ol.Observable,this.map.getLayers().on("add",function(t){t.element instanceof ol.layer.Vector?this.createRegistry(t.element,!0):this.createRegistry(t.element);var n=e.getDrawingLayer(),o=e.map.getLayers().getArray();o.splice(o.indexOf(n),1),o.splice(o.length,0,n),e.map.render()},this),this.map.getLayers().on("remove",function(e){this.removeRegistry(e.element),this.selectEventEmitter.changed()},this)},iS3.layertree.Layertree.prototype.addButton=function(e){var t=this.buttonContainer,n=iS3Project.getConfig().lang,o=this;switch(e){case"addwms":t.appendChild(new iS3.layertree.WmsButton({parentObj:o,elemName:"addwms",elemTitle:n.addwmsTitle}));break;case"addwfs":t.appendChild(new iS3.layertree.WfsButton({parentObj:o,elemName:"addwfs",elemTitle:n.addwfsTitle}));break;case"newlayer":t.appendChild(new iS3.layertree.NewButton({parentObj:o,elemName:"newlayer",elemTitle:n.newlayerTitle}));break;case"addinput":t.appendChild(new iS3.layertree.InputButton({parentObj:o,elemName:"addinput",elemTitle:n.addInputTitle}));break;case"outputlayer":t.appendChild(new iS3.layertree.OutputButton({parentObj:o,elemName:"outputlayer",elemTitle:n.outputLayerTitle}));break;case"deletelayer":t.appendChild(new iS3.layertree.RemoveButton({parentObj:o,elemName:"deletelayer",elemTitle:n.removeLayerTitle}));break;default:return!1}},iS3.layertree.Layertree.prototype.createRegistry=function(e,t){var n=this,o=this.getLayerDefById(e.get("id"));if(!o){var i=e.get("id").split(":"),r=i[i.length-2]+":"+i[i.length-1],s=e.get("id").substring(0,e.get("id").length-r.length-1);o=new iS3.LayerDef({id:e.get("id"),server:s,featurePrefix:i[i.length-2],name:r,featureType:r.split(":")[1]}),iS3Project.getLayerDefs()[e.get("id")]=o}var a,l=e.get("id").split(/:/g),c=l[l.length-1],u={parentObj:n,id:e.get("id"),buffer:t,title:c,layer:e};a=e.get("layertype")?e.get("layertype"):e.get("id").indexOf("panopoint")!==-1?iS3.LayerDef.layerType.PANOPOINT:e.get("id").indexOf("PANOTIME")!==-1?iS3.LayerDef.layerType.PANOTIMEB:iS3.LayerDef.layerType.UNKNOWN,o.layertype=a;var d;switch(a){case iS3.LayerDef.layerType.BASE_MAP:d=new iS3.layertree.BaseMapContainer(u).init();break;case iS3.LayerDef.layerType.PANOPOINT:d=new iS3.layertree.PanopointContainer(u).init();break;default:d=new iS3.layertree.BasicContainer(u).init()}return this.addSelectEvent(d),this.layerContainer.insertBefore(d,this.layerContainer.firstChild),this},iS3.layertree.Layertree.prototype.removeRegistry=function(e){var t=document.getElementById(e.get("id"));return this.layerContainer.removeChild(t),this},iS3.layertree.Layertree.prototype.addBufferIcon=function(e){e.getSource().on("change",function(t){var n=document.getElementById(e.get("id"));switch(t.target.getState()){case"ready":n.className=n.className.replace(/(?:^|\s)(error|buffering)(?!\S)/g,"");break;case"error":n.className+=" error";break;default:n.className+=" buffering"}})},iS3.layertree.Layertree.prototype.addSelectEvent=function(e,t){var n=this;return e.addEventListener("click",function(e){e.stopPropagation();var o=e.target;t&&(e.stopPropagation(),o=o.parentNode),n.selectedLayer&&n.selectedLayer.classList.remove("active"),n.selectedLayer=o,o.classList.add("active"),n.selectEventEmitter.changed()}),e},iS3.layertree.Layertree.prototype.getLayerById=function(e){for(var t=this.map.getLayers().getArray(),n=0;n<t.length;n+=1)if(t[n].get("id")===e)return t[n];return null},iS3.layertree.Layertree.prototype.getLayerDefById=function(e){return this.parentObj.getLayerDefs()[e]},iS3.layertree.Layertree.prototype.getDrawingLayer=function(){return this.getLayerById("Local:Local:Drawing Layer")},iS3.layertree.BaseButton=function(e){var t=document.createElement("button");t.className=e.elemName,t.title=e.elemTitle,this.button=t},iS3.layertree.InputButton=function(e){iS3.layertree.BaseButton.call(this,e),this.parentObj=e.parentObj;var t,n=this,o=this.button;return o.addEventListener("click",function(){t||(t=n.createUI(),document.body.appendChild(t),document.getElementById("addInput_form").addEventListener("submit",function(e){e.preventDefault(),n.addInputLayer(this),this.parentNode.style.display="none"})),"none"===t.style.display?t.style.display="block":t.style.display="none"}),o},iS3.inherits(iS3.layertree.InputButton,iS3.layertree.BaseButton),iS3.layertree.InputButton.prototype.createUI=function(){var e=iS3Project.getConfig().lang,t=document.createElement("div");t.id="addInput",t.className="toggleable",t.style.display="none";var n=document.createElement("form");n.id="addInput_form",n.className="addlayer",t.appendChild(n);var o=document.createElement("p");o.textContent=this.button.title,n.appendChild(o);var i=document.createElement("table"),r=document.createElement("tr");r.innerHTML="<td>"+e.inputFile+':</td><td><input name="file" type="file" required="required"></td>',i.appendChild(r);var s=document.createElement("tr");s.innerHTML="<td>"+e.type+':</td><td><select name="format" required="required"><option value="panotimeb">PanotimeB</option><option value="shapefile">Shapefile</option><option value="geojson">GeoJSON</option></select></td>',i.appendChild(s);var a=document.createElement("tr");return a.innerHTML='<td><input type="submit" value="'+e.addLayer+'"></td><td><input type="button" value="'+e.cancel+'" onclick="this.form.parentNode.style.display = \'none\'"></td>',i.appendChild(a),n.appendChild(i),t},iS3.layertree.InputButton.prototype.addInputLayer=function(e){var t,n=this.parentObj,o=e.file.files[0],i="Local:Local:"+o.name.substr(0,o.name.lastIndexOf(".")),r=n.map.getView().getProjection();try{var s,a=new FileReader,l=new ol.source.Vector({wrapX:!1}),c=new ol.layer.Vector({source:l,style:iS3.style.getDefault()});c.set("id",i),n.addBufferIcon(c),n.map.addLayer(c),n.message.textContent="Vector layer added successfully.","shapefile"===e.format.value?(s=new iS3.format.Shapefile,s.readFeatures(o,{targetSrs:r},function(e){l.addFeatures(e)})):(a.readAsText(o),a.onload=function(n){var i=n.target.result;switch(e.format.value){case"panotimeb":s=new iS3.format.PanotimeB({name:o.name});break;case"geojson":s=new ol.format.GeoJSON;break;default:return!1}t=s.readProjection(i)||r;var a=s.readFeatures(i,{dataProjection:t,featureProjection:r});l.addFeatures(a)})}catch(e){n.message.textContent="Some unexpected error occurred: ("+e.message+")."}},iS3.layertree.NewButton=function(e){iS3.layertree.BaseButton.call(this,e),this.parentObj=e.parentObj;var t,n=this,o=this.button;return o.addEventListener("click",function(){t||(t=n.createUI(),document.body.appendChild(t),document.getElementById("newlayer_form").addEventListener("submit",function(e){e.preventDefault(),n.newVectorLayer(this),this.parentNode.style.display="none"})),"none"===t.style.display?t.style.display="block":t.style.display="none"}),o},iS3.inherits(iS3.layertree.NewButton,iS3.layertree.BaseButton),iS3.layertree.NewButton.prototype.createUI=function(){var e=iS3Project.getConfig().lang,t=document.createElement("div");t.id="newLayer",t.className="toggleable",t.style.display="none";var n=document.createElement("form");n.id="newlayer_form",n.className="addlayer",t.appendChild(n);var o=document.createElement("p");o.textContent=this.button.title,n.appendChild(o);var i=document.createElement("table"),r=document.createElement("tr");r.innerHTML="<td>"+e.displayName+':</td><td><input name="displayname" type="text" value="unnamed"></td>',i.appendChild(r);var s=document.createElement("tr");s.innerHTML="<td>"+e.type+':</td><td><select name="type" required="required"><option value="point">Point</option><option value="line">Line</option><option value="polygon">Polygon</option><option value="geomcollection">Geometry Collection</option></select></td>',i.appendChild(s);var a=document.createElement("tr");return a.innerHTML='<td><input type="submit" value="'+e.addLayer+'"></td><td><input type="button" value="'+e.cancel+'" onclick="this.form.parentNode.style.display = \'none\'"></td>',i.appendChild(a),n.appendChild(i),t},iS3.layertree.NewButton.prototype.newVectorLayer=function(e){var t=this.parentObj,n=e.type.value;if("point"!==n&&"line"!==n&&"polygon"!==n&&"geomcollection"!==n)return t.message.textContent="Unrecognized layer type.",null;var o=new ol.layer.Vector({source:new ol.source.Vector({wrapX:!1}),style:iS3.style.getDefault(),name:e.displayname.value||"Unnamed Layer",type:n}),i="Local:"+e.displayname.value;return o.set("id",i),iS3Project.getLayerDefs()["Local:"+e.displayname.value]=new iS3.LayerDef({id:i,name:i}),t.addBufferIcon(o),t.map.addLayer(o),o.getSource().changed(),t.message.textContent="New vector layer created successfully.",this},iS3.layertree.OutputButton=function(e){iS3.layertree.BaseButton.call(this,e),this.parentObj=e.parentObj;var t,n=this,o=this.button;return o.addEventListener("click",function(){if(t||(t=n.createUI(),document.body.appendChild(t),document.getElementById("addOutput_form").addEventListener("submit",function(e){e.preventDefault(),n.outputLayer(this),this.parentNode.style.display="none"})),"none"===t.style.display){var e=document.getElementById("outputlayeropt");iS3.domTool.removeContent(e);var o=n.parentObj.layerContainer.childNodes;for(var i in o)1===o[i].nodeType&&e.appendChild(iS3.domTool.createOption(o[i].title,o[i].id));t.style.display="block"}else t.style.display="none"}),o},iS3.inherits(iS3.layertree.OutputButton,iS3.layertree.BaseButton),iS3.layertree.OutputButton.prototype.createUI=function(){var e=iS3Project.getConfig().lang,t=document.createElement("div");t.id="addOutput",t.className="toggleable",t.style.display="none";var n=document.createElement("form");n.id="addOutput_form",n.className="addlayer",t.appendChild(n);var o=document.createElement("p");o.textContent=this.button.title,n.appendChild(o);var i=document.createElement("table"),r=document.createElement("tr");r.innerHTML="<td>"+e.outputFile+':</td><td><select id="outputlayeropt" name="layer" required="required"></td>',i.appendChild(r);var s=document.createElement("tr");s.innerHTML="<td>"+e.type+':</td><td><select name="format" required="required"><option value="panotimeb">PanotimeB</option><option value="shapefile">Shapefile</option><option value="geojson">GeoJSON</option></select></td>',i.appendChild(s);var a=document.createElement("tr");return a.innerHTML='<td><input type="submit" value="'+e.export+'"></td><td><input type="button" value="'+e.cancel+'" onclick="this.form.parentNode.style.display = \'none\'"></td>',i.appendChild(a),n.appendChild(i),t},iS3.layertree.OutputButton.prototype.outputLayer=function(e){var t=this.parentObj;t.getLayerDefById(e.layer.value);try{var n=t.getLayerById(e.layer.value),o=t.map.getView().getProjection();if(n instanceof ol.layer.Vector){var i;switch(e.format.value){case"panotimeb":i=new iS3.format.PanotimeB;break;case"shapefile":i=new iS3.format.Shapefile;break;case"geojson":i=new ol.format.GeoJSON;break;default:return!1}var r=i.writeFeatures(n.getSource().getFeatures(),{dataProjection:ol.proj.get("EPSG:4326"),featureProjection:o}),s=e.layer.options[e.layer.selectedIndex].text;if(r){var a=new File([r],s+".txt",{encoding:"utf-8",type:"text/plain;charset=utf-8"});iS3.saveAs(a,s+".txt",!0)}}}catch(e){t.message.textContent="Some unexpected error occurred: ("+e.message+")."}},iS3.layertree.RemoveButton=function(e){iS3.layertree.BaseButton.call(this,e);var t=e.parentObj,n=this.button;return n.addEventListener("click",function(){if(t.selectedLayer){var e=t.getLayerById(t.selectedLayer.id);t.map.removeLayer(e),t.message.textContent="Layer removed successfully."}else t.message.textContent="No selected layer to remove."}),n},iS3.inherits(iS3.layertree.RemoveButton,iS3.layertree.BaseButton),iS3.layertree.WfsButton=function(e){iS3.layertree.BaseButton.call(this,e),this.parentObj=e.parentObj;var t,n=this,o=this.button;return o.addEventListener("click",function(){t||(t=n.createUI(),document.body.appendChild(t),document.getElementById("wfsurl").value=n.parentObj.parentObj.getConfig().server,document.getElementById("addwfs_form").addEventListener("submit",function(e){e.preventDefault(),n.addWfsLayer(this),this.parentNode.style.display="none"})),"none"===t.style.display?t.style.display="block":t.style.display="none"}),o},iS3.inherits(iS3.layertree.WfsButton,iS3.layertree.BaseButton),iS3.layertree.WfsButton.prototype.createUI=function(){var e=document.createElement("div");e.id="addwfs",e.className="toggleable",e.style.display="none";var t=document.createElement("form");t.id="addwfs_form",t.className="addlayer",e.appendChild(t);var n=document.createElement("p");n.textContent=this.button.title,t.appendChild(n);var o=document.createElement("table"),i=document.createElement("tr");i.innerHTML='<td>Server URL:</td><td><input id="wfsurl" name="server" type="text" required="required" value="http://localhost:8080/geoserver/wfs"></td>',o.appendChild(i);var r=document.createElement("tr");r.innerHTML='<td>Layer name:</td><td><input name="layer" type="text" required="required" value="demo:countries"></td>',o.appendChild(r);var s=document.createElement("tr");s.innerHTML='<td>Display name:</td><td><input name="displayname" type="text" value="countries"></td>',o.appendChild(s);var a=document.createElement("tr");a.innerHTML='<td>Projection:</td><td><input name="projection" type="text" value="EPSG:4326"></td>',o.appendChild(a);var l=document.createElement("tr");return l.innerHTML='<td><input type="submit" value="Add layer"></td><td><input type="button" value="Cancel" onclick="this.form.parentNode.style.display = \'none\'"></td>',o.appendChild(l),t.appendChild(o),e},iS3.layertree.WfsButton.prototype.addWfsLayer=function(e){var t=this.parentObj,n=e.server.value+"/wfs";n=/^((http)|(https))(:\/\/)/.test(n)?n:"http://"+n,n=/\?/.test(n)?n+"&":n+"?";var o=e.layer.value,i=t.map.getView().getProjection().getCode(),r=e.projection.value||i,s=new ol.format.GeoJSON,a=new ol.source.Vector({wrapX:!1,strategy:ol.loadingstrategy.bbox}),l=new XMLHttpRequest;l.onreadystatechange=function(){4===l.readyState&&200===l.status&&a.addFeatures(s.readFeatures(l.responseText,{dataProjection:r,featureProjection:i}))},n=n+"SERVICE=WFS&REQUEST=GetFeature&TYPENAME="+o+"&VERSION=1.1.0&outputFormat=application%2Fjson&SRSNAME="+r,l.open("GET",n),l.send();var c=new ol.layer.Vector({source:a});return c.set("id",e.server.value+":"+e.layer.value),t.addBufferIcon(c),t.map.addLayer(c),t.message.textContent="WFS layer added successfully.",this},iS3.layertree.WmsButton=function(e){iS3.layertree.BaseButton.call(this,e),this.parentObj=e.parentObj;var t,n=this,o=this.button;return o.addEventListener("click",function(){t||(t=n.createUI(),document.body.appendChild(t),document.getElementById("wmsurl").value=n.parentObj.parentObj.getConfig().server,document.getElementById("checkwmslayer").addEventListener("click",function(){n.checkWmsLayer(this.form)}),document.getElementById("addwms_form").addEventListener("submit",function(e){e.preventDefault(),n.addWmsLayer(this),this.parentNode.style.display="none"}),document.getElementById("wmsurl").addEventListener("change",function(){iS3.domTool.removeContent(this.form.layer),iS3.domTool.removeContent(this.form.format)})),"none"===t.style.display?t.style.display="block":t.style.display="none"}),o},iS3.inherits(iS3.layertree.WmsButton,iS3.layertree.BaseButton),iS3.layertree.WmsButton.prototype.createUI=function(){var e=iS3Project.getConfig().lang,t=document.createElement("div");t.id="addwms",t.className="toggleable",t.style.display="none";var n=document.createElement("form");n.id="addwms_form",n.className="addlayer",t.appendChild(n);var o=document.createElement("p");o.textContent=this.button.title,n.appendChild(o);var i=document.createElement("table"),r=document.createElement("tr");r.innerHTML="<td>"+e.serverURL+':</td><td><input id="wmsurl" name="server" type="text" required="required" value="http://localhost:8080/geoserver"></td><td><input id="checkwmslayer" name="check" type="button" value="'+e.checkForLayers+'"></td>',i.appendChild(r);var s=document.createElement("tr");s.innerHTML="<td>"+e.layerName+':</td><td><select name="layer" required="required"></select></td>',i.appendChild(s);var a=document.createElement("tr");a.innerHTML="<td>"+e.format+':</td><td><select name="format" required="required"></select></td>',i.appendChild(a);var l=document.createElement("tr");return l.innerHTML='<td><input type="submit" value="'+e.addLayer+'"></td><td><input type="button" value="'+e.cancel+'" onclick="this.form.parentNode.style.display = \'none\'"></td>',i.appendChild(l),n.appendChild(i),t},iS3.layertree.WmsButton.prototype.checkWmsLayer=function(e){e.check.disabled=!0;var t=this.parentObj;iS3.domTool.removeContent(e.layer),iS3.domTool.removeContent(e.format);var n=e.server.value+"/wms";n=/^((http)|(https))(:\/\/)/.test(n)?n:"http://"+n;var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){var n=new ol.format.WMSCapabilities;try{var i,r=n.read(o.responseText),s=t.map.getView().getProjection().getCode(),a="Layers read successfully.";"1.3.0"===r.version?i=r.Capability.Layer.CRS:(i=[s],a+=" Warning! Projection compatibility could not be checked due to version mismatch ("+r.version+").");var l=r.Capability.Layer.Layer;if(l.length>0&&i.indexOf(s)>-1){for(var c=0;c<l.length;c+=1)e.layer.appendChild(iS3.domTool.createOption(l[c].Name));var u=r.Capability.Request.GetMap.Format;for(c=0;c<u.length;c+=1)e.format.appendChild(iS3.domTool.createOption(u[c]));t.message.textContent=a}}catch(e){t.message.textContent="Some unexpected error occurred: ("+e.message+")."}finally{e.check.disabled=!1}}else o.status>200&&(e.check.disabled=!1)},n=/\?/.test(n)?n+"&":n+"?",n+="REQUEST=GetCapabilities&SERVICE=WMS",o.open("GET",n,!0),o.send()},iS3.layertree.WmsButton.prototype.addWmsLayer=function(e){var t=this.parentObj,n={url:e.server.value+"/wms",params:{LAYERS:e.layer.value,FORMAT:e.format.value,VERSION:"1.1.0"},wrapX:!1},o=new ol.layer.Tile({source:new ol.source.TileWMS(n)});return o.set("id",e.server.value+":"+e.layer.value),t.map.addLayer(o),t.message.textContent="WMS layer added successfully.",this},iS3.layertree.BasicContainer=function(e){var t=document.createElement("div");t.className=e.buffer?"layer ol-unselectable buffering":"layer ol-unselectable",t.id=e.id,t.title=e.title,this.container=t,this.layertree=e.parentObj,this.layer=e.layer},iS3.layertree.BasicContainer.prototype.init=function(){return this.enableDraggable().addLayerTitle().addVisibleCheckbox().addOpacityBar(),this.layer instanceof ol.layer.Tile&&this.addFilter(),this.container},iS3.layertree.BasicContainer.prototype.enableDraggable=function(){var e=this.container,t=this.layertree;return e.draggable=!0,e.addEventListener("dragstart",function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",this.id)}),e.addEventListener("dragenter",function(e){this.classList.add("over")}),e.addEventListener("dragleave",function(e){this.classList.remove("over")}),e.addEventListener("dragover",function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}),e.addEventListener("drop",function(e){e.preventDefault(),this.classList.remove("over");var n=document.getElementById(e.dataTransfer.getData("Text"));if(n!==this){t.layerContainer.removeChild(n),t.layerContainer.insertBefore(n,this);var o=[].slice.call(t.layerContainer.children),i=o.length-o.indexOf(n)-1,r=t.getLayerById(n.id),s=t.map.getLayers().getArray();s.splice(s.indexOf(r),1),s.splice(i,0,r),t.map.render()}}),this},iS3.layertree.BasicContainer.prototype.addLayerTitle=function(){var e=this.layertree,t=this.container,n=document.createElement("span");return n.textContent=t.title,t.appendChild(e.addSelectEvent(n,!0)),n.addEventListener("dblclick",function(){this.contentEditable=!0,t.draggable=!1,t.classList.remove("ol-unselectable"),this.focus()}),n.addEventListener("blur",function(){this.contentEditable&&(this.contentEditable=!1,t.draggable=!0,t.classList.add("ol-unselectable"),t.title=this.textContent)}),this},iS3.layertree.BasicContainer.prototype.addVisibleCheckbox=function(){var e=this.layer,t=this.container,n=document.createElement("input");return n.type="checkbox",n.className="visible",n.checked=e.getVisible(),n.addEventListener("change",function(){this.checked?e.setVisible(!0):e.setVisible(!1)}),t.appendChild(iS3.domTool.stopPropagationOnEvent(n,"click")),this},iS3.layertree.BasicContainer.prototype.addOpacityBar=function(){var e=this.layertree,t=this.layer,n=this.container,o=document.createElement("div");e.addSelectEvent(o,!0);var i=document.createElement("input");return i.type="range",i.min=0,i.max=1,i.step=.1,i.value=t.getOpacity(),i.addEventListener("input",function(){t.setOpacity(this.value)}),i.addEventListener("change",function(){t.setOpacity(this.value)}),i.addEventListener("mousedown",function(){n.draggable=!1}),i.addEventListener("mouseup",function(){n.draggable=!0}),o.appendChild(iS3.domTool.stopPropagationOnEvent(i,"click")),n.appendChild(o),this},iS3.layertree.BasicContainer.prototype.addFilter=function(){var e=this.layertree,t=this.layer,n=this.container,o=document.createElement("div");o.className="filterdiv",e.addSelectEvent(o,!0);var i=document.createElement("form");i.className="filterform",o.appendChild(i);var r=document.createElement("table");r.className="filtertable",i.appendChild(r);var s=document.createElement("tr"),a=document.createElement("td");a.style.width="70%",a.innerHTML=iS3Project.getConfig().lang.filter,s.appendChild(a);
var l=document.createElement("td");l.style.width="30%";var c=document.createElement("input");c.type="button",c.value=iS3Project.getConfig().lang.reset,l.appendChild(c),s.appendChild(l),r.appendChild(iS3.domTool.stopPropagationOnEvent(s,"click"));var u=document.createElement("tr"),d=document.createElement("td"),p=document.createElement("select");p.name="header",p.required="required",d.appendChild(p),u.appendChild(d);var g=document.createElement("td"),h=document.createElement("select");h.name="condition",h.required="required",g.appendChild(h),u.appendChild(g),r.appendChild(iS3.domTool.stopPropagationOnEvent(u,"click"));var m=document.createElement("tr"),f=document.createElement("td"),y=document.createElement("input");y.type="text",y.name="cql",y.required="required",f.appendChild(y),m.appendChild(f);var v=document.createElement("td"),b=document.createElement("input");b.type="submit",b.value=iS3Project.getConfig().lang.apply,v.appendChild(b),m.appendChild(v),r.appendChild(iS3.domTool.stopPropagationOnEvent(m,"click")),n.appendChild(o);var j=e.getLayerDefById(t.get("id"));return j?(iS3.geoRequest.getLayerHeader(j,function(e){for(var t=1;t<e.length;t++)p.appendChild(iS3.domTool.createOption(e[t].name))}),h.appendChild(iS3.domTool.createOption("=","=")),h.appendChild(iS3.domTool.createOption("<>","<>")),h.appendChild(iS3.domTool.createOption("<","<")),h.appendChild(iS3.domTool.createOption("<=","<=")),h.appendChild(iS3.domTool.createOption(">",">")),h.appendChild(iS3.domTool.createOption(">=",">=")),h.appendChild(iS3.domTool.createOption("LIKE"," LIKE ")),h.appendChild(iS3.domTool.createOption("BETWEEN"," BETWEEN ")),i.addEventListener("submit",function(e){if(e.preventDefault(),t instanceof ol.layer.Tile){var n=t.getSource(),o=this.header.value+this.condition.value+this.cql.value,i=n.getParams();i.t=(new Date).getMilliseconds(),i.CQLFILTER=o,n.updateParams(i)}}),c.onclick=function(e){if(t instanceof ol.layer.Tile){var n=t.getSource(),o=n.getParams();o.t=(new Date).getMilliseconds(),o.CQLFILTER=null,n.updateParams(o)}},this):this},iS3.layertree.BaseMapContainer=function(e){iS3.layertree.BasicContainer.call(this,e)},iS3.inherits(iS3.layertree.BaseMapContainer,iS3.layertree.BasicContainer),iS3.layertree.BaseMapContainer.prototype.init=function(){return this.enableDraggable().addLayerTitle().addVisibleCheckbox().addOpacityBar(),this.container},iS3.layertree.PanopointContainer=function(e){iS3.layertree.BasicContainer.call(this,e)},iS3.inherits(iS3.layertree.PanopointContainer,iS3.layertree.BasicContainer),iS3.layertree.PanopointContainer.prototype.addFilter=function(){var e=iS3Project.getConfig().lang,t=this.layertree,n=this.layer,o=this.container,i=document.createElement("div");i.className="filterdiv",t.addSelectEvent(i,!0);var r=document.createElement("form");r.className="filterform",i.appendChild(r);var s=document.createElement("table");s.className="filtertable",r.appendChild(s);var a=document.createElement("tr"),l=document.createElement("td");l.style.width="70%",l.innerHTML=iS3Project.getConfig().lang.filter,a.appendChild(l);var c=document.createElement("td");c.style.width="30%";var u=document.createElement("input");u.type="button",u.value=iS3Project.getConfig().lang.reset,c.appendChild(u),a.appendChild(c),s.appendChild(iS3.domTool.stopPropagationOnEvent(a,"click"));var d=document.createElement("tr"),p=document.createElement("td"),g=document.createElement("select");g.name="point",g.required="required",p.appendChild(g),d.appendChild(p);var h=document.createElement("td"),m=document.createElement("input");m.type="submit",m.value=iS3Project.getConfig().lang.apply,h.appendChild(m),d.appendChild(h),s.appendChild(iS3.domTool.stopPropagationOnEvent(d,"click"));var f=document.createElement("tr"),y=document.createElement("td");y.innerHTML=iS3Project.getConfig().lang.carDay,f.appendChild(y),s.appendChild(iS3.domTool.stopPropagationOnEvent(f,"click"));var v=document.createElement("tr"),b=document.createElement("td"),j=document.createElement("input");j.type="text",j.name="day",b.appendChild(j),v.appendChild(b);var x=document.createElement("td"),E=document.createElement("input");return E.type="button",E.value=iS3Project.getConfig().lang.apply,E.onclick=function(){if(!j.value)return!1;var e="kydateid like '%"+j.value+"%'",t=n.getSource(),o=t.getParams();o.t=(new Date).getMilliseconds(),o.CQLFILTER=e,t.updateParams(o)},x.appendChild(E),v.appendChild(x),s.appendChild(iS3.domTool.stopPropagationOnEvent(v,"click")),o.appendChild(i),g.appendChild(iS3.domTool.createOption(e.qualifiedPoints,"status=0")),g.appendChild(iS3.domTool.createOption(e.pictureDeletedPoints,"status=1")),g.appendChild(iS3.domTool.createOption(e.isolatedDeletedPoints,"status=2")),g.appendChild(iS3.domTool.createOption(e.repeatedDeletedPoints,"status=3")),g.appendChild(iS3.domTool.createOption(e.linkDeletedPoints,"status=4")),g.appendChild(iS3.domTool.createOption(e.allPanopoints,"status<>-1")),r.addEventListener("submit",function(e){if(e.preventDefault(),n instanceof ol.layer.Tile){var t=n.getSource(),o=g.value,i=t.getParams();i.t=(new Date).getMilliseconds(),i.CQL_FILTER=o,t.updateParams(i)}}),u.onclick=function(e){if(n instanceof ol.layer.Tile){var t=n.getSource(),o=t.getParams();o.t=(new Date).getMilliseconds(),o.CQL_FILTER=null,t.updateParams(o)}},m.click(),this},iS3.toolbar=function(e){},iS3.toolbar.Toolbar=function(e){"use strict";if(!(this instanceof iS3.toolbar.Toolbar))throw new Error("toolBar must be constructed with the new keyword.");if("object"!=typeof e||!e.parentObj||!e.target)throw new Error("Invalid parameter(s) provided.");if(!(e.parentObj.getMap()instanceof ol.Map))throw new Error("Please provide a valid OpenLayers 3 map object.");var t=document.getElementById(e.target);if(null===t||1!==t.nodeType)throw new Error("Please provide a valid element id.");this.map=e.parentObj.getMap(),this.buttons=e.buttons,this.containerDiv=document.getElementById(e.target),this.layertree=e.parentObj.getLayertree(),this.message=e.parentObj.getMessage(),this.groups=new iS3.ToolGroupCollection({}),this.init()},iS3.toolbar.Toolbar.prototype.init=function(){var e=this;this.buttons.forEach(function(t){e.addGroup(t)})},iS3.toolbar.Toolbar.prototype.addGroup=function(e){var t=iS3Project.getConfig().lang;switch(e){case"zoomGroup":this.addToolGroup(new iS3.toolbar.ZoomGroup({parentObj:this,id:"zoomGroup",name:t.zoomGroupName}));break;case"selectGroup":this.addToolGroup(new iS3.toolbar.SelectGroup({parentObj:this,id:"selectGroup",name:t.selectGroupName}));break;case"drawGroup":this.addToolGroup(new iS3.toolbar.DrawGroup({parentObj:this,id:"drawGroup",name:t.drawGroupName}));break;case"measureGroup":this.addToolGroup(new iS3.toolbar.MeasureGroup({parentObj:this,id:"measureGroup",name:t.measureGroupName}));break;case"queryGroup":this.addToolGroup(new iS3.toolbar.QueryGroup({parentObj:this,id:"queryGroup",name:t.queryGroupName}));break;case"customGroup":this.addToolGroup(new iS3.toolbar.CustomGroup({parentObj:this,id:"customGroup",name:t.customGroupName}));break;case"testGroup":this.addToolGroup(new iS3.toolbar.TestGroup({parentObj:this,id:"testGroup",name:"Test"}));break;default:return!1}},iS3.toolbar.Toolbar.prototype.addControl=function(e){if(!(e instanceof ol.control.Control))throw new Error("Only controls can be added to the toolbar.");return"toggle"===e.get("type")&&e.on("change:active",function(){e.get("active")&&this.groups.getAllTools().forEach(function(t){"toggle"===t.get("type")&&t.get("alive")===!1&&t!==e&&t.set("active",!1)})},this),e.setTarget(this.containerDiv),this.map.addControl(e),this},iS3.toolbar.Toolbar.prototype.removeControl=function(e){return this.controls.remove(e),this.map.removeControl(e),this},iS3.toolbar.Toolbar.prototype.addToolGroup=function(e){if(!e||0===e.getTools().length)return this;this.groups.add(e);var t=document.createElement("span");t.className="group-name",t.textContent=e.name+"  ",this.containerDiv.appendChild(t);for(var n=0;n<e.getTools().length;n++)this.addControl(e.getTools()[n]);return this},iS3.toolbar.BasicControl=function(e){var t=document.createElement("div");t.className=e.className||"ol-unselectable ol-control";var n=document.createElement("button");n.textContent=e.label||"I",n.title=e.tipLabel||"Custom interaction",t.appendChild(n),ol.control.Control.call(this,{element:t,target:e.target}),this.setDisabled=function(e){if("boolean"==typeof e)return n.disabled=e,this};var o=this;e.type&&"toggle"===e.type?(o.setProperties({active:!1,type:"toggle",alive:e.alive||!1}),o.on("change:active",function(){this.get("active")?(n.classList.add("active"),e.trigger()):(n.classList.remove("active"),e.destroy())},this),n.addEventListener("click",function(){o.get("active")?o.set("active",!1):o.set("active",!0)})):n.addEventListener("click",e.trigger)},ol.inherits(iS3.toolbar.BasicControl,ol.control.Control),iS3.toolbar.CustomGroup=function(e){iS3.ToolGroup.call(this,e),this.parentObj=e.parentObj,this.layertree=e.parentObj.layertree,this.init()},iS3.inherits(iS3.toolbar.CustomGroup,iS3.ToolGroup),iS3.toolbar.CustomGroup.prototype.init=function(){var e=this,t=new iS3.toolbar.GisQualityControl(e.parentObj);t.id="gisQuality",this.add(t)},iS3.toolbar.DrawGroup=function(e){iS3.ToolGroup.call(this,e),this.layertree=e.parentObj.layertree,this.init()},iS3.inherits(iS3.toolbar.DrawGroup,iS3.ToolGroup),iS3.toolbar.DrawGroup.prototype.init=function(){var e=this,t=this.layertree;this.activeFeatures=new ol.Collection,t.selectEventEmitter.on("change",function(){var n=t.getLayerById(t.selectedLayer.id);if(n instanceof ol.layer.Vector){this.getTools().forEach(function(e){e.setDisabled(!1)});var o=n.get("type");o||(e.getTools()[3].setDisabled(!0).set("active",!1),e.getTools()[4].setDisabled(!0).set("active",!1)),"point"!==o&&"geomcollection"!==o&&e.getTools()[0].setDisabled(!0).set("active",!1),"line"!==o&&"geomcollection"!==o&&e.getTools()[1].setDisabled(!0).set("active",!1),"polygon"!==o&&"geomcollection"!==o&&e.getTools()[2].setDisabled(!0).set("active",!1),setTimeout(function(){e.activeFeatures.clear(),e.activeFeatures.extend(n.getSource().getFeatures())},0)}else this.getTools().forEach(function(e){e.set("active",!1),e.setDisabled(!0)})},this),this.loadDrawPoint().loadDrawLine().loadDrawPolygon().loadRemoveFeature().loadDragFeature()},iS3.toolbar.DrawGroup.prototype.loadDrawPoint=function(){var e=new ol.control.Interaction({label:" ",tipLabel:iS3Project.getConfig().lang.addPointsTip,className:"ol-addpoint ol-unselectable ol-control",interaction:ol.control.Interaction.handleEvents(this,new ol.interaction.Draw({type:"Point",snapTolerance:1}),"point")}).setDisabled(!0);return e.id="drawPoint",this.add(e),this},iS3.toolbar.DrawGroup.prototype.loadDrawLine=function(){var e=new ol.control.Interaction({label:" ",tipLabel:iS3Project.getConfig().lang.addLinesTip,className:"ol-addline ol-unselectable ol-control",interaction:ol.control.Interaction.handleEvents(this,new ol.interaction.Draw({type:"LineString",snapTolerance:1}),"line")}).setDisabled(!0);return e.id="drawLine",this.add(e),this},iS3.toolbar.DrawGroup.prototype.loadDrawPolygon=function(){var e=new ol.control.Interaction({label:" ",tipLabel:iS3Project.getConfig().lang.addPolygonsTip,className:"ol-addpolygon ol-unselectable ol-control",interaction:ol.control.Interaction.handleEvents(this,new ol.interaction.Draw({type:"Polygon",snapTolerance:1}),"polygon")}).setDisabled(!0);return e.id="drawPolygon",this.add(e),this},iS3.toolbar.DrawGroup.prototype.loadRemoveFeature=function(){var e=new ol.control.Interaction({label:" ",tipLabel:iS3Project.getConfig().lang.removeFeaturesTip,className:"ol-removefeat ol-unselectable ol-control",interaction:new ol.interaction.RemoveFeature({features:this.activeFeatures})}).setDisabled(!0);return e.id="removeFeature",this.add(e),this},iS3.toolbar.DrawGroup.prototype.loadDragFeature=function(){var e=new ol.control.Interaction({label:" ",tipLabel:iS3Project.getConfig().lang.dragFeaturesTip,className:"ol-dragfeat ol-unselectable ol-control",interaction:new ol.interaction.DragFeature({features:this.activeFeatures})}).setDisabled(!0);e.id="dragFeature",this.add(e)},ol.interaction.RemoveFeature=function(e){ol.interaction.Pointer.call(this,{handleDownEvent:function(e){return this.set("deleteCandidate",e.map.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.get("features").getArray().indexOf(e)!==-1)return e},this)),!!this.get("deleteCandidate")},handleUpEvent:function(e){e.map.forEachFeatureAtPixel(e.pixel,function(e,t){e===this.get("deleteCandidate")&&(t.getSource().removeFeature(e),this.get("features").remove(e))},this),this.set("deleteCandidate",null)}}),this.setProperties({features:e.features,deleteCandidate:null})},ol.inherits(ol.interaction.RemoveFeature,ol.interaction.Pointer),ol.interaction.DragFeature=function(e){ol.interaction.Pointer.call(this,{handleDownEvent:function(e){return this.set("draggedFeature",e.map.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.get("features").getArray().indexOf(e)!==-1)return e},this)),this.get("draggedFeature")&&this.set("coords",e.coordinate),!!this.get("draggedFeature")},handleDragEvent:function(e){var t=e.coordinate[0]-this.get("coords")[0],n=e.coordinate[1]-this.get("coords")[1];this.get("draggedFeature").getGeometry().translate(t,n),this.set("coords",e.coordinate)},handleUpEvent:function(e){this.setProperties({coords:null,draggedFeature:null})}}),this.setProperties({features:e.features,coords:null,draggedFeature:null})},ol.inherits(ol.interaction.DragFeature,ol.interaction.Pointer),iS3.toolbar.GisQualityControl=function(e){this.NOMARK=-1,this.QUALIFIED=0,this.PICTURE=1,this.ISOLATED=2,this.REPEATED=3,this.LINK=4,this.WORKTMPFIELD="worktmp",this.TIPREPEATED="tip_repeated";var t,n=this;iS3.toolbar.BasicControl.call(this,{label:" ",tipLabel:iS3Project.getConfig().lang.gisQualifiedTip,className:"iS3-gisquality ol-unselectable ol-control",trigger:function(){if(t||(t=n.getGISQualityDiv(e)),t.isVisible())t.close();else{t.show();var o=document.getElementById("gisQualityForm"),i=o.getElementsByTagName("table")[0],r=i.getElementsByTagName("tr")[0],s=r.getElementsByTagName("td")[0];s.textContent=s.textContent.replace(/\*/g,"");var a=e.layertree.layerContainer.childNodes,l=document.getElementById("gis-qualified-target");iS3.domTool.removeContent(l);for(var c in a)if(1===a[c].nodeType&&e.layertree.getLayerDefById(a[c].id).layertype===iS3.LayerDef.layerType.PANOPOINT){var u=document.createElement("option");u.value=a[c].id,u.textContent=a[c].title,l.appendChild(u)}}}})},ol.inherits(iS3.toolbar.GisQualityControl,iS3.toolbar.BasicControl),iS3.toolbar.GisQualityControl.prototype.getGISQualityDiv=function(e){var t=iS3Project.getConfig().lang,n="#66CD00",o="#FF69B4",i=this,r=e.layertree,s=new iS3.DraggableDiv({id:"gisquality",title:iS3Project.getConfig().lang.gisQualifiedTip}),a=document.createElement("form");a.id="gisQualityForm",a.className="draggable-form",a.addEventListener("submit",function(e){e.preventDefault();var t=r.getLayerById(r.selectedLayer.id),n=r.getLayerDefById(this.target.value);iS3.toolbar.GisQualityControl.mergePoints(t,n),s.close()});var l=document.createElement("table"),c=document.createElement("tr"),u=document.createElement("td");u.textContent=t.pictureDeletedPoints,c.appendChild(u);var d=document.createElement("td"),p=document.createElement("input");p.id="gischeck-checkbox-picture",p.type="checkbox",p.checked=!0,p.onchange=function(){var e=document.getElementById("gischeck-checkbox-picture").checked;iS3.toolbar.GisQualityControl.switchFeatureStyle(i.PICTURE,n,e)},d.appendChild(p);var g=document.createElement("input");g.type="button",g.value=t.auto,g.onclick=function(){iS3.toolbar.GisQualityControl.autoMarkPicturedPoints(i.PICTURE,n).done(function(e){u.textContent=t.pictureDeletedPoints+"*("+e+")"})},d.appendChild(g);var h=document.createElement("input");h.name="file",h.type="file",h.onchange=function(){iS3.toolbar.GisQualityControl.markPicturedPoints(h.files[0],i.PICTURE,n)},d.appendChild(h),c.appendChild(d);var m=document.createElement("tr"),f=document.createElement("td");f.textContent=t.isolatedDeletedPoints,m.appendChild(f);var y=document.createElement("td"),v=document.createElement("input");v.id="gischeck-checkbox-isolated",v.type="checkbox",v.checked=!0,v.onchange=function(){var e=document.getElementById("gischeck-checkbox-isolated").checked;iS3.toolbar.GisQualityControl.switchFeatureStyle(i.ISOLATED,n,e)},y.appendChild(v);var b=document.createElement("input");b.type="button",b.value=t.auto,b.onclick=function(){this.disabled=!0;var e=this;setTimeout(function(){iS3.toolbar.GisQualityControl.autoMarkIsolatedPoints(i.ISOLATED,n),e.disabled=!1},100)},y.appendChild(b);var j=document.createElement("input");j.id="gischeck-mark-isolated",j.type="button",j.value=t.markSelected,j.onclick=function(){iS3.toolbar.GisQualityControl.markFeatures(e.selectInteraction.getFeatures(),i.ISOLATED,n)},y.appendChild(j),y.appendChild($("<span>1</span>").get(0)),m.appendChild(y);var x=document.createElement("tr"),E=document.createElement("td");E.textContent=t.repeatedDeletedPoints,x.appendChild(E);var S=document.createElement("td"),C=document.createElement("input");C.id="gischeck-checkbox-repeated",C.type="checkbox",C.checked=!0,C.onchange=function(){var e=document.getElementById("gischeck-checkbox-repeated").checked;iS3.toolbar.GisQualityControl.switchFeatureStyle(i.REPEATED,n,e)},S.appendChild(C);var I=document.createElement("input");I.id="auto-repeated-mark",I.type="button",I.value=t.auto,I.onclick=function(){I.disabled=!0,setTimeout(function(){var e=r.getLayerDefById(document.getElementById("gisQualityForm").target.value);iS3.toolbar.GisQualityControl.autoMarkRepeatedPoints(e,i.REPEATED,o)},100)},S.appendChild(I);var L=document.createElement("input");L.id="gischeck-mark-repeated",L.type="button",L.value=t.markSelected,L.onclick=function(){iS3.toolbar.GisQualityControl.markFeatures(e.selectInteraction.getFeatures(),i.REPEATED,n)},S.appendChild(L),S.appendChild($("<span>2</span>").get(0)),x.appendChild(S);var w=document.createElement("tr"),P=document.createElement("td");P.textContent=t.linkDeletedPoints,w.appendChild(P);var T=document.createElement("td"),N=document.createElement("input");N.id="gischeck-checkbox-link",N.type="checkbox",N.checked=!0,N.onchange=function(){var e=document.getElementById("gischeck-checkbox-link").checked;iS3.toolbar.GisQualityControl.switchFeatureStyle(i.LINK,n,e)},T.appendChild(N);var R=document.createElement("input");R.id="gischeck-mark-link",R.type="button",R.value=t.markSelected,R.onclick=function(){iS3.toolbar.GisQualityControl.markFeatures(e.selectInteraction.getFeatures(),i.LINK,n)},T.appendChild(R),T.appendChild($("<span>3</span>").get(0)),w.appendChild(T);var O=document.createElement("tr"),A=document.createElement("td");A.textContent=t.reset,O.appendChild(A);var D=document.createElement("td"),M=document.createElement("input");M.id="gischeck-checkbox-tip",M.type="checkbox",M.checked=!0,M.onchange=function(){var e=document.getElementById("gischeck-checkbox-tip").checked;iS3.toolbar.GisQualityControl.switchFeatureStyle(i.NOMARK,o,e,"tip_repeated")},D.appendChild(M);var F=document.createElement("input");F.id="gischeck-mark-reset",F.type="button",F.value=t.markSelected,F.onclick=function(){iS3.toolbar.GisQualityControl.resetFeatures(e.selectInteraction.getFeatures())},D.appendChild(F),D.appendChild($("<span>4</span>").get(0)),O.appendChild(D);var _=document.createElement("tr"),G=document.createElement("td");G.textContent=t.targetLayer,_.appendChild(G);var k=document.createElement("select");k.id="gis-qualified-target",k.name="target",k.required="required",_.appendChild(k);var B=document.createElement("tr"),q=document.createElement("td"),V=document.createElement("input");V.type="submit",V.value=t.submit,q.appendChild(V),B.appendChild(q);var z=document.createElement("td"),H=document.createElement("input");return H.type="button",H.value=t.cancel,H.onclick=function(){s.close()},q.appendChild(H),B.appendChild(z),l.appendChild(c),l.appendChild(m),l.appendChild(x),l.appendChild(w),l.appendChild(O),l.appendChild(_),l.appendChild(B),a.appendChild(l),s.getContent().appendChild(a),s},iS3.toolbar.GisQualityControl.resetFeatures=function(e){function t(){return function(){return n.selectInteraction.getFeatures().getArray().indexOf(this)===-1?iS3.style.getDefault():iS3.style.getDefaultSelected()}}var n=iS3Project.getToolbar();e.forEach(function(e){e.set("status",0),e.unset("worktmp"),e.setStyle(t())}),n.selectInteraction.getFeatures().clear()},iS3.toolbar.GisQualityControl.markFeatures=function(e,t,n,o){function i(){return function(){return r.selectInteraction.getFeatures().getArray().indexOf(this)===-1?c:iS3.style.getDefaultSelected()}}var r=iS3Project.getToolbar(),s=iS3.style.getFill(n),a=iS3.style.getStroke(iS3.style.setTransparent(n,.4),8),l=null;switch(t){case 1:l=iS3.style.getTriangle(s,a,8);break;case 2:l=iS3.style.getSquare(s,a,5);break;case 3:l=iS3.style.getStar(s,a,5);break;case 4:l=iS3.style.getHexagon(s,a,5);break;default:return!1}o&&(l=iS3.style.getCircle(s,a,5));var c=new ol.style.Style({image:l});e.forEach(function(e){o||(e.set("status",t),e.unset("worktmp")),e.setStyle(i())}),r.selectInteraction.getFeatures().clear()},iS3.toolbar.GisQualityControl.switchFeatureStyle=function(e,t,n,o){function i(){return function(){return l.selectInteraction.getFeatures().getArray().indexOf(this)===-1?p:iS3.style.getDefaultSelected()}}function r(){return function(){return this.get("worktmp")&&this.get("worktmp")===o?iS3.style.getDefault():iS3.style.getTransparent()}}function s(e,t,n){return e.get("worktmp")?e.get("worktmp")===n:e.get("status")===t}var a=iS3Project.getLayertree();if(a.getLayerDefById(a.selectedLayer.id).layertype!==iS3.LayerDef.layerType.PANOTIMEB)return document.getElementById("auto-repeated-mark").disabled=!1,!1;if("undefined"===n)return!1;var l=iS3Project.getToolbar(),c=iS3.style.getFill(t),u=iS3.style.getStroke(iS3.style.setTransparent(t,.4),8),d=null;switch(e){case-1:break;case 1:d=iS3.style.getTriangle(c,u,8);break;case 2:d=iS3.style.getSquare(c,u,5);break;case 3:d=iS3.style.getStar(c,u,5);break;case 4:d=iS3.style.getHexagon(c,u,5);break;default:return!1}"tip_repeated"===o&&(d=iS3.style.getCircle(c,u,5));for(var p=new ol.style.Style({image:d}),g=a.getLayerById(a.selectedLayer.id),h=g.getSource().getFeatures(),m=[],f=0;f<h.length;f++)s(h[f],e,o)&&m.push(h[f]);l.selectInteraction.getFeatures().clear(),m.forEach(function(e){n?(e.setStyle(i()),e.set("selectable",!0)):(e.setStyle(r()),e.set("selectable",!1))}),a.message.textContent=m.length+" switched"},iS3.toolbar.GisQualityControl.mergePoints=function(e,t){var n=e.getSource().getFeatures(),o=new iS3.format.PanotimeB,i=o.toJson(n),r=iS3Project.getLayertree().getLayerDefById(e.get("id")),s=iS3Project.getConfig().proxy;$.post(s+"/gischeck/task/submit",{cardayID:r.name.split(":")[1],json:i}).done(function(e){alert(e);var n=iS3Project.getLayertree().getLayerById(t.id);if(n instanceof ol.layer.Tile){var o=n.getSource(),i=o.getParams();i.t=(new Date).getMilliseconds(),o.updateParams(i)}})},iS3.toolbar.GisQualityControl.autoMarkPicturedPoints=function(e,t){var n=$.Deferred,o=n(),i=iS3Project.getLayertree(),r=i.getLayerDefById(i.selectedLayer.id),s=iS3Project.getConfig().proxy;return $.post(s+"/gischeck/upload/exp",{cardayID:r.name.split(":")[1]}).done(function(n){for(var r,s=/'(.*?)'/g,a=[];r=s.exec(n);)a.push(r[1]);for(var l=[],c=i.getLayerById(i.selectedLayer.id).getSource().getFeatures(),u=0;u<c.length;u++)for(var d=0;d<a.length;d++)if(c[u].get("kydate_id")===a[d]){l.push(c[u]);break}iS3.toolbar.GisQualityControl.markFeatures(l,e,t),o.resolve(l.length)}),o.promise()},iS3.toolbar.GisQualityControl.markPicturedPoints=function(e,t,n){var o=new FileReader,i=iS3Project.getLayertree().getLayerById(iS3Project.getLayertree().selectedLayer.id).getSource().getFeatures();o.readAsText(e),o.onload=function(e){for(var o,r=/'(.*?)'/g,s=[];o=r.exec(e.target.result);)s.push(o[1]);for(var a=[],l=0;l<i.length;l++)for(var c=0;c<s.length;c++)if(i[l].get("kydate_id")===s[c]){a.push(i[l]);break}iS3.toolbar.GisQualityControl.markFeatures(a,t,n)}},iS3.toolbar.GisQualityControl.autoMarkIsolatedPoints=function(e,t){var n=iS3.topology.trueDist2MapDist(200),o=iS3Project.getLayertree();if(o.getLayerDefById(o.selectedLayer.id).layertype===iS3.LayerDef.layerType.PANOTIMEB){for(var i=3.14*n*n*2,r=o.getLayerById(o.selectedLayer.id).getSource().getFeatures(),s=[],a=[],l=0;l<r.length;l++)s.push(iS3.topology.parser.read(r[l].getGeometry()).buffer(n));var c=jsts.operation.union.CascadedPolygonUnion.union(s);if(c instanceof jsts.geom.MultiPolygon){for(l=0;l<c.geometries.length;l++)c.geometries[l].getArea()<i&&a.push(c.geometries[l]);var u=[];for(l=0;l<a.length;l++){for(var d=[],p=0;p<r.length;p++)a[l].intersects(s[p])===!0&&d.push(r[p]);console.log(d.length),d.length<4&&d.forEach(function(e){u.push(e)})}iS3.toolbar.GisQualityControl.markFeatures(u,e,t)}}},iS3.toolbar.GisQualityControl.autoMarkRepeatedPoints=function(e,t,n){var o=iS3.topology.trueDist2MapDist(5),i=iS3Project.getLayertree();if(i.getLayerDefById(i.selectedLayer.id).layertype!==iS3.LayerDef.layerType.PANOTIMEB)return void(document.getElementById("auto-repeated-mark").disabled=!1);for(var r=i.getLayerById(i.selectedLayer.id),s=r.getSource().getFeatures(),a={},l=0;l<s.length;l++){var c=iS3.geohash.encode(s[l].get("xxx"),s[l].get("yyy"),7);a[c]||(a[c]=[]),a[c].push(s[l])}$.each(a,function(i,r){var s=[];for(l=0;l<r.length;l++)0===r[l].get("status")&&s.push(r[l].getGeometry().getCoordinates());var a=hull(s,10),c=new ol.geom.Polygon([a],"XY");c=iS3.topology.parser.write(iS3.topology.parser.read(c).buffer(10)),iS3.geoRequest.polygonFeaturesFromTile(e,c).done(function(e){if(e.length<1)return void(document.getElementById("auto-repeated-mark").disabled=!1);for(var i={},s=0;s<e.length;s++)if(0===e[s].get("status")){var a=iS3.geohash.encode(e[s].get("xxx"),e[s].get("yyy"),9);i[a]||(i[a]=[]),i[a].push(e[s])}var l=[];for(s=0;s<r.length;s++){r[s].unset("worktmp");var c=iS3.geohash.encode(r[s].get("xxx"),r[s].get("yyy"),9),u=iS3.geohash.neighbors(c);u.unshift(c);for(var d=iS3.topology.parser.read(r[s].getGeometry()).buffer(o),p=!1,g=0;g<u.length;g++){if(i[u[g]])for(var h=0;h<i[u[g]].length;h++)if(d.intersects(iS3.topology.parser.read(i[u[g]][h].getGeometry()))){p=!0;break}if(p)break}p&&(r[s].set("worktmp","tip_repeated"),l.push(r[s]))}iS3.toolbar.GisQualityControl.markFeatures(l,t,n,!0),document.getElementById("auto-repeated-mark").disabled=!1})})},ol.control.Interaction=function(e){var t=document.createElement("div");t.className=e.className||"ol-unselectable ol-control";var n=document.createElement("button");n.textContent=e.label||"I",n.title=e.tipLabel||"Custom interaction",t.appendChild(n),this.setDisabled=function(e){if("boolean"==typeof e)return n.disabled=e,this};var o=this;n.addEventListener("click",function(){o.get("interaction").getActive()?o.set("active",!1):o.set("active",!0)});var i=e.interaction;ol.control.Control.call(this,{element:t,target:e.target}),this.setProperties({interaction:i,active:!1,type:"toggle",alive:e.alive||!1,destroyFunction:function(e){e.element===o&&this.removeInteraction(o.get("interaction"))}}),this.on("change:active",function(){this.get("interaction").setActive(this.get("active")),this.get("active")?n.classList.add("active"):n.classList.remove("active")},this)},ol.inherits(ol.control.Interaction,ol.control.Control),ol.control.Interaction.prototype.setMap=function(e){ol.control.Control.prototype.setMap.call(this,e);var t=this.get("interaction");null===e?ol.Observable.unByKey(this.get("eventId")):e.getInteractions().getArray().indexOf(t)===-1&&(e.addInteraction(t),t.setActive(!1),this.set("eventId",e.getControls().on("remove",this.get("destroyFunction"),e)))},ol.control.Interaction.handleEvents=function(e,t,n){var o=iS3Project.getLayertree();return"point"!==n&&t.on("drawstart",function(e){var i=!1;if(o.selectedLayer){var r=o.getLayerById(o.selectedLayer.id),s=r.get("type");i=s!==n&&"geomcollection"!==s}else i=!0;i&&t.finishDrawing()},this),t.on("drawend",function(t){var i,r="";e:if(o.selectedLayer){if(i=o.getLayerById(o.selectedLayer.id),r=i instanceof ol.layer.Vector?"":"Please select a valid vector layer.")break e;var s=i.get("type");r=s===n||"geomcollection"===s?"":"Selected layer has a different vector type."}else r="Please select a layer first.";r?o.message.textContent=r:(i.getSource().addFeature(t.feature),e.activeFeatures.push(t.feature))},this),t},iS3.toolbar.MeasureGroup=function(e){iS3.ToolGroup.call(this,e),this.parentObj=e.parentObj,this.layertree=e.parentObj.layertree,this.init()},iS3.inherits(iS3.toolbar.MeasureGroup,iS3.ToolGroup),iS3.toolbar.MeasureGroup.prototype.init=function(){this.loadLineStringMeasure().loadPolygonMeasure()},iS3.toolbar.MeasureGroup.formatLength=function(e){for(var t=new ol.Sphere(6378137),n=0,o=e.getCoordinates(),i=iS3Project.getMap().getView().getProjection(),r=0,s=o.length-1;r<s;++r){var a=ol.proj.transform(o[r],i,"EPSG:4326"),l=ol.proj.transform(o[r+1],i,"EPSG:4326");n+=t.haversineDistance(a,l)}var c;return c=n>100?Math.round(n/1e3*100)/100+" km":Math.round(100*n)/100+" m"},iS3.toolbar.MeasureGroup.formatArea=function(e){var t,n=new ol.Sphere(6378137),o=iS3Project.getMap().getView().getProjection(),i=e.clone().transform(o,"EPSG:4326"),r=i.getLinearRing(0).getCoordinates(),s=Math.abs(n.geodesicArea(r));return t=s>1e4?Math.round(s/1e6*100)/100+" km<sup>2</sup>":Math.round(100*s)/100+" m<sup>2</sup>"},iS3.toolbar.MeasureGroup.createMeasureTooltipElement=function(){var e=document.createElement("div");return e.className="ol-measure-tip",e},iS3.toolbar.MeasureGroup.createMeasureTooltip=function(e){var t=new ol.Overlay({element:e,offset:[0,-15],positioning:"bottom-center"});return iS3Project.getMap().addOverlay(t),t},iS3.toolbar.MeasureGroup.prototype.loadLineStringMeasure=function(){var e=this.layertree,t=new ol.interaction.Draw({type:"LineString",source:e.getDrawingLayer().getSource()}),n=new ol.control.Interaction({label:" ",tipLabel:iS3Project.getConfig().lang.measureLinestringTip,className:"ol-lineString-measure ol-unselectable ol-control",interaction:t});n.id="lineStringMeasure";var o,i,r;return t.on("drawstart",function(e){i=iS3.toolbar.MeasureGroup.createMeasureTooltipElement(),r=iS3.toolbar.MeasureGroup.createMeasureTooltip(i);var t=e.coordinate;o=e.feature.getGeometry().on("change",function(e){var n,o=e.target;o instanceof ol.geom.LineString&&(n=iS3.toolbar.MeasureGroup.formatLength(o),t=o.getLastCoordinate()),i.innerHTML=n,r.setPosition(t)})},this),t.on("drawend",function(){r.setOffset([0,-7]),i=null,i=iS3.toolbar.MeasureGroup.createMeasureTooltipElement(),r=iS3.toolbar.MeasureGroup.createMeasureTooltip(i),ol.Observable.unByKey(o)},this),n.on("change:active",function(){this.get("active")||(e.map.getOverlays().clear(),e.getDrawingLayer().getSource().clear())}),this.add(n),this},iS3.toolbar.MeasureGroup.prototype.loadPolygonMeasure=function(){var e=this.layertree,t=new ol.interaction.Draw({type:"Polygon",source:e.getDrawingLayer().getSource()}),n=new ol.control.Interaction({label:" ",tipLabel:iS3Project.getConfig().lang.measurePolygonTip,className:"ol-polygon-measure ol-unselectable ol-control",interaction:t});n.id="polygonMeasure";var o,i,r;return t.on("drawstart",function(e){i=iS3.toolbar.MeasureGroup.createMeasureTooltipElement(),r=iS3.toolbar.MeasureGroup.createMeasureTooltip(i);var t=e.coordinate;o=e.feature.getGeometry().on("change",function(e){var n,o=e.target;o instanceof ol.geom.Polygon&&(n=iS3.toolbar.MeasureGroup.formatArea(o),t=o.getInteriorPoint().getCoordinates()),i.innerHTML=n,r.setPosition(t)})},this),t.on("drawend",function(){r.setOffset([0,-7]),i=null,i=iS3.toolbar.MeasureGroup.createMeasureTooltipElement(),r=iS3.toolbar.MeasureGroup.createMeasureTooltip(i),ol.Observable.unByKey(o)},this),n.on("change:active",function(){this.get("active")||(e.map.getOverlays().clear(),e.getDrawingLayer().getSource().clear())}),this.add(n),this},iS3.toolbar.Projection=function(e){
var t=this,n=document.createElement("select"),o=document.createElement("option");o.value="EPSG:4326",o.textContent="EPSG:4326",n.appendChild(o);var i=document.createElement("option");i.value="EPSG:3857",i.textContent="EPSG:3857",n.appendChild(i),n.addEventListener("change",function(e){var n=t.getMap().getView(),o=n.getProjection(),i=ol.proj.get(this.value),r=new ol.View({center:ol.proj.transform(n.getCenter(),o,i),zoom:n.getZoom(),projection:i,extent:i.getExtent()});t.getMap().setView(r),t.getMap().getLayers().forEach(function(e){t.changeLayerProjection(e,o,i)})}),ol.control.Control.call(this,{element:n,target:e.target}),this.set("element",n)},ol.inherits(iS3.toolbar.Projection,ol.control.Control),iS3.toolbar.Projection.prototype.setMap=function(e){ol.control.Control.prototype.setMap.call(this,e),null!==e&&(this.get("element").value=e.getView().getProjection().getCode())},iS3.toolbar.Projection.prototype.changeLayerProjection=function(e,t,n){if(e instanceof ol.layer.Group)e.getLayers().forEach(function(e){this.changeLayerProjection(e,t,n)});else if(e instanceof ol.layer.Tile){var o=e.getSource().getTileLoadFunction();e.getSource().setTileLoadFunction(o)}else if(e instanceof ol.layer.Vector)for(var i=e.getSource().getFeatures(),r=0;r<i.length;r+=1)i[r].getGeometry().transform(t,n)},iS3.toolbar.QueryGroup=function(e){iS3.ToolGroup.call(this,e),this.parentObj=e.parentObj,this.layertree=e.parentObj.layertree,this.init()},iS3.inherits(iS3.toolbar.QueryGroup,iS3.ToolGroup),iS3.toolbar.QueryGroup.prototype.init=function(){var e=this.layertree;e.selectEventEmitter.on("change",function(){},this),this.loadClickQuery()},iS3.toolbar.QueryGroup.prototype.loadClickQuery=function(){var e=this,t=new iS3.toolbar.BasicControl({label:" ",tipLabel:iS3Project.getConfig().lang.queryAttributeTip,className:"iS3-clickquery ol-unselectable ol-control",type:"toggle",trigger:function(){e.clickEvent=iS3.toolbar.QueryGroup.clickQueryFunction(e.parentObj)},destroy:function(){e.parentObj.map.unByKey(e.clickEvent)}});return t.id="clickQuery",this.add(t),this},iS3.toolbar.QueryGroup.clickQueryFunction=function(e){var t=e.map,n=e.layertree;return t.on("click",function(o){t.getOverlays().clear(),e.selectInteraction.getFeatures().clear();var i=t.getView().getResolution(),r=n.getLayerById(n.selectedLayer.id),s=t.getView().getProjection(),a=r.getSource().getGetFeatureInfoUrl(o.coordinate,i,s.getCode(),{INFO_FORMAT:"application/json"}),l=new ol.format.GeoJSON,c=new XMLHttpRequest;c.open("GET",a),c.send(),c.onreadystatechange=function(){if(4===c.readyState&&200===c.status){var n=l.readFeatures(c.responseText,{featureProjection:s});if(n.length>0){var i=iS3.toolbar.QueryGroup.createFeatureDiv(e,n[0],"read");t.addOverlay(new ol.Overlay({element:i,position:o.coordinate})),e.selectInteraction.getFeatures().push(n[0])}}}})},iS3.toolbar.QueryGroup.createFeatureDiv=function(e,t,n){function o(){var t=document.createElement("input");return t.type="button",t.className="cancel",t.value=iS3Project.getConfig().lang.cancel,t.addEventListener("click",function(t){t.preventDefault(),a.getOverlays().clear(),e.selectInteraction.getFeatures().clear()}),t}function i(){var n=document.createElement("input");return n.type="button",n.className="edit",n.value=iS3Project.getConfig().lang.edit,n.addEventListener("click",function(n){n.preventDefault();var o=a.getOverlays().getArray()[0].getPosition();a.getOverlays().clear(),a.addOverlay(new ol.Overlay({element:iS3.toolbar.QueryGroup.createFeatureDiv(e,t,"edit"),position:o}))}),n}function r(){var n=document.createElement("input");return n.type="button",n.className="save",n.value=iS3Project.getConfig().lang.save,n.addEventListener("click",function(n){n.preventDefault();var o=a.getOverlays().getArray()[0].getPosition();a.getOverlays().clear(),a.addOverlay(new ol.Overlay({element:iS3.toolbar.QueryGroup.createFeatureDiv(e,t,"read"),position:o}))}),n}function s(){var n=document.createElement("input");return n.type="button",n.className="delete",n.value=iS3Project.getConfig().lang.delete,n.addEventListener("click",function(n){n.preventDefault(),a.getOverlays().clear(),e.selectInteraction.getFeatures().clear(),iS3.geoRequest.transactWFS(l,[t],"delete")}),n}var a=e.map,l=(e.layertree.getLayerById(e.layertree.selectedLayer.id),e.layertree.getLayerDefById(e.layertree.selectedLayer.id)),c=document.createElement("div");return c.className="iS3-feature-popup",c.appendChild(iS3.toolbar.QueryGroup.featureToForm(t,n)),"read"===n&&(c.appendChild(i()),c.appendChild(o())),"edit"===n&&(c.appendChild(r()),c.appendChild(s())),c},iS3.toolbar.QueryGroup.featureToForm=function(e,t){function n(e,t,n){var o=document.createElement("div"),i=document.createElement("span");i.textContent=e+": ",o.appendChild(i);var r=document.createElement("input");return r.name=e,r.type="text",r.value=t,o.appendChild(r),n||(r.readOnly="readonly"),o}var o=document.createElement("form");o.className="iS3-feature-form";var i=e.getProperties();for(var r in i)"read"===t?o.appendChild(n(r,i[r],!1)):"edit"===t&&o.appendChild(n(r,i[r],!0));return o},iS3.toolbar.SelectGroup=function(e){iS3.ToolGroup.call(this,e),this.parentObj=e.parentObj,this.layertree=e.parentObj.layertree,this.init()},iS3.inherits(iS3.toolbar.SelectGroup,iS3.ToolGroup),iS3.toolbar.SelectGroup.prototype.init=function(){var e=this.layertree;this.selectInteraction=new ol.interaction.Select({style:iS3.style.getDefaultSelected(),layers:function(t){return!(!e.selectedLayer||t!==e.getLayerById(e.selectedLayer.id))},wrapX:!1}),this.parentObj.map.addInteraction(this.selectInteraction),this.selectInteraction.setActive(!1),this.parentObj.selectInteraction=this.selectInteraction,e.selectEventEmitter.on("change",function(){var t=e.getLayerById(e.selectedLayer.id);t instanceof ol.layer.Vector?this.getTools()[0].setDisabled(!1):(this.getTools()[0].set("active",!1),this.getTools()[0].setDisabled(!0))},this),this.loadSingleSelect().loadBoxSelect().loadPolygonSelect().loadDeselect()},iS3.toolbar.SelectGroup.prototype.loadSingleSelect=function(){var e=new ol.control.Interaction({label:" ",tipLabel:iS3Project.getConfig().lang.clickSelectTip,className:"ol-singleselect ol-unselectable ol-control",interaction:this.selectInteraction}).setDisabled(!0);return e.id="singleSelect",this.add(e),this},iS3.toolbar.SelectGroup.prototype.loadBoxSelect=function(){var e=this.layertree,t=this,n=new ol.interaction.DragBox,o=new ol.control.Interaction({label:" ",tipLabel:iS3Project.getConfig().lang.boxSelectTip,className:"ol-multiselect ol-unselectable ol-control",interaction:n});return o.id="boxSelect",n.on("boxend",function(o){t.selectInteraction.getFeatures().clear();var i=n.getGeometry().getExtent();if(this.layertree.selectedLayer){var r=e.getLayerById(e.selectedLayer.id).getSource();if(r instanceof ol.source.Vector)r.forEachFeatureIntersectingExtent(i,function(e){(void 0===e.get("selectable")||e.get("selectable"))&&t.selectInteraction.getFeatures().push(e)}),e.getLayerById(e.selectedLayer.id).changed(),e.message.textContent=t.selectInteraction.getFeatures().getLength()+" selected";else if(r instanceof ol.source.Tile){var s=e.getLayerDefById(e.selectedLayer.id);iS3.geoRequest.bboxFeaturesFromTile(s,i,function(o){for(var i=0;i<o.length;i++){var r=n.getGeometry();iS3.topology.polyIntersectsPoly(r,o[i].getGeometry())===!0&&t.selectInteraction.getFeatures().push(o[i])}e.message.textContent=o.length+" selected"})}}},this),this.add(o),this},iS3.toolbar.SelectGroup.prototype.loadPolygonSelect=function(){var e=this.layertree,t=this,n=new ol.interaction.Draw({type:"Polygon",snapTolerance:1}),o=new ol.control.Interaction({label:" ",tipLabel:iS3Project.getConfig().lang.polygonSelectTip,className:"ol-polygonselect ol-unselectable ol-control",interaction:n});return o.id="polygonSelect",n.on("drawend",function(n){if(t.selectInteraction.getFeatures().clear(),e.selectedLayer){var o=n.feature.getGeometry().getExtent(),i=n.feature.getGeometry(),r=e.getLayerById(e.selectedLayer.id).getSource();if(r instanceof ol.source.Vector)r.forEachFeatureInExtent(o,function(e){iS3.topology.polyIntersectsPoly(i,e.getGeometry())===!0&&(void 0===e.get("selectable")||e.get("selectable"))&&t.selectInteraction.getFeatures().push(e)}),e.getLayerById(e.selectedLayer.id).changed(),e.message.textContent=t.selectInteraction.getFeatures().getLength()+" selected";else if(r instanceof ol.source.Tile){var s=e.getLayerDefById(e.selectedLayer.id);iS3.geoRequest.polygonFeaturesFromTile(s,i).done(function(n){for(var o=0;o<n.length;o++)t.selectInteraction.getFeatures().push(n[o]);e.message.textContent=n.length+" selected"})}}},this),this.add(o),this},iS3.toolbar.SelectGroup.prototype.loadDeselect=function(){var e=this,t=new iS3.toolbar.BasicControl({label:" ",tipLabel:iS3Project.getConfig().lang.removeSelectionTip,className:"ol-deselect ol-unselectable ol-control",trigger:function(){e.selectInteraction.getFeatures().clear()}});return t.id="deselect",this.add(t),this},iS3.toolbar.TestGroup=function(e){iS3.ToolGroup.call(this,e),this.parentObj=e.parentObj,this.layertree=e.parentObj.layertree,this.init()},iS3.inherits(iS3.toolbar.TestGroup,iS3.ToolGroup),iS3.toolbar.TestGroup.prototype.init=function(){this.layertree;this.loadTest()},iS3.toolbar.TestGroup.prototype.loadTest=function(){var e=this,t=new iS3.toolbar.BasicControl({label:"T",tipLabel:"Test",className:"iS3-test ol-unselectable ol-control",trigger:function(){e.test(e.layertree)}});return t.id="test",this.add(t),this},iS3.toolbar.TestGroup.prototype.test=function(e){var t=e.getLayerById(e.selectedLayer.id),n=t.getSource().getFeatures(),o=new iS3.format.PanotimeB,i=(o.toJson(n),iS3Project.getToolbar());console.log(i.selectInteraction.getFeatures().getArray()["PANOTIME201507216I_Btest.1"])},iS3.toolbar.ZoomGroup=function(e){iS3.ToolGroup.call(this,e),this.parentObj=e.parentObj,this.layertree=e.parentObj.layertree,this.init()},iS3.inherits(iS3.toolbar.ZoomGroup,iS3.ToolGroup),iS3.toolbar.ZoomGroup.prototype.init=function(){this.layertree;this.loadDragPan().loadZoomFull().loadZoomToLayer().loadZoomToSelected()},iS3.toolbar.ZoomGroup.prototype.loadDragPan=function(){var e=new ol.control.Interaction({label:" ",tipLabel:iS3Project.getConfig().lang.addPointsTip,className:"ol-dragpan ol-unselectable ol-control",interaction:new ol.interaction.DragPan,alive:!0});return e.id="dragPan",this.add(e),this},iS3.toolbar.ZoomGroup.prototype.loadZoomFull=function(){var e=new ol.control.ZoomToExtent({label:" ",tipLabel:iS3Project.getConfig().lang.zoomToFullTip});return e.id="zoomFull",this.add(e),this},iS3.toolbar.ZoomGroup.prototype.loadZoomToLayer=function(){var e=this.layertree,t=this,n=null,o=new iS3.toolbar.BasicControl({label:" ",tipLabel:iS3Project.getConfig().lang.zoomToLayerTip,className:"ol-zoom-layer ol-unselectable ol-control",trigger:function(){if(!e.selectedLayer)return t.parentObj.message.textContent="Please select a layer",null;var o=e.getLayerById(e.selectedLayer.id);if(o instanceof ol.layer.Tile){var i=e.getLayerDefById(e.selectedLayer.id);$.get(iS3Project.getConfig().proxy+"/index.php/v1/extents?layername="+i.featureType).done(function(t){var o=[],i=JSON.parse(t);o.push(i.data.minx),o.push(i.data.miny),o.push(i.data.maxx),o.push(i.data.maxy),n=ol.proj.transformExtent(o,ol.proj.get("EPSG:4326"),e.map.getView().getProjection()),(n instanceof ol.geom.SimpleGeometry||"[object Array]"===Object.prototype.toString.call(n)&&4===n.length)&&e.map.getView().fit(n,e.map.getSize())})}else if(o instanceof ol.layer.Vector){var r=o.getSource();r.getExtent()&&(n=r.getExtent())}(n instanceof ol.geom.SimpleGeometry||"[object Array]"===Object.prototype.toString.call(n)&&4===n.length)&&e.map.getView().fit(n,e.map.getSize())}});return o.id="zoomToLayer",this.add(o),this},iS3.toolbar.ZoomGroup.prototype.loadZoomToSelected=function(){var e=this,t=this.layertree,n=ol.extent.createEmpty(),o=new iS3.toolbar.BasicControl({label:" ",tipLabel:iS3Project.getConfig().lang.zoomToSelectedTip,className:"ol-zoom-selected ol-unselectable ol-control",trigger:function(){if(0===e.parentObj.selectInteraction.getFeatures().getArray().length)return e.parentObj.message.textContent="Please select a layer",null;for(var o=e.parentObj.selectInteraction.getFeatures(),i=0;i<o.getLength();i++){var r=o.item(i).getGeometry();r instanceof ol.geom.SimpleGeometry&&(n=ol.extent.extend(n,r.getExtent()))}(n instanceof ol.geom.SimpleGeometry||"[object Array]"===Object.prototype.toString.call(n)&&4===n.length)&&t.map.getView().fit(n,t.map.getSize())}});return o.id="zoomToSelected",this.add(o),this},iS3.format=function(e){},iS3.format.PanotimeB=function(e){this.name=e?e.name:null,this.headers=[{name:"captureid",type:"string"},{name:"date",type:"string"},{name:"time",type:"string"},{name:"flag",type:"string"},{name:"xxx",type:"number",fixed:9},{name:"yyy",type:"number",fixed:9},{name:"nexxx",type:"number",fixed:9},{name:"northdeg",type:"number",fixed:9},{name:"speed",type:"number",fixed:2},{name:"kydate_id",type:"string"},{name:"x",type:"number",fixed:0},{name:"y",type:"number",fixed:0},{name:"z",type:"number",fixed:3},{name:"h_ell",type:"number",fixed:3},{name:"vnorth",type:"number",fixed:3},{name:"veast",type:"number",fixed:3},{name:"vup",type:"number",fixed:3},{name:"pitch",type:"number",fixed:3},{name:"roll",type:"number",fixed:3},{name:"q",type:"number",fixed:0},{name:"gpstime",type:"string"},{name:"scale",type:"number",fixed:3},{name:"s_f",type:"number",fixed:3},{name:"viewtype",type:"number",fixed:0},{name:"dis",type:"string"},{name:"dis_time",type:"string"},{name:"av",type:"string"},{name:"tv",type:"string"},{name:"iso",type:"string"},{name:"wb",type:"string"}]},iS3.format.PanotimeB.prototype.readFeatures=function(e,t){for(var n=this.headers,o=e.split(/[\r\n]+/g),i=[],r=this.name.substr(0,this.name.lastIndexOf(".")),s=1;s<o.length;s++)if(""!==o[s]&&"#"!==o[s].substring(0,1)&&" "!==o[s].substring(0,1)){var a=o[s].replace("//","").replace(/]\//g,"] ").replace(/,/g," ").split(" "),l=r+"."+s,c=new ol.geom.Point([parseFloat(a[4]),parseFloat(a[5])]),u=new ol.Feature;u.setId(l),u.setGeometryName("wkb_geometry"),u.setGeometry(c),u.getGeometry().transform(t.dataProjection,t.featureProjection);for(var d=0;d<a.length;d++)"string"===n[d].type?u.set(n[d].name,a[d]):u.set(n[d].name,parseFloat(a[d]));u.set("status",0),i.push(u)}return i},iS3.format.PanotimeB.prototype.writeFeatures=function(e,t){function n(e,t){return parseInt(e.get("captureid"),10)-parseInt(t.get("captureid"),10)}e.sort(n);var o=this.headers,i=[];i.push("#captureID,date,time,flag,xxx,yyy,NExxx,northDeg,Speed,kydate_id,x,y,z,H-Ell,VNorth,VEast,VUp,Pitch,Roll,Q,gpstime,scale,s-f,viewtype//dis,time,Av,Tv,ISO,WB");for(var r=0;r<e.length;r++)if(0===e[r].get("status")){for(var s=[],a=0;a<4;a++)"string"===o[a].type?s.push(e[r].get(o[a].name)):s.push(e[r].get(o[a].name).toFixed(o[a].fixed));for(s.push(e[r].get(o[4].name)),s.push(e[r].get(o[5].name)),a=6;a<8;a++)"string"===o[a].type?s.push(e[r].get(o[a].name)):s.push(e[r].get(o[a].name).toFixed(o[a].fixed));var l=e[r].get(o[8].name).toFixed(2).toString();for(s.push(("00000"+l).substr(-5)),a=9;a<24;a++)"string"===o[a].type?s.push(e[r].get(o[a].name)):s.push(e[r].get(o[a].name).toFixed(o[a].fixed));var c=["//",e[r].get(o[24].name),"/",e[r].get(o[25].name),"/",e[r].get(o[26].name),",",e[r].get(o[27].name),",",e[r].get(o[28].name),",",e[r].get(o[29].name)];s.push(c.join("")),i.push(s.join(" "))}return i.join("\r\n")},iS3.format.PanotimeB.prototype.toJson=function(e,t){for(var n=[],o=this.headers,i="status",r="carday_series",s="keydate",a=0;a<e.length;a++){for(var l={},c=0;c<o.length;c++)l[o[c].name]=e[a].get(o[c].name);e[a].get(r)?l[r]=e[a].get(r):l[r]=0,e[a].get(i)?l[i]=e[a].get(i):l[i]=0,e[a].get(s)?l[s]=e[a].get(s):l[s]=e[a].get("kydate_id").split("_")[0].toLowerCase(),n.push(l)}return JSON.stringify(n)},iS3.format.PanotimeB.prototype.readProjection=function(e){return ol.proj.get("EPSG:4326")},iS3.format.Shapefile=function(e){},iS3.format.Shapefile.prototype.readFeatures=function(e,t,n){iS3.geoRequest.shapeToGeojson(e,t,function(e){var o=new ol.format.GeoJSON,i=o.readFeatures(e,{dataProjection:t.targetSrs,featureProjection:t.targetSrs});n(i)})},iS3.format.Shapefile.prototype.writeFeatures=function(e,t){var n=new ol.format.GeoJSON;iS3.geoRequest.geojsonToShp(n.writeFeatures(e),"output",t)},iS3.LangCN=function(){this.cancel="",this.save="",this.delete="",this.edit="",this.close="",this.add="",this.type="",this.apply="",this.submit="",this.reset="",this.filter="",this.carDay="",this.auto="",this.markSelected="",this.targetLayer="",this.inputFile="",this.outputFile="",this.export="",this.addwmsTitle="",this.addwfsTitle="",this.newlayerTitle="",this.addInputTitle="",this.outputLayerTitle="",this.removeLayerTitle="",this.serverURL="URL",this.checkForLayers="",this.layerName="",this.addLayer="",this.format="",this.displayName="",this.qualifiedPoints="",this.pictureDeletedPoints="",this.isolatedDeletedPoints="",this.repeatedDeletedPoints="",this.linkDeletedPoints="Link",this.allPanopoints="",this.zoomGroupName="",this.selectGroupName="",this.drawGroupName="",this.measureGroupName="",this.queryGroupName="",this.customGroupName="",this.zoomToFullTip="",this.zoomToLayerTip="",this.zoomToSelectedTip="",this.clickSelectTip="",this.boxSelectTip="",this.polygonSelectTip="",this.removeSelectionTip="",this.addPointsTip="",this.addLinesTip="",this.addPolygonsTip="",this.removeFeaturesTip="",this.dragFeaturesTip="",this.measureLinestringTip="",this.measurePolygonTip="",this.queryAttributeTip="",this.gisQualifiedTip="GIS ctrl+q "},iS3.LangEN=function(){this.cancel="Cancel",this.save="Save",this.delete="Delete",this.edit="Edit",this.close="Close",this.add="Add",this.type="Type",this.apply="Appply",this.submit="Submit",this.reset="Reset",this.filter="Filter",this.carDay="Car day",this.auto="Auto",this.markSelected="Mark selected",this.targetLayer="Target layer",this.inputFile="Input file",this.outputFile="Output file",this.export="Export",this.addwmsTitle="Add WMS Layer",this.addwfsTitle="Add WFS Layer",this.newlayerTitle="Add Empty Layer",this.addInputTitle="Input Layer",this.outputLayerTitle="Export Layer",this.removeLayerTitle="Remove Layer",this.serverURL="Server URL",this.checkForLayers="Check for layers",this.layerName="Layer name",this.addLayer="Add layer",this.format="Format",this.displayName="Display name",this.qualifiedPoints="Qualified points",this.pictureDeletedPoints="Picture deleted points",this.isolatedDeletedPoints="Isolated deleted points",this.repeatedDeletedPoints="Repeated deleted points",this.linkDeletedPoints="Link deleted points",this.allPanopoints="All the panopoints",this.zoomGroupName="Zoom",this.selectGroupName="Select",this.drawGroupName="Draw",this.measureGroupName="Measure",this.queryGroupName="Query",this.customGroupName="Custom",this.zoomToFullTip="Zoom to full extent",this.zoomToLayerTip="Zoom to layer extent",this.zoomToSelectedTip="Zoom to selected feature",this.clickSelectTip="Select feature",this.boxSelectTip="Select features with a box",this.polygonSelectTip="Select features with a polygon",this.removeSelectionTip="Remove selection(s)",this.addPointsTip="Add points",this.addLinesTip="Add lines",this.addPolygonsTip="Add polygons",this.removeFeaturesTip="Remove features",this.dragFeaturesTip="Drag features",this.measureLinestringTip="Measure with a line string",this.measurePolygonTip="Measure with a polygon",this.queryAttributeTip="Query attribute",this.gisQualifiedTip="GIS quality testing"},iS3.DraggableDiv=function(e){function t(){window.removeEventListener("mousemove",o,!0)}function n(e){c.x=e.clientX-i.offsetLeft,c.y=e.clientY-i.offsetTop,window.addEventListener("mousemove",o,!0)}function o(e){i.style.position="absolute";var t=e.clientY-c.y,n=e.clientX-c.x;i.style.top=t+"px",i.style.left=n+"px"}this.id=e.id,this.title=e.title,this.width=e.width?e.width:.3*document.body.clientWidth,this.height=e.height?e.height:.3*document.body.clientHeight,this.left=document.body.clientWidth?(document.body.clientWidth-this.width)/2:0,this.top=document.body.clientHeight?(document.body.clientHeight-this.height)/2:0;var i=document.createElement("div");i.setAttribute("id",this.id),i.setAttribute("class","draggable-div");var r=document.createElement("div");r.setAttribute("class","draggable-bar"),r.appendChild(document.createTextNode(this.title));var s=document.createElement("span");s.setAttribute("class","draggable-close"),s.appendChild(document.createTextNode("[X]")),r.appendChild(s),i.appendChild(r);var a=document.createElement("div");a.setAttribute("class","draggable-content"),i.appendChild(a);var l=this;s.onclick=function(e){l.close()};var c={x:0,y:0};r.addEventListener("mousedown",n,!1),window.addEventListener("mouseup",t,!1),i.style.width="auto",i.style.height="auto",i.style.left=this.left+"px",i.style.top=this.top+"px",i.style.display="none",document.body.appendChild(i),this._container=i,this.content=a},iS3.DraggableDiv.prototype.getContent=function(){return this.content},iS3.DraggableDiv.prototype.isVisible=function(){return"block"===this._container.style.display},iS3.DraggableDiv.prototype.show=function(){this._container.style.display="block"},iS3.DraggableDiv.prototype.close=function(){this._container.style.display="none"};